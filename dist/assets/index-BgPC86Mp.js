var br=Object.defineProperty;var _r=(l,e,t)=>e in l?br(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var ln=(l,e,t)=>_r(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=t(o);fetch(o.href,r)}})();function de(){}function io(l){return l()}function kn(){return Object.create(null)}function ft(l){l.forEach(io)}function al(l){return typeof l=="function"}function Il(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let jl;function wn(l,e){return l===e?!0:(jl||(jl=document.createElement("a")),jl.href=e,l===jl.href)}function kr(l){return Object.keys(l).length===0}function so(l,...e){if(l==null){for(const n of e)n(void 0);return de}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Kt(l){let e;return so(l,t=>e=t)(),e}function ao(l,e,t){l.$$.on_destroy.push(so(e,t))}const wr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function f(l,e){l.appendChild(e)}function G(l,e,t){l.insertBefore(e,t||null)}function D(l){l.parentNode&&l.parentNode.removeChild(l)}function nn(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function m(l){return document.createElement(l)}function Et(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function ne(l){return document.createTextNode(l)}function T(){return ne(" ")}function Lt(){return ne("")}function ee(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function yn(l){return function(e){return e.preventDefault(),l.call(this,e)}}function yr(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function i(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Ir(l){return Array.from(l.childNodes)}function _e(l,e){e=""+e,l.data!==e&&(l.data=e)}function Dl(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function _t(l,e,t){l.classList.toggle(e,!!t)}let yl;function wl(l){yl=l}function Sr(){if(!yl)throw new Error("Function called outside component initialization");return yl}function Cr(l){Sr().$$.on_mount.push(l)}function vr(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const sl=[],zt=[];let cl=[];const In=[],co=Promise.resolve();let an=!1;function uo(){an||(an=!0,co.then(fo))}function cn(){return uo(),co}function dn(l){cl.push(l)}const on=new Set;let ll=0;function fo(){if(ll!==0)return;const l=yl;do{try{for(;ll<sl.length;){const e=sl[ll];ll++,wl(e),Fr(e.$$)}}catch(e){throw sl.length=0,ll=0,e}for(wl(null),sl.length=0,ll=0;zt.length;)zt.pop()();for(let e=0;e<cl.length;e+=1){const t=cl[e];on.has(t)||(on.add(t),t())}cl.length=0}while(sl.length);for(;In.length;)In.pop()();an=!1,on.clear(),wl(l)}function Fr(l){if(l.fragment!==null){l.update(),ft(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(dn)}}function Br(l){const e=[],t=[];cl.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),cl=e}const Ol=new Set;let Jt;function st(){Jt={r:0,c:[],p:Jt}}function at(){Jt.r||ft(Jt.c),Jt=Jt.p}function se(l,e){l&&l.i&&(Ol.delete(l),l.i(e))}function fe(l,e,t,n){if(l&&l.o){if(Ol.has(l))return;Ol.add(l),Jt.c.push(()=>{Ol.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}function Ce(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ho(l,e){l.d(1),e.delete(l.key)}function Sl(l,e){fe(l,1,1,()=>{e.delete(l.key)})}function Yt(l,e,t,n,o,r,s,c,d,u,h,b){let _=l.length,w=r.length,F=_;const O={};for(;F--;)O[l[F].key]=F;const I=[],j=new Map,H=new Map,B=[];for(F=w;F--;){const L=b(o,r,F),C=t(L);let V=s.get(C);V?B.push(()=>V.p(L,e)):(V=u(C,L),V.c()),j.set(C,I[F]=V),C in O&&H.set(C,Math.abs(F-O[C]))}const R=new Set,x=new Set;function U(L){se(L,1),L.m(c,h),s.set(L.key,L),h=L.first,w--}for(;_&&w;){const L=I[w-1],C=l[_-1],V=L.key,q=C.key;L===C?(h=L.first,_--,w--):j.has(q)?!s.has(V)||R.has(V)?U(L):x.has(q)?_--:H.get(V)>H.get(q)?(x.add(V),U(L)):(R.add(q),_--):(d(C,s),_--)}for(;_--;){const L=l[_];j.has(L.key)||d(L,s)}for(;w;)U(I[w-1]);return ft(B),I}function Cl(l){l&&l.c()}function dl(l,e,t){const{fragment:n,after_update:o}=l.$$;n&&n.m(e,t),dn(()=>{const r=l.$$.on_mount.map(io).filter(al);l.$$.on_destroy?l.$$.on_destroy.push(...r):ft(r),l.$$.on_mount=[]}),o.forEach(dn)}function ul(l,e){const t=l.$$;t.fragment!==null&&(Br(t.after_update),ft(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Er(l,e){l.$$.dirty[0]===-1&&(sl.push(l),uo(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function Wl(l,e,t,n,o,r,s=null,c=[-1]){const d=yl;wl(l);const u=l.$$={fragment:null,ctx:[],props:r,update:de,not_equal:o,bound:kn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:kn(),dirty:c,skip_bound:!1,root:e.target||d.$$.root};s&&s(u.root);let h=!1;if(u.ctx=t?t(l,e.props||{},(b,_,...w)=>{const F=w.length?w[0]:_;return u.ctx&&o(u.ctx[b],u.ctx[b]=F)&&(!u.skip_bound&&u.bound[b]&&u.bound[b](F),h&&Er(l,b)),_}):[],u.update(),h=!0,ft(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const b=Ir(e.target);u.fragment&&u.fragment.l(b),b.forEach(D)}else u.fragment&&u.fragment.c();e.intro&&se(l.$$.fragment),dl(l,e.target,e.anchor),fo()}wl(d)}class Vl{constructor(){ln(this,"$$");ln(this,"$$set")}$destroy(){ul(this,1),this.$destroy=de}$on(e,t){if(!al(t))return de;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const o=n.indexOf(t);o!==-1&&n.splice(o,1)}}$set(e){this.$$set&&!kr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Lr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Lr);const nl=[];function Pr(l,e=de){let t;const n=new Set;function o(c){if(Il(l,c)&&(l=c,t)){const d=!nl.length;for(const u of n)u[1](),nl.push(u,l);if(d){for(let u=0;u<nl.length;u+=2)nl[u][0](nl[u+1]);nl.length=0}}}function r(c){o(c(l))}function s(c,d=de){const u=[c,d];return n.add(u),n.size===1&&(t=e(o,r)||de),c(l),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:o,update:r,subscribe:s}}const Tr={nodesById:{},rootIds:[]},Ye=Pr(Tr),go={subscribe:Ye.subscribe};function ql(l,{includeChildren:e=!1}={}){const t=Array.isArray(l.children),n=t?[...l.children]:[],o=e?n.sort((c,d)=>(c.index??0)-(d.index??0)):[],s=n.filter(c=>!c.url).length>0;return{id:l.id,parentId:l.parentId??null,title:l.title??"",url:l.url??null,index:typeof l.index=="number"?l.index:0,isFolder:!l.url,childrenIds:e?o.map(c=>c.id):[],childrenLoaded:e,hasChildren:!l.url&&(e||t?s:!0)}}function un(l){Ye.update(e=>{const t={...e.nodesById};let n=[...e.rootIds];for(const o of l){const r=t[o.id];t[o.id]=r?{...r,...o}:o,!o.parentId&&!n.includes(o.id)&&n.push(o.id)}return n.sort((o,r)=>{const s=t[o],c=t[r];return((s==null?void 0:s.index)??0)-((c==null?void 0:c.index)??0)}),{...e,nodesById:t,rootIds:n}})}function Rl(l,e,t){Ye.update(n=>{const o={...n.nodesById},r=o[l];if(!r)return n;const s=Array.from(new Set(e));s.sort((d,u)=>{const h=o[d],b=o[u];return((h==null?void 0:h.index)??0)-((b==null?void 0:b.index)??0)});const c=s.some(d=>{var u;return(u=o[d])==null?void 0:u.isFolder});return o[l]={...r,childrenIds:s,childrenLoaded:t?!0:r.childrenLoaded,hasChildren:c},{...n,nodesById:o}})}async function Mr(l){const e=await l.bookmarks.getTree(),t=Array.isArray(e)?e[0]:null,o=((t==null?void 0:t.children)??[]).map(r=>ql(r,{includeChildren:!1}));return Ye.set({nodesById:Object.fromEntries(o.map(r=>[r.id,r])),rootIds:o.map(r=>r.id)}),o.map(r=>r.id)}function Bt(){return Kt(Ye)}function po(l){return Kt(Ye).nodesById[l]}async function Ar(l,e){var c;const t=Kt(Ye),n=t.nodesById[e];if(!n||!n.isFolder||n.childrenLoaded)return((c=n==null?void 0:n.childrenIds)==null?void 0:c.map(d=>t.nodesById[d]).filter(Boolean))??[];const s=[...await l.bookmarks.getChildren(e)].sort((d,u)=>(d.index??0)-(u.index??0)).map(d=>ql(d,{includeChildren:!1}));return un(s),Rl(e,s.map(d=>d.id),!0),s}async function ol(l,e){const t=await l.bookmarks.getSubTree(e),n=Array.isArray(t)?t[0]:null;if(!n)return{folderIds:[]};const o=[n],r=[],s=[];for(;o.length;){const c=o.shift(),d=Array.isArray(c.children),u=ql(c,{includeChildren:d});r.push(u),c.url||s.push(c.id),d&&o.push(...c.children)}return un(r),r.forEach(c=>{if(c.isFolder&&Rl(c.id,c.childrenIds,!0),c.parentId){const u=Kt(Ye).nodesById[c.parentId];if(u){const h=u.childrenIds?[...u.childrenIds]:[];h.push(c.id),Rl(c.parentId,h,u.childrenLoaded)}}}),{folderIds:s}}function zl(l){const e=Kt(Ye),t=[];let n=e.nodesById[l];for(;n&&(n.title&&t.unshift(n.title),!!n.parentId);)n=e.nodesById[n.parentId];return t}function jr(l){const e=ql(l,{includeChildren:!1});if(un([e]),e.parentId){const t=po(e.parentId),n=t!=null&&t.childrenIds?[...t.childrenIds]:[];n.splice(e.index??n.length,0,e.id),Rl(e.parentId,n,t==null?void 0:t.childrenLoaded)}}function Hr(l,e){Ye.update(t=>{const n=t.nodesById[l];if(!n)return t;const o={...t.nodesById,[l]:{...n,...e}};return{...t,nodesById:o}})}function Nr(l,{parentId:e,oldParentId:t,index:n}){Ye.update(o=>{const r={...o.nodesById},s=r[l];if(!s)return o;const c={...s,parentId:e,index:typeof n=="number"?n:s.index};if(r[l]=c,t&&r[t]){const d=r[t],u=(d.childrenIds??[]).filter(b=>b!==l),h=u.some(b=>{var _;return(_=r[b])==null?void 0:_.isFolder});r[t]={...d,childrenIds:u,hasChildren:h}}if(e&&r[e]){const d=r[e],u=[...d.childrenIds??[]];u.includes(l)||u.splice(n??u.length,0,l);const h=u.some(b=>{var _;return(_=r[b])==null?void 0:_.isFolder});r[e]={...d,childrenIds:u,hasChildren:h}}return{...o,nodesById:r}})}function Or(l,{parentId:e}){Ye.update(t=>{var c;const n={...t.nodesById},o=new Set([l]),r=[l];for(;r.length;){const d=r.pop(),u=n[d];u&&(c=u.childrenIds)!=null&&c.length&&u.childrenIds.forEach(h=>{o.has(h)||(o.add(h),r.push(h))})}o.forEach(d=>{delete n[d]});let s=t.rootIds;if(s.includes(l)&&(s=s.filter(d=>d!==l)),e&&n[e]){const d=n[e],u=(d.childrenIds??[]).filter(b=>b!==l),h=u.some(b=>{var _;return(_=n[b])==null?void 0:_.isFolder});n[e]={...d,childrenIds:u,hasChildren:h}}return{...t,nodesById:n,rootIds:s}})}function Hl(l){var o;const e=Kt(Ye),t=[],n=[l];for(;n.length;){const r=n.pop(),s=e.nodesById[r];s&&s.isFolder&&(t.push(r),(o=s.childrenIds)!=null&&o.length&&s.childrenIds.forEach(c=>{const d=e.nodesById[c];d!=null&&d.isFolder&&n.push(c)}))}return t}function zr(){const l=Kt(Ye);return Object.values(l.nodesById).filter(e=>e.isFolder).map(e=>({id:e.id,title:e.title??"",path:zl(e.id)}))}function Sn(l,e,t){const n=l.slice();return n[25]=e[t],n}function Cn(l){let e,t,n,o,r,s,c,d,u,h,b,_,w,F=(l[11].title||"Untitled folder")+"",O,I,j,H,B,R,x,U=l[10]&&l[15]&&vn(l);return{c(){var L;e=m("li"),t=m("div"),n=m("button"),o=Et("svg"),r=Et("path"),u=T(),h=m("label"),b=m("input"),_=T(),w=m("span"),O=ne(F),j=T(),U&&U.c(),i(r,"d","M6 4.5 10 8l-4 3.5"),i(r,"fill","none"),i(r,"stroke","currentColor"),i(r,"stroke-width","1.6"),i(r,"stroke-linecap","round"),i(r,"stroke-linejoin","round"),i(o,"viewBox","0 0 16 16"),i(o,"aria-hidden","true"),i(o,"focusable","false"),i(n,"type","button"),i(n,"class","folder-node__expander svelte-11g8b9y"),i(n,"aria-hidden",s=!l[10]),i(n,"aria-label",c=l[15]?"Collapse folder":"Expand folder"),n.disabled=d=!l[10],_t(n,"hidden",!l[10]),i(b,"type","checkbox"),i(b,"class","folder-node__checkbox svelte-11g8b9y"),i(w,"class","folder-node__title svelte-11g8b9y"),i(w,"title",I=l[11].title||"Untitled folder"),i(h,"class","folder-node__label svelte-11g8b9y"),i(t,"class","folder-node__row svelte-11g8b9y"),i(t,"style",l[16]),i(e,"class","folder-node svelte-11g8b9y"),i(e,"data-expanded",l[15]),i(e,"data-depth",l[1]),i(e,"data-match",H=((L=l[5])==null?void 0:L.has(l[0]))??!1)},m(L,C){G(L,e,C),f(e,t),f(t,n),f(n,o),f(o,r),f(t,u),f(t,h),f(h,b),l[24](b),f(h,_),f(h,w),f(w,O),f(e,j),U&&U.m(e,null),B=!0,R||(x=[ee(n,"click",l[17]),ee(b,"change",l[18])],R=!0)},p(L,C){var V;(!B||C&1024&&s!==(s=!L[10]))&&i(n,"aria-hidden",s),(!B||C&32768&&c!==(c=L[15]?"Collapse folder":"Expand folder"))&&i(n,"aria-label",c),(!B||C&1024&&d!==(d=!L[10]))&&(n.disabled=d),(!B||C&1024)&&_t(n,"hidden",!L[10]),(!B||C&2048)&&F!==(F=(L[11].title||"Untitled folder")+"")&&_e(O,F),(!B||C&2048&&I!==(I=L[11].title||"Untitled folder"))&&i(w,"title",I),L[10]&&L[15]?U?(U.p(L,C),C&33792&&se(U,1)):(U=vn(L),U.c(),se(U,1),U.m(e,null)):U&&(st(),fe(U,1,1,()=>{U=null}),at()),(!B||C&32768)&&i(e,"data-expanded",L[15]),(!B||C&2)&&i(e,"data-depth",L[1]),(!B||C&33&&H!==(H=((V=L[5])==null?void 0:V.has(L[0]))??!1))&&i(e,"data-match",H)},i(L){B||(se(U),B=!0)},o(L){fe(U),B=!1},d(L){L&&D(e),l[24](null),U&&U.d(),R=!1,ft(x)}}}function vn(l){let e,t,n,o;const r=[Ur,Rr,Dr],s=[];function c(d,u){return d[14]?0:d[12].length?1:2}return t=c(l),n=s[t]=r[t](l),{c(){e=m("ul"),n.c(),i(e,"class","folder-node__children svelte-11g8b9y")},m(d,u){G(d,e,u),s[t].m(e,null),o=!0},p(d,u){let h=t;t=c(d),t===h?s[t].p(d,u):(st(),fe(s[h],1,1,()=>{s[h]=null}),at(),n=s[t],n?n.p(d,u):(n=s[t]=r[t](d),n.c()),se(n,1),n.m(e,null))},i(d){o||(se(n),o=!0)},o(d){fe(n),o=!1},d(d){d&&D(e),s[t].d()}}}function Dr(l){let e;return{c(){e=m("li"),e.textContent="No subfolders",i(e,"class","folder-node__status svelte-11g8b9y")},m(t,n){G(t,e,n)},p:de,i:de,o:de,d(t){t&&D(e)}}}function Rr(l){let e=[],t=new Map,n,o,r=Ce(l[12]);const s=c=>c[25];for(let c=0;c<r.length;c+=1){let d=Sn(l,r,c),u=s(d);t.set(u,e[c]=Fn(u,d))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=Lt()},m(c,d){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(c,d);G(c,n,d),o=!0},p(c,d){d&4606&&(r=Ce(c[12]),st(),e=Yt(e,d,s,1,c,r,t,n.parentNode,Sl,Fn,n,Sn),at())},i(c){if(!o){for(let d=0;d<r.length;d+=1)se(e[d]);o=!0}},o(c){for(let d=0;d<e.length;d+=1)fe(e[d]);o=!1},d(c){c&&D(n);for(let d=0;d<e.length;d+=1)e[d].d(c)}}}function Ur(l){let e;return{c(){e=m("li"),e.textContent="Loading…",i(e,"class","folder-node__status svelte-11g8b9y")},m(t,n){G(t,e,n)},p:de,i:de,o:de,d(t){t&&D(e)}}}function Fn(l,e){let t,n,o;return n=new mo({props:{nodeId:e[25],depth:e[1]+1,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[5],toggleSelection:e[6],toggleExpansion:e[7],getCheckboxState:e[8]}}),{key:l,first:null,c(){t=Lt(),Cl(n.$$.fragment),this.first=t},m(r,s){G(r,t,s),dl(n,r,s),o=!0},p(r,s){e=r;const c={};s&4096&&(c.nodeId=e[25]),s&2&&(c.depth=e[1]+1),s&4&&(c.expandedIds=e[2]),s&8&&(c.loadingIds=e[3]),s&16&&(c.visibleIds=e[4]),s&32&&(c.searchMatches=e[5]),s&64&&(c.toggleSelection=e[6]),s&128&&(c.toggleExpansion=e[7]),s&256&&(c.getCheckboxState=e[8]),n.$set(c)},i(r){o||(se(n.$$.fragment,r),o=!0)},o(r){fe(n.$$.fragment,r),o=!1},d(r){r&&D(t),ul(n,r)}}}function Gr(l){let e,t,n=l[13]&&Cn(l);return{c(){n&&n.c(),e=Lt()},m(o,r){n&&n.m(o,r),G(o,e,r),t=!0},p(o,[r]){o[13]?n?(n.p(o,r),r&8192&&se(n,1)):(n=Cn(o),n.c(),se(n,1),n.m(e.parentNode,e)):n&&(st(),fe(n,1,1,()=>{n=null}),at())},i(o){t||(se(n),t=!0)},o(o){fe(n),t=!1},d(o){o&&D(e),n&&n.d(o)}}}function Wr(l,e,t){let n,o,r,s,c,d,u,h,b,_,w;ao(l,go,W=>t(23,w=W));let{nodeId:F}=e,{depth:O=0}=e,{expandedIds:I}=e,{loadingIds:j}=e,{visibleIds:H}=e,{searchMatches:B}=e,{toggleSelection:R}=e,{toggleExpansion:x}=e,{getCheckboxState:U}=e,L;const C=`--depth: ${O}`;function V(W){W.stopPropagation(),c&&(x==null||x(F))}function q(W){W.stopPropagation(),R==null||R(F)}function X(W){zt[W?"unshift":"push"](()=>{L=W,t(9,L),t(21,b),t(8,U),t(0,F)})}return l.$$set=W=>{"nodeId"in W&&t(0,F=W.nodeId),"depth"in W&&t(1,O=W.depth),"expandedIds"in W&&t(2,I=W.expandedIds),"loadingIds"in W&&t(3,j=W.loadingIds),"visibleIds"in W&&t(4,H=W.visibleIds),"searchMatches"in W&&t(5,B=W.searchMatches),"toggleSelection"in W&&t(6,R=W.toggleSelection),"toggleExpansion"in W&&t(7,x=W.toggleExpansion),"getCheckboxState"in W&&t(8,U=W.getCheckboxState)},l.$$.update=()=>{var W,J;l.$$.dirty&8388608&&t(22,n=w),l.$$.dirty&4194305&&t(11,o=(W=n==null?void 0:n.nodesById)==null?void 0:W[F]),l.$$.dirty&2048&&t(20,r=(o==null?void 0:o.isFolder)??!1),l.$$.dirty&4196352&&t(12,s=((J=o==null?void 0:o.childrenIds)==null?void 0:J.filter(ue=>{var Ge;const Te=(Ge=n==null?void 0:n.nodesById)==null?void 0:Ge[ue];return Te==null?void 0:Te.isFolder}))??[]),l.$$.dirty&1054720&&t(10,c=r&&(o!=null&&o.childrenLoaded?s.length>0:o==null?void 0:o.hasChildren)),l.$$.dirty&1029&&t(15,d=c&&(I==null?void 0:I.has(F))),l.$$.dirty&9&&t(14,u=j==null?void 0:j.has(F)),l.$$.dirty&17&&t(19,h=!H||H.has(F)),l.$$.dirty&257&&t(21,b=U?U(F):"none"),l.$$.dirty&2097664&&L&&(t(9,L.indeterminate=b==="partial",L),t(9,L.checked=b==="selected",L)),l.$$.dirty&1574912&&t(13,_=!!(o&&r&&h))},[F,O,I,j,H,B,R,x,U,L,c,o,s,_,u,d,C,V,q,h,r,b,n,w,X]}class mo extends Vl{constructor(e){super(),Wl(this,e,Wr,Gr,Il,{nodeId:0,depth:1,expandedIds:2,loadingIds:3,visibleIds:4,searchMatches:5,toggleSelection:6,toggleExpansion:7,getCheckboxState:8})}}function Bn(l,e,t){const n=l.slice();return n[21]=e[t],n}function En(l,e,t){const n=l.slice();return n[24]=e[t],n}function Ln(l){let e,t,n,o,r,s,c,d,u,h,b,_,w,F,O,I,j,H,B,R,x,U,L,C,V,q,X=l[8]===1?"":"s",W,J,ue,Te,Ge,ke,ct,ve,We=l[9]===1?"":"s",dt,Ve,qe,pe,Me,we,tt,be,re,kt,lt;const Qe=[qr,Vr],ye=[];function nt(y,ae){return y[1].length===0?0:1}w=nt(l),F=ye[w]=Qe[w](l);let $=l[8]>0&&Tn(l);function Fe(y,ae){return y[7].length===0?Jr:Qr}let Be=Fe(l),he=Be(l);return{c(){e=m("div"),t=m("section"),n=m("header"),o=m("div"),o.innerHTML='<h2 id="folder-modal-title">Select bookmark folders</h2> <p class="folder-modal__hint svelte-gn1lpb">Choose one or more folders to show in your new tab. Selecting a folder includes all of its subfolders.</p>',r=T(),s=m("button"),s.textContent="×",c=T(),d=m("div"),u=m("input"),h=T(),b=m("div"),_=m("div"),F.c(),O=T(),I=m("aside"),j=m("header"),H=m("h3"),H.textContent="Selected folders",B=T(),$&&$.c(),R=T(),he.c(),x=T(),U=m("footer"),L=m("div"),C=m("span"),V=ne(l[8]),q=ne(" folder"),W=ne(X),J=ne(" selected"),ue=T(),Te=m("span"),Te.textContent="•",Ge=T(),ke=m("span"),ct=ne(l[9]),ve=ne(" bookmark"),dt=ne(We),Ve=T(),qe=m("div"),pe=m("button"),pe.textContent="Cancel",Me=T(),we=m("button"),tt=ne("Confirm selection"),i(s,"type","button"),i(s,"class","folder-modal__close svelte-gn1lpb"),i(s,"aria-label","Close"),i(n,"class","folder-modal__header svelte-gn1lpb"),i(u,"type","search"),i(u,"placeholder","Search folders"),u.value=l[5],i(u,"class","svelte-gn1lpb"),i(d,"class","folder-modal__search svelte-gn1lpb"),i(_,"class","folder-modal__tree svelte-gn1lpb"),i(j,"class","svelte-gn1lpb"),i(I,"class","folder-modal__summary svelte-gn1lpb"),i(b,"class","folder-modal__body svelte-gn1lpb"),i(Te,"aria-hidden","true"),i(L,"class","folder-modal__totals svelte-gn1lpb"),i(pe,"type","button"),i(pe,"class","ghost-button svelte-gn1lpb"),i(we,"type","button"),i(we,"class","primary-button svelte-gn1lpb"),we.disabled=be=l[8]===0,i(qe,"class","folder-modal__actions svelte-gn1lpb"),i(U,"class","folder-modal__footer svelte-gn1lpb"),i(t,"class","folder-modal svelte-gn1lpb"),i(t,"role","dialog"),i(t,"aria-modal","true"),i(t,"aria-labelledby","folder-modal-title"),i(e,"class","modal-overlay svelte-gn1lpb"),i(e,"role","presentation")},m(y,ae){G(y,e,ae),f(e,t),f(t,n),f(n,o),f(n,r),f(n,s),f(t,c),f(t,d),f(d,u),l[20](u),f(t,h),f(t,b),f(b,_),ye[w].m(_,null),f(b,O),f(b,I),f(I,j),f(j,H),f(j,B),$&&$.m(j,null),f(I,R),he.m(I,null),f(t,x),f(t,U),f(U,L),f(L,C),f(C,V),f(C,q),f(C,W),f(C,J),f(L,ue),f(L,Te),f(L,Ge),f(L,ke),f(ke,ct),f(ke,ve),f(ke,dt),f(U,Ve),f(U,qe),f(qe,pe),f(qe,Me),f(qe,we),f(we,tt),re=!0,kt||(lt=[ee(s,"click",function(){al(l[13])&&l[13].apply(this,arguments)}),ee(u,"input",l[18]),ee(pe,"click",function(){al(l[13])&&l[13].apply(this,arguments)}),ee(we,"click",function(){al(l[14])&&l[14].apply(this,arguments)}),ee(e,"click",l[17])],kt=!0)},p(y,ae){l=y,(!re||ae&32&&u.value!==l[5])&&(u.value=l[5]);let ht=w;w=nt(l),w===ht?ye[w].p(l,ae):(st(),fe(ye[ht],1,1,()=>{ye[ht]=null}),at(),F=ye[w],F?F.p(l,ae):(F=ye[w]=Qe[w](l),F.c()),se(F,1),F.m(_,null)),l[8]>0?$?$.p(l,ae):($=Tn(l),$.c(),$.m(j,null)):$&&($.d(1),$=null),Be===(Be=Fe(l))&&he?he.p(l,ae):(he.d(1),he=Be(l),he&&(he.c(),he.m(I,null))),(!re||ae&256)&&_e(V,l[8]),(!re||ae&256)&&X!==(X=l[8]===1?"":"s")&&_e(W,X),(!re||ae&512)&&_e(ct,l[9]),(!re||ae&512)&&We!==(We=l[9]===1?"":"s")&&_e(dt,We),(!re||ae&256&&be!==(be=l[8]===0))&&(we.disabled=be)},i(y){re||(se(F),re=!0)},o(y){fe(F),re=!1},d(y){y&&D(e),l[20](null),ye[w].d(),$&&$.d(),he.d(),kt=!1,ft(lt)}}}function Vr(l){let e,t=[],n=new Map,o,r=Ce(l[1]);const s=c=>c[24];for(let c=0;c<r.length;c+=1){let d=En(l,r,c),u=s(d);n.set(u,t[c]=Pn(u,d))}return{c(){e=m("ul");for(let c=0;c<t.length;c+=1)t[c].c();i(e,"class","folder-tree svelte-gn1lpb")},m(c,d){G(c,e,d);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);o=!0},p(c,d){d&7262&&(r=Ce(c[1]),st(),t=Yt(t,d,s,1,c,r,n,e,Sl,Pn,null,En),at())},i(c){if(!o){for(let d=0;d<r.length;d+=1)se(t[d]);o=!0}},o(c){for(let d=0;d<t.length;d+=1)fe(t[d]);o=!1},d(c){c&&D(e);for(let d=0;d<t.length;d+=1)t[d].d()}}}function qr(l){let e;return{c(){e=m("p"),e.textContent="No bookmark folders available.",i(e,"class","folder-modal__empty svelte-gn1lpb")},m(t,n){G(t,e,n)},p:de,i:de,o:de,d(t){t&&D(e)}}}function Pn(l,e){let t,n,o;return n=new mo({props:{nodeId:e[24],depth:0,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[6],toggleSelection:e[10],toggleExpansion:e[11],getCheckboxState:e[12]}}),{key:l,first:null,c(){t=Lt(),Cl(n.$$.fragment),this.first=t},m(r,s){G(r,t,s),dl(n,r,s),o=!0},p(r,s){e=r;const c={};s&2&&(c.nodeId=e[24]),s&4&&(c.expandedIds=e[2]),s&8&&(c.loadingIds=e[3]),s&16&&(c.visibleIds=e[4]),s&64&&(c.searchMatches=e[6]),s&1024&&(c.toggleSelection=e[10]),s&2048&&(c.toggleExpansion=e[11]),s&4096&&(c.getCheckboxState=e[12]),n.$set(c)},i(r){o||(se(n.$$.fragment,r),o=!0)},o(r){fe(n.$$.fragment,r),o=!1},d(r){r&&D(t),ul(n,r)}}}function Tn(l){let e,t,n;return{c(){e=m("button"),e.textContent="Clear all",i(e,"type","button"),i(e,"class","summary-clear svelte-gn1lpb")},m(o,r){G(o,e,r),t||(n=ee(e,"click",function(){al(l[15])&&l[15].apply(this,arguments)}),t=!0)},p(o,r){l=o},d(o){o&&D(e),t=!1,n()}}}function Qr(l){let e,t=[],n=new Map,o=Ce(l[7]);const r=s=>s[21].id;for(let s=0;s<o.length;s+=1){let c=Bn(l,o,s),d=r(c);n.set(d,t[s]=An(d,c))}return{c(){e=m("ul");for(let s=0;s<t.length;s+=1)t[s].c();i(e,"class","folder-modal__selection-list svelte-gn1lpb")},m(s,c){G(s,e,c);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null)},p(s,c){c&128&&(o=Ce(s[7]),t=Yt(t,c,r,1,s,o,n,e,ho,An,null,Bn))},d(s){s&&D(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function Jr(l){let e;return{c(){e=m("p"),e.textContent="Pick folders to see them here.",i(e,"class","folder-modal__empty svelte-gn1lpb")},m(t,n){G(t,e,n)},p:de,d(t){t&&D(e)}}}function Mn(l){let e,t=l[21].count+"",n;return{c(){e=m("span"),n=ne(t),i(e,"class","selection-chip__count svelte-gn1lpb")},m(o,r){G(o,e,r),f(e,n)},p(o,r){r&128&&t!==(t=o[21].count+"")&&_e(n,t)},d(o){o&&D(e)}}}function An(l,e){let t,n,o,r=e[21].label+"",s,c,d,u,h=typeof e[21].count=="number"&&Mn(e);return{key:l,first:null,c(){t=m("li"),n=m("span"),o=m("span"),s=ne(r),c=T(),h&&h.c(),u=T(),i(o,"class","selection-chip__label svelte-gn1lpb"),i(n,"class","selection-chip svelte-gn1lpb"),i(n,"title",d=e[21].fullPath),this.first=t},m(b,_){G(b,t,_),f(t,n),f(n,o),f(o,s),f(n,c),h&&h.m(n,null),f(t,u)},p(b,_){e=b,_&128&&r!==(r=e[21].label+"")&&_e(s,r),typeof e[21].count=="number"?h?h.p(e,_):(h=Mn(e),h.c(),h.m(n,null)):h&&(h.d(1),h=null),_&128&&d!==(d=e[21].fullPath)&&i(n,"title",d)},d(b){b&&D(t),h&&h.d()}}}function Kr(l){let e,t,n=l[0]&&Ln(l);return{c(){n&&n.c(),e=Lt()},m(o,r){n&&n.m(o,r),G(o,e,r),t=!0},p(o,[r]){o[0]?n?(n.p(o,r),r&1&&se(n,1)):(n=Ln(o),n.c(),se(n,1),n.m(e.parentNode,e)):n&&(st(),fe(n,1,1,()=>{n=null}),at())},i(o){t||(se(n),t=!0)},o(o){fe(n),t=!1},d(o){o&&D(e),n&&n.d(o)}}}function Yr(l,e,t){let{open:n=!1}=e,{rootIds:o=[]}=e,{expandedIds:r}=e,{loadingIds:s}=e,{visibleIds:c}=e,{searchQuery:d=""}=e,{searchMatches:u}=e,{summary:h=[]}=e,{selectedFolderCount:b=0}=e,{totalBookmarkCount:_=0}=e,{toggleSelection:w}=e,{toggleExpansion:F}=e,{getCheckboxState:O}=e,{onSearchChange:I}=e,{onRequestClose:j}=e,{onConfirmSelection:H}=e,{onClearSelection:B}=e,R;function x(C){C.target===C.currentTarget&&(C.preventDefault(),j==null||j())}function U(C){I==null||I(C.target.value)}function L(C){zt[C?"unshift":"push"](()=>{R=C,t(16,R)})}return l.$$set=C=>{"open"in C&&t(0,n=C.open),"rootIds"in C&&t(1,o=C.rootIds),"expandedIds"in C&&t(2,r=C.expandedIds),"loadingIds"in C&&t(3,s=C.loadingIds),"visibleIds"in C&&t(4,c=C.visibleIds),"searchQuery"in C&&t(5,d=C.searchQuery),"searchMatches"in C&&t(6,u=C.searchMatches),"summary"in C&&t(7,h=C.summary),"selectedFolderCount"in C&&t(8,b=C.selectedFolderCount),"totalBookmarkCount"in C&&t(9,_=C.totalBookmarkCount),"toggleSelection"in C&&t(10,w=C.toggleSelection),"toggleExpansion"in C&&t(11,F=C.toggleExpansion),"getCheckboxState"in C&&t(12,O=C.getCheckboxState),"onSearchChange"in C&&t(19,I=C.onSearchChange),"onRequestClose"in C&&t(13,j=C.onRequestClose),"onConfirmSelection"in C&&t(14,H=C.onConfirmSelection),"onClearSelection"in C&&t(15,B=C.onClearSelection)},l.$$.update=()=>{if(l.$$.dirty&73729&&n){cn().then(()=>{R==null||R.focus(),R==null||R.select()});const C=V=>{V.key==="Escape"&&(V.preventDefault(),j==null||j())};document.addEventListener("keydown",C,{once:!0})}},[n,o,r,s,c,d,u,h,b,_,w,F,O,j,H,B,R,x,U,I,L]}class Zr extends Vl{constructor(e){super(),Wl(this,e,Yr,Kr,Il,{open:0,rootIds:1,expandedIds:2,loadingIds:3,visibleIds:4,searchQuery:5,searchMatches:6,summary:7,selectedFolderCount:8,totalBookmarkCount:9,toggleSelection:10,toggleExpansion:11,getCheckboxState:12,onSearchChange:19,onRequestClose:13,onConfirmSelection:14,onClearSelection:15})}}function Xr(l){let e,t,n,o;return{c(){e=m("img"),wn(e.src,t=l[3](l[0].url))||i(e,"src",t),i(e,"alt",""),i(e,"loading","lazy")},m(r,s){G(r,e,s),n||(o=ee(e,"error",l[8]),n=!0)},p(r,s){s&9&&!wn(e.src,t=r[3](r[0].url))&&i(e,"src",t)},d(r){r&&D(e),n=!1,o()}}}function xr(l){let e=l[0].initials+"",t;return{c(){t=ne(e)},m(n,o){G(n,t,o)},p(n,o){o&1&&e!==(e=n[0].initials+"")&&_e(t,e)},d(n){n&&D(t)}}}function jn(l){let e,t,n,o,r,s;return{c(){e=m("div"),t=m("button"),t.textContent="Edit",n=T(),o=m("button"),o.textContent="Remove",i(t,"type","button"),i(t,"role","menuitem"),i(t,"class","tile-menu__item"),i(o,"type","button"),i(o,"role","menuitem"),i(o,"class","tile-menu__item tile-menu__item--danger"),i(e,"class","tile-menu"),i(e,"role","menu")},m(c,d){G(c,e,d),f(e,t),f(e,n),f(e,o),r||(s=[ee(t,"click",l[6]),ee(o,"click",l[7])],r=!0)},p:de,d(c){c&&D(e),r=!1,ft(s)}}}function $r(l){let e,t,n,o,r,s,c=l[0].displayTitle+"",d,u,h,b,_,w,F,O,I,j,H,B,R,x;function U(q,X){return q[0].fallback?xr:Xr}let L=U(l),C=L(l),V=l[2]&&jn(l);return{c(){e=m("article"),t=m("a"),n=m("div"),C.c(),r=T(),s=m("div"),d=ne(c),b=T(),_=m("div"),w=m("button"),F=Et("svg"),O=Et("circle"),I=Et("circle"),j=Et("circle"),B=T(),V&&V.c(),i(n,"class","tile-icon"),i(n,"style",o=`--dial-color: ${l[0].palette.background}; --dial-text: ${l[0].palette.text};`),i(n,"aria-hidden","true"),i(s,"class","tile-title"),_t(s,"tile-title--pill",l[1]),i(t,"class","tile-link"),i(t,"href",u=l[0].url||"#!"),i(t,"title",h=l[0].title||l[0].url||"Shortcut"),i(t,"draggable","false"),i(O,"cx","8"),i(O,"cy","3.5"),i(O,"r","1.25"),i(I,"cx","8"),i(I,"cy","8"),i(I,"r","1.25"),i(j,"cx","8"),i(j,"cy","12.5"),i(j,"r","1.25"),i(F,"viewBox","0 0 16 16"),i(F,"aria-hidden","true"),i(F,"focusable","false"),i(w,"class","tile-menu-button"),i(w,"type","button"),i(w,"aria-haspopup","true"),i(w,"aria-expanded",l[2]),i(w,"aria-label",H=`Open options for ${l[4]}`),_t(w,"tile-menu-button--active",l[2]),i(_,"class","tile-actions"),i(e,"class","tile"),i(e,"draggable","false")},m(q,X){G(q,e,X),f(e,t),f(t,n),C.m(n,null),f(t,r),f(t,s),f(s,d),f(e,b),f(e,_),f(_,w),f(w,F),f(F,O),f(F,I),f(F,j),f(_,B),V&&V.m(_,null),R||(x=ee(w,"click",l[5]),R=!0)},p(q,[X]){L===(L=U(q))&&C?C.p(q,X):(C.d(1),C=L(q),C&&(C.c(),C.m(n,null))),X&1&&o!==(o=`--dial-color: ${q[0].palette.background}; --dial-text: ${q[0].palette.text};`)&&i(n,"style",o),X&1&&c!==(c=q[0].displayTitle+"")&&_e(d,c),X&2&&_t(s,"tile-title--pill",q[1]),X&1&&u!==(u=q[0].url||"#!")&&i(t,"href",u),X&1&&h!==(h=q[0].title||q[0].url||"Shortcut")&&i(t,"title",h),X&4&&i(w,"aria-expanded",q[2]),X&16&&H!==(H=`Open options for ${q[4]}`)&&i(w,"aria-label",H),X&4&&_t(w,"tile-menu-button--active",q[2]),q[2]?V?V.p(q,X):(V=jn(q),V.c(),V.m(_,null)):V&&(V.d(1),V=null)},i:de,o:de,d(q){q&&D(e),C.d(),V&&V.d(),R=!1,x()}}}function ei(l,e,t){let{bookmark:n}=e,{titleBackdrop:o=!1}=e,{menuOpen:r=!1}=e,{onToggleMenu:s=()=>{}}=e,{onEdit:c=()=>{}}=e,{onRemove:d=()=>{}}=e,{onFallback:u=()=>{}}=e,{getFaviconUrl:h=()=>""}=e,b="Shortcut";function _(I){I.preventDefault(),I.stopPropagation(),s==null||s()}function w(I){I.preventDefault(),I.stopPropagation(),c==null||c()}function F(I){I.preventDefault(),I.stopPropagation(),d==null||d()}function O(){u==null||u()}return l.$$set=I=>{"bookmark"in I&&t(0,n=I.bookmark),"titleBackdrop"in I&&t(1,o=I.titleBackdrop),"menuOpen"in I&&t(2,r=I.menuOpen),"onToggleMenu"in I&&t(9,s=I.onToggleMenu),"onEdit"in I&&t(10,c=I.onEdit),"onRemove"in I&&t(11,d=I.onRemove),"onFallback"in I&&t(12,u=I.onFallback),"getFaviconUrl"in I&&t(3,h=I.getFaviconUrl)},l.$$.update=()=>{l.$$.dirty&1&&t(4,b=(n==null?void 0:n.displayTitle)||(n==null?void 0:n.title)||(n==null?void 0:n.url)||"Shortcut")},[n,o,r,h,b,_,w,F,O,s,c,d,u]}class bo extends Vl{constructor(e){super(),Wl(this,e,ei,$r,Il,{bookmark:0,titleBackdrop:1,menuOpen:2,onToggleMenu:9,onEdit:10,onRemove:11,onFallback:12,getFaviconUrl:3})}}const ti=[{title:"ESLint",url:"https://eslint.org"},{title:"Prettier",url:"https://prettier.io"},{title:"Parcel",url:"https://parceljs.org"},{title:"GitHub",url:"https://github.com"},{title:"Stack Overflow",url:"https://stackoverflow.com"},{title:"MDN Web Docs",url:"https://developer.mozilla.org"},{title:"Visual Studio Code",url:"https://code.visualstudio.com"},{title:"npm",url:"https://www.npmjs.com"},{title:"Docker",url:"https://www.docker.com"},{title:"Kubernetes",url:"https://kubernetes.io"},{title:"Postman",url:"https://www.postman.com"},{title:"GitLab",url:"https://gitlab.com"},{title:"Bitbucket",url:"https://bitbucket.org"},{title:"Jest",url:"https://jestjs.io"},{title:"Webpack",url:"https://webpack.js.org"},{title:"Vite",url:"https://vitejs.dev"},{title:"TypeScript",url:"https://www.typescriptlang.org"},{title:"Babel",url:"https://babeljs.io"},{title:"React",url:"https://react.dev"},{title:"Vue.js",url:"https://vuejs.org"},{title:"Angular",url:"https://angular.io"},{title:"Svelte",url:"https://svelte.dev"},{title:"Next.js",url:"https://nextjs.org"},{title:"Nuxt",url:"https://nuxt.com"},{title:"Tailwind CSS",url:"https://tailwindcss.com"},{title:"Bootstrap",url:"https://getbootstrap.com"},{title:"Sass",url:"https://sass-lang.com"},{title:"Node.js",url:"https://nodejs.org"},{title:"Deno",url:"https://deno.com"},{title:"Express",url:"https://expressjs.com"},{title:"Fastify",url:"https://www.fastify.io"},{title:"MongoDB",url:"https://www.mongodb.com"},{title:"PostgreSQL",url:"https://www.postgresql.org"},{title:"Redis",url:"https://redis.io"},{title:"MySQL",url:"https://www.mysql.com"},{title:"Vercel",url:"https://vercel.com"},{title:"Netlify",url:"https://www.netlify.com"},{title:"Heroku",url:"https://www.heroku.com"},{title:"AWS",url:"https://aws.amazon.com"},{title:"Firebase",url:"https://firebase.google.com"},{title:"Supabase",url:"https://supabase.com"},{title:"Figma",url:"https://www.figma.com"},{title:"Canva",url:"https://www.canva.com"},{title:"VS Code Extensions",url:"https://marketplace.visualstudio.com"},{title:"Chrome DevTools",url:"https://developer.chrome.com/docs/devtools"},{title:"Can I Use",url:"https://caniuse.com"},{title:"RegExr",url:"https://regexr.com"},{title:"JSON Formatter",url:"https://jsonformatter.org"},{title:"CodePen",url:"https://codepen.io"},{title:"JSFiddle",url:"https://jsfiddle.net"},{title:"Replit",url:"https://replit.com"},{title:"StackBlitz",url:"https://stackblitz.com"},{title:"GraphQL",url:"https://graphql.org"},{title:"Prisma",url:"https://www.prisma.io"},{title:"Cypress",url:"https://www.cypress.io"},{title:"Playwright",url:"https://playwright.dev"},{title:"Testing Library",url:"https://testing-library.com"},{title:"Storybook",url:"https://storybook.js.org"},{title:"Lodash",url:"https://lodash.com"},{title:"Axios",url:"https://axios-http.com"},{title:"Day.js",url:"https://day.js.org"},{title:"Chart.js",url:"https://www.chartjs.org"},{title:"Three.js",url:"https://threejs.org"}],it={fiction:{classicNovels:[{title:"Project Gutenberg",url:"https://www.gutenberg.org"},{title:"The Literature Network",url:"http://www.online-literature.com"},{title:"Classic Reader",url:"http://www.classicreader.com"},{title:"Read Print",url:"http://www.readprint.com"},{title:"Free Classic Literature",url:"https://www.freeclassicebooks.com"},{title:"Classic Literature Library",url:"https://classiclit.about.com"}],modernFiction:[{title:"Electric Literature",url:"https://electricliterature.com"},{title:"The Paris Review",url:"https://www.theparisreview.org"},{title:"Granta",url:"https://granta.com"},{title:"LitHub",url:"https://lithub.com"},{title:"The Rumpus",url:"https://therumpus.net"},{title:"The Millions",url:"https://themillions.com"}],shortStories:[{title:"Daily Science Fiction",url:"https://dailysciencefiction.com"},{title:"Narrative Magazine",url:"https://www.narrativemagazine.com"},{title:"One Story",url:"https://www.one-story.com"},{title:"Flash Fiction Online",url:"https://flashfictiononline.com"},{title:"Smokelong Quarterly",url:"http://www.smokelong.com"},{title:"Zoetrope All-Story",url:"https://www.all-story.com"}]},nonFiction:{essays:[{title:"The New Yorker Essays",url:"https://www.newyorker.com/culture/personal-history"},{title:"The Atlantic Essays",url:"https://www.theatlantic.com/ideas/"},{title:"Harper's Magazine",url:"https://harpers.org"},{title:"The Believer",url:"https://believermag.com"},{title:"n+1 Magazine",url:"https://www.nplusonemag.com"},{title:"Aeon Essays",url:"https://aeon.co/essays"}],biography:[{title:"Biography.com",url:"https://www.biography.com"},{title:"Famous People",url:"https://www.thefamouspeople.com"},{title:"Britannica Biographies",url:"https://www.britannica.com/biography"},{title:"Stanford Encyclopedia",url:"https://plato.stanford.edu"},{title:"Internet Biography",url:"https://www.notablebiographies.com"},{title:"Lives of the Great",url:"https://www.famousscientists.org"}],history:[{title:"History.com",url:"https://www.history.com"},{title:"Smithsonian Magazine",url:"https://www.smithsonianmag.com/history/"},{title:"History Today",url:"https://www.historytoday.com"},{title:"BBC History",url:"https://www.bbc.co.uk/history"},{title:"American Historical",url:"https://www.historians.org"},{title:"Ancient History",url:"https://www.ancient.eu"}]},poetry:{classicPoetry:[{title:"Poetry Foundation",url:"https://www.poetryfoundation.org"},{title:"Poets.org",url:"https://poets.org"},{title:"Poetry Archive",url:"https://www.poetryarchive.org"},{title:"Famous Poets",url:"https://www.famouspoetsandpoems.com"},{title:"All Poetry",url:"https://allpoetry.com"},{title:"Classic Poetry Aloud",url:"https://www.poetryoutloud.org"}],contemporaryPoetry:[{title:"Poetry Magazine",url:"https://www.poetrymagazine.org"},{title:"The Adroit Journal",url:"https://theadroitjournal.org"},{title:"Rattle",url:"https://www.rattle.com"},{title:"Poem-a-Day",url:"https://www.poets.org/poetsorg/poem-day"},{title:"Button Poetry",url:"https://buttonpoetry.com"},{title:"Split This Rock",url:"https://www.splitthisrock.org"}],spokenWord:[{title:"TED Poetry",url:"https://www.ted.com/topics/poetry"},{title:"Poetry Slam Inc",url:"https://www.poetryslam.com"},{title:"Def Poetry",url:"https://www.hbo.com/def-poetry"},{title:"Write About Now",url:"https://www.writeaboutnow.com"},{title:"Brave New Voices",url:"https://youthspeaks.org"},{title:"Individual World",url:"https://www.iwps.org"}]},academic:{literaryCriticism:[{title:"JSTOR",url:"https://www.jstor.org"},{title:"Project MUSE",url:"https://muse.jhu.edu"},{title:"Oxford Academic",url:"https://academic.oup.com"},{title:"Cambridge Core",url:"https://www.cambridge.org/core"},{title:"Taylor & Francis",url:"https://www.tandfonline.com"},{title:"SAGE Journals",url:"https://journals.sagepub.com"}],literaryTheory:[{title:"Critical Theory",url:"https://criticalthoery.web.unc.edu"},{title:"Theory.org",url:"https://www.theory.org.uk"},{title:"Yale Theory",url:"https://theory.yale.edu"},{title:"Johns Hopkins Guide",url:"https://litguide.press.jhu.edu"},{title:"Internet Encyclopedia",url:"https://iep.utm.edu"},{title:"Stanford Literary Lab",url:"https://litlab.stanford.edu"}],journals:[{title:"PMLA",url:"https://www.mla.org/Publications/Journals/PMLA"},{title:"New Literary History",url:"https://muse.jhu.edu/journal/96"},{title:"Modern Fiction Studies",url:"https://muse.jhu.edu/journal/122"},{title:"Contemporary Literature",url:"https://muse.jhu.edu/journal/92"},{title:"Modernism/modernity",url:"https://muse.jhu.edu/journal/186"},{title:"American Literature",url:"https://read.dukeupress.edu/american-literature"}]}},{Map:Ql}=wr;function Hn(l,e,t){const n=l.slice();return n[168]=e[t],n}function Nn(l,e,t){const n=l.slice();return n[165]=e[t],n}function On(l,e,t){const n=l.slice();return n[165]=e[t],n}function zn(l,e,t){const n=l.slice();return n[173]=e[t],n}function Dn(l,e,t){const n=l.slice();return n[176]=e[t],n}function Rn(l,e,t){const n=l.slice();return n[176]=e[t],n}function Un(l,e,t){const n=l.slice();return n[176]=e[t],n}function Gn(l){let e,t=l[176].label+"",n,o,r,s,c;function d(){return l[75](l[176])}return{c(){e=m("button"),n=ne(t),o=T(),i(e,"type","button"),i(e,"class","choice-button"),i(e,"data-active",r=l[3].theme===l[176].id)},m(u,h){G(u,e,h),f(e,n),f(e,o),s||(c=ee(e,"click",d),s=!0)},p(u,h){l=u,h[0]&8&&r!==(r=l[3].theme===l[176].id)&&i(e,"data-active",r)},d(u){u&&D(e),s=!1,c()}}}function Wn(l){let e,t,n,o,r,s,c;function d(){return l[76](l[176])}return{c(){e=m("button"),i(e,"type","button"),i(e,"class","accent-swatch"),i(e,"style",t=`--swatch-color: ${l[176].colors.base};`),i(e,"data-active",n=l[3].accent===l[176].id),i(e,"aria-label",o=l[176].label),i(e,"title",r=l[176].label)},m(u,h){G(u,e,h),s||(c=ee(e,"click",d),s=!0)},p(u,h){l=u,h[0]&67108864&&t!==(t=`--swatch-color: ${l[176].colors.base};`)&&i(e,"style",t),h[0]&67108872&&n!==(n=l[3].accent===l[176].id)&&i(e,"data-active",n),h[0]&67108864&&o!==(o=l[176].label)&&i(e,"aria-label",o),h[0]&67108864&&r!==(r=l[176].label)&&i(e,"title",r)},d(u){u&&D(e),s=!1,c()}}}function li(l){let e,t,n=l[6]?"Show fewer accent colors":"More accent colors",o,r,s;return{c(){e=m("div"),t=m("button"),o=ne(n),i(t,"type","button"),i(t,"class","swatch-toggle-button"),i(t,"aria-expanded",l[6]),i(e,"class","swatch-toggle-row")},m(c,d){G(c,e,d),f(e,t),f(t,o),r||(s=ee(t,"click",l[32]),r=!0)},p(c,d){d[0]&64&&n!==(n=c[6]?"Show fewer accent colors":"More accent colors")&&_e(o,n),d[0]&64&&i(t,"aria-expanded",c[6])},d(c){c&&D(e),r=!1,s()}}}function Vn(l){let e,t,n=l[176].label+"",o,r,s,c,d,u;function h(){return l[78](l[176])}return{c(){e=m("button"),t=m("span"),o=ne(n),r=T(),i(e,"type","button"),i(e,"class","gradient-option"),i(e,"style",s=`--gradient-sample-light: ${l[176].gradients.light}; --gradient-sample-dark: ${l[176].gradients.dark};`),i(e,"data-active",c=l[3].background.mode==="gradient"&&l[3].background.gradientId===l[176].id)},m(b,_){G(b,e,_),f(e,t),f(t,o),f(e,r),d||(u=ee(e,"click",h),d=!0)},p(b,_){l=b,_[0]&134217728&&n!==(n=l[176].label+"")&&_e(o,n),_[0]&134217728&&s!==(s=`--gradient-sample-light: ${l[176].gradients.light}; --gradient-sample-dark: ${l[176].gradients.dark};`)&&i(e,"style",s),_[0]&134217736&&c!==(c=l[3].background.mode==="gradient"&&l[3].background.gradientId===l[176].id)&&i(e,"data-active",c)},d(b){b&&D(e),d=!1,u()}}}function ni(l){let e,t,n=l[5]?"Show fewer gradients":"More gradients",o,r,s;return{c(){e=m("div"),t=m("button"),o=ne(n),i(t,"type","button"),i(t,"class","swatch-toggle-button"),i(t,"aria-expanded",l[5]),i(e,"class","swatch-toggle-row")},m(c,d){G(c,e,d),f(e,t),f(t,o),r||(s=ee(t,"click",l[33]),r=!0)},p(c,d){d[0]&32&&n!==(n=c[5]?"Show fewer gradients":"More gradients")&&_e(o,n),d[0]&32&&i(t,"aria-expanded",c[5])},d(c){c&&D(e),r=!1,s()}}}function oi(l){let e=[],t=new Ql,n,o=Ce(l[15]);const r=s=>s[173].id;for(let s=0;s<o.length;s+=1){let c=zn(l,o,s),d=r(c);t.set(d,e[s]=qn(d,c))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();n=Lt()},m(s,c){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(s,c);G(s,n,c)},p(s,c){c[0]&32768&&(o=Ce(s[15]),e=Yt(e,c,r,1,s,o,t,n.parentNode,ho,qn,n,zn))},d(s){s&&D(n);for(let c=0;c<e.length;c+=1)e[c].d(s)}}}function ri(l){let e;return{c(){e=m("span"),e.textContent="Default folder",i(e,"class","folder-chip folder-chip--empty"),i(e,"title","Default Bookmark Dial folder")},m(t,n){G(t,e,n)},p:de,d(t){t&&D(e)}}}function qn(l,e){let t,n,o=e[173].label+"",r,s,c,d=e[173].count+"",u,h,b;return{key:l,first:null,c(){t=m("span"),n=m("span"),r=ne(o),s=T(),c=m("span"),u=ne(d),h=T(),i(n,"class","folder-chip__label"),i(c,"class","folder-chip__count"),i(t,"class","folder-chip"),i(t,"title",b=e[173].fullPath),this.first=t},m(_,w){G(_,t,w),f(t,n),f(n,r),f(t,s),f(t,c),f(c,u),f(t,h)},p(_,w){e=_,w[0]&32768&&o!==(o=e[173].label+"")&&_e(r,o),w[0]&32768&&d!==(d=e[173].count+"")&&_e(u,d),w[0]&32768&&b!==(b=e[173].fullPath)&&i(t,"title",b)},d(_){_&&D(t)}}}function Qn(l){let e,t,n,o,r,s,c,d,u,h,b,_,w,F,O,I,j,H,B,R,x,U,L,C,V,q;return{c(){e=m("div"),t=m("label"),n=m("span"),n.textContent="Folder width",o=T(),r=m("input"),c=T(),d=m("label"),u=m("input"),b=T(),_=m("div"),_.innerHTML='<span class="settings-toggle__label">Compact header</span> <span class="settings-toggle__description">Hide folder path unless hovered.</span>',w=T(),F=m("div"),O=m("span"),O.textContent="Header layout",I=T(),j=m("div"),H=m("button"),B=ne("Title first"),x=T(),U=m("button"),L=ne("Path first"),i(n,"class","settings-control__label"),i(r,"type","range"),i(r,"min","300"),i(r,"max","1600"),i(r,"step","20"),r.value=s=l[3].folderColumnWidth,i(t,"class","settings-control"),i(u,"type","checkbox"),u.checked=h=l[3].compactFolderHeader,i(_,"class","settings-toggle__body"),i(d,"class","settings-toggle"),i(O,"class","settings-control__label"),i(H,"type","button"),i(H,"class","choice-button"),i(H,"data-active",R=l[3].folderHeaderLayout==="default"),i(U,"type","button"),i(U,"class","choice-button"),i(U,"data-active",C=l[3].folderHeaderLayout==="swapped"),i(j,"class","choice-row"),i(F,"class","settings-control"),i(e,"class","ungrouped-settings")},m(X,W){G(X,e,W),f(e,t),f(t,n),f(t,o),f(t,r),f(e,c),f(e,d),f(d,u),f(d,b),f(d,_),f(e,w),f(e,F),f(F,O),f(F,I),f(F,j),f(j,H),f(H,B),f(j,x),f(j,U),f(U,L),V||(q=[ee(r,"input",l[80]),ee(u,"change",l[81]),ee(H,"click",l[82]),ee(U,"click",l[83])],V=!0)},p(X,W){W[0]&8&&s!==(s=X[3].folderColumnWidth)&&(r.value=s),W[0]&8&&h!==(h=X[3].compactFolderHeader)&&(u.checked=h),W[0]&8&&R!==(R=X[3].folderHeaderLayout==="default")&&i(H,"data-active",R),W[0]&8&&C!==(C=X[3].folderHeaderLayout==="swapped")&&i(U,"data-active",C)},d(X){X&&D(e),V=!1,ft(q)}}}function ii(l){let e,t=[],n=new Ql,o=`${l[3].folderColumnWidth}px`,r,s=Ce(l[10]);const c=d=>d[168].id;for(let d=0;d<s.length;d+=1){let u=Hn(l,s,d),h=c(u);n.set(h,t[d]=xn(h,u))}return{c(){e=m("div");for(let d=0;d<t.length;d+=1)t[d].c();i(e,"class","folder-grid-list"),i(e,"aria-label","Bookmark folders"),Dl(e,"max-width",o)},m(d,u){G(d,e,u);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null);r=!0},p(d,u){u[0]&2098184|u[1]&264241152&&(s=Ce(d[10]),st(),t=Yt(t,u,c,1,d,s,n,e,Sl,xn,null,Hn),at()),u[0]&8&&o!==(o=`${d[3].folderColumnWidth}px`)&&Dl(e,"max-width",o)},i(d){if(!r){for(let u=0;u<s.length;u+=1)se(t[u]);r=!0}},o(d){for(let u=0;u<t.length;u+=1)fe(t[u]);r=!1},d(d){d&&D(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function si(l){let e,t=[],n=new Ql,o,r,s,c,d,u,h=Ce(l[9]);const b=_=>_[165].id;for(let _=0;_<h.length;_+=1){let w=On(l,h,_),F=b(w);n.set(F,t[_]=$n(F,w))}return{c(){e=m("section");for(let _=0;_<t.length;_+=1)t[_].c();o=T(),r=m("article"),s=m("button"),s.innerHTML='<span aria-hidden="true">+</span> <div>Add shortcut</div>',i(s,"class","add-button"),i(s,"type","button"),i(r,"class","tile add-tile"),i(r,"draggable","false"),i(e,"id","dial-grid"),i(e,"class","grid"),i(e,"aria-label","Bookmark Dial links")},m(_,w){G(_,e,w);for(let F=0;F<t.length;F+=1)t[F]&&t[F].m(e,null);f(e,o),f(e,r),f(r,s),c=!0,d||(u=ee(s,"click",l[56]),d=!0)},p(_,w){w[0]&2097672|w[1]&230686720&&(h=Ce(_[9]),st(),t=Yt(t,w,b,1,_,h,n,e,Sl,$n,o,On),at())},i(_){if(!c){for(let w=0;w<h.length;w+=1)se(t[w]);c=!0}},o(_){for(let w=0;w<t.length;w+=1)fe(t[w]);c=!1},d(_){_&&D(e);for(let w=0;w<t.length;w+=1)t[w].d();d=!1,u()}}}function ai(l){let e,t=l[168].label+"",n,o,r,s=l[168].fullPath&&l[168].fullPath!==l[168].label&&Jn(l);return{c(){e=m("h4"),n=ne(t),o=T(),s&&s.c(),r=Lt(),i(e,"class","folder-section__title")},m(c,d){G(c,e,d),f(e,n),G(c,o,d),s&&s.m(c,d),G(c,r,d)},p(c,d){d[0]&1024&&t!==(t=c[168].label+"")&&_e(n,t),c[168].fullPath&&c[168].fullPath!==c[168].label?s?s.p(c,d):(s=Jn(c),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(c){c&&(D(e),D(o),D(r)),s&&s.d(c)}}}function ci(l){let e,t,n=l[168].label+"",o,r=l[168].fullPath&&l[168].fullPath!==l[168].label&&Kn(l);return{c(){r&&r.c(),e=T(),t=m("h4"),o=ne(n),i(t,"class","folder-section__title")},m(s,c){r&&r.m(s,c),G(s,e,c),G(s,t,c),f(t,o)},p(s,c){s[168].fullPath&&s[168].fullPath!==s[168].label?r?r.p(s,c):(r=Kn(s),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),c[0]&1024&&n!==(n=s[168].label+"")&&_e(o,n)},d(s){s&&(D(e),D(t)),r&&r.d(s)}}}function di(l){let e,t=l[168].label+"",n,o;return{c(){e=m("h4"),n=ne(t),i(e,"class","folder-section__title"),i(e,"title",o=l[168].fullPath)},m(r,s){G(r,e,s),f(e,n)},p(r,s){s[0]&1024&&t!==(t=r[168].label+"")&&_e(n,t),s[0]&1024&&o!==(o=r[168].fullPath)&&i(e,"title",o)},d(r){r&&D(e)}}}function Jn(l){let e,t=l[168].fullPath+"",n;return{c(){e=m("p"),n=ne(t),i(e,"class","folder-section__path")},m(o,r){G(o,e,r),f(e,n)},p(o,r){r[0]&1024&&t!==(t=o[168].fullPath+"")&&_e(n,t)},d(o){o&&D(e)}}}function Kn(l){let e,t=l[168].fullPath+"",n;return{c(){e=m("p"),n=ne(t),i(e,"class","folder-section__path")},m(o,r){G(o,e,r),f(e,n)},p(o,r){r[0]&1024&&t!==(t=o[168].fullPath+"")&&_e(n,t)},d(o){o&&D(e)}}}function Yn(l){let e,t=l[168].items.length+"",n,o,r=l[168].items.length===1?"":"s",s,c,d,u,h;function b(){return l[89](l[168])}return{c(){e=m("span"),n=ne(t),o=ne(" shortcut"),s=ne(r),c=T(),d=m("button"),d.innerHTML='<span aria-hidden="true">+</span> <span>Add shortcut</span>',i(e,"class","folder-section__count"),i(d,"type","button"),i(d,"class","ghost-button folder-section__add")},m(_,w){G(_,e,w),f(e,n),f(e,o),f(e,s),G(_,c,w),G(_,d,w),u||(h=ee(d,"click",b),u=!0)},p(_,w){l=_,w[0]&1024&&t!==(t=l[168].items.length+"")&&_e(n,t),w[0]&1024&&r!==(r=l[168].items.length===1?"":"s")&&_e(s,r)},d(_){_&&(D(e),D(c),D(d)),u=!1,h()}}}function ui(l){let e;return{c(){e=m("p"),e.textContent="No shortcuts in this folder.",i(e,"class","folder-section__empty")},m(t,n){G(t,e,n)},p:de,i:de,o:de,d(t){t&&D(e)}}}function fi(l){let e,t,n,o,r,s;function c(){return l[95](l[168])}return{c(){e=m("div"),t=m("article"),n=m("button"),n.innerHTML='<span aria-hidden="true">+</span> <div>Add shortcut</div>',i(n,"class","add-button"),i(n,"type","button"),i(t,"class","tile add-tile"),i(t,"draggable","false"),i(e,"class","grid folder-section__grid"),i(e,"role","group"),i(e,"aria-label",o=`Shortcuts in ${l[168].fullPath||l[168].label}`)},m(d,u){G(d,e,u),f(e,t),f(t,n),r||(s=ee(n,"click",c),r=!0)},p(d,u){l=d,u[0]&1024&&o!==(o=`Shortcuts in ${l[168].fullPath||l[168].label}`)&&i(e,"aria-label",o)},i:de,o:de,d(d){d&&D(e),r=!1,s()}}}function hi(l){let e,t=[],n=new Ql,o,r,s,c=Ce(l[168].items);const d=h=>h[165].id;for(let h=0;h<c.length;h+=1){let b=Nn(l,c,h),_=d(b);n.set(_,t[h]=Zn(_,b))}let u=l[3].compactFolderHeader&&Xn(l);return{c(){e=m("div");for(let h=0;h<t.length;h+=1)t[h].c();o=T(),u&&u.c(),i(e,"class","grid folder-section__grid"),i(e,"role","group"),i(e,"aria-label",r=`Shortcuts in ${l[168].fullPath||l[168].label}`)},m(h,b){G(h,e,b);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(e,null);f(e,o),u&&u.m(e,null),s=!0},p(h,b){b[0]&2098184|b[1]&230686720&&(c=Ce(h[168].items),st(),t=Yt(t,b,d,1,h,c,n,e,Sl,Zn,o,Nn),at()),h[3].compactFolderHeader?u?u.p(h,b):(u=Xn(h),u.c(),u.m(e,null)):u&&(u.d(1),u=null),(!s||b[0]&1024&&r!==(r=`Shortcuts in ${h[168].fullPath||h[168].label}`))&&i(e,"aria-label",r)},i(h){if(!s){for(let b=0;b<c.length;b+=1)se(t[b]);s=!0}},o(h){for(let b=0;b<t.length;b+=1)fe(t[b]);s=!1},d(h){h&&D(e);for(let b=0;b<t.length;b+=1)t[b].d();u&&u.d()}}}function Zn(l,e){let t,n,o;function r(){return e[90](e[165])}function s(){return e[91](e[165])}function c(){return e[92](e[165])}function d(){return e[93](e[165])}return n=new bo({props:{bookmark:e[165],titleBackdrop:e[3].titleBackdrop,menuOpen:e[21]===e[165].id,onToggleMenu:r,onEdit:s,onRemove:c,onFallback:d,getFaviconUrl:e[53]}}),{key:l,first:null,c(){t=Lt(),Cl(n.$$.fragment),this.first=t},m(u,h){G(u,t,h),dl(n,u,h),o=!0},p(u,h){e=u;const b={};h[0]&1024&&(b.bookmark=e[165]),h[0]&8&&(b.titleBackdrop=e[3].titleBackdrop),h[0]&2098176&&(b.menuOpen=e[21]===e[165].id),h[0]&1024&&(b.onToggleMenu=r),h[0]&1024&&(b.onEdit=s),h[0]&1024&&(b.onRemove=c),h[0]&1024&&(b.onFallback=d),n.$set(b)},i(u){o||(se(n.$$.fragment,u),o=!0)},o(u){fe(n.$$.fragment,u),o=!1},d(u){u&&D(t),ul(n,u)}}}function Xn(l){let e,t,n,o;function r(){return l[94](l[168])}return{c(){e=m("article"),t=m("button"),t.innerHTML='<span aria-hidden="true">+</span> <div>Add shortcut</div>',i(t,"class","add-button"),i(t,"type","button"),i(e,"class","tile add-tile"),i(e,"draggable","false")},m(s,c){G(s,e,c),f(e,t),n||(o=ee(t,"click",r),n=!0)},p(s,c){l=s},d(s){s&&D(e),n=!1,o()}}}function xn(l,e){let t,n,o,r,s,c,d,u,h,b;function _(B,R){return B[3].compactFolderHeader?di:B[3].folderHeaderLayout==="swapped"?ci:ai}let w=_(e),F=w(e),O=!e[3].compactFolderHeader&&Yn(e);const I=[hi,fi,ui],j=[];function H(B,R){return B[168].items.length?0:B[3].compactFolderHeader?1:2}return d=H(e),u=j[d]=I[d](e),{key:l,first:null,c(){t=m("section"),n=m("header"),o=m("div"),F.c(),r=T(),s=m("div"),O&&O.c(),c=T(),u.c(),h=T(),i(o,"class","folder-section__titles"),i(s,"class","folder-section__actions"),i(n,"class","folder-section__header"),i(t,"class","folder-section"),this.first=t},m(B,R){G(B,t,R),f(t,n),f(n,o),F.m(o,null),f(n,r),f(n,s),O&&O.m(s,null),f(t,c),j[d].m(t,null),f(t,h),b=!0},p(B,R){e=B,w===(w=_(e))&&F?F.p(e,R):(F.d(1),F=w(e),F&&(F.c(),F.m(o,null))),e[3].compactFolderHeader?O&&(O.d(1),O=null):O?O.p(e,R):(O=Yn(e),O.c(),O.m(s,null));let x=d;d=H(e),d===x?j[d].p(e,R):(st(),fe(j[x],1,1,()=>{j[x]=null}),at(),u=j[d],u?u.p(e,R):(u=j[d]=I[d](e),u.c()),se(u,1),u.m(t,h))},i(B){b||(se(u),b=!0)},o(B){fe(u),b=!1},d(B){B&&D(t),F.d(),O&&O.d(),j[d].d()}}}function $n(l,e){let t,n,o;function r(){return e[85](e[165])}function s(){return e[86](e[165])}function c(){return e[87](e[165])}function d(){return e[88](e[165])}return n=new bo({props:{bookmark:e[165],titleBackdrop:e[3].titleBackdrop,menuOpen:e[21]===e[165].id,onToggleMenu:r,onEdit:s,onRemove:c,onFallback:d,getFaviconUrl:e[53]}}),{key:l,first:null,c(){t=Lt(),Cl(n.$$.fragment),this.first=t},m(u,h){G(u,t,h),dl(n,u,h),o=!0},p(u,h){e=u;const b={};h[0]&512&&(b.bookmark=e[165]),h[0]&8&&(b.titleBackdrop=e[3].titleBackdrop),h[0]&2097664&&(b.menuOpen=e[21]===e[165].id),h[0]&512&&(b.onToggleMenu=r),h[0]&512&&(b.onEdit=s),h[0]&512&&(b.onRemove=c),h[0]&512&&(b.onFallback=d),n.$set(b)},i(u){o||(se(n.$$.fragment,u),o=!0)},o(u){fe(n.$$.fragment,u),o=!1},d(u){u&&D(t),ul(n,u)}}}function gi(l){var _l;let e,t,n,o,r,s,c,d,u,h,b,_,w,F,O,I,j,H,B,R,x,U,L,C,V,q,X,W,J,ue,Te,Ge,ke,ct,ve,We,dt,Ve,qe,pe,Me,we,tt,be,re,kt,lt,Qe,ye,nt,$,Fe,Be,he,y,ae,ht,wt,gt,Ne,ot,Pt,rt,Re,Dt,Je,yt,Oe,Ue,Zt,pt,Xt,Rt,Ze,fl,vl,Tt,Mt,hl,Fl,Ut,Gt,It,Wt,Ee,ut,Bl,xt,gl,St,pl,At,Le,$t,ml,jt=Ce(l[29]),Ae=[];for(let v=0;v<jt.length;v+=1)Ae[v]=Gn(Un(l,jt,v));let Ht=Ce(l[26]),je=[];for(let v=0;v<Ht.length;v+=1)je[v]=Wn(Rn(l,Ht,v));let Xe=l[30].length>Gl&&li(l),xe=Ce(l[27]),He=[];for(let v=0;v<xe.length;v+=1)He[v]=Vn(Dn(l,xe,v));let Ct=l[31].length>Ul&&ni(l);function El(v,Q){return v[15].length===0?ri:oi}let Vt=El(l),Ie=Vt(l),ze=!l[3].groupFoldersTogether&&Qn(l);const bl=[si,ii],mt=[];function Nt(v,Q){return v[3].groupFoldersTogether?0:1}return Oe=Nt(l),Ue=mt[Oe]=bl[Oe](l),pt=new Zr({props:{open:l[0],rootIds:l[28].rootIds??[],expandedIds:l[20],loadingIds:l[12],visibleIds:l[14],searchQuery:l[13],searchMatches:l[1],summary:l[0]?l[18]:l[15],selectedFolderCount:l[0]?((_l=l[17])==null?void 0:_l.size)??0:l[11].size,totalBookmarkCount:l[0]?l[19]:l[16],toggleSelection:l[45],toggleExpansion:l[46],getCheckboxState:l[51],onSearchChange:l[52],onRequestClose:l[50],onConfirmSelection:l[48],onClearSelection:l[47]}}),{c(){e=m("div"),t=T(),n=m("div"),o=m("button"),r=Et("svg"),s=Et("path"),c=Et("path"),d=T(),u=m("aside"),h=m("header"),b=m("h2"),b.textContent="Settings",_=T(),w=m("button"),w.textContent="×",F=T(),O=m("section"),I=m("h3"),I.textContent="Theme",j=T(),H=m("div");for(let v=0;v<Ae.length;v+=1)Ae[v].c();B=T(),R=m("section"),x=m("h3"),x.textContent="Accent color",U=T(),L=m("div");for(let v=0;v<je.length;v+=1)je[v].c();C=T(),Xe&&Xe.c(),V=T(),q=m("section"),X=m("h3"),X.textContent="Tile titles",W=T(),J=m("label"),ue=m("input"),Ge=T(),ke=m("div"),ke.innerHTML='<span class="settings-toggle__label">Rounded backdrop</span>',ct=T(),ve=m("section"),We=m("h3"),We.textContent="Gradient background",dt=T(),Ve=m("div");for(let v=0;v<He.length;v+=1)He[v].c();qe=T(),Ct&&Ct.c(),pe=T(),Me=m("section"),we=m("button"),we.textContent="Custom background…",tt=T(),be=m("section"),re=m("h3"),re.textContent="Folders",kt=T(),lt=m("div"),Qe=m("div"),Ie.c(),ye=T(),nt=m("button"),nt.textContent="Manage folders",$=T(),Fe=m("label"),Be=m("input"),y=T(),ae=m("div"),ae.innerHTML='<span class="settings-toggle__label">Group all folders together</span> <span class="settings-toggle__description">Combine folder shortcuts into one deduplicated grid.</span>',ht=T(),ze&&ze.c(),gt=T(),Ne=m("div"),Pt=T(),rt=m("main"),Re=m("section"),Dt=ne(l[7]),yt=T(),Ue.c(),Zt=T(),Cl(pt.$$.fragment),Xt=T(),Rt=m("dialog"),Ze=m("form"),fl=m("header"),fl.innerHTML="<h2>Custom background</h2>",vl=T(),Tt=m("div"),Mt=m("label"),hl=m("span"),hl.textContent="Choose an image (JPEG/PNG, up to 4 MB)",Fl=T(),Ut=m("input"),Gt=T(),It=m("p"),It.textContent="The selected image is stored locally on this device only.",Wt=T(),Ee=m("footer"),ut=m("button"),ut.textContent="Remove",Bl=T(),xt=m("span"),gl=T(),St=m("button"),St.textContent="Cancel",pl=T(),At=m("button"),At.textContent="Save",i(e,"id","background-layer"),_t(e,"visible",l[3].background.mode==="custom"&&!!l[22]),Dl(e,"background-image",l[3].background.mode==="custom"&&l[22]?`url(${l[22]})`:null),i(s,"d","M12 8.75a3.25 3.25 0 1 1 0 6.5 3.25 3.25 0 0 1 0-6.5Z"),i(s,"fill","none"),i(s,"stroke","currentColor"),i(s,"stroke-width","1.6"),i(c,"d","M21 12l-2.938 3.5-1.562 4.294L12 19l-4.5.794L5.938 15.5 3 12l2.938-3.5L7.5 4.206 12 5l4.5-.794L18.062 8.5 21 12Z"),i(c,"fill","none"),i(c,"stroke","currentColor"),i(c,"stroke-width","1.6"),i(c,"stroke-linecap","round"),i(c,"stroke-linejoin","round"),i(r,"class","icon-button__glyph"),i(r,"viewBox","0 0 24 24"),i(r,"aria-hidden","true"),i(r,"focusable","false"),i(r,"role","img"),i(o,"class","icon-button"),i(o,"type","button"),i(o,"title","Settings"),i(o,"aria-label","Open settings"),i(o,"aria-expanded",l[4]),i(o,"aria-controls","settings-drawer"),i(w,"type","button"),i(w,"class","settings-drawer__close"),i(w,"aria-label","Close settings"),i(h,"class","settings-drawer__header"),i(H,"class","choice-row"),i(O,"class","settings-group"),i(L,"class","accent-grid"),i(R,"class","settings-group"),i(ue,"type","checkbox"),ue.checked=Te=l[3].titleBackdrop,i(ke,"class","settings-toggle__body"),i(J,"class","settings-toggle"),i(J,"title","Adds a soft highlight behind each title for contrast."),i(q,"class","settings-group"),i(Ve,"class","gradient-grid"),i(ve,"class","settings-group"),i(we,"type","button"),i(we,"class","custom-background-button"),i(Me,"class","settings-group"),i(Qe,"class","folder-bar__summary"),i(nt,"type","button"),i(nt,"class","ghost-button folder-bar__action"),i(lt,"class","folder-bar"),i(Be,"type","checkbox"),Be.checked=he=l[3].groupFoldersTogether,i(ae,"class","settings-toggle__body"),i(Fe,"class","settings-toggle folder-group-toggle"),i(be,"class","settings-group settings-group--folders"),i(u,"id","settings-drawer"),i(u,"class","settings-drawer"),i(u,"data-open",l[4]),i(u,"aria-hidden",wt=!l[4]),i(u,"tabindex","-1"),i(Ne,"class","settings-overlay"),i(Ne,"aria-hidden",ot=!l[4]),_t(Ne,"visible",l[4]),i(Re,"id","status"),i(Re,"role","status"),i(Re,"aria-live","polite"),i(Re,"data-tone",Je=l[7]?l[8]:null),i(n,"class","page"),i(Ut,"type","file"),i(Ut,"accept","image/png,image/jpeg,image/jpg"),i(Mt,"class","file-picker"),i(It,"class","hint"),i(Tt,"class","dialog-body"),i(ut,"type","button"),i(ut,"id","clear-background"),i(ut,"class","ghost-button"),i(xt,"class","spacer"),i(St,"type","button"),i(St,"id","cancel-background"),i(At,"type","submit"),i(At,"id","save-background"),i(Ee,"class","dialog-footer"),i(Ze,"id","background-form"),i(Ze,"method","dialog")},m(v,Q){G(v,e,Q),G(v,t,Q),G(v,n,Q),f(n,o),f(o,r),f(r,s),f(r,c),l[74](o),f(n,d),f(n,u),f(u,h),f(h,b),f(h,_),f(h,w),f(u,F),f(u,O),f(O,I),f(O,j),f(O,H);for(let Se=0;Se<Ae.length;Se+=1)Ae[Se]&&Ae[Se].m(H,null);f(u,B),f(u,R),f(R,x),f(R,U),f(R,L);for(let Se=0;Se<je.length;Se+=1)je[Se]&&je[Se].m(L,null);f(R,C),Xe&&Xe.m(R,null),f(u,V),f(u,q),f(q,X),f(q,W),f(q,J),f(J,ue),f(J,Ge),f(J,ke),f(u,ct),f(u,ve),f(ve,We),f(ve,dt),f(ve,Ve);for(let Se=0;Se<He.length;Se+=1)He[Se]&&He[Se].m(Ve,null);f(ve,qe),Ct&&Ct.m(ve,null),f(u,pe),f(u,Me),f(Me,we),f(u,tt),f(u,be),f(be,re),f(be,kt),f(be,lt),f(lt,Qe),Ie.m(Qe,null),f(lt,ye),f(lt,nt),f(be,$),f(be,Fe),f(Fe,Be),f(Fe,y),f(Fe,ae),f(be,ht),ze&&ze.m(be,null),l[84](u),f(n,gt),f(n,Ne),f(n,Pt),f(n,rt),f(rt,Re),f(Re,Dt),f(rt,yt),mt[Oe].m(rt,null),f(n,Zt),dl(pt,n,null),G(v,Xt,Q),G(v,Rt,Q),f(Rt,Ze),f(Ze,fl),f(Ze,vl),f(Ze,Tt),f(Tt,Mt),f(Mt,hl),f(Mt,Fl),f(Mt,Ut),l[96](Ut),f(Tt,Gt),f(Tt,It),f(Ze,Wt),f(Ze,Ee),f(Ee,ut),f(Ee,Bl),f(Ee,xt),f(Ee,gl),f(Ee,St),f(Ee,pl),f(Ee,At),l[97](Rt),Le=!0,$t||(ml=[ee(o,"click",l[35]),ee(w,"click",l[34]),ee(ue,"change",l[77]),ee(we,"click",l[44]),ee(nt,"click",l[49]),ee(Be,"change",l[79]),ee(u,"click",yr(l[73])),ee(Ne,"pointerdown",l[34]),ee(ut,"click",yn(l[60])),ee(St,"click",yn(l[61])),ee(Ze,"submit",l[59])],$t=!0)},p(v,Q){var Ll;if((!Le||Q[0]&4194312)&&_t(e,"visible",v[3].background.mode==="custom"&&!!v[22]),Q[0]&4194312&&Dl(e,"background-image",v[3].background.mode==="custom"&&v[22]?`url(${v[22]})`:null),(!Le||Q[0]&16)&&i(o,"aria-expanded",v[4]),Q[0]&536870920|Q[1]&32){jt=Ce(v[29]);let Z;for(Z=0;Z<jt.length;Z+=1){const bt=Un(v,jt,Z);Ae[Z]?Ae[Z].p(bt,Q):(Ae[Z]=Gn(bt),Ae[Z].c(),Ae[Z].m(H,null))}for(;Z<Ae.length;Z+=1)Ae[Z].d(1);Ae.length=jt.length}if(Q[0]&67108872|Q[1]&64){Ht=Ce(v[26]);let Z;for(Z=0;Z<Ht.length;Z+=1){const bt=Rn(v,Ht,Z);je[Z]?je[Z].p(bt,Q):(je[Z]=Wn(bt),je[Z].c(),je[Z].m(L,null))}for(;Z<je.length;Z+=1)je[Z].d(1);je.length=Ht.length}if(v[30].length>Gl&&Xe.p(v,Q),(!Le||Q[0]&8&&Te!==(Te=v[3].titleBackdrop))&&(ue.checked=Te),Q[0]&134217736|Q[1]&4096){xe=Ce(v[27]);let Z;for(Z=0;Z<xe.length;Z+=1){const bt=Dn(v,xe,Z);He[Z]?He[Z].p(bt,Q):(He[Z]=Vn(bt),He[Z].c(),He[Z].m(Ve,null))}for(;Z<He.length;Z+=1)He[Z].d(1);He.length=xe.length}v[31].length>Ul&&Ct.p(v,Q),Vt===(Vt=El(v))&&Ie?Ie.p(v,Q):(Ie.d(1),Ie=Vt(v),Ie&&(Ie.c(),Ie.m(Qe,null))),(!Le||Q[0]&8&&he!==(he=v[3].groupFoldersTogether))&&(Be.checked=he),v[3].groupFoldersTogether?ze&&(ze.d(1),ze=null):ze?ze.p(v,Q):(ze=Qn(v),ze.c(),ze.m(be,null)),(!Le||Q[0]&16)&&i(u,"data-open",v[4]),(!Le||Q[0]&16&&wt!==(wt=!v[4]))&&i(u,"aria-hidden",wt),(!Le||Q[0]&16&&ot!==(ot=!v[4]))&&i(Ne,"aria-hidden",ot),(!Le||Q[0]&16)&&_t(Ne,"visible",v[4]),(!Le||Q[0]&128)&&_e(Dt,v[7]),(!Le||Q[0]&384&&Je!==(Je=v[7]?v[8]:null))&&i(Re,"data-tone",Je);let Se=Oe;Oe=Nt(v),Oe===Se?mt[Oe].p(v,Q):(st(),fe(mt[Se],1,1,()=>{mt[Se]=null}),at(),Ue=mt[Oe],Ue?Ue.p(v,Q):(Ue=mt[Oe]=bl[Oe](v),Ue.c()),se(Ue,1),Ue.m(rt,null));const $e={};Q[0]&1&&($e.open=v[0]),Q[0]&268435456&&($e.rootIds=v[28].rootIds??[]),Q[0]&1048576&&($e.expandedIds=v[20]),Q[0]&4096&&($e.loadingIds=v[12]),Q[0]&16384&&($e.visibleIds=v[14]),Q[0]&8192&&($e.searchQuery=v[13]),Q[0]&2&&($e.searchMatches=v[1]),Q[0]&294913&&($e.summary=v[0]?v[18]:v[15]),Q[0]&133121&&($e.selectedFolderCount=v[0]?((Ll=v[17])==null?void 0:Ll.size)??0:v[11].size),Q[0]&589825&&($e.totalBookmarkCount=v[0]?v[19]:v[16]),pt.$set($e)},i(v){Le||(se(Ue),se(pt.$$.fragment,v),Le=!0)},o(v){fe(Ue),fe(pt.$$.fragment,v),Le=!1},d(v){v&&(D(e),D(t),D(n),D(Xt),D(Rt)),l[74](null),nn(Ae,v),nn(je,v),Xe&&Xe.d(),nn(He,v),Ct&&Ct.d(),Ie.d(),ze&&ze.d(),l[84](null),mt[Oe].d(),ul(pt),l[96](null),l[97](null),$t=!1,ft(ml)}}}const eo=64,Nl="customBackgroundImage",kl="uiPreferences",rl="dialPreferences",il=1,Ul=6,Gl=10;function to(l=[],e=[]){return l.length!==e.length?!1:l.every((t,n)=>t===e[n])}function pi(l={}){const e=Array.isArray(l.selectedIds)?l.selectedIds.filter(Boolean):[],t=Array.isArray(l.expandedIds)?l.expandedIds.filter(Boolean):[];return{selectedIds:Array.from(new Set(e)),expandedIds:Array.from(new Set(t))}}function Qt(l,e){if(l.size!==e.size)return!1;for(const t of l)if(!e.has(t))return!1;return!0}function lo(l,e){const t=[...l];if(!e)return t;const n=t.findIndex(r=>r.id===e);if(n<=0)return t;const[o]=t.splice(n,1);return[o,...t]}function _o(l,e,t=[]){const n=l.nodesById[e];return!n||!n.isFolder||(n.childrenIds??[]).forEach(r=>{const s=l.nodesById[r];s&&(s.url?t.push(s):_o(l,r,t))}),t}function no(l){const e=l.title||l.url;return{...l,displayTitle:e,initials:bi(e),palette:ki(e),fallback:!1}}function oo(l=[],e){let t=!1;return{next:l.map(o=>o.id!==e||o.fallback?o:(t=!0,{...o,fallback:!0})),changed:t}}function mi(l){const e=l.map((o,r)=>`${r+1}. ${o.fullPath||o.label||"Untitled folder"}`).join(`
`),t=prompt(`Select a folder for the new shortcut by entering its number:

${e}
`);if(t===null)return null;const n=Number.parseInt(t.trim(),10);return Number.isNaN(n)||n<1||n>l.length?(alert("Please enter one of the numbers shown in the list."),null):l[n-1].id}function rn(l){try{return new URL(l).href}catch{try{return new URL(`https://${l}`).href}catch{return null}}}function ro(l){try{return new URL(l).hostname.replace(/^www\./i,"")}catch{return l}}function bi(l){return l?l.trim().split(/\s+/)[0].slice(0,2).toUpperCase():"•"}function _i(l,e){let t;return(...n)=>{clearTimeout(t),t=setTimeout(()=>l(...n),e)}}function ki(l){const e=(l||"").trim().toLowerCase();if(!e)return{background:"linear-gradient(145deg, #fde68a, #fbbf24)",text:"rgba(15, 23, 42, 0.85)"};let t=0,n=0,o=0;for(let O=0;O<e.length;O++){const I=e.charCodeAt(O),j=O+1;t+=I*j,n+=I*(j+1.5),o+=I*(j+2.5)}const r=sn(t,360),s=sn(n,36)-18,c=sn(r+24+s,360),d=52+Math.abs(n)%30,u=42+Math.abs(o)%20,h=Math.min(96,d+8),b=Math.min(78,u+12),_=`hsl(${r}, ${d}%, ${u}%)`,w=`hsl(${c}, ${h}%, ${b}%)`,F=u>54?"rgba(30, 41, 59, 0.85)":"rgba(255, 255, 255, 0.88)";return{background:`linear-gradient(140deg, ${_}, ${w})`,text:F}}function sn(l,e){return(l%e+e)%e}function wi(l,e){return new Promise((t,n)=>{if(l.size>e){n(new Error("File exceeds size limit"));return}const o=new FileReader;o.onload=()=>t(o.result),o.onerror=()=>n(o.error||new Error("Failed to read file")),o.readAsDataURL(l)})}function yi(l,e,t){var hn,gn,pn,mn;let n,o,r,s,c;ao(l,go,a=>t(28,c=a));const d={loading:"Loading Bookmark Dial…",empty:"No bookmarks yet. Add shortcuts from this page or the bookmark manager.",error:"Bookmark Dial folder is unavailable. Try reopening the tab or reinstalling the extension."},u={selectedIds:[],expandedIds:[]},h=4*1024*1024,b=[{id:"dark",label:"Dark"},{id:"light",label:"Light"},{id:"system",label:"System"}],_=[{id:"cobalt",label:"Cobalt",colors:{base:"#2563eb",contrast:"#f8fafc",soft:"rgba(37, 99, 235, 0.14)",border:"rgba(37, 99, 235, 0.45)"}},{id:"violet",label:"Violet",colors:{base:"#8b5cf6",contrast:"#faf5ff",soft:"rgba(139, 92, 246, 0.16)",border:"rgba(139, 92, 246, 0.45)"}},{id:"emerald",label:"Emerald",colors:{base:"#059669",contrast:"#ecfdf5",soft:"rgba(5, 150, 105, 0.14)",border:"rgba(5, 150, 105, 0.45)"}},{id:"amber",label:"Amber",colors:{base:"#d97706",contrast:"#fffbeb",soft:"rgba(217, 119, 6, 0.18)",border:"rgba(217, 119, 6, 0.5)"}},{id:"rose",label:"Rose",colors:{base:"#e11d48",contrast:"#fff1f2",soft:"rgba(225, 29, 72, 0.16)",border:"rgba(225, 29, 72, 0.45)"}},{id:"slate",label:"Slate",colors:{base:"#475569",contrast:"#f8fafc",soft:"rgba(71, 85, 105, 0.18)",border:"rgba(71, 85, 105, 0.5)"}},{id:"sky",label:"Sky",colors:{base:"#0284c7",contrast:"#e0f2fe",soft:"rgba(2, 132, 199, 0.16)",border:"rgba(2, 132, 199, 0.45)"}},{id:"blush",label:"Blush",colors:{base:"#ec4899",contrast:"#fff0f6",soft:"rgba(236, 72, 153, 0.18)",border:"rgba(236, 72, 153, 0.5)"}},{id:"moss",label:"Moss",colors:{base:"#4d7c0f",contrast:"#ecfccb",soft:"rgba(77, 124, 15, 0.18)",border:"rgba(77, 124, 15, 0.5)"}},{id:"bronze",label:"Bronze",colors:{base:"#b45309",contrast:"#fff7ed",soft:"rgba(180, 83, 9, 0.2)",border:"rgba(180, 83, 9, 0.55)"}},{id:"orchid",label:"Orchid",colors:{base:"#c026d3",contrast:"#fdf4ff",soft:"rgba(192, 38, 211, 0.18)",border:"rgba(192, 38, 211, 0.5)"}},{id:"mint",label:"Mint",colors:{base:"#14b8a6",contrast:"#e0fefa",soft:"rgba(20, 184, 166, 0.16)",border:"rgba(20, 184, 166, 0.46)"}},{id:"graphite",label:"Graphite",colors:{base:"#1f2937",contrast:"#f8fafc",soft:"rgba(31, 41, 55, 0.22)",border:"rgba(31, 41, 55, 0.6)"}},{id:"sunset",label:"Sunset",colors:{base:"#ea580c",contrast:"#fff7ed",soft:"rgba(234, 88, 12, 0.18)",border:"rgba(234, 88, 12, 0.52)"}},{id:"glacier",label:"Glacier",colors:{base:"#0ea5e9",contrast:"#f0f9ff",soft:"rgba(14, 165, 233, 0.16)",border:"rgba(14, 165, 233, 0.45)"}},{id:"amethyst",label:"Amethyst",colors:{base:"#6d28d9",contrast:"#f5f3ff",soft:"rgba(109, 40, 217, 0.18)",border:"rgba(109, 40, 217, 0.5)"}},{id:"sand",label:"Sand",colors:{base:"#ca8a04",contrast:"#fffbeb",soft:"rgba(202, 138, 4, 0.2)",border:"rgba(202, 138, 4, 0.5)"}},{id:"cranberry",label:"Cranberry",colors:{base:"#be123c",contrast:"#fff1f5",soft:"rgba(190, 18, 60, 0.18)",border:"rgba(190, 18, 60, 0.5)"}}],w=[{id:"aurora",label:"Aurora",gradients:{light:"linear-gradient(135deg, #d8b4fe 0%, #6366f1 50%, #22d3ee 100%)",dark:"linear-gradient(135deg, #312e81 0%, #1e3a8a 50%, #0f172a 100%)"},accent:"violet"},{id:"sunrise",label:"Sunrise",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 50%, #f97316 100%)",dark:"linear-gradient(135deg, #7c2d12 0%, #c2410c 45%, #ea580c 100%)"},accent:"amber"},{id:"forest",label:"Forest",gradients:{light:"linear-gradient(135deg, #bbf7d0 0%, #34d399 50%, #0f766e 100%)",dark:"linear-gradient(135deg, #064e3b 0%, #059669 50%, #0f172a 100%)"},accent:"emerald"},{id:"ocean",label:"Ocean",gradients:{light:"linear-gradient(135deg, #bae6fd 0%, #38bdf8 50%, #0ea5e9 100%)",dark:"linear-gradient(135deg, #0c4a6e 0%, #0369a1 50%, #082f49 100%)"},accent:"sky"},{id:"twilight",label:"Twilight",gradients:{light:"linear-gradient(135deg, #fecdd3 0%, #fda4af 50%, #fb7185 100%)",dark:"linear-gradient(135deg, #7f1d1d 0%, #be123c 50%, #9f1239 100%)"},accent:"orchid"},{id:"slate",label:"Slate",gradients:{light:"linear-gradient(135deg, #e2e8f0 0%, #cbd5f5 50%, #94a3b8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #020617 100%)"},accent:"slate"},{id:"blossom",label:"Blossom",gradients:{light:"linear-gradient(135deg, #ffe4e6 0%, #fbcfe8 45%, #f472b6 100%)",dark:"linear-gradient(135deg, #831843 0%, #9d174d 50%, #701a75 100%)"},accent:"blush"},{id:"lagoon",label:"Lagoon",gradients:{light:"linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 40%, #5eead4 100%)",dark:"linear-gradient(135deg, #022c22 0%, #0d9488 45%, #14b8a6 100%)"},accent:"mint"},{id:"ember",label:"Ember",gradients:{light:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 40%, #fb7185 100%)",dark:"linear-gradient(135deg, #450a0a 0%, #9f1239 50%, #be123c 100%)"},accent:"rose"},{id:"lilac",label:"Lilac",gradients:{light:"linear-gradient(135deg, #f5f3ff 0%, #ede9fe 45%, #d8b4fe 100%)",dark:"linear-gradient(135deg, #312e81 0%, #5b21b6 50%, #7c3aed 100%)"},accent:"violet"},{id:"zenith",label:"Zenith",gradients:{light:"linear-gradient(135deg, #e0f2fe 0%, #dbeafe 45%, #818cf8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #1f3b8a 45%, #3730a3 100%)"},accent:"cobalt"},{id:"sage",label:"Sage",gradients:{light:"linear-gradient(135deg, #ecfccb 0%, #bbf7d0 45%, #84cc16 100%)",dark:"linear-gradient(135deg, #052e16 0%, #166534 45%, #15803d 100%)"},accent:"moss"},{id:"velvet",label:"Velvet",gradients:{light:"linear-gradient(135deg, #fdf4ff 0%, #f5d0fe 45%, #f0abfc 100%)",dark:"linear-gradient(135deg, #4a044e 0%, #6b21a8 45%, #86198f 100%)"},accent:"orchid"},{id:"citrus",label:"Citrus",gradients:{light:"linear-gradient(135deg, #fefce8 0%, #fef08a 45%, #facc15 100%)",dark:"linear-gradient(135deg, #422006 0%, #854d0e 50%, #b45309 100%)"},accent:"amber"},{id:"glacier",label:"Glacier",gradients:{light:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 45%, #bae6fd 100%)",dark:"linear-gradient(135deg, #082f49 0%, #0c4a6e 45%, #0284c7 100%)"},accent:"sky"},{id:"terracotta",label:"Terracotta",gradients:{light:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 45%, #f97316 100%)",dark:"linear-gradient(135deg, #431407 0%, #7c2d12 45%, #9a3412 100%)"},accent:"bronze"},{id:"nocturne",label:"Nocturne",gradients:{light:"linear-gradient(135deg, #ede9fe 0%, #c7d2fe 45%, #4338ca 100%)",dark:"linear-gradient(135deg, #020617 0%, #111827 45%, #312e81 100%)"},accent:"slate"},{id:"horizon",label:"Horizon",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 40%, #60a5fa 100%)",dark:"linear-gradient(135deg, #451a03 0%, #9a3412 45%, #1d4ed8 100%)"},accent:"cobalt"}],F=w[0],I={theme:"system",accent:F!=null&&F.accent&&_.some(a=>a.id===F.accent)?F.accent:_[0].id,background:{mode:"gradient",gradientId:(F==null?void 0:F.id)??w[0].id},titleBackdrop:!1,groupFoldersTogether:!0,folderColumnWidth:1040,folderHeaderLayout:"default",compactFolderHeader:!1},j={...I,folderSelection:{...u},version:il},H=typeof chrome<"u"?chrome:null,B=(hn=H==null?void 0:H.runtime)!=null&&hn.sendMessage?H:To(),R=!!((gn=H==null?void 0:H.runtime)!=null&&gn.id),x=!!((pn=H==null?void 0:H.storage)!=null&&pn.local)&&R,U=!!((mn=H==null?void 0:H.storage)!=null&&mn.sync)&&R;let L=d.loading,C="info",V=[],q=[],X=new Set,W=null,J=new Set,ue=new Set,Te=new Set,Ge=!1,ke=!1,ct="",ve=new Set,We=null,dt=[],Ve=new Map,qe=0,pe=null,Me=null,we=[],tt=new Map,be=0,re=!1,kt=new Set,lt=0,Qe=0,ye=null,nt="",$,Fe,Be,he,y=Oe(),ae=!1,ht=!0,wt=!1,gt=!1,Ne=!1,ot=!1,Pt=[..._],rt=[...w],Re=null,Dt=null,Je=null;const yt=[];Cr(()=>{var a,g;if((async()=>{try{await Ae()}catch(k){console.error("Bookmark Dial: failed to load settings",k),t(3,y=Oe()),t(68,gt=x),Gt(y.theme),It(y.accent),Wt(y.background.gradientId)}try{await Lo()}catch(k){console.error("Bookmark Dial: failed to load background",k)}t(66,ht=!1),Ht()})(),typeof window<"u"){const k=P=>{if(P.key==="Escape"){if(ye!==null){t(21,ye=null),P.stopPropagation();return}ae&&ut()}},E=P=>{if(ye===null)return;const A=P.target;A instanceof Element&&A.closest(".tile-actions")||t(21,ye=null)};window.addEventListener("keydown",k),window.addEventListener("pointerdown",E),yt.push(()=>window.removeEventListener("keydown",k)),yt.push(()=>window.removeEventListener("pointerdown",E))}if((g=(a=B==null?void 0:B.storage)==null?void 0:a.onChanged)!=null&&g.addListener){const k=(E,P)=>{if(P!=="sync"&&P!=="local")return;const N=E[P==="sync"?rl:kl];!N||!N.newValue||yo(N.newValue)};B.storage.onChanged.addListener(k),yt.push(()=>B.storage.onChanged.removeListener(k))}return()=>{Re&&clearTimeout(Re),typeof document<"u"&&document.body.classList.remove("settings-open"),yt.forEach(k=>k==null?void 0:k())}});function Oe(){return{theme:I.theme,accent:I.accent,background:{...I.background},titleBackdrop:I.titleBackdrop,groupFoldersTogether:I.groupFoldersTogether,folderColumnWidth:I.folderColumnWidth,folderHeaderLayout:I.folderHeaderLayout,compactFolderHeader:I.compactFolderHeader}}function Ue(a){return b.some(g=>g.id===a)?a:I.theme}function Zt(a){return _.some(g=>g.id===a)?a:I.accent}function pt(a){return w.some(g=>g.id===a)?a:I.background.gradientId}function Xt(a={}){var le,me,et,el;const g=Ue(a.theme),k=Zt(a.accent),E=a.background??{},P=E.mode==="custom"?"custom":"gradient",A=pt(E.gradientId),N=typeof a.titleBackdrop=="boolean",te=N?a.titleBackdrop:I.titleBackdrop,ce=typeof a.groupFoldersTogether=="boolean",K=ce?a.groupFoldersTogether:I.groupFoldersTogether,Y=typeof a.folderColumnWidth=="number"?a.folderColumnWidth:I.folderColumnWidth,ge=a.folderHeaderLayout==="swapped"?"swapped":I.folderHeaderLayout,Pe=typeof a.compactFolderHeader=="boolean"?a.compactFolderHeader:I.compactFolderHeader,ie=pi(a.folderSelection),De=!to(ie.selectedIds,((le=a.folderSelection)==null?void 0:le.selectedIds)??[])||!to(ie.expandedIds,((me=a.folderSelection)==null?void 0:me.expandedIds)??[]),Ft=g!==a.theme||k!==a.accent||P!==(((et=a.background)==null?void 0:et.mode)??I.background.mode)||A!==(((el=a.background)==null?void 0:el.gradientId)??I.background.gradientId)||!N||!ce||Y!==a.folderColumnWidth||ge!==a.folderHeaderLayout||Pe!==a.compactFolderHeader;return{settings:{theme:g,accent:k,background:{mode:P,gradientId:A},titleBackdrop:te,titleBackdrop:te,groupFoldersTogether:K,groupFoldersTogether:K,folderColumnWidth:Y,folderHeaderLayout:ge,compactFolderHeader:Pe},folderSelection:ie,changed:Ft||De||(a.version??il)!==il}}function Rt(a){return _.find(g=>g.id===a)??_[0]}function Ze(a){return w.find(g=>g.id===a)??w[0]}function fl(){t(69,Pt=lo(_,y==null?void 0:y.accent)),t(6,ot=!1)}function vl(){t(6,ot=!0)}function Tt(){ot?fl():vl()}function Mt(){var a,g;t(70,rt=lo(w,((a=y==null?void 0:y.background)==null?void 0:a.mode)==="gradient"?(g=y==null?void 0:y.background)==null?void 0:g.gradientId:null)),t(5,Ne=!1)}function hl(){t(5,Ne=!0)}function Fl(){Ne?Mt():hl()}function Ut(){return!Dt&&typeof window<"u"&&typeof window.matchMedia=="function"&&(Dt=window.matchMedia("(prefers-color-scheme: dark)")),Dt}function Gt(a){if(typeof document>"u")return;const g=Ue(a),k=Ut();if(g==="system"&&k){if(document.body.classList.toggle("dark",k.matches),!Je){const E=P=>{document.body.classList.toggle("dark",P.matches)};typeof k.addEventListener=="function"?(k.addEventListener("change",E),Je=()=>k.removeEventListener("change",E)):typeof k.addListener=="function"?(k.addListener(E),Je=()=>k.removeListener(E)):Je=null,Je&&yt.push(Je)}}else Je&&(Je(),Je=null),document.body.classList.toggle("dark",g==="dark");document.body.dataset.theme=g}function It(a){if(typeof document>"u")return;const g=Rt(a),k=document.documentElement;k.style.setProperty("--accent-color",g.colors.base),k.style.setProperty("--accent-color-contrast",g.colors.contrast),k.style.setProperty("--accent-color-soft",g.colors.soft),k.style.setProperty("--accent-color-border",g.colors.border)}function Wt(a){if(typeof document>"u")return;const g=Ze(a),k=document.documentElement;k.style.setProperty("--page-background-light",g.gradients.light),k.style.setProperty("--page-background-dark",g.gradients.dark)}function Ee(){if(!x||!wt||!Ge)return;Re&&clearTimeout(Re);const a={theme:y.theme,accent:y.accent,titleBackdrop:y.titleBackdrop,groupFoldersTogether:y.groupFoldersTogether,folderColumnWidth:y.folderColumnWidth,folderHeaderLayout:y.folderHeaderLayout,compactFolderHeader:y.compactFolderHeader,background:{...y.background},folderSelection:{selectedIds:Array.from(J),expandedIds:Array.from(ue)},version:il};Re=setTimeout(async()=>{Re=null;try{const g=[B.storage.local.set({[kl]:a})];U&&g.push(B.storage.sync.set({[rl]:a})),await Promise.all(g)}catch(g){console.error("Bookmark Dial: failed to store preferences",g)}},120)}function ut(){if(ae&&(t(4,ae=!1),typeof document<"u"&&he)){const a=document.activeElement;a&&he.contains(a)&&(Be==null||Be.focus())}}function Bl(){t(4,ae=!ae)}function xt(a){const g=Ue(a);y.theme!==g&&t(3,y={...y,theme:g})}function gl(a){const g=Zt(a);y.accent!==g&&t(3,y={...y,accent:g})}function St(a){const g=!!a;y.titleBackdrop!==g&&t(3,y={...y,titleBackdrop:g})}function pl(a){const g=!!a;y.groupFoldersTogether!==g&&t(3,y={...y,groupFoldersTogether:g})}function At(a){const g=Number(a);y.folderColumnWidth!==g&&t(3,y={...y,folderColumnWidth:g})}function Le(a){y.folderHeaderLayout!==a&&t(3,y={...y,folderHeaderLayout:a})}function $t(a){const g=!!a;y.compactFolderHeader!==g&&t(3,y={...y,compactFolderHeader:g})}function ml(a){const g=pt(a),k=Ze(g),E=k.accent&&_.some(te=>te.id===k.accent)?k.accent:null,P=y.background.mode!=="gradient"||y.background.gradientId!==g,A=E?Zt(E):y.accent,N=!!E&&A!==y.accent;!P&&!N||t(3,y={...y,accent:N?A:y.accent,background:{...y.background,mode:"gradient",gradientId:g}})}async function jt(){ut(),await cn(),vo()}async function Ae(){if(t(68,gt=!1),t(65,re=!1),!x){t(3,y=Oe()),t(11,J=new Set(u.selectedIds)),t(62,ue=new Set(u.expandedIds)),t(63,Ge=!0),Gt(y.theme),It(y.accent),Wt(y.background.gradientId),Ot();return}let a={},g={};if(U)try{a=await B.storage.sync.get(rl)}catch(A){console.warn("Bookmark Dial: failed to read sync preferences",A)}try{g=await B.storage.local.get(kl)}catch(A){console.warn("Bookmark Dial: failed to read local preferences",A)}let k=a==null?void 0:a[rl],E=!1;!k&&(g!=null&&g[kl])&&(k=g[kl],E=!0);const P=Xt(k??j);t(3,y=P.settings),t(11,J=new Set(P.folderSelection.selectedIds.length?P.folderSelection.selectedIds:u.selectedIds)),t(62,ue=new Set(P.folderSelection.expandedIds)),t(63,Ge=!0),t(68,gt=P.changed||E),t(65,re=P.changed||E),Gt(y.theme),It(y.accent),Wt(y.background.gradientId),Ot()}async function Ht(){try{await Mr(B),W=await je(),await Xe(),await xe(),He(),await Ie()}catch(a){console.error("Bookmark Dial: initialization failed",a),vt(d.error,"error")}}async function je(){const a=await B.runtime.sendMessage({type:"getFolderId"});if(!(a!=null&&a.folderId))throw new Error((a==null?void 0:a.error)||"Missing folder");return a.folderId}async function Xe(){J.size===0&&W&&(t(11,J=new Set([W])),t(65,re=!0))}async function xe(){const a=Array.from(J);a.length&&(await Promise.allSettled(a.map(g=>ol(B,g))),Ot())}function He(){var te,ce;const a=_i(()=>Ie(),150),g=(K,Y)=>{jr(Y),!Y.url&&mt(Y)&&_l(Y.id),Y.url?Nt(Y.parentId)&&a():J.has(Y.id)&&a()};B.bookmarks.onCreated.addListener(g);const k=(K,Y)=>{Hr(K,Y),X.has(K)&&a()};B.bookmarks.onChanged.addListener(k);const E=(K,Y)=>{Nr(K,Y),(X.has(K)||Nt(Y.parentId)||Nt(Y.oldParentId))&&a()};B.bookmarks.onMoved.addListener(E);const P=(K,Y)=>{const ge=po(K);ge&&Ct(K,{...Y,node:ge}),Or(K,Y),(X.has(K)||Nt(Y.parentId))&&(X.delete(K),a())};B.bookmarks.onRemoved.addListener(P);const A=()=>a(),N=()=>vt("Importing bookmarks…");(te=B.bookmarks.onImportEnded)==null||te.addListener(A),(ce=B.bookmarks.onImportBegan)==null||ce.addListener(N),yt.push(()=>{var K,Y;B.bookmarks.onCreated.removeListener(g),B.bookmarks.onChanged.removeListener(k),B.bookmarks.onMoved.removeListener(E),B.bookmarks.onRemoved.removeListener(P),(K=B.bookmarks.onImportEnded)==null||K.removeListener(A),(Y=B.bookmarks.onImportBegan)==null||Y.removeListener(N)})}function Ct(a,g={}){if(g!=null&&g.node&&!g.node.url){const k=new Set(Hl(a));if(k.size){const E=new Set(J);let P=!1;k.forEach(A=>{E.has(A)&&(E.delete(A),P=!0)}),P&&(t(11,J=E),t(65,re=!0),Ot(),Ee(),J.size||Promise.resolve().then(()=>Xe()).then(()=>xe()).then(()=>Ie()))}a===W&&El()}}async function El(){vt("Default folder was removed. Recreating…");try{const a=await B.runtime.sendMessage({type:"resetFolderCache"});if(a!=null&&a.folderId)W=a.folderId,await _l(W),await Ie(),vt("Default folder restored.","success");else throw new Error((a==null?void 0:a.error)||"Unable to recreate folder")}catch(a){console.error("Bookmark Dial: missing folder recovery failed",a),vt(d.error,"error")}}async function Vt(a){const g=a instanceof Set?new Set(a):new Set(a??[]);if(!g.size)return{items:[],counts:new Map,total:0,groups:[]};await Promise.all(Array.from(g).map(ce=>ol(B,ce)));const k=Bt(),E=new Map,P=new Map,A=[],N=[];g.forEach(ce=>{const K=_o(k,ce),Y=zl(ce),ge=Y[Y.length-1]||"Untitled folder",Pe=K.map(ie=>{const Ft=(rn(ie.url)||ie.url||ie.url||ie.id).toLowerCase(),le=P.get(ce)??new Set;le.add(Ft),P.set(ce,le);const me={...ie,sourceFolderId:ce,sourcePath:Y};return E.has(Ft)||(E.set(Ft,ie.id),A.push(me)),me});N.push({id:ce,label:ge,path:Y,fullPath:Y.join(" › "),items:Pe})}),N.sort((ce,K)=>ce.fullPath.localeCompare(K.fullPath));const te=new Map(Array.from(P.entries()).map(([ce,K])=>[ce,K.size]));return{items:A,counts:te,total:A.length,groups:N}}async function Ie(){const a=++lt;if(!J.size){t(9,V=[]),t(10,q=[]),X=new Set,Ve=new Map,t(16,qe=0),Ot(),vt("Select folders to populate this page.","info");return}try{const g=await Vt(J);if(a!==lt)return;Ve=g.counts,t(16,qe=g.total),ze(g.items),t(10,q=g.groups.map(k=>({id:k.id,label:k.label,path:k.path,fullPath:k.fullPath,items:k.items.map(E=>no(E))}))),Ot(),g.items.length===0?vt(d.empty):vt("","info")}catch(g){console.error("Bookmark Dial: failed to load bookmarks",g),vt(d.error,"error")}}function ze(a){X=new Set(a.map(g=>g.id)),t(9,V=a.map(g=>no(g)))}function bl(a,g){const k=new Set(Te);g?k.add(a):k.delete(a),t(12,Te=k)}function mt(a){return!a||a.url?!1:Nt(a.parentId)}function Nt(a){if(!a)return!1;const g=Bt();let k=a;for(;k;){if(J.has(k))return!0;const E=g.nodesById[k];k=(E==null?void 0:E.parentId)??null}return!1}async function _l(a){if(!a)return;await ol(B,a);const g=Hl(a),k=new Set(J);let E=!1;g.forEach(P=>{k.has(P)||(k.add(P),E=!0)}),E&&(t(11,J=k),t(65,re=!0),await xe(),await Ie(),Ee())}async function v(a){if(!a)return;await ol(B,a);const g=Hl(a);if(!g.length)return;const k=ke,E=k&&pe?pe:k?new Set(J):J,P=new Set(E);if(g.every(N=>P.has(N))?g.forEach(N=>P.delete(N)):g.forEach(N=>P.add(N)),k){t(17,pe=P);const N=++Qe,te=await Vt(pe);if(N!==Qe)return;tt=te.counts,t(19,be=te.total),t(18,we=Pl(pe,tt))}else Qt(J,P)||(t(11,J=P),t(65,re=!0),await Xe(),await xe(),await Ie(),Ee())}async function Q(a){var Pe;if(!a)return;const k=Bt().nodesById[a];if(!(k!=null&&k.isFolder))return;const E=ke,P=E&&Me?Me:E?new Set(ue):ue,A=new Set(P??[]),N=new Set(A),te=(ie,{persist:De=!1}={})=>{E?t(64,Me=ie):(t(62,ue=ie),De&&(t(65,re=!0),Ee()))};if(A.has(a)){A.delete(a);const ie=!Qt(N,A);te(A,{persist:ie});return}if(A.add(a),te(A),!k.childrenLoaded){bl(a,!0);try{await Ar(B,a)}catch(ie){console.warn("Bookmark Dial: failed to load child folders",ie)}finally{bl(a,!1)}}const ce=Bt(),K=ce.nodesById[a];((Pe=K==null?void 0:K.childrenIds)==null?void 0:Pe.some(ie=>{const De=ce.nodesById[ie];return De==null?void 0:De.isFolder}))||A.delete(a);const ge=!Qt(N,A);te(A,{persist:ge})}async function Se(){if(ke){t(17,pe=new Set),Qe++,tt=new Map,t(19,be=0),t(18,we=[]);return}t(11,J=new Set),t(65,re=!0),await Xe(),await xe(),await Ie(),Ee()}async function $e(){if(!ke)return;const a=new Set(pe??[]),g=new Set(Me??[]),k=!Qt(J,a),E=!Qt(ue,g);t(0,ke=!1),Z(),k&&(t(11,J=a),t(65,re=!0),await Xe(),await xe(),await Ie()),E&&(t(62,ue=g),t(65,re=!0)),k||E?Ee():Ot()}function Ll(){t(17,pe=new Set(J)),t(64,Me=new Set(ue)),tt=new Map(Ve),t(19,be=qe),t(18,we=Pl(pe,tt)),Qe=0,t(13,ct=""),t(1,ve=new Set),t(14,We=null),t(0,ke=!0)}function Z(){t(17,pe=null),t(64,Me=null),t(18,we=[]),tt=new Map,t(19,be=0),Qe=0,t(13,ct=""),t(1,ve=new Set),t(14,We=null)}function bt(){t(0,ke=!1),Z()}function Pl(a,g){Bt();const k=Array.from(a??[]).map(E=>{const P=zl(E),A=P[P.length-1]||"Untitled folder";return{id:E,path:P,label:A,fullPath:P.join(" › "),count:(g==null?void 0:g.get(E))??0}});return k.sort((E,P)=>E.fullPath.localeCompare(P.fullPath)),k}function Ot(){t(15,dt=Pl(J,Ve))}function ko(a){const k=Bt().nodesById[a],E=ke&&pe?pe:J;if(!(k!=null&&k.isFolder))return E.has(a)?"selected":"none";const P=Hl(a);if(!P.length)return E.has(a)?"selected":"none";const A=P.filter(N=>E.has(N)).length;return A===0?"none":A===P.length?"selected":"partial"}async function wo(a){var ce;t(13,ct=a);const g=a.trim();if(!g){t(1,ve=new Set),t(14,We=null);return}if((ce=B==null?void 0:B.bookmarks)!=null&&ce.search)try{const Y=(await B.bookmarks.search({query:g})).filter(ge=>!ge.url);for(const ge of Y){await ol(B,ge.id);let Pe=ge.parentId;for(;Pe;){await ol(B,Pe);const ie=Bt().nodesById[Pe];Pe=(ie==null?void 0:ie.parentId)??null}}}catch(K){console.warn("Bookmark Dial: folder search failed",K)}const k=zr(),E=g.toLowerCase(),A=k.filter(K=>{const Y=K.title.toLowerCase().includes(E),ge=K.path.join(" ").toLowerCase().includes(E);return Y||ge}).map(K=>K.id);t(1,ve=new Set(A));const N=new Set,te=Bt();A.forEach(K=>{var Pe;let Y=te.nodesById[K];for(;Y&&(N.add(Y.id),!!Y.parentId);)Y=te.nodesById[Y.parentId];const ge=te.nodesById[K];(Pe=ge==null?void 0:ge.childrenIds)==null||Pe.forEach(ie=>{const De=te.nodesById[ie];De!=null&&De.isFolder&&N.add(ie)})}),t(14,We=N)}function yo(a){const g=Xt(a),k=g.settings;(k.theme!==y.theme||k.accent!==y.accent||k.background.mode!==y.background.mode||k.background.gradientId!==y.background.gradientId||k.titleBackdrop!==y.titleBackdrop||k.groupFoldersTogether!==y.groupFoldersTogether||k.folderColumnWidth!==y.folderColumnWidth||k.folderHeaderLayout!==y.folderHeaderLayout||k.compactFolderHeader!==y.compactFolderHeader)&&t(3,y={...y,...k,background:{...k.background}});const P=new Set(g.folderSelection.selectedIds),A=new Set(g.folderSelection.expandedIds),N=!Qt(P,J),te=!Qt(A,ue);N&&(t(11,J=P),Ot(),Ie()),te&&t(62,ue=A),(N||te)&&t(65,re=!1)}function Io(a){var g;if((g=H==null?void 0:H.runtime)!=null&&g.sendMessage)return`chrome://favicon/size/${eo}@2x/${encodeURIComponent(a)}`;try{return`https://www.google.com/s2/favicons?domain=${new URL(a).hostname}&sz=${eo*2}`}catch{return""}}function Jl(a){const{next:g,changed:k}=oo(V,a);if(!k)return;t(9,V=g);let E=!1;const P=q.map(A=>{const{next:N,changed:te}=oo(A.items,a);return te?(E=!0,{...A,items:N}):A});E&&t(10,q=P)}function Kl(a){t(21,ye=ye===a?null:a)}function fn(){t(21,ye=null)}async function Tl(a=null){const g=await Co(a);if(!g)return;const k=prompt("Enter the URL for the new shortcut:");if(!k)return;const E=rn(k.trim());if(!E){alert("That does not appear to be a valid URL.");return}const P=ro(E),A=prompt("Enter a title for the shortcut:",P),N=A?A.trim():P;try{await B.bookmarks.create({parentId:g,title:N,url:E})}catch(te){console.error("Bookmark Dial: failed to create bookmark",te),alert("Unable to add shortcut. Please try again.")}}function So(){if(dt.length)return dt;const a=Pl(J,Ve);if(a.length)return a;if(W){const g=zl(W),k=g[g.length-1]||"Bookmark Dial";return[{id:W,path:g,label:k,fullPath:g.join(" › "),count:0}]}return[]}async function Co(a=null){if(a)return a;const g=So();return g.length?g.length===1?g[0].id:mi(g):(alert("No folders are available for new shortcuts right now."),null)}async function Yl(a){var N;if(!(a!=null&&a.id))return;fn();const g=prompt("Update the shortcut URL:",a.url??"");if(g===null)return;const k=rn(g.trim());if(!k){alert("That does not appear to be a valid URL.");return}const E=(N=a.title)!=null&&N.trim()?a.title:a.displayTitle||ro(k),P=prompt("Update the shortcut title:",E),A=P?P.trim():E;try{await B.bookmarks.update(a.id,{title:A,url:k})}catch(te){console.error("Bookmark Dial: failed to update bookmark",te),alert("Unable to update shortcut. Please try again.")}}async function Zl(a){if(fn(),!!confirm("Remove this shortcut?"))try{await B.bookmarks.remove(a)}catch(g){console.error("Bookmark Dial: failed to remove bookmark",g),alert("Unable to remove shortcut.")}}function vo(){Fe&&t(24,Fe.value="",Fe),$==null||$.showModal()}async function Fo(a){var k;a.preventDefault();const g=(k=Fe==null?void 0:Fe.files)==null?void 0:k[0];if(!g){$==null||$.close();return}if(!Po(g)){alert("Please choose a JPEG or PNG image under 4 MB.");return}try{const E=await wi(g,h);x&&await B.storage.local.set({[Nl]:E}),Ml(E),t(3,y={...y,background:{...y.background,mode:"custom"}}),$==null||$.close()}catch(E){console.error("Bookmark Dial: failed to save background",E),alert("Unable to store the background image. Try a smaller file.")}}async function Bo(){try{x&&await B.storage.local.remove(Nl)}catch(a){console.error("Bookmark Dial: failed to clear background",a)}Ml(null),t(3,y={...y,background:{...y.background,mode:"gradient"}}),$==null||$.close()}function Eo(){$==null||$.close()}async function Lo(){if(!x){Ml(null),y.background.mode==="custom"&&t(3,y={...y,background:{...y.background,mode:"gradient"}});return}try{const a=await B.storage.local.get(Nl),g=(a==null?void 0:a[Nl])||"";Ml(g),!g&&y.background.mode==="custom"&&(t(3,y={...y,background:{...y.background,mode:"gradient"}}),t(68,gt=!0))}catch(a){console.error("Bookmark Dial: failed to load background",a)}}function Ml(a){t(22,nt=a||"")}function vt(a,g="info"){t(7,L=a),t(8,C=g)}function Po(a){return["image/jpeg","image/png"].includes(a.type)&&a.size<=h}function To(){console.info("Bookmark Dial: using mock Chrome APIs for development");let a="mock-folder",g=1;const k={onCreated:new Set,onChanged:new Set,onMoved:new Set,onRemoved:new Set,onImportBegan:new Set,onImportEnded:new Set},E=new Set,P=new Map,A=new Map([["speedDialFolderId",a],[rl,{version:il,theme:I.theme,accent:I.accent,titleBackdrop:I.titleBackdrop,groupFoldersTogether:I.groupFoldersTogether,background:{...I.background},folderSelection:{selectedIds:[a],expandedIds:[]}}]]),N=new Map;function te(p,...S){const M=k[p];M&&M.forEach(z=>{try{z(...S)}catch(oe){console.error(`Mock chrome ${p} handler failed`,oe)}})}function ce(p,S){!S||Object.keys(S).length===0||E.forEach(M=>{try{M(S,p)}catch(z){console.error("Mock chrome storage listener failed",z)}})}function K(p){return p===void 0?void 0:JSON.parse(JSON.stringify(p))}function Y(p,S){if(Array.isArray(S)){const M={};return S.forEach(z=>M[z]=p.get(z)),M}if(typeof S=="object"&&S!==null){const M={...S};for(const z of Object.keys(S))p.has(z)&&(M[z]=p.get(z));return M}return{[S]:p.get(S)}}function ge(p,S,M){const z={};Object.entries(M||{}).forEach(([oe,Ke])=>{const qt=p.get(oe);p.set(oe,Ke),z[oe]={oldValue:K(qt),newValue:K(Ke)}}),ce(S,z)}function Pe(p,S,M){const z=Array.isArray(M)?M:[M],oe={};z.forEach(Ke=>{if(!p.has(Ke))return;const qt=p.get(Ke);p.delete(Ke),oe[Ke]={oldValue:K(qt),newValue:void 0}}),ce(S,oe)}function ie(p){p!=null&&p.children&&(p.children.forEach((S,M)=>{S.index=M}),p.hasChildren=p.children.some(S=>!S.url))}function De(p,S,M){const z=N.get(p);if(!z)throw new Error(`Parent ${p} not found`);Array.isArray(z.children)||(z.children=[]);const oe=typeof M=="number"?Math.max(0,Math.min(M,z.children.length)):z.children.length;z.children.splice(oe,0,S),S.parentId=p,ie(z)}function Ft(p,S){const M=N.get(p);if(!(M!=null&&M.children))return;const z=M.children.findIndex(oe=>oe.id===S);z!==-1&&(M.children.splice(z,1),ie(M))}function le({id:p,parentId:S=null,title:M="Untitled folder",index:z}){const oe=p??`mock-folder-${g++}`,Ke={id:oe,parentId:S,title:M,index:typeof z=="number"?z:0,children:[]};return N.set(oe,Ke),S&&De(S,Ke,z),Ke}function me({id:p,parentId:S,title:M,url:z,index:oe}){if(!S)throw new Error("Bookmarks require a parent folder");const Ke=p??`mock-bookmark-${g++}`,qt={id:Ke,parentId:S,title:M??z??"Untitled",url:z,index:typeof oe=="number"?oe:0};return N.set(Ke,qt),De(S,qt,oe),qt}function et(p,S=!1){if(!p)return null;const M={id:p.id,parentId:p.parentId??void 0,title:p.title,index:p.index};return p.url&&(M.url=p.url),S&&Array.isArray(p.children)&&(M.children=p.children.map(z=>et(z,!0))),M}function el(p){p&&(Array.isArray(p.children)&&[...p.children].forEach(S=>el(S)),N.delete(p.id))}const Xl=le({id:"0",parentId:null,title:""}),bn=le({id:"1",parentId:Xl.id,title:"Bookmarks Bar"});le({id:"2",parentId:Xl.id,title:"Other Bookmarks"}),le({id:"3",parentId:Xl.id,title:"Mobile Bookmarks"});const Al=le({id:"1-reading",parentId:"1",title:"Reading List"}),nr=le({id:"2-inspiration",parentId:"2",title:"Inspiration"});function _n(p){[{title:"Svelte",url:"https://svelte.dev"},{title:"MDN Web Docs",url:"https://developer.mozilla.org"},{title:"GitHub",url:"https://github.com"},{title:"Stack Overflow",url:"https://stackoverflow.com"},{title:"Vite",url:"https://vitejs.dev"}].forEach((z,oe)=>{me({parentId:p,title:z.title,url:z.url,index:oe})});const M=le({id:`${p}-frameworks`,parentId:p,title:"Frameworks"});[{title:"React",url:"https://react.dev"},{title:"Vue.js",url:"https://vuejs.org"},{title:"Angular",url:"https://angular.io"},{title:"Ember.js",url:"https://emberjs.com"},{title:"Lit",url:"https://lit.dev"},{title:"Solid",url:"https://www.solidjs.com"},{title:"Alpine.js",url:"https://alpinejs.dev"},{title:"Preact",url:"https://preact.dev"},{title:"Backbone.js",url:"https://backbonejs.org"},{title:"jQuery",url:"https://jquery.com"},{title:"Next.js",url:"https://nextjs.org"},{title:"Nuxt.js",url:"https://nuxt.com"}].forEach((z,oe)=>{me({parentId:M.id,title:z.title,url:z.url,index:oe})})}le({id:a,parentId:bn.id,title:"Bookmark Dial"}),_n(a);const or=le({id:"bookmarks-bar-tooling",parentId:bn.id,title:"Developer Tools"});ti.forEach((p,S)=>{me({parentId:or.id,title:p.title,url:p.url,index:S})});const xl=le({id:"reading-fiction",parentId:Al.id,title:"Fiction"}),rr=le({id:"reading-fiction-classic",parentId:xl.id,title:"Classic Novels"});it.fiction.classicNovels.forEach((p,S)=>{me({parentId:rr.id,title:p.title,url:p.url,index:S})});const ir=le({id:"reading-fiction-modern",parentId:xl.id,title:"Modern Fiction"});it.fiction.modernFiction.forEach((p,S)=>{me({parentId:ir.id,title:p.title,url:p.url,index:S})});const sr=le({id:"reading-fiction-short",parentId:xl.id,title:"Short Stories"});it.fiction.shortStories.forEach((p,S)=>{me({parentId:sr.id,title:p.title,url:p.url,index:S})});const $l=le({id:"reading-nonfiction",parentId:Al.id,title:"Non-Fiction"}),ar=le({id:"reading-nonfiction-essays",parentId:$l.id,title:"Essays"});it.nonFiction.essays.forEach((p,S)=>{me({parentId:ar.id,title:p.title,url:p.url,index:S})});const cr=le({id:"reading-nonfiction-bio",parentId:$l.id,title:"Biography"});it.nonFiction.biography.forEach((p,S)=>{me({parentId:cr.id,title:p.title,url:p.url,index:S})});const dr=le({id:"reading-nonfiction-history",parentId:$l.id,title:"History"});it.nonFiction.history.forEach((p,S)=>{me({parentId:dr.id,title:p.title,url:p.url,index:S})});const en=le({id:"reading-poetry",parentId:Al.id,title:"Poetry"}),ur=le({id:"reading-poetry-classic",parentId:en.id,title:"Classic Poetry"});it.poetry.classicPoetry.forEach((p,S)=>{me({parentId:ur.id,title:p.title,url:p.url,index:S})});const fr=le({id:"reading-poetry-contemporary",parentId:en.id,title:"Contemporary Poetry"});it.poetry.contemporaryPoetry.forEach((p,S)=>{me({parentId:fr.id,title:p.title,url:p.url,index:S})});const hr=le({id:"reading-poetry-spoken",parentId:en.id,title:"Spoken Word"});it.poetry.spokenWord.forEach((p,S)=>{me({parentId:hr.id,title:p.title,url:p.url,index:S})});const tn=le({id:"reading-academic",parentId:Al.id,title:"Academic"}),gr=le({id:"reading-academic-criticism",parentId:tn.id,title:"Literary Criticism"});it.academic.literaryCriticism.forEach((p,S)=>{me({parentId:gr.id,title:p.title,url:p.url,index:S})});const pr=le({id:"reading-academic-theory",parentId:tn.id,title:"Literary Theory"});it.academic.literaryTheory.forEach((p,S)=>{me({parentId:pr.id,title:p.title,url:p.url,index:S})});const mr=le({id:"reading-academic-journals",parentId:tn.id,title:"Academic Journals"});it.academic.journals.forEach((p,S)=>{me({parentId:mr.id,title:p.title,url:p.url,index:S})}),[{title:"Muz.li",url:"https://muz.li"},{title:"Awwwards",url:"https://www.awwwards.com"},{title:"Dribbble",url:"https://dribbble.com"}].forEach((p,S)=>{me({parentId:nr.id,title:p.title,url:p.url,index:S})});function tl(p){const S=k[p];return{addListener:M=>S.add(M),removeListener:M=>S.delete(M)}}return{runtime:{sendMessage:async p=>{if((p==null?void 0:p.type)==="getFolderId")return{folderId:a};if((p==null?void 0:p.type)==="resetFolderCache"){const S=`mock-folder-${Date.now().toString(36)}`,M=N.get(a);if(M){const oe=M.parentId;oe&&Ft(oe,M.id),el(M)}a=S;const z=le({id:a,parentId:"1",title:"Bookmark Dial"});return _n(z.id),ge(A,"sync",{speedDialFolderId:a,[rl]:{version:il,theme:I.theme,accent:I.accent,titleBackdrop:I.titleBackdrop,groupFoldersTogether:I.groupFoldersTogether,background:{...I.background},folderSelection:{selectedIds:[a],expandedIds:[]}}}),{folderId:a}}return{}}},bookmarks:{onCreated:tl("onCreated"),onChanged:tl("onChanged"),onMoved:tl("onMoved"),onRemoved:tl("onRemoved"),onImportBegan:tl("onImportBegan"),onImportEnded:tl("onImportEnded"),async getTree(){return[et(N.get("0"),!0)]},async getChildren(p){const S=N.get(p);return S!=null&&S.children?S.children.map(M=>et(M,!1)):[]},async getSubTree(p){const S=N.get(p);return S?[et(S,!0)]:[]},async search(p){const S=String((p==null?void 0:p.query)??"").trim().toLowerCase();return S?Array.from(N.values()).filter(M=>!M.url&&(M.title||"").toLowerCase().includes(S)).map(M=>et(M,!1)):[]},async create({parentId:p,title:S,url:M}){const z=M?me({parentId:p,title:S,url:M}):le({parentId:p,title:S});return te("onCreated",z.id,et(z,!0)),et(z,!0)},async update(p,S={}){const M=N.get(p);if(!M)throw new Error("Bookmark not found");const z={};return typeof S.title=="string"&&(M.title=S.title,z.title=S.title),typeof S.url=="string"&&(M.url=S.url,z.url=S.url),te("onChanged",p,z),et(M,!1)},async remove(p){const S=N.get(p);if(!S)throw new Error("Bookmark not found");const M=et(S,!0);S.parentId&&Ft(S.parentId,p),el(S),te("onRemoved",p,{parentId:M.parentId??null,node:M})},async move(p,{parentId:S,index:M}){const z=N.get(p);if(!z)throw new Error("Bookmark not found");const oe=z.parentId??null;return oe&&Ft(oe,p),De(S,z,M),te("onMoved",p,{parentId:S,oldParentId:oe,index:M}),et(z,!1)}},storage:{local:{async get(p){return Y(P,p)},async set(p){ge(P,"local",p)},async remove(p){Pe(P,"local",p)}},sync:{async get(p){return Y(A,p)},async set(p){ge(A,"sync",p)},async remove(p){Pe(A,"sync",p)}},onChanged:{addListener(p){E.add(p)},removeListener(p){E.delete(p)}}}}}function Mo(a){vr.call(this,l,a)}function Ao(a){zt[a?"unshift":"push"](()=>{Be=a,t(25,Be)})}const jo=a=>xt(a.id),Ho=a=>gl(a.id),No=a=>St(a.currentTarget.checked),Oo=a=>ml(a.id),zo=a=>pl(a.currentTarget.checked),Do=a=>At(a.currentTarget.value),Ro=a=>$t(a.currentTarget.checked),Uo=()=>Le("default"),Go=()=>Le("swapped");function Wo(a){zt[a?"unshift":"push"](()=>{he=a,t(2,he)})}const Vo=a=>Kl(a.id),qo=a=>Yl(a),Qo=a=>Zl(a.id),Jo=a=>Jl(a.id),Ko=a=>Tl(a.id),Yo=a=>Kl(a.id),Zo=a=>Yl(a),Xo=a=>Zl(a.id),xo=a=>Jl(a.id),$o=a=>Tl(a.id),er=a=>Tl(a.id);function tr(a){zt[a?"unshift":"push"](()=>{Fe=a,t(24,Fe)})}function lr(a){zt[a?"unshift":"push"](()=>{$=a,t(23,$)})}return l.$$.update=()=>{l.$$.dirty[2]&256&&t(71,n=new Set(rt.slice(0,Ul).map(a=>a.id))),l.$$.dirty[2]&128&&t(72,o=new Set(Pt.slice(0,Gl).map(a=>a.id))),l.$$.dirty[0]&40|l.$$.dirty[2]&512&&!Ne&&y.background.mode==="gradient"&&y.background.gradientId&&!n.has(y.background.gradientId)&&t(5,Ne=!0),l.$$.dirty[0]&32|l.$$.dirty[2]&256&&t(27,r=Ne?rt:rt.slice(0,Ul)),l.$$.dirty[0]&72|l.$$.dirty[2]&1024&&!ot&&y.accent&&!o.has(y.accent)&&t(6,ot=!0),l.$$.dirty[0]&64|l.$$.dirty[2]&128&&t(26,s=ot?Pt:Pt.slice(0,Gl)),l.$$.dirty[0]&8|l.$$.dirty[2]&122&&!ht&&Ge&&(Gt(y.theme),It(y.accent),Wt(y.background.gradientId),(gt||re||wt)&&Ee(),t(67,wt=!0),t(68,gt=!1),t(65,re=!1)),l.$$.dirty[0]&16&&typeof document<"u"&&document.body.classList.toggle("settings-open",ae),l.$$.dirty[0]&20&&ae&&cn().then(()=>{he==null||he.focus()}),l.$$.dirty[0]&3|l.$$.dirty[2]&5&&t(20,kt=(()=>{const a=ke&&Me?Me:ue,g=new Set(a??[]);if(ve.size){const k=Bt();ve.forEach(E=>{var A,N;let P=((A=k.nodesById[E])==null?void 0:A.parentId)??null;for(;P;)g.add(P),P=((N=k.nodesById[P])==null?void 0:N.parentId)??null})}return g})())},[ke,ve,he,y,ae,Ne,ot,L,C,V,q,J,Te,ct,We,dt,qe,pe,we,be,kt,ye,nt,$,Fe,Be,s,r,c,b,_,w,Tt,Fl,ut,Bl,xt,gl,St,pl,At,Le,$t,ml,jt,v,Q,Se,$e,Ll,bt,ko,wo,Io,Jl,Kl,Tl,Yl,Zl,Fo,Bo,Eo,ue,Ge,Me,re,ht,wt,gt,Pt,rt,n,o,Mo,Ao,jo,Ho,No,Oo,zo,Do,Ro,Uo,Go,Wo,Vo,qo,Qo,Jo,Ko,Yo,Zo,Xo,xo,$o,er,tr,lr]}class Ii extends Vl{constructor(e){super(),Wl(this,e,yi,gi,Il,{},null,[-1,-1,-1,-1,-1,-1])}}new Ii({target:document.getElementById("app")});
