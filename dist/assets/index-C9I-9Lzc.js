var si=Object.defineProperty;var ai=(n,e,t)=>e in n?si(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Pn=(n,e,t)=>ai(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(l){if(l.ep)return;l.ep=!0;const r=t(l);fetch(l.href,r)}})();function $(){}const tn=n=>n;function Bl(n){return n()}function ko(){return Object.create(null)}function Le(n){n.forEach(Bl)}function Ae(n){return typeof n=="function"}function Pe(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let un;function _o(n,e){return n===e?!0:(un||(un=document.createElement("a")),un.href=e,n===un.href)}function ci(n){return Object.keys(n).length===0}function Il(n,...e){if(n==null){for(const o of e)o(void 0);return $}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Gt(n){let e;return Il(n,t=>e=t)(),e}function vl(n,e,t){n.$$.on_destroy.push(Il(e,t))}function po(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const Tl=typeof window<"u";let Sn=Tl?()=>window.performance.now():()=>Date.now(),Yn=Tl?n=>requestAnimationFrame(n):$;const Ht=new Set;function Dl(n){Ht.forEach(e=>{e.c(n)||(Ht.delete(e),e.f())}),Ht.size!==0&&Yn(Dl)}function Cn(n){let e;return Ht.size===0&&Yn(Dl),{promise:new Promise(t=>{Ht.add(e={c:n,f:t})}),abort(){Ht.delete(e)}}}function b(n,e){n.appendChild(e)}function Fl(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function ui(n){const e=C("style");return e.textContent="/* empty */",fi(Fl(n),e),e.sheet}function fi(n,e){return b(n.head||n,e),e.sheet}function z(n,e,t){n.insertBefore(e,t||null)}function q(n){n.parentNode&&n.parentNode.removeChild(n)}function di(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function C(n){return document.createElement(n)}function ot(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function fe(n){return document.createTextNode(n)}function U(){return fe(" ")}function qe(){return fe("")}function V(n,e,t,o){return n.addEventListener(e,t,o),()=>n.removeEventListener(e,t,o)}function gi(n){return function(e){return e.preventDefault(),n.call(this,e)}}function hi(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function c(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function mi(n){return Array.from(n.childNodes)}function Ce(n,e){e=""+e,n.data!==e&&(n.data=e)}function Ut(n,e){n.value=e??""}function at(n,e,t,o){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function wo(n,e,t){for(let o=0;o<n.options.length;o+=1){const l=n.options[o];if(l.__value===e){l.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function bi(n){const e=n.querySelector(":checked");return e&&e.__value}function _e(n,e,t){n.classList.toggle(e,!!t)}function Ml(n,e,{bubbles:t=!1,cancelable:o=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:o})}const wn=new Map;let yn=0;function ki(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function _i(n,e){const t={stylesheet:ui(e),rules:{}};return wn.set(n,t),t}function xt(n,e,t,o,l,r,s,i=0){const a=16.666/o;let u=`{
`;for(let S=0;S<=1;S+=a){const y=e+(t-e)*r(S);u+=S*100+`%{${s(y,1-y)}}
`}const d=u+`100% {${s(t,1-t)}}
}`,_=`__svelte_${ki(d)}_${i}`,g=Fl(n),{stylesheet:h,rules:m}=wn.get(g)||_i(g,n);m[_]||(m[_]=!0,h.insertRule(`@keyframes ${_} ${d}`,h.cssRules.length));const k=n.style.animation||"";return n.style.animation=`${k?`${k}, `:""}${_} ${o}ms linear ${l}ms 1 both`,yn+=1,_}function $t(n,e){const t=(n.style.animation||"").split(", "),o=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),l=t.length-o.length;l&&(n.style.animation=o.join(", "),yn-=l,yn||pi())}function pi(){Yn(()=>{yn||(wn.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&q(e)}),wn.clear())})}function wi(n,e,t,o){if(!e)return $;const l=n.getBoundingClientRect();if(e.left===l.left&&e.right===l.right&&e.top===l.top&&e.bottom===l.bottom)return $;const{delay:r=0,duration:s=300,easing:i=tn,start:a=Sn()+r,end:u=a+s,tick:d=$,css:_}=t(n,{from:e,to:l},o);let g=!0,h=!1,m;function k(){_&&(m=xt(n,0,1,s,r,i,_)),r||(h=!0)}function S(){_&&$t(n,m),g=!1}return Cn(y=>{if(!h&&y>=a&&(h=!0),h&&y>=u&&(d(1,0),S()),!g)return!1;if(h){const I=y-a,L=0+1*i(I/s);d(L,1-L)}return!0}),k(),d(0,1),S}function yi(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:o}=e,l=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=o,El(n,l)}}function El(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const o=getComputedStyle(n),l=o.transform==="none"?"":o.transform;n.style.transform=`${l} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let en;function Jt(n){en=n}function Al(){if(!en)throw new Error("Function called outside component initialization");return en}function Ll(n){Al().$$.on_mount.push(n)}function Ol(){const n=Al();return(e,t,{cancelable:o=!1}={})=>{const l=n.$$.callbacks[e];if(l){const r=Ml(e,t,{cancelable:o});return l.slice().forEach(s=>{s.call(n,r)}),!r.defaultPrevented}return!0}}function Si(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(o=>o.call(this,e))}const Pt=[],lt=[];let Rt=[];const yo=[],Pl=Promise.resolve();let Nn=!1;function Ul(){Nn||(Nn=!0,Pl.then(Hl))}function Qn(){return Ul(),Pl}function ut(n){Rt.push(n)}const Un=new Set;let At=0;function Hl(){if(At!==0)return;const n=en;do{try{for(;At<Pt.length;){const e=Pt[At];At++,Jt(e),Ci(e.$$)}}catch(e){throw Pt.length=0,At=0,e}for(Jt(null),Pt.length=0,At=0;lt.length;)lt.pop()();for(let e=0;e<Rt.length;e+=1){const t=Rt[e];Un.has(t)||(Un.add(t),t())}Rt.length=0}while(Pt.length);for(;yo.length;)yo.pop()();Nn=!1,Un.clear(),Jt(n)}function Ci(n){if(n.fragment!==null){n.update(),Le(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(ut)}}function Bi(n){const e=[],t=[];Rt.forEach(o=>n.indexOf(o)===-1?e.push(o):t.push(o)),t.forEach(o=>o()),Rt=e}let Kt;function Xn(){return Kt||(Kt=Promise.resolve(),Kt.then(()=>{Kt=null})),Kt}function vt(n,e,t){n.dispatchEvent(Ml(`${e?"intro":"outro"}${t}`))}const bn=new Set;let ct;function Ge(){ct={r:0,c:[],p:ct}}function Ne(){ct.r||Le(ct.c),ct=ct.p}function X(n,e){n&&n.i&&(bn.delete(n),n.i(e))}function J(n,e,t,o){if(n&&n.o){if(bn.has(n))return;bn.add(n),ct.c.push(()=>{bn.delete(n),o&&(t&&n.d(1),o())}),n.o(e)}else o&&o()}const Zn={duration:0};function Ii(n,e,t){const o={direction:"in"};let l=e(n,t,o),r=!1,s,i,a=0;function u(){s&&$t(n,s)}function d(){const{delay:g=0,duration:h=300,easing:m=tn,tick:k=$,css:S}=l||Zn;S&&(s=xt(n,0,1,h,g,m,S,a++)),k(0,1);const y=Sn()+g,I=y+h;i&&i.abort(),r=!0,ut(()=>vt(n,!0,"start")),i=Cn(L=>{if(r){if(L>=I)return k(1,0),vt(n,!0,"end"),u(),r=!1;if(L>=y){const P=m((L-y)/h);k(P,1-P)}}return r})}let _=!1;return{start(){_||(_=!0,$t(n),Ae(l)?(l=l(o),Xn().then(d)):d())},invalidate(){_=!1},end(){r&&(u(),r=!1)}}}function vi(n,e,t){const o={direction:"out"};let l=e(n,t,o),r=!0,s;const i=ct;i.r+=1;let a;function u(){const{delay:d=0,duration:_=300,easing:g=tn,tick:h=$,css:m}=l||Zn;m&&(s=xt(n,1,0,_,d,g,m));const k=Sn()+d,S=k+_;ut(()=>vt(n,!1,"start")),"inert"in n&&(a=n.inert,n.inert=!0),Cn(y=>{if(r){if(y>=S)return h(0,1),vt(n,!1,"end"),--i.r||Le(i.c),!1;if(y>=k){const I=g((y-k)/_);h(1-I,I)}}return r})}return Ae(l)?Xn().then(()=>{l=l(o),u()}):u(),{end(d){d&&"inert"in n&&(n.inert=a),d&&l.tick&&l.tick(1,0),r&&(s&&$t(n,s),r=!1)}}}function fn(n,e,t,o){let r=e(n,t,{direction:"both"}),s=o?0:1,i=null,a=null,u=null,d;function _(){u&&$t(n,u)}function g(m,k){const S=m.b-s;return k*=Math.abs(S),{a:s,b:m.b,d:S,duration:k,start:m.start,end:m.start+k,group:m.group}}function h(m){const{delay:k=0,duration:S=300,easing:y=tn,tick:I=$,css:L}=r||Zn,P={start:Sn()+k,b:m};m||(P.group=ct,ct.r+=1),"inert"in n&&(m?d!==void 0&&(n.inert=d):(d=n.inert,n.inert=!0)),i||a?a=P:(L&&(_(),u=xt(n,s,m,S,k,y,L)),m&&I(0,1),i=g(P,S),ut(()=>vt(n,m,"start")),Cn(v=>{if(a&&v>a.start&&(i=g(a,S),a=null,vt(n,i.b,"start"),L&&(_(),u=xt(n,s,i.b,i.duration,0,y,r.css))),i){if(v>=i.end)I(s=i.b,1-s),vt(n,i.b,"end"),a||(i.b?_():--i.group.r||Le(i.group.c)),i=null;else if(v>=i.start){const D=v-i.start;s=i.a+i.d*y(D/i.duration),I(s,1-s)}}return!!(i||a)}))}return{run(m){Ae(r)?Xn().then(()=>{r=r({direction:m?"in":"out"}),h(m)}):h(m)},end(){_(),i=a=null}}}function ge(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Nt(n,e){n.d(1),e.delete(n.key)}function Tt(n,e){J(n,1,1,()=>{e.delete(n.key)})}function Ti(n,e){n.f(),Tt(n,e)}function tt(n,e,t,o,l,r,s,i,a,u,d,_){let g=n.length,h=r.length,m=g;const k={};for(;m--;)k[n[m].key]=m;const S=[],y=new Map,I=new Map,L=[];for(m=h;m--;){const A=_(l,r,m),N=t(A);let M=s.get(N);M?L.push(()=>M.p(A,e)):(M=u(N,A),M.c()),y.set(N,S[m]=M),N in k&&I.set(N,Math.abs(m-k[N]))}const P=new Set,v=new Set;function D(A){X(A,1),A.m(i,d),s.set(A.key,A),d=A.first,h--}for(;g&&h;){const A=S[h-1],N=n[g-1],M=A.key,j=N.key;A===N?(d=A.first,g--,h--):y.has(j)?!s.has(M)||P.has(M)?D(A):v.has(j)?g--:I.get(M)>I.get(j)?(v.add(M),D(A)):(P.add(j),g--):(a(N,s),g--)}for(;g--;){const A=n[g];y.has(A.key)||a(A,s)}for(;h;)D(S[h-1]);return Le(L),S}function Ee(n){n&&n.c()}function ve(n,e,t){const{fragment:o,after_update:l}=n.$$;o&&o.m(e,t),ut(()=>{const r=n.$$.on_mount.map(Bl).filter(Ae);n.$$.on_destroy?n.$$.on_destroy.push(...r):Le(r),n.$$.on_mount=[]}),l.forEach(ut)}function Te(n,e){const t=n.$$;t.fragment!==null&&(Bi(t.after_update),Le(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Di(n,e){n.$$.dirty[0]===-1&&(Pt.push(n),Ul(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Ue(n,e,t,o,l,r,s=null,i=[-1]){const a=en;Jt(n);const u=n.$$={fragment:null,ctx:[],props:r,update:$,not_equal:l,bound:ko(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ko(),dirty:i,skip_bound:!1,root:e.target||a.$$.root};s&&s(u.root);let d=!1;if(u.ctx=t?t(n,e.props||{},(_,g,...h)=>{const m=h.length?h[0]:g;return u.ctx&&l(u.ctx[_],u.ctx[_]=m)&&(!u.skip_bound&&u.bound[_]&&u.bound[_](m),d&&Di(n,_)),g}):[],u.update(),d=!0,Le(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const _=mi(e.target);u.fragment&&u.fragment.l(_),_.forEach(q)}else u.fragment&&u.fragment.c();e.intro&&X(n.$$.fragment),ve(n,e.target,e.anchor),Hl()}Jt(a)}class He{constructor(){Pn(this,"$$");Pn(this,"$$set")}$destroy(){Te(this,1),this.$destroy=$}$on(e,t){if(!Ae(t))return $;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(t),()=>{const l=o.indexOf(t);l!==-1&&o.splice(l,1)}}$set(e){this.$$set&&!ci(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Fi="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Fi);const Lt=[];function Mi(n,e=$){let t;const o=new Set;function l(i){if(Pe(n,i)&&(n=i,t)){const a=!Lt.length;for(const u of o)u[1](),Lt.push(u,n);if(a){for(let u=0;u<Lt.length;u+=2)Lt[u][0](Lt[u+1]);Lt.length=0}}}function r(i){l(i(n))}function s(i,a=$){const u=[i,a];return o.add(u),o.size===1&&(t=e(l,r)||$),i(n),()=>{o.delete(u),o.size===0&&t&&(t(),t=null)}}return{set:l,update:r,subscribe:s}}const Ei={nodesById:{},rootIds:[]},xe=Mi(Ei),Rl={subscribe:xe.subscribe};function Jn(n,{includeChildren:e=!1}={}){const t=Array.isArray(n.children),o=t?[...n.children]:[],l=e?o.sort((i,a)=>(i.index??0)-(a.index??0)):[],s=o.filter(i=>!i.url).length>0;return{id:n.id,parentId:n.parentId??null,title:n.title??"",url:n.url??null,index:typeof n.index=="number"?n.index:0,isFolder:!n.url,childrenIds:e?l.map(i=>i.id):[],childrenLoaded:e,hasChildren:!n.url&&(e||t?s:!0)}}function Gl(n){xe.update(e=>{const t={...e.nodesById};let o=[...e.rootIds];for(const l of n){const r=t[l.id];t[l.id]=r?{...r,...l}:l,!l.parentId&&!o.includes(l.id)&&o.push(l.id)}return o.sort((l,r)=>{const s=t[l],i=t[r];return((s==null?void 0:s.index)??0)-((i==null?void 0:i.index)??0)}),{...e,nodesById:t,rootIds:o}})}function qn(n,e,t){xe.update(o=>{const l={...o.nodesById},r=l[n];if(!r)return o;const s=Array.from(new Set(e));s.sort((a,u)=>{const d=l[a],_=l[u];return((d==null?void 0:d.index)??0)-((_==null?void 0:_.index)??0)});const i=s.some(a=>{var u;return(u=l[a])==null?void 0:u.isFolder});return l[n]={...r,childrenIds:s,childrenLoaded:t?!0:r.childrenLoaded,hasChildren:i},{...o,nodesById:l}})}async function Ai(n){const e=await n.bookmarks.getTree(),t=Array.isArray(e)?e[0]:null,l=((t==null?void 0:t.children)??[]).map(r=>Jn(r,{includeChildren:!1}));return xe.set({nodesById:Object.fromEntries(l.map(r=>[r.id,r])),rootIds:l.map(r=>r.id)}),l.map(r=>r.id)}async function Li(n){const e=await n.bookmarks.getTree(),t=Array.isArray(e)?e[0]:null;if(!t)return[];const o=[],l=[];function r(i,a=!1){const _=(Array.isArray(i.children)?[...i.children]:[]).sort((m,k)=>(m.index??0)-(k.index??0)),g=_.filter(m=>!m.url),h={id:i.id,parentId:i.parentId??null,title:i.title??"",url:i.url??null,index:typeof i.index=="number"?i.index:0,isFolder:!i.url,childrenIds:_.map(m=>m.id),childrenLoaded:!0,hasChildren:g.length>0};i.url||(o.push(h),a&&l.push(i.id));for(const m of g)r(m,!1)}const s=t.children??[];for(const i of s)r(i,!0);return xe.set({nodesById:Object.fromEntries(o.map(i=>[i.id,i])),rootIds:l}),l}function pt(){return Gt(xe)}function Nl(n){return Gt(xe).nodesById[n]}async function Yt(n,e){const t=await n.bookmarks.getSubTree(e),o=Array.isArray(t)?t[0]:null;if(!o)return{folderIds:[]};const l=[o],r=[],s=[];for(;l.length;){const i=l.shift(),a=Array.isArray(i.children),u=Jn(i,{includeChildren:a});r.push(u),i.url||s.push(i.id),a&&l.push(...i.children)}return Gl(r),r.forEach(i=>{if(i.isFolder&&qn(i.id,i.childrenIds,!0),i.parentId){const u=Gt(xe).nodesById[i.parentId];if(u){const d=u.childrenIds?[...u.childrenIds]:[];d.push(i.id),qn(i.parentId,d,u.childrenLoaded)}}}),{folderIds:s}}function kn(n){const e=Gt(xe),t=[];let o=e.nodesById[n];for(;o&&(o.title&&t.unshift(o.title),!!o.parentId);)o=e.nodesById[o.parentId];return t}function Oi(n){const e=Jn(n,{includeChildren:!1});if(Gl([e]),e.parentId){const t=Nl(e.parentId),o=t!=null&&t.childrenIds?[...t.childrenIds]:[];o.splice(e.index??o.length,0,e.id),qn(e.parentId,o,t==null?void 0:t.childrenLoaded)}}function Pi(n,e){xe.update(t=>{const o=t.nodesById[n];if(!o)return t;const l={...t.nodesById,[n]:{...o,...e}};return{...t,nodesById:l}})}function Ui(n,{parentId:e,oldParentId:t,index:o}){xe.update(l=>{const r={...l.nodesById},s=r[n];if(!s)return l;const i={...s,parentId:e,index:typeof o=="number"?o:s.index};if(r[n]=i,t&&r[t]){const a=r[t],u=(a.childrenIds??[]).filter(_=>_!==n),d=u.some(_=>{var g;return(g=r[_])==null?void 0:g.isFolder});r[t]={...a,childrenIds:u,hasChildren:d}}if(e&&r[e]){const a=r[e],u=[...a.childrenIds??[]];u.includes(n)||u.splice(o??u.length,0,n);const d=u.some(_=>{var g;return(g=r[_])==null?void 0:g.isFolder});r[e]={...a,childrenIds:u,hasChildren:d}}return{...l,nodesById:r}})}function Hi(n,{parentId:e}){xe.update(t=>{var i;const o={...t.nodesById},l=new Set([n]),r=[n];for(;r.length;){const a=r.pop(),u=o[a];u&&(i=u.childrenIds)!=null&&i.length&&u.childrenIds.forEach(d=>{l.has(d)||(l.add(d),r.push(d))})}l.forEach(a=>{delete o[a]});let s=t.rootIds;if(s.includes(n)&&(s=s.filter(a=>a!==n)),e&&o[e]){const a=o[e],u=(a.childrenIds??[]).filter(_=>_!==n),d=u.some(_=>{var g;return(g=o[_])==null?void 0:g.isFolder});o[e]={...a,childrenIds:u,hasChildren:d}}return{...t,nodesById:o,rootIds:s}})}function dn(n){var l;const e=Gt(xe),t=[],o=[n];for(;o.length;){const r=o.pop(),s=e.nodesById[r];s&&s.isFolder&&(t.push(r),(l=s.childrenIds)!=null&&l.length&&s.childrenIds.forEach(i=>{const a=e.nodesById[i];a!=null&&a.isFolder&&o.push(i)}))}return t}function Ri(){const n=Gt(xe);return Object.values(n.nodesById).filter(e=>e.isFolder).map(e=>({id:e.id,title:e.title??"",path:kn(e.id)}))}function So(n,e,t){const o=n.slice();return o[26]=e[t],o}function Co(n){let e,t,o,l,r,s,i,a,u,d,_,g,h,m=(n[12].title||"Untitled folder")+"",k,S,y,I,L,P,v,D=n[11]&&n[15]&&Bo(n);return{c(){var A;e=C("li"),t=C("div"),o=C("button"),l=ot("svg"),r=ot("path"),u=U(),d=C("label"),_=C("input"),g=U(),h=C("span"),k=fe(m),y=U(),D&&D.c(),c(r,"d","M6 4.5 10 8l-4 3.5"),c(r,"fill","none"),c(r,"stroke","currentColor"),c(r,"stroke-width","1.6"),c(r,"stroke-linecap","round"),c(r,"stroke-linejoin","round"),c(l,"viewBox","0 0 16 16"),c(l,"aria-hidden","true"),c(l,"focusable","false"),c(o,"type","button"),c(o,"class","folder-node__expander svelte-ux2jgn"),c(o,"aria-hidden",s=!n[11]),c(o,"aria-label",i=n[15]?"Collapse folder":"Expand folder"),o.disabled=a=!n[11],_e(o,"hidden",!n[11]),c(_,"type","checkbox"),c(_,"class","folder-node__checkbox svelte-ux2jgn"),c(h,"class","folder-node__title svelte-ux2jgn"),c(h,"title",S=n[12].title||"Untitled folder"),c(d,"class","folder-node__label svelte-ux2jgn"),c(t,"class","folder-node__row svelte-ux2jgn"),c(t,"style",n[16]),c(e,"class","folder-node svelte-ux2jgn"),c(e,"data-expanded",n[15]),c(e,"data-depth",n[1]),c(e,"data-match",I=((A=n[5])==null?void 0:A.has(n[0]))??!1)},m(A,N){z(A,e,N),b(e,t),b(t,o),b(o,l),b(l,r),b(t,u),b(t,d),b(d,_),n[24](_),b(d,g),b(d,h),b(h,k),b(e,y),D&&D.m(e,null),L=!0,P||(v=[V(o,"click",n[17]),V(_,"change",n[18])],P=!0)},p(A,N){var M;(!L||N&2048&&s!==(s=!A[11]))&&c(o,"aria-hidden",s),(!L||N&32768&&i!==(i=A[15]?"Collapse folder":"Expand folder"))&&c(o,"aria-label",i),(!L||N&2048&&a!==(a=!A[11]))&&(o.disabled=a),(!L||N&2048)&&_e(o,"hidden",!A[11]),(!L||N&4096)&&m!==(m=(A[12].title||"Untitled folder")+"")&&Ce(k,m),(!L||N&4096&&S!==(S=A[12].title||"Untitled folder"))&&c(h,"title",S),A[11]&&A[15]?D?(D.p(A,N),N&34816&&X(D,1)):(D=Bo(A),D.c(),X(D,1),D.m(e,null)):D&&(Ge(),J(D,1,1,()=>{D=null}),Ne()),(!L||N&32768)&&c(e,"data-expanded",A[15]),(!L||N&2)&&c(e,"data-depth",A[1]),(!L||N&33&&I!==(I=((M=A[5])==null?void 0:M.has(A[0]))??!1))&&c(e,"data-match",I)},i(A){L||(X(D),L=!0)},o(A){J(D),L=!1},d(A){A&&q(e),n[24](null),D&&D.d(),P=!1,Le(v)}}}function Bo(n){let e,t=[],o=new Map,l,r=ge(n[13]);const s=i=>i[26];for(let i=0;i<r.length;i+=1){let a=So(n,r,i),u=s(a);o.set(u,t[i]=Io(u,a))}return{c(){e=C("ul");for(let i=0;i<t.length;i+=1)t[i].c();c(e,"class","folder-node__children svelte-ux2jgn")},m(i,a){z(i,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(i,a){a&9214&&(r=ge(i[13]),Ge(),t=tt(t,a,s,1,i,r,o,e,Tt,Io,null,So),Ne())},i(i){if(!l){for(let a=0;a<r.length;a+=1)X(t[a]);l=!0}},o(i){for(let a=0;a<t.length;a+=1)J(t[a]);l=!1},d(i){i&&q(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Io(n,e){let t,o,l;return o=new ql({props:{nodeId:e[26],depth:e[1]+1,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[5],selectedIds:e[6],toggleSelection:e[7],toggleExpansion:e[8],getCheckboxState:e[9]}}),{key:n,first:null,c(){t=qe(),Ee(o.$$.fragment),this.first=t},m(r,s){z(r,t,s),ve(o,r,s),l=!0},p(r,s){e=r;const i={};s&8192&&(i.nodeId=e[26]),s&2&&(i.depth=e[1]+1),s&4&&(i.expandedIds=e[2]),s&8&&(i.loadingIds=e[3]),s&16&&(i.visibleIds=e[4]),s&32&&(i.searchMatches=e[5]),s&64&&(i.selectedIds=e[6]),s&128&&(i.toggleSelection=e[7]),s&256&&(i.toggleExpansion=e[8]),s&512&&(i.getCheckboxState=e[9]),o.$set(i)},i(r){l||(X(o.$$.fragment,r),l=!0)},o(r){J(o.$$.fragment,r),l=!1},d(r){r&&q(t),Te(o,r)}}}function Gi(n){let e,t,o=n[14]&&Co(n);return{c(){o&&o.c(),e=qe()},m(l,r){o&&o.m(l,r),z(l,e,r),t=!0},p(l,[r]){l[14]?o?(o.p(l,r),r&16384&&X(o,1)):(o=Co(l),o.c(),X(o,1),o.m(e.parentNode,e)):o&&(Ge(),J(o,1,1,()=>{o=null}),Ne())},i(l){t||(X(o),t=!0)},o(l){J(o),t=!1},d(l){l&&q(e),o&&o.d(l)}}}function Ni(n,e,t){let o,l,r,s,i,a,u,d,_,g;vl(n,Rl,Q=>t(23,g=Q));let{nodeId:h}=e,{depth:m=0}=e,{expandedIds:k}=e,{loadingIds:S}=e,{visibleIds:y}=e,{searchMatches:I}=e,{selectedIds:L}=e,{toggleSelection:P}=e,{toggleExpansion:v}=e,{getCheckboxState:D}=e,A;const N=`--depth: ${m}`;function M(Q){Q.stopPropagation(),i&&(v==null||v(h))}function j(Q){Q.stopPropagation(),P==null||P(h)}function K(Q){lt[Q?"unshift":"push"](()=>{A=Q,t(10,A),t(21,d),t(9,D),t(6,L),t(0,h)})}return n.$$set=Q=>{"nodeId"in Q&&t(0,h=Q.nodeId),"depth"in Q&&t(1,m=Q.depth),"expandedIds"in Q&&t(2,k=Q.expandedIds),"loadingIds"in Q&&t(3,S=Q.loadingIds),"visibleIds"in Q&&t(4,y=Q.visibleIds),"searchMatches"in Q&&t(5,I=Q.searchMatches),"selectedIds"in Q&&t(6,L=Q.selectedIds),"toggleSelection"in Q&&t(7,P=Q.toggleSelection),"toggleExpansion"in Q&&t(8,v=Q.toggleExpansion),"getCheckboxState"in Q&&t(9,D=Q.getCheckboxState)},n.$$.update=()=>{var Q,te;n.$$.dirty&8388608&&t(22,o=g),n.$$.dirty&4194305&&t(12,l=(Q=o==null?void 0:o.nodesById)==null?void 0:Q[h]),n.$$.dirty&4096&&t(20,r=(l==null?void 0:l.isFolder)??!1),n.$$.dirty&4198400&&t(13,s=((te=l==null?void 0:l.childrenIds)==null?void 0:te.filter(ie=>{var ee;const R=(ee=o==null?void 0:o.nodesById)==null?void 0:ee[ie];return R==null?void 0:R.isFolder}))??[]),n.$$.dirty&1056768&&t(11,i=r&&s.length>0),n.$$.dirty&2053&&t(15,a=i&&(k==null?void 0:k.has(h))),n.$$.dirty&9&&(S==null||S.has(h)),n.$$.dirty&17&&t(19,u=!y||y.has(h)),n.$$.dirty&577&&t(21,d=D&&L?D(h):"none"),n.$$.dirty&2098176&&A&&(d==="partial"?(t(10,A.indeterminate=!0,A),t(10,A.checked=!1,A)):(t(10,A.indeterminate=!1,A),t(10,A.checked=d==="selected",A))),n.$$.dirty&1576960&&t(14,_=!!(l&&r&&u))},[h,m,k,S,y,I,L,P,v,D,A,i,l,s,_,a,N,M,j,u,r,d,o,g,K]}class ql extends He{constructor(e){super(),Ue(this,e,Ni,Gi,Pe,{nodeId:0,depth:1,expandedIds:2,loadingIds:3,visibleIds:4,searchMatches:5,selectedIds:6,toggleSelection:7,toggleExpansion:8,getCheckboxState:9})}}function vo(n,e,t){const o=n.slice();return o[22]=e[t],o}function To(n,e,t){const o=n.slice();return o[25]=e[t],o}function Do(n){let e,t,o,l,r,s,i,a,u,d,_,g,h,m,k,S,y,I,L,P,v,D,A,N,M,j,K=n[9]===1?"":"s",Q,te,ie,R,ee,O,x,oe,ce=n[10]===1?"":"s",H,pe,B,Y,we,De,ne,Fe,T,ke,ze;const Ye=[zi,qi],Se=[];function je(We,be){return We[1].length===0?0:1}h=je(n),m=Se[h]=Ye[h](n);let me=n[9]>0&&Mo(n);function Ve(We,be){return We[8].length===0?ji:Wi}let Re=Ve(n),Be=Re(n);return{c(){e=C("div"),t=C("section"),o=C("header"),l=C("div"),l.innerHTML='<h2 id="folder-modal-title">Select bookmark folders</h2> <p class="folder-modal__hint svelte-gn1lpb">Choose one or more folders to show in your new tab. Selecting a folder includes all of its subfolders.</p>',r=U(),s=C("button"),s.textContent="√ó",i=U(),a=C("div"),u=C("input"),d=U(),_=C("div"),g=C("div"),m.c(),k=U(),S=C("aside"),y=C("header"),I=C("h3"),I.textContent="Selected folders",L=U(),me&&me.c(),P=U(),Be.c(),v=U(),D=C("footer"),A=C("div"),N=C("span"),M=fe(n[9]),j=fe(" folder"),Q=fe(K),te=fe(" selected"),ie=U(),R=C("span"),R.textContent="‚Ä¢",ee=U(),O=C("span"),x=fe(n[10]),oe=fe(" bookmark"),H=fe(ce),pe=U(),B=C("div"),Y=C("button"),Y.textContent="Cancel",we=U(),De=C("button"),ne=fe("Confirm selection"),c(s,"type","button"),c(s,"class","folder-modal__close svelte-gn1lpb"),c(s,"aria-label","Close"),c(o,"class","folder-modal__header svelte-gn1lpb"),c(u,"type","search"),c(u,"placeholder","Search folders"),u.value=n[5],c(u,"class","svelte-gn1lpb"),c(a,"class","folder-modal__search svelte-gn1lpb"),c(g,"class","folder-modal__tree svelte-gn1lpb"),c(y,"class","svelte-gn1lpb"),c(S,"class","folder-modal__summary svelte-gn1lpb"),c(_,"class","folder-modal__body svelte-gn1lpb"),c(R,"aria-hidden","true"),c(A,"class","folder-modal__totals svelte-gn1lpb"),c(Y,"type","button"),c(Y,"class","ghost-button svelte-gn1lpb"),c(De,"type","button"),c(De,"class","primary-button svelte-gn1lpb"),De.disabled=Fe=n[9]===0,c(B,"class","folder-modal__actions svelte-gn1lpb"),c(D,"class","folder-modal__footer svelte-gn1lpb"),c(t,"class","folder-modal svelte-gn1lpb"),c(t,"role","dialog"),c(t,"aria-modal","true"),c(t,"aria-labelledby","folder-modal-title"),c(e,"class","modal-overlay svelte-gn1lpb"),c(e,"role","presentation")},m(We,be){z(We,e,be),b(e,t),b(t,o),b(o,l),b(o,r),b(o,s),b(t,i),b(t,a),b(a,u),n[21](u),b(t,d),b(t,_),b(_,g),Se[h].m(g,null),b(_,k),b(_,S),b(S,y),b(y,I),b(y,L),me&&me.m(y,null),b(S,P),Be.m(S,null),b(t,v),b(t,D),b(D,A),b(A,N),b(N,M),b(N,j),b(N,Q),b(N,te),b(A,ie),b(A,R),b(A,ee),b(A,O),b(O,x),b(O,oe),b(O,H),b(D,pe),b(D,B),b(B,Y),b(B,we),b(B,De),b(De,ne),T=!0,ke||(ze=[V(s,"click",function(){Ae(n[14])&&n[14].apply(this,arguments)}),V(u,"input",n[19]),V(Y,"click",function(){Ae(n[14])&&n[14].apply(this,arguments)}),V(De,"click",function(){Ae(n[15])&&n[15].apply(this,arguments)}),V(e,"click",n[18])],ke=!0)},p(We,be){n=We,(!T||be&32&&u.value!==n[5])&&(u.value=n[5]);let Qe=h;h=je(n),h===Qe?Se[h].p(n,be):(Ge(),J(Se[Qe],1,1,()=>{Se[Qe]=null}),Ne(),m=Se[h],m?m.p(n,be):(m=Se[h]=Ye[h](n),m.c()),X(m,1),m.m(g,null)),n[9]>0?me?me.p(n,be):(me=Mo(n),me.c(),me.m(y,null)):me&&(me.d(1),me=null),Re===(Re=Ve(n))&&Be?Be.p(n,be):(Be.d(1),Be=Re(n),Be&&(Be.c(),Be.m(S,null))),(!T||be&512)&&Ce(M,n[9]),(!T||be&512)&&K!==(K=n[9]===1?"":"s")&&Ce(Q,K),(!T||be&1024)&&Ce(x,n[10]),(!T||be&1024)&&ce!==(ce=n[10]===1?"":"s")&&Ce(H,ce),(!T||be&512&&Fe!==(Fe=n[9]===0))&&(De.disabled=Fe)},i(We){T||(X(m),T=!0)},o(We){J(m),T=!1},d(We){We&&q(e),n[21](null),Se[h].d(),me&&me.d(),Be.d(),ke=!1,Le(ze)}}}function qi(n){let e,t=[],o=new Map,l,r=ge(n[1]);const s=i=>i[25];for(let i=0;i<r.length;i+=1){let a=To(n,r,i),u=s(a);o.set(u,t[i]=Fo(u,a))}return{c(){e=C("ul");for(let i=0;i<t.length;i+=1)t[i].c();c(e,"class","folder-tree svelte-gn1lpb")},m(i,a){z(i,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(i,a){a&14558&&(r=ge(i[1]),Ge(),t=tt(t,a,s,1,i,r,o,e,Tt,Fo,null,To),Ne())},i(i){if(!l){for(let a=0;a<r.length;a+=1)X(t[a]);l=!0}},o(i){for(let a=0;a<t.length;a+=1)J(t[a]);l=!1},d(i){i&&q(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function zi(n){let e;return{c(){e=C("p"),e.textContent="No bookmark folders available.",c(e,"class","folder-modal__empty svelte-gn1lpb")},m(t,o){z(t,e,o)},p:$,i:$,o:$,d(t){t&&q(e)}}}function Fo(n,e){let t,o,l;return o=new ql({props:{nodeId:e[25],depth:0,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[6],selectedIds:e[7],toggleSelection:e[11],toggleExpansion:e[12],getCheckboxState:e[13]}}),{key:n,first:null,c(){t=qe(),Ee(o.$$.fragment),this.first=t},m(r,s){z(r,t,s),ve(o,r,s),l=!0},p(r,s){e=r;const i={};s&2&&(i.nodeId=e[25]),s&4&&(i.expandedIds=e[2]),s&8&&(i.loadingIds=e[3]),s&16&&(i.visibleIds=e[4]),s&64&&(i.searchMatches=e[6]),s&128&&(i.selectedIds=e[7]),s&2048&&(i.toggleSelection=e[11]),s&4096&&(i.toggleExpansion=e[12]),s&8192&&(i.getCheckboxState=e[13]),o.$set(i)},i(r){l||(X(o.$$.fragment,r),l=!0)},o(r){J(o.$$.fragment,r),l=!1},d(r){r&&q(t),Te(o,r)}}}function Mo(n){let e,t,o;return{c(){e=C("button"),e.textContent="Clear all",c(e,"type","button"),c(e,"class","summary-clear svelte-gn1lpb")},m(l,r){z(l,e,r),t||(o=V(e,"click",function(){Ae(n[16])&&n[16].apply(this,arguments)}),t=!0)},p(l,r){n=l},d(l){l&&q(e),t=!1,o()}}}function Wi(n){let e,t=[],o=new Map,l=ge(n[8]);const r=s=>s[22].id;for(let s=0;s<l.length;s+=1){let i=vo(n,l,s),a=r(i);o.set(a,t[s]=Ao(a,i))}return{c(){e=C("ul");for(let s=0;s<t.length;s+=1)t[s].c();c(e,"class","folder-modal__selection-list svelte-gn1lpb")},m(s,i){z(s,e,i);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(s,i){i&256&&(l=ge(s[8]),t=tt(t,i,r,1,s,l,o,e,Nt,Ao,null,vo))},d(s){s&&q(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ji(n){let e;return{c(){e=C("p"),e.textContent="Pick folders to see them here.",c(e,"class","folder-modal__empty svelte-gn1lpb")},m(t,o){z(t,e,o)},p:$,d(t){t&&q(e)}}}function Eo(n){let e,t=n[22].count+"",o;return{c(){e=C("span"),o=fe(t),c(e,"class","selection-chip__count svelte-gn1lpb")},m(l,r){z(l,e,r),b(e,o)},p(l,r){r&256&&t!==(t=l[22].count+"")&&Ce(o,t)},d(l){l&&q(e)}}}function Ao(n,e){let t,o,l,r=e[22].label+"",s,i,a,u,d=typeof e[22].count=="number"&&Eo(e);return{key:n,first:null,c(){t=C("li"),o=C("span"),l=C("span"),s=fe(r),i=U(),d&&d.c(),u=U(),c(l,"class","selection-chip__label svelte-gn1lpb"),c(o,"class","selection-chip svelte-gn1lpb"),c(o,"title",a=e[22].fullPath),this.first=t},m(_,g){z(_,t,g),b(t,o),b(o,l),b(l,s),b(o,i),d&&d.m(o,null),b(t,u)},p(_,g){e=_,g&256&&r!==(r=e[22].label+"")&&Ce(s,r),typeof e[22].count=="number"?d?d.p(e,g):(d=Eo(e),d.c(),d.m(o,null)):d&&(d.d(1),d=null),g&256&&a!==(a=e[22].fullPath)&&c(o,"title",a)},d(_){_&&q(t),d&&d.d()}}}function Vi(n){let e,t,o=n[0]&&Do(n);return{c(){o&&o.c(),e=qe()},m(l,r){o&&o.m(l,r),z(l,e,r),t=!0},p(l,[r]){l[0]?o?(o.p(l,r),r&1&&X(o,1)):(o=Do(l),o.c(),X(o,1),o.m(e.parentNode,e)):o&&(Ge(),J(o,1,1,()=>{o=null}),Ne())},i(l){t||(X(o),t=!0)},o(l){J(o),t=!1},d(l){l&&q(e),o&&o.d(l)}}}function Ki(n,e,t){let{open:o=!1}=e,{rootIds:l=[]}=e,{expandedIds:r}=e,{loadingIds:s}=e,{visibleIds:i}=e,{searchQuery:a=""}=e,{searchMatches:u}=e,{selectedIds:d}=e,{summary:_=[]}=e,{selectedFolderCount:g=0}=e,{totalBookmarkCount:h=0}=e,{toggleSelection:m}=e,{toggleExpansion:k}=e,{getCheckboxState:S}=e,{onSearchChange:y}=e,{onRequestClose:I}=e,{onConfirmSelection:L}=e,{onClearSelection:P}=e,v;function D(M){M.target===M.currentTarget&&(M.preventDefault(),I==null||I())}function A(M){y==null||y(M.target.value)}function N(M){lt[M?"unshift":"push"](()=>{v=M,t(17,v)})}return n.$$set=M=>{"open"in M&&t(0,o=M.open),"rootIds"in M&&t(1,l=M.rootIds),"expandedIds"in M&&t(2,r=M.expandedIds),"loadingIds"in M&&t(3,s=M.loadingIds),"visibleIds"in M&&t(4,i=M.visibleIds),"searchQuery"in M&&t(5,a=M.searchQuery),"searchMatches"in M&&t(6,u=M.searchMatches),"selectedIds"in M&&t(7,d=M.selectedIds),"summary"in M&&t(8,_=M.summary),"selectedFolderCount"in M&&t(9,g=M.selectedFolderCount),"totalBookmarkCount"in M&&t(10,h=M.totalBookmarkCount),"toggleSelection"in M&&t(11,m=M.toggleSelection),"toggleExpansion"in M&&t(12,k=M.toggleExpansion),"getCheckboxState"in M&&t(13,S=M.getCheckboxState),"onSearchChange"in M&&t(20,y=M.onSearchChange),"onRequestClose"in M&&t(14,I=M.onRequestClose),"onConfirmSelection"in M&&t(15,L=M.onConfirmSelection),"onClearSelection"in M&&t(16,P=M.onClearSelection)},n.$$.update=()=>{if(n.$$.dirty&147457&&o){Qn().then(()=>{v==null||v.focus(),v==null||v.select()});const M=j=>{j.key==="Escape"&&(j.preventDefault(),I==null||I())};document.addEventListener("keydown",M,{once:!0})}},[o,l,r,s,i,a,u,d,_,g,h,m,k,S,I,L,P,v,D,A,y,N]}class Yi extends He{constructor(e){super(),Ue(this,e,Ki,Vi,Pe,{open:0,rootIds:1,expandedIds:2,loadingIds:3,visibleIds:4,searchQuery:5,searchMatches:6,selectedIds:7,summary:8,selectedFolderCount:9,totalBookmarkCount:10,toggleSelection:11,toggleExpansion:12,getCheckboxState:13,onSearchChange:20,onRequestClose:14,onConfirmSelection:15,onClearSelection:16})}}function Lo(n,e,t){const o=n.slice();return o[18]=e[t],o}function Oo(n){let e,t,o,l,r,s,i,a,u,d,_,g,h=[],m=new Map,k,S,y,I,L,P,v,D,A,N,M,j,K,Q,te,ie,R,ee=ge(n[1]);const O=x=>x[18].id;for(let x=0;x<ee.length;x+=1){let oe=Lo(n,ee,x),ce=O(oe);m.set(ce,h[x]=Uo(ce,oe))}return{c(){e=C("div"),t=C("section"),o=C("header"),l=C("h2"),l.textContent="Add New Shortcut",r=U(),s=C("button"),s.textContent="√ó",i=U(),a=C("form"),u=C("div"),d=C("label"),d.innerHTML=`Folder
            <span class="form-hint svelte-1xx9qid">Where to save the shortcut</span>`,_=U(),g=C("select");for(let x=0;x<h.length;x+=1)h[x].c();k=U(),S=C("div"),y=C("label"),y.innerHTML=`URL
            <span class="form-hint svelte-1xx9qid">The website address</span>`,I=U(),L=C("input"),P=U(),v=C("div"),D=C("label"),D.innerHTML=`Title
            <span class="form-hint svelte-1xx9qid">Display name for the shortcut</span>`,A=U(),N=C("input"),M=U(),j=C("div"),K=C("button"),K.textContent="Cancel",Q=U(),te=C("button"),te.textContent="Add Shortcut",c(l,"id","add-shortcut-modal-title"),c(l,"class","svelte-1xx9qid"),c(s,"type","button"),c(s,"class","add-shortcut-modal__close svelte-1xx9qid"),c(s,"aria-label","Close"),c(o,"class","add-shortcut-modal__header svelte-1xx9qid"),c(d,"for","shortcut-folder"),c(d,"class","svelte-1xx9qid"),c(g,"id","shortcut-folder"),g.required=!0,c(g,"class","svelte-1xx9qid"),n[2]===void 0&&ut(()=>n[14].call(g)),c(u,"class","form-group svelte-1xx9qid"),c(y,"for","shortcut-url"),c(y,"class","svelte-1xx9qid"),c(L,"id","shortcut-url"),c(L,"type","url"),c(L,"placeholder","https://example.com"),L.required=!0,c(L,"class","svelte-1xx9qid"),c(S,"class","form-group svelte-1xx9qid"),c(D,"for","shortcut-title"),c(D,"class","svelte-1xx9qid"),c(N,"id","shortcut-title"),c(N,"type","text"),c(N,"placeholder","Example Site"),N.required=!0,c(N,"class","svelte-1xx9qid"),c(v,"class","form-group svelte-1xx9qid"),c(K,"type","button"),c(K,"class","button button--secondary svelte-1xx9qid"),c(te,"type","submit"),c(te,"class","button button--primary svelte-1xx9qid"),c(j,"class","add-shortcut-modal__actions svelte-1xx9qid"),c(a,"class","add-shortcut-modal__form svelte-1xx9qid"),c(t,"class","add-shortcut-modal svelte-1xx9qid"),c(t,"role","dialog"),c(t,"aria-modal","true"),c(t,"aria-labelledby","add-shortcut-modal-title"),c(e,"class","modal-overlay svelte-1xx9qid"),c(e,"role","presentation")},m(x,oe){z(x,e,oe),b(e,t),b(t,o),b(o,l),b(o,r),b(o,s),b(t,i),b(t,a),b(a,u),b(u,d),b(u,_),b(u,g);for(let ce=0;ce<h.length;ce+=1)h[ce]&&h[ce].m(g,null);wo(g,n[2],!0),b(a,k),b(a,S),b(S,y),b(S,I),b(S,L),n[15](L),Ut(L,n[4]),b(a,P),b(a,v),b(v,D),b(v,A),b(v,N),Ut(N,n[5]),b(a,M),b(a,j),b(j,K),b(j,Q),b(j,te),ie||(R=[V(s,"click",n[7]),V(g,"change",n[14]),V(L,"input",n[16]),V(L,"blur",n[8]),V(N,"input",n[17]),V(K,"click",n[7]),V(a,"submit",n[9]),V(e,"click",n[6])],ie=!0)},p(x,oe){oe&2&&(ee=ge(x[1]),h=tt(h,oe,O,1,x,ee,m,g,Nt,Uo,null,Lo)),oe&6&&wo(g,x[2]),oe&16&&L.value!==x[4]&&Ut(L,x[4]),oe&32&&N.value!==x[5]&&Ut(N,x[5])},d(x){x&&q(e);for(let oe=0;oe<h.length;oe+=1)h[oe].d();n[15](null),ie=!1,Le(R)}}}function Po(n){let e,t=n[18].count+"",o,l;return{c(){e=fe("("),o=fe(t),l=fe(")")},m(r,s){z(r,e,s),z(r,o,s),z(r,l,s)},p(r,s){s&2&&t!==(t=r[18].count+"")&&Ce(o,t)},d(r){r&&(q(e),q(o),q(l))}}}function Uo(n,e){let t,o=Ho(e[18])+"",l,r,s,i,a=e[18].count!==void 0&&Po(e);return{key:n,first:null,c(){t=C("option"),l=fe(o),r=U(),a&&a.c(),s=U(),t.__value=i=e[18].id,Ut(t,t.__value),this.first=t},m(u,d){z(u,t,d),b(t,l),b(t,r),a&&a.m(t,null),b(t,s)},p(u,d){e=u,d&2&&o!==(o=Ho(e[18])+"")&&Ce(l,o),e[18].count!==void 0?a?a.p(e,d):(a=Po(e),a.c(),a.m(t,s)):a&&(a.d(1),a=null),d&2&&i!==(i=e[18].id)&&(t.__value=i,Ut(t,t.__value))},d(u){u&&q(t),a&&a.d()}}}function Qi(n){let e,t=n[0]&&Oo(n);return{c(){t&&t.c(),e=qe()},m(o,l){t&&t.m(o,l),z(o,e,l)},p(o,[l]){o[0]?t?t.p(o,l):(t=Oo(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$,o:$,d(o){o&&q(e),t&&t.d(o)}}}function Ho(n){return n.fullPath||n.label||"Untitled folder"}function Xi(n,e,t){let{open:o=!1}=e,{folders:l=[]}=e,{defaultFolderId:r=null}=e,{onConfirm:s=null}=e,{onClose:i=null}=e,a="",u="",d="",_,g=!1;function h(v){v.target===v.currentTarget&&(v.preventDefault(),m())}function m(){i==null||i()}function k(){if(!d&&u)try{const v=new URL(u);t(5,d=v.hostname.replace(/^www\./,""))}catch{}}function S(v){if(v.preventDefault(),!a){alert("Please select a folder.");return}if(!u.trim()){alert("Please enter a URL.");return}if(!d.trim()){alert("Please enter a title.");return}s==null||s({folderId:a,url:u.trim(),title:d.trim()})}function y(){a=bi(this),t(2,a),t(0,o),t(1,l),t(10,r),t(13,g),t(3,_),t(1,l)}function I(v){lt[v?"unshift":"push"](()=>{_=v,t(3,_)})}function L(){u=this.value,t(4,u),t(0,o),t(13,g),t(10,r),t(1,l),t(3,_)}function P(){d=this.value,t(5,d),t(0,o),t(13,g),t(10,r),t(1,l),t(3,_)}return n.$$set=v=>{"open"in v&&t(0,o=v.open),"folders"in v&&t(1,l=v.folders),"defaultFolderId"in v&&t(10,r=v.defaultFolderId),"onConfirm"in v&&t(11,s=v.onConfirm),"onClose"in v&&t(12,i=v.onClose)},n.$$.update=()=>{if(n.$$.dirty&1031&&o&&l.length>0&&(a&&l.some(D=>D.id===a)||t(2,a=r||l[0].id)),n.$$.dirty&9227)if(o&&!g){t(13,g=!0),t(4,u=""),t(5,d=""),t(2,a=r||(l.length>0?l[0].id:"")),Qn().then(()=>{_==null||_.focus()});const v=D=>{D.key==="Escape"&&(D.preventDefault(),m())};document.addEventListener("keydown",v,{once:!0})}else!o&&g&&t(13,g=!1)},[o,l,a,_,u,d,h,m,k,S,r,s,i,g,y,I,L,P]}class Zi extends He{constructor(e){super(),Ue(this,e,Xi,Qi,Pe,{open:0,folders:1,defaultFolderId:10,onConfirm:11,onClose:12})}}function Ji(n){let e,t,o,l;return{c(){e=C("img"),_o(e.src,t=n[8])||c(e,"src",t),c(e,"alt",""),c(e,"loading","lazy")},m(r,s){z(r,e,s),o||(l=V(e,"error",n[13]),o=!0)},p(r,s){s[0]&256&&!_o(e.src,t=r[8])&&c(e,"src",t)},d(r){r&&q(e),o=!1,l()}}}function xi(n){let e=n[0].initials+"",t;return{c(){t=fe(e)},m(o,l){z(o,t,l)},p(o,l){l[0]&1&&e!==(e=o[0].initials+"")&&Ce(t,e)},d(o){o&&q(t)}}}function Ro(n){let e,t,o,l,r,s;return{c(){e=C("div"),t=C("button"),t.textContent="Edit",o=U(),l=C("button"),l.textContent="Remove",c(t,"type","button"),c(t,"role","menuitem"),c(t,"class","tile-menu__item"),c(l,"type","button"),c(l,"role","menuitem"),c(l,"class","tile-menu__item tile-menu__item--danger"),c(e,"class","tile-menu"),c(e,"role","menu")},m(i,a){z(i,e,a),b(e,t),b(e,o),b(e,l),r||(s=[V(t,"click",n[11]),V(l,"click",n[12])],r=!0)},p:$,d(i){i&&q(e),r=!1,Le(s)}}}function $i(n){let e,t,o,l,r,s,i=n[0].displayTitle+"",a,u,d,_,g,h,m,k,S,y,I,L,P,v;function D(j,K){return j[0].fallback?xi:Ji}let A=D(n),N=A(n),M=n[2]&&Ro(n);return{c(){e=C("article"),t=C("a"),o=C("div"),N.c(),r=U(),s=C("div"),a=fe(i),_=U(),g=C("div"),h=C("button"),m=ot("svg"),k=ot("circle"),S=ot("circle"),y=ot("circle"),L=U(),M&&M.c(),c(o,"class","tile-icon"),c(o,"style",l=`--dial-color: ${n[0].palette.background}; --dial-text: ${n[0].palette.text};`),c(o,"aria-hidden","true"),c(s,"class","tile-title"),_e(s,"tile-title--pill",n[1]),c(t,"class","tile-link"),c(t,"href",u=n[0].url||"#!"),c(t,"title",d=n[0].title||n[0].url||"Shortcut"),c(t,"draggable","false"),c(k,"cx","8"),c(k,"cy","3.5"),c(k,"r","1.25"),c(S,"cx","8"),c(S,"cy","8"),c(S,"r","1.25"),c(y,"cx","8"),c(y,"cy","12.5"),c(y,"r","1.25"),c(m,"viewBox","0 0 16 16"),c(m,"aria-hidden","true"),c(m,"focusable","false"),c(h,"class","tile-menu-button"),c(h,"type","button"),c(h,"aria-haspopup","true"),c(h,"aria-expanded",n[2]),c(h,"aria-label",I=`Open options for ${n[7]}`),_e(h,"tile-menu-button--active",n[2]),c(g,"class","tile-actions"),c(e,"class","tile"),c(e,"draggable",n[9]),_e(e,"tile--focused",n[3]),_e(e,"tile--dragging",n[4]),_e(e,"tile--drag-over",n[5]),_e(e,"tile--top-site",n[6])},m(j,K){z(j,e,K),b(e,t),b(t,o),N.m(o,null),b(t,r),b(t,s),b(s,a),b(e,_),b(e,g),b(g,h),b(h,m),b(m,k),b(m,S),b(m,y),b(g,L),M&&M.m(g,null),P||(v=[V(t,"focus",n[15]),V(h,"click",n[10]),V(e,"contextmenu",n[14]),V(e,"dragstart",n[16]),V(e,"dragover",n[17]),V(e,"dragleave",n[18]),V(e,"drop",n[19]),V(e,"dragend",n[20])],P=!0)},p(j,K){A===(A=D(j))&&N?N.p(j,K):(N.d(1),N=A(j),N&&(N.c(),N.m(o,null))),K[0]&1&&l!==(l=`--dial-color: ${j[0].palette.background}; --dial-text: ${j[0].palette.text};`)&&c(o,"style",l),K[0]&1&&i!==(i=j[0].displayTitle+"")&&Ce(a,i),K[0]&2&&_e(s,"tile-title--pill",j[1]),K[0]&1&&u!==(u=j[0].url||"#!")&&c(t,"href",u),K[0]&1&&d!==(d=j[0].title||j[0].url||"Shortcut")&&c(t,"title",d),K[0]&4&&c(h,"aria-expanded",j[2]),K[0]&128&&I!==(I=`Open options for ${j[7]}`)&&c(h,"aria-label",I),K[0]&4&&_e(h,"tile-menu-button--active",j[2]),j[2]?M?M.p(j,K):(M=Ro(j),M.c(),M.m(g,null)):M&&(M.d(1),M=null),K[0]&512&&c(e,"draggable",j[9]),K[0]&8&&_e(e,"tile--focused",j[3]),K[0]&16&&_e(e,"tile--dragging",j[4]),K[0]&32&&_e(e,"tile--drag-over",j[5]),K[0]&64&&_e(e,"tile--top-site",j[6])},i:$,o:$,d(j){j&&q(e),N.d(),M&&M.d(),P=!1,Le(v)}}}function es(n,e,t){let o,l,r,{bookmark:s}=e,{titleBackdrop:i=!1}=e,{menuOpen:a=!1}=e,{focused:u=!1}=e,{dragging:d=!1}=e,{dragOver:_=!1}=e,{isTopSite:g=!1}=e,{onToggleMenu:h=()=>{}}=e,{onEdit:m=()=>{}}=e,{onRemove:k=()=>{}}=e,{onFallback:S=()=>{}}=e,{onContextMenu:y=()=>{}}=e,{onFocus:I=()=>{}}=e,{onDragStart:L=()=>{}}=e,{onDragOver:P=()=>{}}=e,{onDragLeave:v=()=>{}}=e,{onDrop:D=()=>{}}=e,{onDragEnd:A=()=>{}}=e,{getFaviconUrl:N=()=>""}=e,M="Shortcut",j="",K=null;function Q(B){B.preventDefault(),B.stopPropagation(),h==null||h()}function te(B){B.preventDefault(),B.stopPropagation(),m==null||m()}function ie(B){B.preventDefault(),B.stopPropagation(),k==null||k()}function R(){S==null||S()}function ee(B){B.preventDefault(),y==null||y(B)}function O(){I==null||I()}function x(B){if(!r){B.preventDefault();return}L==null||L(B)}function oe(B){r&&(B.preventDefault(),P==null||P(B))}function ce(B){r&&(v==null||v(B))}function H(B){r&&(B.preventDefault(),D==null||D(B))}function pe(B){r&&(A==null||A(B))}return n.$$set=B=>{"bookmark"in B&&t(0,s=B.bookmark),"titleBackdrop"in B&&t(1,i=B.titleBackdrop),"menuOpen"in B&&t(2,a=B.menuOpen),"focused"in B&&t(3,u=B.focused),"dragging"in B&&t(4,d=B.dragging),"dragOver"in B&&t(5,_=B.dragOver),"isTopSite"in B&&t(6,g=B.isTopSite),"onToggleMenu"in B&&t(21,h=B.onToggleMenu),"onEdit"in B&&t(22,m=B.onEdit),"onRemove"in B&&t(23,k=B.onRemove),"onFallback"in B&&t(24,S=B.onFallback),"onContextMenu"in B&&t(25,y=B.onContextMenu),"onFocus"in B&&t(26,I=B.onFocus),"onDragStart"in B&&t(27,L=B.onDragStart),"onDragOver"in B&&t(28,P=B.onDragOver),"onDragLeave"in B&&t(29,v=B.onDragLeave),"onDrop"in B&&t(30,D=B.onDrop),"onDragEnd"in B&&t(31,A=B.onDragEnd),"getFaviconUrl"in B&&t(32,N=B.getFaviconUrl)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&t(7,M=(s==null?void 0:s.displayTitle)||(s==null?void 0:s.title)||(s==null?void 0:s.url)||"Shortcut"),n.$$.dirty[0]&1&&t(35,o=s==null?void 0:s.url),n.$$.dirty[0]&1&&t(34,l=s==null?void 0:s.fallback),n.$$.dirty[1]&30)if(o&&!l&&o!==K){t(33,K=o);const B=o;t(8,j=""),N(B).then(Y=>{B===K&&(Y?t(8,j=Y):R())}).catch(()=>{B===K&&R()})}else l&&(t(33,K=null),t(8,j=""));n.$$.dirty[0]&64&&t(9,r=!g)},[s,i,a,u,d,_,g,M,j,r,Q,te,ie,R,ee,O,x,oe,ce,H,pe,h,m,k,S,y,I,L,P,v,D,A,N,K,l,o]}class xn extends He{constructor(e){super(),Ue(this,e,es,$i,Pe,{bookmark:0,titleBackdrop:1,menuOpen:2,focused:3,dragging:4,dragOver:5,isTopSite:6,onToggleMenu:21,onEdit:22,onRemove:23,onFallback:24,onContextMenu:25,onFocus:26,onDragStart:27,onDragOver:28,onDragLeave:29,onDrop:30,onDragEnd:31,getFaviconUrl:32},null,[-1,-1])}}function zl(n){const e=n-1;return e*e*e+1}function zn(n,{delay:e=0,duration:t=400,easing:o=tn}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:o,css:r=>`opacity: ${r*l}`}}function Wn(n,{delay:e=0,duration:t=400,easing:o=zl,x:l=0,y:r=0,opacity:s=0}={}){const i=getComputedStyle(n),a=+i.opacity,u=i.transform==="none"?"":i.transform,d=a*(1-s),[_,g]=po(l),[h,m]=po(r);return{delay:e,duration:t,easing:o,css:(k,S)=>`
			transform: ${u} translate(${(1-k)*_}${g}, ${(1-k)*h}${m});
			opacity: ${a-d*S}`}}function ts(n,{from:e,to:t},o={}){const l=getComputedStyle(n),r=l.transform==="none"?"":l.transform,[s,i]=l.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*s/t.width-(t.left+s),u=e.top+e.height*i/t.height-(t.top+i),{delay:d=0,duration:_=h=>Math.sqrt(h)*120,easing:g=zl}=o;return{delay:d,duration:Ae(_)?_(Math.sqrt(a*a+u*u)):_,easing:g,css:(h,m)=>{const k=m*a,S=m*u,y=h+m*e.width/t.width,I=h+m*e.height/t.height;return`transform: ${r} translate(${k}px, ${S}px) scale(${y}, ${I});`}}}function Go(n,e,t){const o=n.slice();return o[7]=e[t],o}function No(n){let e,t,o;function l(){return n[5](n[7])}return{c(){e=C("button"),e.textContent="Undo",c(e,"type","button"),c(e,"class","toast__undo svelte-f4o70y")},m(r,s){z(r,e,s),t||(o=V(e,"click",l),t=!0)},p(r,s){n=r},d(r){r&&q(e),t=!1,o()}}}function qo(n,e){let t,o,l=e[7].message+"",r,s,i,a,u,d,_,g,h,m=$,k,S,y,I=e[7].undoData&&No(e);function L(){return e[6](e[7])}return{key:n,first:null,c(){t=C("div"),o=C("span"),r=fe(l),s=U(),i=C("div"),I&&I.c(),a=U(),u=C("button"),u.textContent="√ó",d=U(),c(o,"class","toast__message svelte-f4o70y"),c(u,"type","button"),c(u,"class","toast__dismiss svelte-f4o70y"),c(u,"aria-label","Dismiss notification"),c(i,"class","toast__actions svelte-f4o70y"),c(t,"class","toast svelte-f4o70y"),c(t,"role","alert"),_e(t,"toast--success",e[7].type==="success"),_e(t,"toast--error",e[7].type==="error"),_e(t,"toast--info",e[7].type==="info"),this.first=t},m(P,v){z(P,t,v),b(t,o),b(o,r),b(t,s),b(t,i),I&&I.m(i,null),b(i,a),b(i,u),b(t,d),k=!0,S||(y=V(u,"click",L),S=!0)},p(P,v){e=P,(!k||v&1)&&l!==(l=e[7].message+"")&&Ce(r,l),e[7].undoData?I?I.p(e,v):(I=No(e),I.c(),I.m(i,a)):I&&(I.d(1),I=null),(!k||v&1)&&_e(t,"toast--success",e[7].type==="success"),(!k||v&1)&&_e(t,"toast--error",e[7].type==="error"),(!k||v&1)&&_e(t,"toast--info",e[7].type==="info")},r(){h=t.getBoundingClientRect()},f(){yi(t),m(),El(t,h)},a(){m(),m=wi(t,h,ts,{duration:250})},i(P){k||(P&&ut(()=>{k&&(g&&g.end(1),_=Ii(t,Wn,{y:50,duration:250}),_.start())}),k=!0)},o(P){_&&_.invalidate(),P&&(g=vi(t,zn,{duration:150})),k=!1},d(P){P&&q(t),I&&I.d(),P&&g&&g.end(),S=!1,y()}}}function ns(n){let e,t=[],o=new Map,l,r=ge(n[0]);const s=i=>i[7].id;for(let i=0;i<r.length;i+=1){let a=Go(n,r,i),u=s(a);o.set(u,t[i]=qo(u,a))}return{c(){e=C("div");for(let i=0;i<t.length;i+=1)t[i].c();c(e,"class","toast-container svelte-f4o70y"),c(e,"aria-live","polite"),c(e,"aria-label","Notifications")},m(i,a){z(i,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);l=!0},p(i,[a]){if(a&7){r=ge(i[0]),Ge();for(let u=0;u<t.length;u+=1)t[u].r();t=tt(t,a,s,1,i,r,o,e,Ti,qo,null,Go);for(let u=0;u<t.length;u+=1)t[u].a();Ne()}},i(i){if(!l){for(let a=0;a<r.length;a+=1)X(t[a]);l=!0}},o(i){for(let a=0;a<t.length;a+=1)J(t[a]);l=!1},d(i){i&&q(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function os(n,e,t){let{toasts:o=[]}=e,{onDismiss:l=()=>{}}=e,{onUndo:r=()=>{}}=e;function s(d){l==null||l(d)}function i(d){r==null||r(d)}const a=d=>i(d),u=d=>s(d.id);return n.$$set=d=>{"toasts"in d&&t(0,o=d.toasts),"onDismiss"in d&&t(3,l=d.onDismiss),"onUndo"in d&&t(4,r=d.onUndo)},[o,s,i,l,r,a,u]}class ls extends He{constructor(e){super(),Ue(this,e,os,ns,Pe,{toasts:0,onDismiss:3,onUndo:4})}}function zo(n){let e,t,o,l,r,s,i,a,u,d,_,g,h;return{c(){e=C("div"),t=C("article"),o=C("header"),o.innerHTML='<h2 id="welcome-title" class="svelte-1g41oro">Welcome to Bookmark Dial</h2> <p class="welcome-subtitle svelte-1g41oro">Your new tab, reimagined.</p>',l=U(),r=C("div"),r.innerHTML='<section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">üìÅ</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Select Your Folders</h3> <p class="svelte-1g41oro">Open <strong class="svelte-1g41oro">Settings</strong> (gear icon) and click <strong class="svelte-1g41oro">Manage folders</strong> to choose which bookmark folders appear on your new tab.</p></div></section> <section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">‚ûï</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Add Shortcuts</h3> <p class="svelte-1g41oro">Click the <strong class="svelte-1g41oro">+ Add shortcut</strong> tile to quickly add new bookmarks directly from this page.</p></div></section> <section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">üé®</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Customize Your Theme</h3> <p class="svelte-1g41oro">Choose from multiple themes, accent colors, and gradient backgrounds to personalize your experience.</p></div></section> <section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">‚å®Ô∏è</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Keyboard Shortcuts</h3> <p class="svelte-1g41oro">Use <kbd class="svelte-1g41oro">Arrow keys</kbd> to navigate, <kbd class="svelte-1g41oro">Enter</kbd> to open, and <kbd class="svelte-1g41oro">Delete</kbd> or <kbd class="svelte-1g41oro">Backspace</kbd> to remove bookmarks.</p></div></section>',s=U(),i=C("footer"),a=C("button"),a.textContent="Get Started",c(o,"class","welcome-header svelte-1g41oro"),c(r,"class","welcome-content svelte-1g41oro"),c(a,"type","button"),c(a,"class","welcome-button svelte-1g41oro"),c(i,"class","welcome-footer svelte-1g41oro"),c(t,"class","welcome-modal svelte-1g41oro"),c(t,"role","dialog"),c(t,"aria-modal","true"),c(t,"aria-labelledby","welcome-title"),c(e,"class","welcome-overlay svelte-1g41oro"),c(e,"role","presentation")},m(m,k){z(m,e,k),b(e,t),b(t,o),b(t,l),b(t,r),b(t,s),b(t,i),b(i,a),_=!0,g||(h=[V(a,"click",function(){Ae(n[1])&&n[1].apply(this,arguments)}),V(e,"click",n[2])],g=!0)},p(m,k){n=m},i(m){_||(m&&ut(()=>{_&&(u||(u=fn(t,Wn,{y:30,duration:300},!0)),u.run(1))}),m&&ut(()=>{_&&(d||(d=fn(e,zn,{duration:200},!0)),d.run(1))}),_=!0)},o(m){m&&(u||(u=fn(t,Wn,{y:30,duration:300},!1)),u.run(0)),m&&(d||(d=fn(e,zn,{duration:200},!1)),d.run(0)),_=!1},d(m){m&&q(e),m&&u&&u.end(),m&&d&&d.end(),g=!1,Le(h)}}}function rs(n){let e,t,o,l=n[0]&&zo(n);return{c(){l&&l.c(),e=qe()},m(r,s){l&&l.m(r,s),z(r,e,s),t||(o=V(window,"keydown",function(){Ae(n[0]?n[3]:null)&&(n[0]?n[3]:null).apply(this,arguments)}),t=!0)},p(r,[s]){n=r,n[0]?l?(l.p(n,s),s&1&&X(l,1)):(l=zo(n),l.c(),X(l,1),l.m(e.parentNode,e)):l&&(Ge(),J(l,1,1,()=>{l=null}),Ne())},i(r){X(l)},o(r){J(l)},d(r){r&&q(e),l&&l.d(r),t=!1,o()}}}function is(n,e,t){let{open:o=!1}=e,{onDismiss:l=()=>{}}=e,{onGetStarted:r=()=>{}}=e;function s(a){a.target===a.currentTarget&&(l==null||l())}function i(a){a.key==="Escape"&&(a.preventDefault(),l==null||l())}return n.$$set=a=>{"open"in a&&t(0,o=a.open),"onDismiss"in a&&t(4,l=a.onDismiss),"onGetStarted"in a&&t(1,r=a.onGetStarted)},[o,r,s,i,l]}class ss extends He{constructor(e){super(),Ue(this,e,is,rs,Pe,{open:0,onDismiss:4,onGetStarted:1})}}function Wo(n){let e,t,o,l,r,s,i,a,u,d,_,g,h,m,k,S,y,I,L;return{c(){e=C("div"),t=U(),o=C("menu"),l=C("li"),r=C("button"),r.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><path d="M9 2h5v5M14 2L7 9M6 4H3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V9" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Open in new tab`,s=U(),i=C("li"),a=C("button"),a.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><rect x="5" y="5" width="8" height="9" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><path d="M11 5V3a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2" stroke="currentColor" stroke-width="1.5" fill="none"></path></svg>
        Copy URL`,u=U(),d=C("li"),_=U(),g=C("li"),h=C("button"),h.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><path d="M11.5 2.5l2 2L5 13H3v-2l8.5-8.5z" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Edit bookmark`,m=U(),k=C("li"),S=C("button"),S.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><path d="M3 4h10M6 4V3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1M5 4v9a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V4" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Remove`,c(e,"class","context-menu-overlay svelte-6dpg3b"),c(e,"role","presentation"),c(r,"type","button"),c(r,"class","context-menu__item svelte-6dpg3b"),c(r,"role","menuitem"),c(l,"class","svelte-6dpg3b"),c(a,"type","button"),c(a,"class","context-menu__item svelte-6dpg3b"),c(a,"role","menuitem"),c(i,"class","svelte-6dpg3b"),c(d,"class","context-menu__divider svelte-6dpg3b"),c(d,"role","separator"),c(h,"type","button"),c(h,"class","context-menu__item svelte-6dpg3b"),c(h,"role","menuitem"),c(g,"class","svelte-6dpg3b"),c(S,"type","button"),c(S,"class","context-menu__item context-menu__item--danger svelte-6dpg3b"),c(S,"role","menuitem"),c(k,"class","svelte-6dpg3b"),c(o,"class","context-menu svelte-6dpg3b"),c(o,"style",n[1]),c(o,"aria-label",y="Actions for "+n[2])},m(P,v){z(P,e,v),z(P,t,v),z(P,o,v),b(o,l),b(l,r),b(o,s),b(o,i),b(i,a),b(o,u),b(o,d),b(o,_),b(o,g),b(g,h),b(o,m),b(o,k),b(k,S),I||(L=[V(e,"click",n[7]),V(e,"contextmenu",gi(n[7])),V(r,"click",n[5]),V(a,"click",n[6]),V(h,"click",n[3]),V(S,"click",n[4])],I=!0)},p(P,v){v&2&&c(o,"style",P[1]),v&4&&y!==(y="Actions for "+P[2])&&c(o,"aria-label",y)},d(P){P&&(q(e),q(t),q(o)),I=!1,Le(L)}}}function as(n){let e,t,o,l=n[0]&&Wo(n);return{c(){l&&l.c(),e=qe()},m(r,s){l&&l.m(r,s),z(r,e,s),t||(o=V(window,"keydown",function(){Ae(n[0]?n[8]:null)&&(n[0]?n[8]:null).apply(this,arguments)}),t=!0)},p(r,[s]){n=r,n[0]?l?l.p(n,s):(l=Wo(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:$,o:$,d(r){r&&q(e),l&&l.d(r),t=!1,o()}}}function jo(n){var r;const e=document.querySelectorAll(".context-menu__item"),t=document.activeElement;let l=Array.from(e).indexOf(t)+n;l<0&&(l=e.length-1),l>=e.length&&(l=0),(r=e[l])==null||r.focus()}function cs(n,e,t){let o,l,{bookmark:r=null}=e,{position:s={x:0,y:0}}=e,{visible:i=!1}=e;const a=Ol();function u(){a("edit")}function d(){a("remove")}function _(){a("opennewtab")}function g(){a("copyurl")}function h(){a("close")}function m(k){k.key==="Escape"?(k.preventDefault(),h()):k.key==="ArrowDown"?(k.preventDefault(),jo(1)):k.key==="ArrowUp"&&(k.preventDefault(),jo(-1))}return n.$$set=k=>{"bookmark"in k&&t(9,r=k.bookmark),"position"in k&&t(10,s=k.position),"visible"in k&&t(0,i=k.visible)},n.$$.update=()=>{n.$$.dirty&512&&t(2,o=(r==null?void 0:r.title)||(r==null?void 0:r.url)||"bookmark"),n.$$.dirty&1024&&t(1,l=`left: ${s.x}px; top: ${s.y}px;`)},[i,l,o,u,d,_,g,h,m,r,s]}class us extends He{constructor(e){super(),Ue(this,e,cs,as,Pe,{bookmark:9,position:10,visible:0})}}function Vo(n){let e,t,o,l,r,s,i,a,u,d,_,g=n[1]&&Ko(n);return{c(){e=C("div"),t=ot("svg"),o=ot("circle"),l=ot("path"),r=U(),s=C("input"),i=U(),g&&g.c(),a=U(),u=C("button"),u.innerHTML='<svg viewBox="0 0 16 16" aria-hidden="true" class="svelte-qypsdi"><path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>',c(o,"cx","6.5"),c(o,"cy","6.5"),c(o,"r","5"),c(o,"stroke","currentColor"),c(o,"stroke-width","1.5"),c(o,"fill","none"),c(l,"d","M10.5 10.5L14 14"),c(l,"stroke","currentColor"),c(l,"stroke-width","1.5"),c(l,"stroke-linecap","round"),c(t,"class","search-bar__icon svelte-qypsdi"),c(t,"viewBox","0 0 16 16"),c(t,"aria-hidden","true"),c(s,"type","search"),c(s,"class","search-bar__input svelte-qypsdi"),c(s,"placeholder","Search bookmarks‚Ä¶"),s.value=n[1],c(s,"aria-label","Search bookmarks"),c(u,"type","button"),c(u,"class","search-bar__close svelte-qypsdi"),c(u,"aria-label","Close search"),c(e,"class","search-bar svelte-qypsdi"),c(e,"role","search")},m(h,m){z(h,e,m),b(e,t),b(t,o),b(t,l),b(e,r),b(e,s),n[8](s),b(e,i),g&&g.m(e,null),b(e,a),b(e,u),d||(_=[V(s,"input",n[4]),V(s,"keydown",n[6]),V(u,"click",function(){Ae(n[2])&&n[2].apply(this,arguments)})],d=!0)},p(h,m){n=h,m&2&&s.value!==n[1]&&(s.value=n[1]),n[1]?g?g.p(n,m):(g=Ko(n),g.c(),g.m(e,a)):g&&(g.d(1),g=null)},d(h){h&&q(e),n[8](null),g&&g.d(),d=!1,Le(_)}}}function Ko(n){let e,t,o;return{c(){e=C("button"),e.textContent="√ó",c(e,"type","button"),c(e,"class","search-bar__clear svelte-qypsdi"),c(e,"aria-label","Clear search")},m(l,r){z(l,e,r),t||(o=V(e,"click",n[5]),t=!0)},p:$,d(l){l&&q(e),t=!1,o()}}}function fs(n){let e,t=n[0]&&Vo(n);return{c(){t&&t.c(),e=qe()},m(o,l){t&&t.m(o,l),z(o,e,l)},p(o,[l]){o[0]?t?t.p(o,l):(t=Vo(o),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$,o:$,d(o){o&&q(e),t&&t.d(o)}}}function ds(n,e,t){let{visible:o=!1}=e,{query:l=""}=e,{onSearchChange:r=()=>{}}=e,{onClose:s=()=>{}}=e,i;function a(g){r==null||r(g.target.value)}function u(){r==null||r(""),i==null||i.focus()}function d(g){g.key==="Escape"&&(g.preventDefault(),l?r==null||r(""):s==null||s())}function _(g){lt[g?"unshift":"push"](()=>{i=g,t(3,i)})}return n.$$set=g=>{"visible"in g&&t(0,o=g.visible),"query"in g&&t(1,l=g.query),"onSearchChange"in g&&t(7,r=g.onSearchChange),"onClose"in g&&t(2,s=g.onClose)},n.$$.update=()=>{n.$$.dirty&9&&o&&i&&i.focus()},[o,l,s,i,a,u,d,r,_]}class gs extends He{constructor(e){super(),Ue(this,e,ds,fs,Pe,{visible:0,query:1,onSearchChange:7,onClose:2})}}const gn={loading:"Loading Bookmark Dial‚Ä¶",empty:"No bookmarks yet. Add shortcuts from this page or the bookmark manager.",error:"Bookmark Dial folder is unavailable. Try reopening the tab or reinstalling the extension."},hs=64,Qt="customBackgroundImage",Xt="uiPreferences",hn="dialPreferences",_n=2,Hn="hasSeenWelcome",ms=10*1024*1024,Yo=5,bs="BookmarkDialDB",wt="backgrounds",Rn="customBackground",pn={selectedIds:[],expandedIds:[]},Wl=[{id:"dark",label:"Dark"},{id:"light",label:"Light"},{id:"system",label:"System"}],St=[{id:"cobalt",label:"Cobalt",colors:{base:"#2563eb",contrast:"#f8fafc",soft:"rgba(37, 99, 235, 0.14)",border:"rgba(37, 99, 235, 0.45)"}},{id:"violet",label:"Violet",colors:{base:"#8b5cf6",contrast:"#faf5ff",soft:"rgba(139, 92, 246, 0.16)",border:"rgba(139, 92, 246, 0.45)"}},{id:"emerald",label:"Emerald",colors:{base:"#059669",contrast:"#ecfdf5",soft:"rgba(5, 150, 105, 0.14)",border:"rgba(5, 150, 105, 0.45)"}},{id:"amber",label:"Amber",colors:{base:"#d97706",contrast:"#fffbeb",soft:"rgba(217, 119, 6, 0.18)",border:"rgba(217, 119, 6, 0.5)"}},{id:"rose",label:"Rose",colors:{base:"#e11d48",contrast:"#fff1f2",soft:"rgba(225, 29, 72, 0.16)",border:"rgba(225, 29, 72, 0.45)"}},{id:"slate",label:"Slate",colors:{base:"#475569",contrast:"#f8fafc",soft:"rgba(71, 85, 105, 0.18)",border:"rgba(71, 85, 105, 0.5)"}},{id:"sky",label:"Sky",colors:{base:"#0284c7",contrast:"#e0f2fe",soft:"rgba(2, 132, 199, 0.16)",border:"rgba(2, 132, 199, 0.45)"}},{id:"blush",label:"Blush",colors:{base:"#ec4899",contrast:"#fff0f6",soft:"rgba(236, 72, 153, 0.18)",border:"rgba(236, 72, 153, 0.5)"}},{id:"moss",label:"Moss",colors:{base:"#4d7c0f",contrast:"#ecfccb",soft:"rgba(77, 124, 15, 0.18)",border:"rgba(77, 124, 15, 0.5)"}},{id:"bronze",label:"Bronze",colors:{base:"#b45309",contrast:"#fff7ed",soft:"rgba(180, 83, 9, 0.2)",border:"rgba(180, 83, 9, 0.55)"}},{id:"orchid",label:"Orchid",colors:{base:"#c026d3",contrast:"#fdf4ff",soft:"rgba(192, 38, 211, 0.18)",border:"rgba(192, 38, 211, 0.5)"}},{id:"mint",label:"Mint",colors:{base:"#14b8a6",contrast:"#e0fefa",soft:"rgba(20, 184, 166, 0.16)",border:"rgba(20, 184, 166, 0.46)"}},{id:"graphite",label:"Graphite",colors:{base:"#1f2937",contrast:"#f8fafc",soft:"rgba(31, 41, 55, 0.22)",border:"rgba(31, 41, 55, 0.6)"}},{id:"sunset",label:"Sunset",colors:{base:"#ea580c",contrast:"#fff7ed",soft:"rgba(234, 88, 12, 0.18)",border:"rgba(234, 88, 12, 0.52)"}},{id:"glacier",label:"Glacier",colors:{base:"#0ea5e9",contrast:"#f0f9ff",soft:"rgba(14, 165, 233, 0.16)",border:"rgba(14, 165, 233, 0.45)"}},{id:"amethyst",label:"Amethyst",colors:{base:"#6d28d9",contrast:"#f5f3ff",soft:"rgba(109, 40, 217, 0.18)",border:"rgba(109, 40, 217, 0.5)"}},{id:"sand",label:"Sand",colors:{base:"#ca8a04",contrast:"#fffbeb",soft:"rgba(202, 138, 4, 0.2)",border:"rgba(202, 138, 4, 0.5)"}},{id:"cranberry",label:"Cranberry",colors:{base:"#be123c",contrast:"#fff1f5",soft:"rgba(190, 18, 60, 0.18)",border:"rgba(190, 18, 60, 0.5)"}}],It=[{id:"aurora",label:"Aurora",gradients:{light:"linear-gradient(135deg, #d8b4fe 0%, #6366f1 50%, #22d3ee 100%)",dark:"linear-gradient(135deg, #312e81 0%, #1e3a8a 50%, #0f172a 100%)"},accent:"violet"},{id:"sunrise",label:"Sunrise",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 50%, #f97316 100%)",dark:"linear-gradient(135deg, #7c2d12 0%, #c2410c 45%, #ea580c 100%)"},accent:"amber"},{id:"forest",label:"Forest",gradients:{light:"linear-gradient(135deg, #bbf7d0 0%, #34d399 50%, #0f766e 100%)",dark:"linear-gradient(135deg, #064e3b 0%, #059669 50%, #0f172a 100%)"},accent:"emerald"},{id:"ocean",label:"Ocean",gradients:{light:"linear-gradient(135deg, #bae6fd 0%, #38bdf8 50%, #0ea5e9 100%)",dark:"linear-gradient(135deg, #0c4a6e 0%, #0369a1 50%, #082f49 100%)"},accent:"sky"},{id:"twilight",label:"Twilight",gradients:{light:"linear-gradient(135deg, #fecdd3 0%, #fda4af 50%, #fb7185 100%)",dark:"linear-gradient(135deg, #7f1d1d 0%, #be123c 50%, #9f1239 100%)"},accent:"orchid"},{id:"slate",label:"Slate",gradients:{light:"linear-gradient(135deg, #e2e8f0 0%, #cbd5f5 50%, #94a3b8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #020617 100%)"},accent:"slate"},{id:"blossom",label:"Blossom",gradients:{light:"linear-gradient(135deg, #ffe4e6 0%, #fbcfe8 45%, #f472b6 100%)",dark:"linear-gradient(135deg, #831843 0%, #9d174d 50%, #701a75 100%)"},accent:"blush"},{id:"lagoon",label:"Lagoon",gradients:{light:"linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 40%, #5eead4 100%)",dark:"linear-gradient(135deg, #022c22 0%, #0d9488 45%, #14b8a6 100%)"},accent:"mint"},{id:"ember",label:"Ember",gradients:{light:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 40%, #fb7185 100%)",dark:"linear-gradient(135deg, #450a0a 0%, #9f1239 50%, #be123c 100%)"},accent:"rose"},{id:"lilac",label:"Lilac",gradients:{light:"linear-gradient(135deg, #f5f3ff 0%, #ede9fe 45%, #d8b4fe 100%)",dark:"linear-gradient(135deg, #312e81 0%, #5b21b6 50%, #7c3aed 100%)"},accent:"violet"},{id:"zenith",label:"Zenith",gradients:{light:"linear-gradient(135deg, #e0f2fe 0%, #dbeafe 45%, #818cf8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #1f3b8a 45%, #3730a3 100%)"},accent:"cobalt"},{id:"sage",label:"Sage",gradients:{light:"linear-gradient(135deg, #ecfccb 0%, #bbf7d0 45%, #84cc16 100%)",dark:"linear-gradient(135deg, #052e16 0%, #166534 45%, #15803d 100%)"},accent:"moss"},{id:"velvet",label:"Velvet",gradients:{light:"linear-gradient(135deg, #fdf4ff 0%, #f5d0fe 45%, #f0abfc 100%)",dark:"linear-gradient(135deg, #4a044e 0%, #6b21a8 45%, #86198f 100%)"},accent:"orchid"},{id:"citrus",label:"Citrus",gradients:{light:"linear-gradient(135deg, #fefce8 0%, #fef08a 45%, #facc15 100%)",dark:"linear-gradient(135deg, #422006 0%, #854d0e 50%, #b45309 100%)"},accent:"amber"},{id:"glacier",label:"Glacier",gradients:{light:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 45%, #bae6fd 100%)",dark:"linear-gradient(135deg, #082f49 0%, #0c4a6e 45%, #0284c7 100%)"},accent:"sky"},{id:"terracotta",label:"Terracotta",gradients:{light:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 45%, #f97316 100%)",dark:"linear-gradient(135deg, #431407 0%, #7c2d12 45%, #9a3412 100%)"},accent:"bronze"},{id:"nocturne",label:"Nocturne",gradients:{light:"linear-gradient(135deg, #ede9fe 0%, #c7d2fe 45%, #4338ca 100%)",dark:"linear-gradient(135deg, #020617 0%, #111827 45%, #312e81 100%)"},accent:"slate"},{id:"horizon",label:"Horizon",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 40%, #60a5fa 100%)",dark:"linear-gradient(135deg, #451a03 0%, #9a3412 45%, #1d4ed8 100%)"},accent:"cobalt"}],Ct=It[0],ks=Ct!=null&&Ct.accent&&St.some(n=>n.id===Ct.accent)?Ct.accent:St[0].id,ye={theme:"system",accent:ks,background:{mode:"gradient",gradientId:(Ct==null?void 0:Ct.id)??It[0].id},titleBackdrop:!1,mergeAllBookmarks:!0,folderColumnWidth:1170,compactFolderHeader:!0,enableBookmarkSearch:!1,enableTopSites:!1,lastShortcutFolderId:null},_s={...ye,folderSelection:{...pn},version:_n},jn=6,Vn=10;function Qo(n,e,t){const o=n.slice();return o[4]=e[t],o}function Xo(n,e){let t,o=e[4].label+"",l,r,s,i,a;function u(){return e[3](e[4])}return{key:n,first:null,c(){t=C("button"),l=fe(o),r=U(),c(t,"type","button"),c(t,"class","choice-button"),c(t,"data-active",s=e[1]===e[4].id),this.first=t},m(d,_){z(d,t,_),b(t,l),b(t,r),i||(a=V(t,"click",u),i=!0)},p(d,_){e=d,_&1&&o!==(o=e[4].label+"")&&Ce(l,o),_&3&&s!==(s=e[1]===e[4].id)&&c(t,"data-active",s)},d(d){d&&q(t),i=!1,a()}}}function ps(n){let e,t=[],o=new Map,l=ge(n[0]);const r=s=>s[4].id;for(let s=0;s<l.length;s+=1){let i=Qo(n,l,s),a=r(i);o.set(a,t[s]=Xo(a,i))}return{c(){e=C("div");for(let s=0;s<t.length;s+=1)t[s].c();c(e,"class","choice-row")},m(s,i){z(s,e,i);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(s,[i]){i&7&&(l=ge(s[0]),t=tt(t,i,r,1,s,l,o,e,Nt,Xo,null,Qo))},i:$,o:$,d(s){s&&q(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function ws(n,e,t){let{options:o=[]}=e,{selected:l="system"}=e,{onChange:r=()=>{}}=e;const s=i=>r(i.id);return n.$$set=i=>{"options"in i&&t(0,o=i.options),"selected"in i&&t(1,l=i.selected),"onChange"in i&&t(2,r=i.onChange)},[o,l,r,s]}class ys extends He{constructor(e){super(),Ue(this,e,ws,ps,Pe,{options:0,selected:1,onChange:2})}}function Zo(n,e,t){const o=n.slice();return o[7]=e[t],o}function Jo(n,e){let t,o,l,r,s,i;function a(){return e[6](e[7])}return{key:n,first:null,c(){t=C("button"),c(t,"type","button"),c(t,"class","accent-swatch"),at(t,"--swatch-color",e[7].colors.base),c(t,"data-active",o=e[1]===e[7].id),c(t,"aria-label",l=e[7].label),c(t,"title",r=e[7].label),this.first=t},m(u,d){z(u,t,d),s||(i=V(t,"click",a),s=!0)},p(u,d){e=u,d&1&&at(t,"--swatch-color",e[7].colors.base),d&3&&o!==(o=e[1]===e[7].id)&&c(t,"data-active",o),d&1&&l!==(l=e[7].label)&&c(t,"aria-label",l),d&1&&r!==(r=e[7].label)&&c(t,"title",r)},d(u){u&&q(t),s=!1,i()}}}function xo(n){let e,t,o=n[2]?"Show fewer accent colors":"More accent colors",l,r,s;return{c(){e=C("div"),t=C("button"),l=fe(o),c(t,"type","button"),c(t,"class","swatch-toggle-button"),c(t,"aria-expanded",n[2]),c(e,"class","swatch-toggle-row")},m(i,a){z(i,e,a),b(e,t),b(t,l),r||(s=V(t,"click",function(){Ae(n[5])&&n[5].apply(this,arguments)}),r=!0)},p(i,a){n=i,a&4&&o!==(o=n[2]?"Show fewer accent colors":"More accent colors")&&Ce(l,o),a&4&&c(t,"aria-expanded",n[2])},d(i){i&&q(e),r=!1,s()}}}function Ss(n){let e,t=[],o=new Map,l,r,s=ge(n[0]);const i=u=>u[7].id;for(let u=0;u<s.length;u+=1){let d=Zo(n,s,u),_=i(d);o.set(_,t[u]=Jo(_,d))}let a=(n[0].length>n[3]||n[2])&&xo(n);return{c(){e=C("div");for(let u=0;u<t.length;u+=1)t[u].c();l=U(),a&&a.c(),r=qe(),c(e,"class","accent-grid")},m(u,d){z(u,e,d);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(e,null);z(u,l,d),a&&a.m(u,d),z(u,r,d)},p(u,[d]){d&19&&(s=ge(u[0]),t=tt(t,d,i,1,u,s,o,e,Nt,Jo,null,Zo)),u[0].length>u[3]||u[2]?a?a.p(u,d):(a=xo(u),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i:$,o:$,d(u){u&&(q(e),q(l),q(r));for(let d=0;d<t.length;d+=1)t[d].d();a&&a.d(u)}}}function Cs(n,e,t){let{options:o=[]}=e,{selected:l=""}=e,{showAll:r=!1}=e,{previewCount:s=10}=e,{onSelect:i=()=>{}}=e,{onToggleShowAll:a=()=>{}}=e;const u=d=>i(d.id);return n.$$set=d=>{"options"in d&&t(0,o=d.options),"selected"in d&&t(1,l=d.selected),"showAll"in d&&t(2,r=d.showAll),"previewCount"in d&&t(3,s=d.previewCount),"onSelect"in d&&t(4,i=d.onSelect),"onToggleShowAll"in d&&t(5,a=d.onToggleShowAll)},[o,l,r,s,i,a,u]}class Bs extends He{constructor(e){super(),Ue(this,e,Cs,Ss,Pe,{options:0,selected:1,showAll:2,previewCount:3,onSelect:4,onToggleShowAll:5})}}function $o(n,e,t){const o=n.slice();return o[9]=e[t],o}function el(n,e){let t,o,l=e[9].label+"",r,s,i,a,u;function d(){return e[8](e[9])}return{key:n,first:null,c(){t=C("button"),o=C("span"),r=fe(l),s=U(),c(t,"type","button"),c(t,"class","gradient-option"),at(t,"--gradient-sample-light",e[9].gradients.light),at(t,"--gradient-sample-dark",e[9].gradients.dark),c(t,"data-active",i=!e[2]&&e[1]===e[9].id),this.first=t},m(_,g){z(_,t,g),b(t,o),b(o,r),b(t,s),a||(u=V(t,"click",d),a=!0)},p(_,g){e=_,g&1&&l!==(l=e[9].label+"")&&Ce(r,l),g&1&&at(t,"--gradient-sample-light",e[9].gradients.light),g&1&&at(t,"--gradient-sample-dark",e[9].gradients.dark),g&7&&i!==(i=!e[2]&&e[1]===e[9].id)&&c(t,"data-active",i)},d(_){_&&q(t),a=!1,u()}}}function tl(n){let e,t,o=n[3]?"Show fewer gradients":"More gradients",l,r,s;return{c(){e=C("div"),t=C("button"),l=fe(o),c(t,"type","button"),c(t,"class","swatch-toggle-button"),c(t,"aria-expanded",n[3]),c(e,"class","swatch-toggle-row")},m(i,a){z(i,e,a),b(e,t),b(t,l),r||(s=V(t,"click",function(){Ae(n[6])&&n[6].apply(this,arguments)}),r=!0)},p(i,a){n=i,a&8&&o!==(o=n[3]?"Show fewer gradients":"More gradients")&&Ce(l,o),a&8&&c(t,"aria-expanded",n[3])},d(i){i&&q(e),r=!1,s()}}}function Is(n){let e,t=[],o=new Map,l,r,s,i,a,u,d=ge(n[0]);const _=h=>h[9].id;for(let h=0;h<d.length;h+=1){let m=$o(n,d,h),k=_(m);o.set(k,t[h]=el(k,m))}let g=(n[0].length>n[4]||n[3])&&tl(n);return{c(){e=C("div");for(let h=0;h<t.length;h+=1)t[h].c();l=U(),g&&g.c(),r=U(),s=C("section"),i=C("button"),i.textContent="Custom background‚Ä¶",c(e,"class","gradient-grid"),c(i,"type","button"),c(i,"class","custom-background-button"),c(s,"class","settings-group")},m(h,m){z(h,e,m);for(let k=0;k<t.length;k+=1)t[k]&&t[k].m(e,null);z(h,l,m),g&&g.m(h,m),z(h,r,m),z(h,s,m),b(s,i),a||(u=V(i,"click",function(){Ae(n[7])&&n[7].apply(this,arguments)}),a=!0)},p(h,[m]){n=h,m&39&&(d=ge(n[0]),t=tt(t,m,_,1,n,d,o,e,Nt,el,null,$o)),n[0].length>n[4]||n[3]?g?g.p(n,m):(g=tl(n),g.c(),g.m(r.parentNode,r)):g&&(g.d(1),g=null)},i:$,o:$,d(h){h&&(q(e),q(l),q(r),q(s));for(let m=0;m<t.length;m+=1)t[m].d();g&&g.d(h),a=!1,u()}}}function vs(n,e,t){let{options:o=[]}=e,{selectedGradientId:l=null}=e,{isCustomMode:r=!1}=e,{showAll:s=!1}=e,{previewCount:i=6}=e,{onSelect:a=()=>{}}=e,{onToggleShowAll:u=()=>{}}=e,{onCustomClick:d=()=>{}}=e;const _=g=>a(g.id);return n.$$set=g=>{"options"in g&&t(0,o=g.options),"selectedGradientId"in g&&t(1,l=g.selectedGradientId),"isCustomMode"in g&&t(2,r=g.isCustomMode),"showAll"in g&&t(3,s=g.showAll),"previewCount"in g&&t(4,i=g.previewCount),"onSelect"in g&&t(5,a=g.onSelect),"onToggleShowAll"in g&&t(6,u=g.onToggleShowAll),"onCustomClick"in g&&t(7,d=g.onCustomClick)},[o,l,r,s,i,a,u,d,_]}class Ts extends He{constructor(e){super(),Ue(this,e,vs,Is,Pe,{options:0,selectedGradientId:1,isCustomMode:2,showAll:3,previewCount:4,onSelect:5,onToggleShowAll:6,onCustomClick:7})}}function nl(n,e,t){const o=n.slice();return o[2]=e[t],o}function Ds(n){let e=[],t=new Map,o,l=ge(n[0]);const r=s=>s[2].id;for(let s=0;s<l.length;s+=1){let i=nl(n,l,s),a=r(i);t.set(a,e[s]=ol(a,i))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();o=qe()},m(s,i){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(s,i);z(s,o,i)},p(s,i){i&1&&(l=ge(s[0]),e=tt(e,i,r,1,s,l,t,o.parentNode,Nt,ol,o,nl))},d(s){s&&q(o);for(let i=0;i<e.length;i+=1)e[i].d(s)}}}function Fs(n){let e;return{c(){e=C("span"),e.textContent="Default folder",c(e,"class","folder-chip folder-chip--empty"),c(e,"title","Default Bookmark Dial folder")},m(t,o){z(t,e,o)},p:$,d(t){t&&q(e)}}}function ol(n,e){let t,o,l=e[2].label+"",r,s,i,a=e[2].count+"",u,d,_;return{key:n,first:null,c(){t=C("span"),o=C("span"),r=fe(l),s=U(),i=C("span"),u=fe(a),d=U(),c(o,"class","folder-chip__label"),c(i,"class","folder-chip__count"),c(t,"class","folder-chip"),c(t,"title",_=e[2].fullPath),this.first=t},m(g,h){z(g,t,h),b(t,o),b(o,r),b(t,s),b(t,i),b(i,u),b(t,d)},p(g,h){e=g,h&1&&l!==(l=e[2].label+"")&&Ce(r,l),h&1&&a!==(a=e[2].count+"")&&Ce(u,a),h&1&&_!==(_=e[2].fullPath)&&c(t,"title",_)},d(g){g&&q(t)}}}function Ms(n){let e,t,o,l,r,s;function i(d,_){return d[0].length===0?Fs:Ds}let a=i(n),u=a(n);return{c(){e=C("div"),t=C("div"),u.c(),o=U(),l=C("button"),l.textContent="Manage folders",c(t,"class","folder-bar__summary"),c(l,"type","button"),c(l,"class","ghost-button folder-bar__action"),c(e,"class","folder-bar")},m(d,_){z(d,e,_),b(e,t),u.m(t,null),b(e,o),b(e,l),r||(s=V(l,"click",function(){Ae(n[1])&&n[1].apply(this,arguments)}),r=!0)},p(d,[_]){n=d,a===(a=i(n))&&u?u.p(n,_):(u.d(1),u=a(n),u&&(u.c(),u.m(t,null)))},i:$,o:$,d(d){d&&q(e),u.d(),r=!1,s()}}}function Es(n,e,t){let{summary:o=[]}=e,{onChooseFolders:l=()=>{}}=e;return n.$$set=r=>{"summary"in r&&t(0,o=r.summary),"onChooseFolders"in r&&t(1,l=r.onChooseFolders)},[o,l]}class As extends He{constructor(e){super(),Ue(this,e,Es,Ms,Pe,{summary:0,onChooseFolders:1})}}function ll(n){let e,t,o,l,r,s,i,a,u,d,_,g,h,m;return{c(){e=C("div"),t=C("label"),o=C("span"),o.textContent="Folder width",l=U(),r=C("input"),i=U(),a=C("label"),u=C("input"),_=U(),g=C("div"),g.innerHTML='<span class="settings-toggle__label">Compact header</span> <span class="settings-toggle__description">Hide folder path to save space.</span>',c(o,"class","settings-control__label"),c(r,"type","range"),c(r,"min","480"),c(r,"max","1860"),c(r,"step","20"),r.value=s=n[1].folderColumnWidth,c(t,"class","settings-control"),c(u,"type","checkbox"),u.checked=d=n[1].compactFolderHeader,c(g,"class","settings-toggle__body"),c(a,"class","settings-toggle"),c(e,"class","ungrouped-settings")},m(k,S){z(k,e,S),b(e,t),b(t,o),b(t,l),b(t,r),b(e,i),b(e,a),b(a,u),b(a,_),b(a,g),h||(m=[V(r,"input",n[25]),V(u,"change",n[26])],h=!0)},p(k,S){S&2&&s!==(s=k[1].folderColumnWidth)&&(r.value=s),S&2&&d!==(d=k[1].compactFolderHeader)&&(u.checked=d)},d(k){k&&q(e),h=!1,Le(m)}}}function Ls(n){let e,t,o,l,r,s,i,a,u,d,_,g,h,m,k,S,y,I,L,P,v,D,A,N,M,j,K,Q,te,ie,R,ee,O,x,oe,ce,H,pe,B,Y,we,De,ne,Fe,T,ke,ze,Ye,Se,je,me,Ve,Re,Be,We,be,Qe,$e,Oe,rt;d=new ys({props:{options:Wl,selected:n[1].theme,onChange:n[8]}}),k=new Bs({props:{options:n[3],selected:n[1].accent,showAllAccents:n[5],previewCount:Vn,onSelect:n[9],onToggleShowAll:n[18]}}),te=new Ts({props:{options:n[4],selectedGradientId:n[1].background.gradientId,isCustomMode:n[1].background.mode==="custom",showAllGradients:n[6],previewCount:jn,onSelect:n[11],onToggleShowAll:n[19],onCustomClick:n[12]}}),x=new As({props:{summary:n[2],onChooseFolders:n[20]}});let Ie=!n[1].mergeAllBookmarks&&ll(n);return{c(){e=C("aside"),t=C("header"),o=C("h2"),o.innerHTML=`<img src="/icons/icon-48.png" alt="Bookmark Dial" class="settings-drawer__brand-icon"/>
      Settings`,l=U(),r=C("button"),r.textContent="√ó",s=U(),i=C("section"),a=C("h3"),a.textContent="Theme",u=U(),Ee(d.$$.fragment),_=U(),g=C("section"),h=C("h3"),h.textContent="Accent color",m=U(),Ee(k.$$.fragment),S=U(),y=C("section"),I=C("h3"),I.textContent="Tile titles",L=U(),P=C("label"),v=C("input"),A=U(),N=C("div"),N.innerHTML='<span class="settings-toggle__label">Rounded backdrop</span>',M=U(),j=C("section"),K=C("h3"),K.textContent="Gradient background",Q=U(),Ee(te.$$.fragment),ie=U(),R=C("section"),ee=C("h3"),ee.textContent="Folders",O=U(),Ee(x.$$.fragment),oe=U(),ce=C("label"),H=C("input"),B=U(),Y=C("div"),Y.innerHTML='<span class="settings-toggle__label">Merge bookmarks from all folders</span> <span class="settings-toggle__description">Display all bookmarks in a single deduplicated grid.</span>',we=U(),Ie&&Ie.c(),De=U(),ne=C("section"),Fe=C("h3"),Fe.textContent="Experimental",T=U(),ke=C("label"),ze=C("input"),Se=U(),je=C("div"),je.innerHTML='<span class="settings-toggle__label">Bookmark search</span> <span class="settings-toggle__description">Press <kbd>/</kbd> to search bookmarks.</span>',me=U(),Ve=C("label"),Re=C("input"),We=U(),be=C("div"),be.innerHTML='<span class="settings-toggle__label">Show frequently visited</span> <span class="settings-toggle__description">Include your most visited sites alongside bookmarks.</span>',c(r,"type","button"),c(r,"class","settings-drawer__close"),c(r,"aria-label","Close settings"),c(t,"class","settings-drawer__header"),c(i,"class","settings-group"),c(g,"class","settings-group"),c(v,"type","checkbox"),v.checked=D=n[1].titleBackdrop,c(N,"class","settings-toggle__body"),c(P,"class","settings-toggle"),c(P,"title","Adds a soft highlight behind each title for contrast."),c(y,"class","settings-group"),c(j,"class","settings-group"),c(H,"type","checkbox"),H.checked=pe=n[1].mergeAllBookmarks,c(Y,"class","settings-toggle__body"),c(ce,"class","settings-toggle folder-group-toggle"),c(R,"class","settings-group settings-group--folders"),c(ze,"type","checkbox"),ze.checked=Ye=n[1].enableBookmarkSearch,c(je,"class","settings-toggle__body"),c(ke,"class","settings-toggle"),c(Re,"type","checkbox"),Re.checked=Be=n[1].enableTopSites,c(be,"class","settings-toggle__body"),c(Ve,"class","settings-toggle"),c(ne,"class","settings-group"),c(e,"id","settings-drawer"),c(e,"class","settings-drawer"),c(e,"data-open",n[0]),c(e,"aria-hidden",Qe=!n[0]),c(e,"tabindex","-1")},m(Me,ae){z(Me,e,ae),b(e,t),b(t,o),b(t,l),b(t,r),b(e,s),b(e,i),b(i,a),b(i,u),ve(d,i,null),b(e,_),b(e,g),b(g,h),b(g,m),ve(k,g,null),b(e,S),b(e,y),b(y,I),b(y,L),b(y,P),b(P,v),b(P,A),b(P,N),b(e,M),b(e,j),b(j,K),b(j,Q),ve(te,j,null),b(e,ie),b(e,R),b(R,ee),b(R,O),ve(x,R,null),b(R,oe),b(R,ce),b(ce,H),b(ce,B),b(ce,Y),b(R,we),Ie&&Ie.m(R,null),b(e,De),b(e,ne),b(ne,Fe),b(ne,T),b(ne,ke),b(ke,ze),b(ke,Se),b(ke,je),b(ne,me),b(ne,Ve),b(Ve,Re),b(Ve,We),b(Ve,be),n[29](e),$e=!0,Oe||(rt=[V(r,"click",function(){Ae(n[7])&&n[7].apply(this,arguments)}),V(v,"change",n[23]),V(H,"change",n[24]),V(ze,"change",n[27]),V(Re,"change",n[28]),V(e,"click",hi(n[22]))],Oe=!0)},p(Me,[ae]){n=Me;const de={};ae&2&&(de.selected=n[1].theme),ae&256&&(de.onChange=n[8]),d.$set(de);const Xe={};ae&8&&(Xe.options=n[3]),ae&2&&(Xe.selected=n[1].accent),ae&32&&(Xe.showAllAccents=n[5]),ae&512&&(Xe.onSelect=n[9]),ae&262144&&(Xe.onToggleShowAll=n[18]),k.$set(Xe),(!$e||ae&2&&D!==(D=n[1].titleBackdrop))&&(v.checked=D);const et={};ae&16&&(et.options=n[4]),ae&2&&(et.selectedGradientId=n[1].background.gradientId),ae&2&&(et.isCustomMode=n[1].background.mode==="custom"),ae&64&&(et.showAllGradients=n[6]),ae&2048&&(et.onSelect=n[11]),ae&524288&&(et.onToggleShowAll=n[19]),ae&4096&&(et.onCustomClick=n[12]),te.$set(et);const it={};ae&4&&(it.summary=n[2]),ae&1048576&&(it.onChooseFolders=n[20]),x.$set(it),(!$e||ae&2&&pe!==(pe=n[1].mergeAllBookmarks))&&(H.checked=pe),n[1].mergeAllBookmarks?Ie&&(Ie.d(1),Ie=null):Ie?Ie.p(n,ae):(Ie=ll(n),Ie.c(),Ie.m(R,null)),(!$e||ae&2&&Ye!==(Ye=n[1].enableBookmarkSearch))&&(ze.checked=Ye),(!$e||ae&2&&Be!==(Be=n[1].enableTopSites))&&(Re.checked=Be),(!$e||ae&1)&&c(e,"data-open",n[0]),(!$e||ae&1&&Qe!==(Qe=!n[0]))&&c(e,"aria-hidden",Qe)},i(Me){$e||(X(d.$$.fragment,Me),X(k.$$.fragment,Me),X(te.$$.fragment,Me),X(x.$$.fragment,Me),$e=!0)},o(Me){J(d.$$.fragment,Me),J(k.$$.fragment,Me),J(te.$$.fragment,Me),J(x.$$.fragment,Me),$e=!1},d(Me){Me&&q(e),Te(d),Te(k),Te(te),Te(x),Ie&&Ie.d(),n[29](null),Oe=!1,Le(rt)}}}function Os(n,e,t){let{open:o=!1}=e,{settings:l}=e,{folderSummary:r=[]}=e,{visibleAccentOptions:s=[]}=e,{visibleGradientOptions:i=[]}=e,{showAllAccents:a=!1}=e,{showAllGradients:u=!1}=e,{onClose:d=()=>{}}=e,{onThemeChange:_=()=>{}}=e,{onAccentChange:g=()=>{}}=e,{onTitleBackdropChange:h=()=>{}}=e,{onGradientSelect:m=()=>{}}=e,{onCustomBackgroundClick:k=()=>{}}=e,{onMergeAllChange:S=()=>{}}=e,{onFolderColumnWidthChange:y=()=>{}}=e,{onCompactHeaderChange:I=()=>{}}=e,{onSearchToggle:L=()=>{}}=e,{onTopSitesToggle:P=()=>{}}=e,{onToggleAccents:v=()=>{}}=e,{onToggleGradients:D=()=>{}}=e,{onOpenFolderModal:A=()=>{}}=e,N;function M(O){Si.call(this,n,O)}const j=O=>h(O.currentTarget.checked),K=O=>S(O.currentTarget.checked),Q=O=>y(Number(O.currentTarget.value)),te=O=>I(O.currentTarget.checked),ie=O=>L(O.currentTarget.checked),R=O=>P(O.currentTarget.checked);function ee(O){lt[O?"unshift":"push"](()=>{N=O,t(21,N)})}return n.$$set=O=>{"open"in O&&t(0,o=O.open),"settings"in O&&t(1,l=O.settings),"folderSummary"in O&&t(2,r=O.folderSummary),"visibleAccentOptions"in O&&t(3,s=O.visibleAccentOptions),"visibleGradientOptions"in O&&t(4,i=O.visibleGradientOptions),"showAllAccents"in O&&t(5,a=O.showAllAccents),"showAllGradients"in O&&t(6,u=O.showAllGradients),"onClose"in O&&t(7,d=O.onClose),"onThemeChange"in O&&t(8,_=O.onThemeChange),"onAccentChange"in O&&t(9,g=O.onAccentChange),"onTitleBackdropChange"in O&&t(10,h=O.onTitleBackdropChange),"onGradientSelect"in O&&t(11,m=O.onGradientSelect),"onCustomBackgroundClick"in O&&t(12,k=O.onCustomBackgroundClick),"onMergeAllChange"in O&&t(13,S=O.onMergeAllChange),"onFolderColumnWidthChange"in O&&t(14,y=O.onFolderColumnWidthChange),"onCompactHeaderChange"in O&&t(15,I=O.onCompactHeaderChange),"onSearchToggle"in O&&t(16,L=O.onSearchToggle),"onTopSitesToggle"in O&&t(17,P=O.onTopSitesToggle),"onToggleAccents"in O&&t(18,v=O.onToggleAccents),"onToggleGradients"in O&&t(19,D=O.onToggleGradients),"onOpenFolderModal"in O&&t(20,A=O.onOpenFolderModal)},n.$$.update=()=>{n.$$.dirty&2097153&&o&&N&&N.focus()},[o,l,r,s,i,a,u,d,_,g,h,m,k,S,y,I,L,P,v,D,A,N,M,j,K,Q,te,ie,R,ee]}class Ps extends He{constructor(e){super(),Ue(this,e,Os,Ls,Pe,{open:0,settings:1,folderSummary:2,visibleAccentOptions:3,visibleGradientOptions:4,showAllAccents:5,showAllGradients:6,onClose:7,onThemeChange:8,onAccentChange:9,onTitleBackdropChange:10,onGradientSelect:11,onCustomBackgroundClick:12,onMergeAllChange:13,onFolderColumnWidthChange:14,onCompactHeaderChange:15,onSearchToggle:16,onTopSitesToggle:17,onToggleAccents:18,onToggleGradients:19,onOpenFolderModal:20})}}function rl(n,e,t){const o=n.slice();return o[34]=e[t],o[36]=t,o}function il(n,e,t){const o=n.slice();return o[37]=e[t],o[39]=t,o}function sl(n,e){var m,k;let t,o,l;function r(){return e[22](e[37])}function s(){return e[23](e[37])}function i(){return e[24](e[37])}function a(){return e[25](e[37])}function u(...S){return e[26](e[37],...S)}function d(){return e[27](e[39])}function _(...S){return e[28](e[37],...S)}function g(...S){return e[29](e[37],...S)}function h(...S){return e[30](e[37],...S)}return o=new xn({props:{bookmark:e[37],titleBackdrop:e[3],menuOpen:e[5]===e[37].id,focused:e[4]===e[39],dragging:((m=e[6])==null?void 0:m.id)===e[37].id,dragOver:((k=e[7])==null?void 0:k.id)===e[37].id,onToggleMenu:r,onEdit:s,onRemove:i,onFallback:a,onContextMenu:u,onFocus:d,onDragStart:_,onDragOver:g,onDragLeave:e[16],onDrop:h,onDragEnd:e[18],getFaviconUrl:e[20]}}),{key:n,first:null,c(){t=qe(),Ee(o.$$.fragment),this.first=t},m(S,y){z(S,t,y),ve(o,S,y),l=!0},p(S,y){var L,P;e=S;const I={};y[0]&1&&(I.bookmark=e[37]),y[0]&8&&(I.titleBackdrop=e[3]),y[0]&33&&(I.menuOpen=e[5]===e[37].id),y[0]&17&&(I.focused=e[4]===e[39]),y[0]&65&&(I.dragging=((L=e[6])==null?void 0:L.id)===e[37].id),y[0]&129&&(I.dragOver=((P=e[7])==null?void 0:P.id)===e[37].id),y[0]&257&&(I.onToggleMenu=r),y[0]&513&&(I.onEdit=s),y[0]&1025&&(I.onRemove=i),y[0]&2049&&(I.onFallback=a),y[0]&4097&&(I.onContextMenu=u),y[0]&8193&&(I.onFocus=d),y[0]&16385&&(I.onDragStart=_),y[0]&32769&&(I.onDragOver=g),y[0]&65536&&(I.onDragLeave=e[16]),y[0]&131073&&(I.onDrop=h),y[0]&262144&&(I.onDragEnd=e[18]),y[0]&1048576&&(I.getFaviconUrl=e[20]),o.$set(I)},i(S){l||(X(o.$$.fragment,S),l=!0)},o(S){J(o.$$.fragment,S),l=!1},d(S){S&&q(t),Te(o,S)}}}function al(n){let e=[],t=new Map,o,l,r=ge(n[1]);const s=i=>i[34].id;for(let i=0;i<r.length;i+=1){let a=rl(n,r,i),u=s(a);t.set(u,e[i]=cl(u,a))}return{c(){for(let i=0;i<e.length;i+=1)e[i].c();o=qe()},m(i,a){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(i,a);z(i,o,a),l=!0},p(i,a){a[0]&1056795&&(r=ge(i[1]),Ge(),e=tt(e,a,s,1,i,r,t,o.parentNode,Tt,cl,o,rl),Ne())},i(i){if(!l){for(let a=0;a<r.length;a+=1)X(e[a]);l=!0}},o(i){for(let a=0;a<e.length;a+=1)J(e[a]);l=!1},d(i){i&&q(o);for(let a=0;a<e.length;a+=1)e[a].d(i)}}}function cl(n,e){let t,o,l;function r(){return e[31](e[36])}return o=new xn({props:{bookmark:e[34],titleBackdrop:e[3],menuOpen:!1,focused:e[4]===e[0].length+e[36],dragging:!1,dragOver:!1,onToggleMenu:Hs,onEdit:Rs,onRemove:Gs,onFallback:Ns,onContextMenu:qs,onFocus:r,onDragStart:zs,onDragOver:Ws,onDragLeave:js,onDrop:Vs,onDragEnd:Ks,getFaviconUrl:e[20],isTopSite:!0}}),{key:n,first:null,c(){t=qe(),Ee(o.$$.fragment),this.first=t},m(s,i){z(s,t,i),ve(o,s,i),l=!0},p(s,i){e=s;const a={};i[0]&2&&(a.bookmark=e[34]),i[0]&8&&(a.titleBackdrop=e[3]),i[0]&19&&(a.focused=e[4]===e[0].length+e[36]),i[0]&8195&&(a.onFocus=r),i[0]&1048576&&(a.getFaviconUrl=e[20]),o.$set(a)},i(s){l||(X(o.$$.fragment,s),l=!0)},o(s){J(o.$$.fragment,s),l=!1},d(s){s&&q(t),Te(o,s)}}}function Us(n){let e,t=[],o=new Map,l,r,s,i,a,u,d,_=ge(n[0]);const g=m=>m[37].id;for(let m=0;m<_.length;m+=1){let k=il(n,_,m),S=g(k);o.set(S,t[m]=sl(S,k))}let h=n[2]&&n[1].length>0&&al(n);return{c(){e=C("div");for(let m=0;m<t.length;m+=1)t[m].c();l=U(),h&&h.c(),r=U(),s=C("article"),i=C("button"),i.innerHTML='<span aria-hidden="true">+</span> <div>Add shortcut</div>',c(i,"class","add-button"),c(i,"type","button"),c(i,"aria-label","Add new bookmark shortcut"),c(s,"class","tile add-tile"),c(s,"draggable","false"),c(e,"id","dial-grid"),c(e,"class","grid"),c(e,"aria-label","Bookmark Dial links"),c(e,"tabindex","-1"),c(e,"role","group")},m(m,k){z(m,e,k);for(let S=0;S<t.length;S+=1)t[S]&&t[S].m(e,null);b(e,l),h&&h.m(e,null),b(e,r),b(e,s),b(s,i),n[32](e),a=!0,u||(d=V(i,"click",function(){Ae(n[19])&&n[19].apply(this,arguments)}),u=!0)},p(m,k){n=m,k[0]&1572857&&(_=ge(n[0]),Ge(),t=tt(t,k,g,1,n,_,o,e,Tt,sl,l,il),Ne()),n[2]&&n[1].length>0?h?(h.p(n,k),k[0]&6&&X(h,1)):(h=al(n),h.c(),X(h,1),h.m(e,r)):h&&(Ge(),J(h,1,1,()=>{h=null}),Ne())},i(m){if(!a){for(let k=0;k<_.length;k+=1)X(t[k]);X(h),a=!0}},o(m){for(let k=0;k<t.length;k+=1)J(t[k]);J(h),a=!1},d(m){m&&q(e);for(let k=0;k<t.length;k+=1)t[k].d();h&&h.d(),n[32](null),u=!1,d()}}}const Hs=()=>{},Rs=()=>{},Gs=()=>{},Ns=()=>{},qs=()=>{},zs=()=>{},Ws=()=>{},js=()=>{},Vs=()=>{},Ks=()=>{};function Ys(n,e,t){const o=Ol();let{bookmarks:l=[]}=e,{topSites:r=[]}=e,{showTopSites:s=!1}=e,{titleBackdrop:i=!1}=e,{focusedIndex:a=-1}=e,{openMenuId:u=null}=e,{draggedBookmark:d=null}=e,{dragOverBookmark:_=null}=e,{onTileMenu:g=()=>{}}=e,{onTileEdit:h=()=>{}}=e,{onTileRemove:m=()=>{}}=e,{onTileFallback:k=()=>{}}=e,{onTileContextMenu:S=()=>{}}=e,{onTileFocus:y=()=>{}}=e,{onDragStart:I=()=>{}}=e,{onDragOver:L=()=>{}}=e,{onDragLeave:P=()=>{}}=e,{onDrop:v=()=>{}}=e,{onDragEnd:D=()=>{}}=e,{onAddShortcut:A=()=>{}}=e,{getFaviconUrl:N=async()=>""}=e,M=null;Ll(()=>{o("gridmount",{gridRef:M})});const j=H=>g(H.id),K=H=>h(H),Q=H=>m(H.id),te=H=>k(H.id),ie=(H,pe)=>S(pe,H),R=H=>y(H),ee=(H,pe)=>I(pe,H),O=(H,pe)=>L(pe,H),x=(H,pe)=>v(pe,H),oe=H=>y(l.length+H);function ce(H){lt[H?"unshift":"push"](()=>{M=H,t(21,M)})}return n.$$set=H=>{"bookmarks"in H&&t(0,l=H.bookmarks),"topSites"in H&&t(1,r=H.topSites),"showTopSites"in H&&t(2,s=H.showTopSites),"titleBackdrop"in H&&t(3,i=H.titleBackdrop),"focusedIndex"in H&&t(4,a=H.focusedIndex),"openMenuId"in H&&t(5,u=H.openMenuId),"draggedBookmark"in H&&t(6,d=H.draggedBookmark),"dragOverBookmark"in H&&t(7,_=H.dragOverBookmark),"onTileMenu"in H&&t(8,g=H.onTileMenu),"onTileEdit"in H&&t(9,h=H.onTileEdit),"onTileRemove"in H&&t(10,m=H.onTileRemove),"onTileFallback"in H&&t(11,k=H.onTileFallback),"onTileContextMenu"in H&&t(12,S=H.onTileContextMenu),"onTileFocus"in H&&t(13,y=H.onTileFocus),"onDragStart"in H&&t(14,I=H.onDragStart),"onDragOver"in H&&t(15,L=H.onDragOver),"onDragLeave"in H&&t(16,P=H.onDragLeave),"onDrop"in H&&t(17,v=H.onDrop),"onDragEnd"in H&&t(18,D=H.onDragEnd),"onAddShortcut"in H&&t(19,A=H.onAddShortcut),"getFaviconUrl"in H&&t(20,N=H.getFaviconUrl)},n.$$.update=()=>{n.$$.dirty[0]&2097152&&M&&o("gridmount",{gridRef:M})},[l,r,s,i,a,u,d,_,g,h,m,k,S,y,I,L,P,v,D,A,N,M,j,K,Q,te,ie,R,ee,O,x,oe,ce]}class Qs extends He{constructor(e){super(),Ue(this,e,Ys,Us,Pe,{bookmarks:0,topSites:1,showTopSites:2,titleBackdrop:3,focusedIndex:4,openMenuId:5,draggedBookmark:6,dragOverBookmark:7,onTileMenu:8,onTileEdit:9,onTileRemove:10,onTileFallback:11,onTileContextMenu:12,onTileFocus:13,onDragStart:14,onDragOver:15,onDragLeave:16,onDrop:17,onDragEnd:18,onAddShortcut:19,getFaviconUrl:20},null,[-1,-1])}}function ul(n,e,t){const o=n.slice();return o[28]=e[t],o}function Xs(n){let e,t=n[0].label+"",o,l,r,s=n[0].fullPath&&n[0].fullPath!==n[0].label&&fl(n);return{c(){e=C("h4"),o=fe(t),l=U(),s&&s.c(),r=qe(),c(e,"class","folder-section__title")},m(i,a){z(i,e,a),b(e,o),z(i,l,a),s&&s.m(i,a),z(i,r,a)},p(i,a){a&1&&t!==(t=i[0].label+"")&&Ce(o,t),i[0].fullPath&&i[0].fullPath!==i[0].label?s?s.p(i,a):(s=fl(i),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(i){i&&(q(e),q(l),q(r)),s&&s.d(i)}}}function Zs(n){let e,t=n[0].label+"",o,l;return{c(){e=C("h4"),o=fe(t),c(e,"class","folder-section__title"),c(e,"title",l=n[0].fullPath)},m(r,s){z(r,e,s),b(e,o)},p(r,s){s&1&&t!==(t=r[0].label+"")&&Ce(o,t),s&1&&l!==(l=r[0].fullPath)&&c(e,"title",l)},d(r){r&&q(e)}}}function fl(n){let e,t=n[0].fullPath+"",o;return{c(){e=C("p"),o=fe(t),c(e,"class","folder-section__path")},m(l,r){z(l,e,r),b(e,o)},p(l,r){r&1&&t!==(t=l[0].fullPath+"")&&Ce(o,t)},d(l){l&&q(e)}}}function Js(n){let e,t,o,l,r,s;return{c(){e=C("div"),t=C("article"),o=C("button"),o.innerHTML='<span aria-hidden="true">+</span> <div>Add shortcut</div>',c(o,"class","add-button"),c(o,"type","button"),c(t,"class","tile add-tile"),c(t,"draggable","false"),c(e,"class","grid folder-section__grid"),c(e,"role","group"),c(e,"aria-label",l=`Shortcuts in ${n[0].fullPath||n[0].label}`)},m(i,a){z(i,e,a),b(e,t),b(t,o),r||(s=V(o,"click",n[27]),r=!0)},p(i,a){a&1&&l!==(l=`Shortcuts in ${i[0].fullPath||i[0].label}`)&&c(e,"aria-label",l)},i:$,o:$,d(i){i&&q(e),r=!1,s()}}}function xs(n){let e,t=[],o=new Map,l,r,s,i,a,u,d,_=ge(n[0].items);const g=h=>h[28].id;for(let h=0;h<_.length;h+=1){let m=ul(n,_,h),k=g(m);o.set(k,t[h]=dl(k,m))}return{c(){e=C("div");for(let h=0;h<t.length;h+=1)t[h].c();l=U(),r=C("article"),s=C("button"),s.innerHTML='<span aria-hidden="true">+</span> <div>Add shortcut</div>',c(s,"class","add-button"),c(s,"type","button"),c(r,"class","tile add-tile"),c(r,"draggable","false"),c(e,"class","grid folder-section__grid"),c(e,"role","group"),c(e,"aria-label",i=`Shortcuts in ${n[0].fullPath||n[0].label}`)},m(h,m){z(h,e,m);for(let k=0;k<t.length;k+=1)t[k]&&t[k].m(e,null);b(e,l),b(e,r),b(r,s),a=!0,u||(d=V(s,"click",n[26]),u=!0)},p(h,m){m&196605&&(_=ge(h[0].items),Ge(),t=tt(t,m,g,1,h,_,o,e,Tt,dl,l,ul),Ne()),(!a||m&1&&i!==(i=`Shortcuts in ${h[0].fullPath||h[0].label}`))&&c(e,"aria-label",i)},i(h){if(!a){for(let m=0;m<_.length;m+=1)X(t[m]);a=!0}},o(h){for(let m=0;m<t.length;m+=1)J(t[m]);a=!1},d(h){h&&q(e);for(let m=0;m<t.length;m+=1)t[m].d();u=!1,d()}}}function dl(n,e){var h,m;let t,o,l;function r(){return e[18](e[28])}function s(){return e[19](e[28])}function i(){return e[20](e[28])}function a(){return e[21](e[28])}function u(...k){return e[22](e[28],...k)}function d(...k){return e[23](e[28],...k)}function _(...k){return e[24](e[28],...k)}function g(...k){return e[25](e[28],...k)}return o=new xn({props:{bookmark:e[28],titleBackdrop:e[2],menuOpen:e[3]===e[28].id,focused:!1,dragging:((h=e[4])==null?void 0:h.id)===e[28].id,dragOver:((m=e[5])==null?void 0:m.id)===e[28].id,onToggleMenu:r,onEdit:s,onRemove:i,onFallback:a,onContextMenu:u,onFocus:ea,onDragStart:d,onDragOver:_,onDragLeave:e[13],onDrop:g,onDragEnd:e[15],getFaviconUrl:e[17]}}),{key:n,first:null,c(){t=qe(),Ee(o.$$.fragment),this.first=t},m(k,S){z(k,t,S),ve(o,k,S),l=!0},p(k,S){var I,L;e=k;const y={};S&1&&(y.bookmark=e[28]),S&4&&(y.titleBackdrop=e[2]),S&9&&(y.menuOpen=e[3]===e[28].id),S&17&&(y.dragging=((I=e[4])==null?void 0:I.id)===e[28].id),S&33&&(y.dragOver=((L=e[5])==null?void 0:L.id)===e[28].id),S&65&&(y.onToggleMenu=r),S&129&&(y.onEdit=s),S&257&&(y.onRemove=i),S&513&&(y.onFallback=a),S&1025&&(y.onContextMenu=u),S&2049&&(y.onDragStart=d),S&4097&&(y.onDragOver=_),S&8192&&(y.onDragLeave=e[13]),S&16385&&(y.onDrop=g),S&32768&&(y.onDragEnd=e[15]),S&131072&&(y.getFaviconUrl=e[17]),o.$set(y)},i(k){l||(X(o.$$.fragment,k),l=!0)},o(k){J(o.$$.fragment,k),l=!1},d(k){k&&q(t),Te(o,k)}}}function $s(n){let e,t,o,l,r,s,i;function a(m,k){return m[1]?Zs:Xs}let u=a(n),d=u(n);const _=[xs,Js],g=[];function h(m,k){return m[0].items.length?0:1}return r=h(n),s=g[r]=_[r](n),{c(){e=C("section"),t=C("header"),o=C("div"),d.c(),l=U(),s.c(),c(o,"class","folder-section__titles"),c(t,"class","folder-section__header"),c(e,"class","folder-section")},m(m,k){z(m,e,k),b(e,t),b(t,o),d.m(o,null),b(e,l),g[r].m(e,null),i=!0},p(m,[k]){u===(u=a(m))&&d?d.p(m,k):(d.d(1),d=u(m),d&&(d.c(),d.m(o,null)));let S=r;r=h(m),r===S?g[r].p(m,k):(Ge(),J(g[S],1,1,()=>{g[S]=null}),Ne(),s=g[r],s?s.p(m,k):(s=g[r]=_[r](m),s.c()),X(s,1),s.m(e,null))},i(m){i||(X(s),i=!0)},o(m){J(s),i=!1},d(m){m&&q(e),d.d(),g[r].d()}}}const ea=()=>{};function ta(n,e,t){let{group:o}=e,{compactHeader:l=!0}=e,{titleBackdrop:r=!1}=e,{openMenuId:s=null}=e,{draggedBookmark:i=null}=e,{dragOverBookmark:a=null}=e,{onTileMenu:u=()=>{}}=e,{onTileEdit:d=()=>{}}=e,{onTileRemove:_=()=>{}}=e,{onTileFallback:g=()=>{}}=e,{onTileContextMenu:h=()=>{}}=e,{onDragStart:m=()=>{}}=e,{onDragOver:k=()=>{}}=e,{onDragLeave:S=()=>{}}=e,{onDrop:y=()=>{}}=e,{onDragEnd:I=()=>{}}=e,{onAddShortcut:L=()=>{}}=e,{getFaviconUrl:P=async()=>""}=e;const v=R=>u(R.id),D=R=>d(R),A=R=>_(R.id),N=R=>g(R.id),M=(R,ee)=>h(ee,R),j=(R,ee)=>m(ee,R,o.id),K=(R,ee)=>k(ee,R),Q=(R,ee)=>y(ee,R),te=()=>L(o.id),ie=()=>L(o.id);return n.$$set=R=>{"group"in R&&t(0,o=R.group),"compactHeader"in R&&t(1,l=R.compactHeader),"titleBackdrop"in R&&t(2,r=R.titleBackdrop),"openMenuId"in R&&t(3,s=R.openMenuId),"draggedBookmark"in R&&t(4,i=R.draggedBookmark),"dragOverBookmark"in R&&t(5,a=R.dragOverBookmark),"onTileMenu"in R&&t(6,u=R.onTileMenu),"onTileEdit"in R&&t(7,d=R.onTileEdit),"onTileRemove"in R&&t(8,_=R.onTileRemove),"onTileFallback"in R&&t(9,g=R.onTileFallback),"onTileContextMenu"in R&&t(10,h=R.onTileContextMenu),"onDragStart"in R&&t(11,m=R.onDragStart),"onDragOver"in R&&t(12,k=R.onDragOver),"onDragLeave"in R&&t(13,S=R.onDragLeave),"onDrop"in R&&t(14,y=R.onDrop),"onDragEnd"in R&&t(15,I=R.onDragEnd),"onAddShortcut"in R&&t(16,L=R.onAddShortcut),"getFaviconUrl"in R&&t(17,P=R.getFaviconUrl)},[o,l,r,s,i,a,u,d,_,g,h,m,k,S,y,I,L,P,v,D,A,N,M,j,K,Q,te,ie]}class na extends He{constructor(e){super(),Ue(this,e,ta,$s,Pe,{group:0,compactHeader:1,titleBackdrop:2,openMenuId:3,draggedBookmark:4,dragOverBookmark:5,onTileMenu:6,onTileEdit:7,onTileRemove:8,onTileFallback:9,onTileContextMenu:10,onDragStart:11,onDragOver:12,onDragLeave:13,onDrop:14,onDragEnd:15,onAddShortcut:16,getFaviconUrl:17})}}function gl(n,e,t){const o=n.slice();return o[19]=e[t],o}function hl(n,e){let t,o,l;return o=new na({props:{group:e[19],compactHeader:e[2],titleBackdrop:e[3],openMenuId:e[4],draggedBookmark:e[5],dragOverBookmark:e[6],onTileMenu:e[7],onTileEdit:e[8],onTileRemove:e[9],onTileFallback:e[10],onTileContextMenu:e[11],onDragStart:e[12],onDragOver:e[13],onDragLeave:e[14],onDrop:e[15],onDragEnd:e[16],onAddShortcut:e[17],getFaviconUrl:e[18]}}),{key:n,first:null,c(){t=qe(),Ee(o.$$.fragment),this.first=t},m(r,s){z(r,t,s),ve(o,r,s),l=!0},p(r,s){e=r;const i={};s&1&&(i.group=e[19]),s&4&&(i.compactHeader=e[2]),s&8&&(i.titleBackdrop=e[3]),s&16&&(i.openMenuId=e[4]),s&32&&(i.draggedBookmark=e[5]),s&64&&(i.dragOverBookmark=e[6]),s&128&&(i.onTileMenu=e[7]),s&256&&(i.onTileEdit=e[8]),s&512&&(i.onTileRemove=e[9]),s&1024&&(i.onTileFallback=e[10]),s&2048&&(i.onTileContextMenu=e[11]),s&4096&&(i.onDragStart=e[12]),s&8192&&(i.onDragOver=e[13]),s&16384&&(i.onDragLeave=e[14]),s&32768&&(i.onDrop=e[15]),s&65536&&(i.onDragEnd=e[16]),s&131072&&(i.onAddShortcut=e[17]),s&262144&&(i.getFaviconUrl=e[18]),o.$set(i)},i(r){l||(X(o.$$.fragment,r),l=!0)},o(r){J(o.$$.fragment,r),l=!1},d(r){r&&q(t),Te(o,r)}}}function oa(n){let e,t=[],o=new Map,l=`${n[1]}px`,r,s=ge(n[0]);const i=a=>a[19].id;for(let a=0;a<s.length;a+=1){let u=gl(n,s,a),d=i(u);o.set(d,t[a]=hl(d,u))}return{c(){e=C("div");for(let a=0;a<t.length;a+=1)t[a].c();c(e,"class","folder-grid-list"),c(e,"aria-label","Bookmark folders"),at(e,"max-width",l)},m(a,u){z(a,e,u);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);r=!0},p(a,[u]){u&524285&&(s=ge(a[0]),Ge(),t=tt(t,u,i,1,a,s,o,e,Tt,hl,null,gl),Ne()),u&2&&l!==(l=`${a[1]}px`)&&at(e,"max-width",l)},i(a){if(!r){for(let u=0;u<s.length;u+=1)X(t[u]);r=!0}},o(a){for(let u=0;u<t.length;u+=1)J(t[u]);r=!1},d(a){a&&q(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function la(n,e,t){let{groups:o=[]}=e,{columnWidth:l=1170}=e,{compactHeader:r=!0}=e,{titleBackdrop:s=!1}=e,{openMenuId:i=null}=e,{draggedBookmark:a=null}=e,{dragOverBookmark:u=null}=e,{onTileMenu:d=()=>{}}=e,{onTileEdit:_=()=>{}}=e,{onTileRemove:g=()=>{}}=e,{onTileFallback:h=()=>{}}=e,{onTileContextMenu:m=()=>{}}=e,{onDragStart:k=()=>{}}=e,{onDragOver:S=()=>{}}=e,{onDragLeave:y=()=>{}}=e,{onDrop:I=()=>{}}=e,{onDragEnd:L=()=>{}}=e,{onAddShortcut:P=()=>{}}=e,{getFaviconUrl:v=async()=>""}=e;return n.$$set=D=>{"groups"in D&&t(0,o=D.groups),"columnWidth"in D&&t(1,l=D.columnWidth),"compactHeader"in D&&t(2,r=D.compactHeader),"titleBackdrop"in D&&t(3,s=D.titleBackdrop),"openMenuId"in D&&t(4,i=D.openMenuId),"draggedBookmark"in D&&t(5,a=D.draggedBookmark),"dragOverBookmark"in D&&t(6,u=D.dragOverBookmark),"onTileMenu"in D&&t(7,d=D.onTileMenu),"onTileEdit"in D&&t(8,_=D.onTileEdit),"onTileRemove"in D&&t(9,g=D.onTileRemove),"onTileFallback"in D&&t(10,h=D.onTileFallback),"onTileContextMenu"in D&&t(11,m=D.onTileContextMenu),"onDragStart"in D&&t(12,k=D.onDragStart),"onDragOver"in D&&t(13,S=D.onDragOver),"onDragLeave"in D&&t(14,y=D.onDragLeave),"onDrop"in D&&t(15,I=D.onDrop),"onDragEnd"in D&&t(16,L=D.onDragEnd),"onAddShortcut"in D&&t(17,P=D.onAddShortcut),"getFaviconUrl"in D&&t(18,v=D.getFaviconUrl)},[o,l,r,s,i,a,u,d,_,g,h,m,k,S,y,I,L,P,v]}class ra extends He{constructor(e){super(),Ue(this,e,la,oa,Pe,{groups:0,columnWidth:1,compactHeader:2,titleBackdrop:3,openMenuId:4,draggedBookmark:5,dragOverBookmark:6,onTileMenu:7,onTileEdit:8,onTileRemove:9,onTileFallback:10,onTileContextMenu:11,onDragStart:12,onDragOver:13,onDragLeave:14,onDrop:15,onDragEnd:16,onAddShortcut:17,getFaviconUrl:18})}}function ia(n){let e,t,o,l,r,s,i,a,u,d,_,g,h,m,k,S,y,I,L,P,v,D;return{c(){e=C("dialog"),t=C("form"),o=C("header"),o.innerHTML="<h2>Custom background</h2>",l=U(),r=C("div"),s=C("label"),i=C("span"),i.textContent="Choose an image (JPEG/PNG, up to 10¬†MB)",a=U(),u=C("input"),d=U(),_=C("p"),_.textContent="The selected image is stored locally on this device only.",g=U(),h=C("footer"),m=C("button"),m.textContent="Remove",k=U(),S=C("span"),y=U(),I=C("button"),I.textContent="Cancel",L=U(),P=C("button"),P.textContent="Save",c(u,"type","file"),c(u,"accept","image/png,image/jpeg,image/jpg"),c(s,"class","file-picker"),c(_,"class","hint"),c(r,"class","dialog-body"),c(m,"type","button"),c(m,"id","clear-background"),c(m,"class","ghost-button"),c(S,"class","spacer"),c(I,"type","button"),c(I,"id","cancel-background"),c(P,"type","submit"),c(P,"id","save-background"),c(h,"class","dialog-footer"),c(t,"id","background-form"),c(t,"method","dialog")},m(A,N){z(A,e,N),b(e,t),b(t,o),b(t,l),b(t,r),b(r,s),b(s,i),b(s,a),b(s,u),n[10](u),b(r,d),b(r,_),b(t,g),b(t,h),b(h,m),b(h,k),b(h,S),b(h,y),b(h,I),b(h,L),b(h,P),n[11](e),v||(D=[V(m,"click",n[3]),V(I,"click",n[4]),V(t,"submit",n[2])],v=!0)},p:$,i:$,o:$,d(A){A&&q(e),n[10](null),n[11](null),v=!1,Le(D)}}}function sa(n,e,t){let o=null,l=null,{onSubmit:r=()=>{}}=e,{onClear:s=()=>{}}=e,{onCancel:i=()=>{}}=e;function a(){l&&t(1,l.value="",l),o==null||o.showModal()}function u(){o==null||o.close()}function d(k){var y;k.preventDefault();const S=((y=l==null?void 0:l.files)==null?void 0:y[0])??null;r(S)}function _(k){k.preventDefault(),s()}function g(k){k.preventDefault(),i()}function h(k){lt[k?"unshift":"push"](()=>{l=k,t(1,l)})}function m(k){lt[k?"unshift":"push"](()=>{o=k,t(0,o)})}return n.$$set=k=>{"onSubmit"in k&&t(5,r=k.onSubmit),"onClear"in k&&t(6,s=k.onClear),"onCancel"in k&&t(7,i=k.onCancel)},[o,l,d,_,g,r,s,i,a,u,h,m]}class aa extends He{constructor(e){super(),Ue(this,e,sa,ia,Pe,{onSubmit:5,onClear:6,onCancel:7,open:8,close:9})}get open(){return this.$$.ctx[8]}get close(){return this.$$.ctx[9]}}function mn(n){try{return new URL(n).href}catch{try{return new URL(`https://${n}`).href}catch{return null}}}function Zt(n){try{return new URL(n).hostname.replace(/^www\./i,"")}catch{return n}}function ml(n){return n?n.trim().split(/\s+/)[0].slice(0,2).toUpperCase():"‚Ä¢"}function ca(n,e){let t;return(...o)=>{clearTimeout(t),t=setTimeout(()=>n(...o),e)}}function bl(n){const e=(n||"").trim().toLowerCase();if(!e)return{background:"linear-gradient(145deg, #fde68a, #fbbf24)",text:"rgba(15, 23, 42, 0.85)"};let t=0,o=0,l=0;for(let k=0;k<e.length;k++){const S=e.charCodeAt(k),y=k+1;t+=S*y,o+=S*(y+1.5),l+=S*(y+2.5)}const r=Gn(t,360),s=Gn(o,36)-18,i=Gn(r+24+s,360),a=52+Math.abs(o)%30,u=42+Math.abs(l)%20,d=Math.min(96,a+8),_=Math.min(78,u+12),g=`hsl(${r}, ${a}%, ${u}%)`,h=`hsl(${i}, ${d}%, ${_}%)`,m=u>54?"rgba(30, 41, 59, 0.85)":"rgba(255, 255, 255, 0.88)";return{background:`linear-gradient(140deg, ${g}, ${h})`,text:m}}function Gn(n,e){return(n%e+e)%e}function ua(n,e=10*1024*1024){return["image/jpeg","image/png"].includes(n.type)&&n.size<=e}function kl(n=[],e=[]){return n.length!==e.length?!1:n.every((t,o)=>t===e[o])}function Ot(n,e){if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function fa(n){return n?URL.createObjectURL(n):""}const Z=chrome;var Sl;const yt=!!((Sl=chrome==null?void 0:chrome.storage)!=null&&Sl.local);var Cl;const _l=!!((Cl=chrome==null?void 0:chrome.storage)!=null&&Cl.sync);function da(n,e,t){const o=n.slice();return o[188]=e[t],o[190]=t,o}function pl(n){let e,t;return e=new gs({props:{visible:n[35],query:n[9],onSearchChange:n[76],onClose:n[77]}}),{c(){Ee(e.$$.fragment)},m(o,l){ve(e,o,l),t=!0},p(o,l){const r={};l[1]&16&&(r.visible=o[35]),l[0]&512&&(r.query=o[9]),e.$set(r)},i(o){t||(X(e.$$.fragment,o),t=!0)},o(o){J(e.$$.fragment,o),t=!1},d(o){Te(e,o)}}}function ga(n){let e,t,o,l,r,s,i,a;const u=[ba,ma],d=[];function _(g,h){return g[5].mergeAllBookmarks?0:1}return r=_(n),s=d[r]=u[r](n),{c(){e=C("section"),t=fe(n[13]),l=U(),s.c(),i=qe(),c(e,"id","status"),c(e,"role","status"),c(e,"aria-live","polite"),c(e,"data-tone",o=n[13]?n[14]:null)},m(g,h){z(g,e,h),b(e,t),z(g,l,h),d[r].m(g,h),z(g,i,h),a=!0},p(g,h){(!a||h[0]&8192)&&Ce(t,g[13]),(!a||h[0]&24576&&o!==(o=g[13]?g[14]:null))&&c(e,"data-tone",o);let m=r;r=_(g),r===m?d[r].p(g,h):(Ge(),J(d[m],1,1,()=>{d[m]=null}),Ne(),s=d[r],s?s.p(g,h):(s=d[r]=u[r](g),s.c()),X(s,1),s.m(i.parentNode,i))},i(g){a||(X(s),a=!0)},o(g){J(s),a=!1},d(g){g&&(q(e),q(l),q(i)),d[r].d(g)}}}function ha(n){let e,t=ge(Array(5)),o=[];for(let l=0;l<t.length;l+=1)o[l]=ka(da(n,t,l));return{c(){e=C("div");for(let l=0;l<o.length;l+=1)o[l].c();c(e,"class","grid skeleton-grid"),c(e,"aria-hidden","true")},m(l,r){z(l,e,r);for(let s=0;s<o.length;s+=1)o[s]&&o[s].m(e,null)},p:$,i:$,o:$,d(l){l&&q(e),di(o,l)}}}function ma(n){let e,t;return e=new ra({props:{groups:n[38],columnWidth:n[5].folderColumnWidth,compactHeader:n[5].compactFolderHeader,titleBackdrop:n[5].titleBackdrop,openMenuId:n[26],draggedBookmark:n[36],dragOverBookmark:n[37],onTileMenu:n[66],onTileEdit:n[88],onTileRemove:n[89],onTileFallback:n[65],onTileContextMenu:n[70],onDragStart:n[80],onDragOver:n[81],onDragLeave:n[82],onDrop:n[83],onDragEnd:n[84],onAddShortcut:n[85],getFaviconUrl:n[64]}}),{c(){Ee(e.$$.fragment)},m(o,l){ve(e,o,l),t=!0},p(o,l){const r={};l[1]&128&&(r.groups=o[38]),l[0]&32&&(r.columnWidth=o[5].folderColumnWidth),l[0]&32&&(r.compactHeader=o[5].compactFolderHeader),l[0]&32&&(r.titleBackdrop=o[5].titleBackdrop),l[0]&67108864&&(r.openMenuId=o[26]),l[1]&32&&(r.draggedBookmark=o[36]),l[1]&64&&(r.dragOverBookmark=o[37]),e.$set(r)},i(o){t||(X(e.$$.fragment,o),t=!0)},o(o){J(e.$$.fragment,o),t=!1},d(o){Te(e,o)}}}function ba(n){let e,t;return e=new Qs({props:{bookmarks:n[12],topSites:n[10],showTopSites:n[5].enableTopSites,titleBackdrop:n[5].titleBackdrop,focusedIndex:n[11],openMenuId:n[26],draggedBookmark:n[36],dragOverBookmark:n[37],onTileMenu:n[66],onTileEdit:n[88],onTileRemove:n[89],onTileFallback:n[65],onTileContextMenu:n[70],onTileFocus:n[78],onDragStart:n[80],onDragOver:n[81],onDragLeave:n[82],onDrop:n[83],onDragEnd:n[84],onAddShortcut:n[85],getFaviconUrl:n[64]}}),e.$on("gridmount",n[79]),{c(){Ee(e.$$.fragment)},m(o,l){ve(e,o,l),t=!0},p(o,l){const r={};l[0]&4096&&(r.bookmarks=o[12]),l[0]&1024&&(r.topSites=o[10]),l[0]&32&&(r.showTopSites=o[5].enableTopSites),l[0]&32&&(r.titleBackdrop=o[5].titleBackdrop),l[0]&2048&&(r.focusedIndex=o[11]),l[0]&67108864&&(r.openMenuId=o[26]),l[1]&32&&(r.draggedBookmark=o[36]),l[1]&64&&(r.dragOverBookmark=o[37]),e.$set(r)},i(o){t||(X(e.$$.fragment,o),t=!0)},o(o){J(e.$$.fragment,o),t=!1},d(o){Te(e,o)}}}function ka(n){let e;return{c(){e=C("div"),e.innerHTML='<div class="skeleton-icon"></div> <div class="skeleton-title"></div> ',c(e,"class","tile skeleton-tile")},m(t,o){z(t,e,o)},p:$,d(t){t&&q(e)}}}function _a(n){var pe;let e,t,o,l,r,s,i,a,u,d,_,g,h,m,k,S,y,I,L,P,v,D,A,N,M,j,K,Q,te,ie,R,ee;u=new Ps({props:{open:n[6],settings:n[5],folderSummary:n[4],visibleAccentOptions:n[39],visibleGradientOptions:n[40],showAllAccents:n[8],showAllGradients:n[7],onClose:n[44],onThemeChange:n[46],onAccentChange:n[47],onTitleBackdropChange:n[48],onGradientSelect:n[54],onCustomBackgroundClick:n[55],onMergeAllChange:n[49],onFolderColumnWidthChange:n[50],onCompactHeaderChange:n[51],onSearchToggle:n[52],onTopSitesToggle:n[53],onToggleAccents:n[42],onToggleGradients:n[43],onOpenFolderModal:n[60]}});let O=n[5].enableBookmarkSearch&&pl(n);const x=[ha,ga],oe=[];function ce(B,Y){return B[15]?0:1}S=ce(n),y=oe[S]=x[S](n),L=new Yi({props:{open:n[1],rootIds:n[41].rootIds??[],expandedIds:n[25],loadingIds:n[16],visibleIds:n[20],searchQuery:n[19],searchMatches:n[3],selectedIds:n[1]&&n[22]?n[22]:n[0],summary:n[1]?n[23]:n[4],selectedFolderCount:n[1]?((pe=n[22])==null?void 0:pe.size)??0:n[0].size,totalBookmarkCount:n[1]?n[24]:n[21],toggleSelection:n[56],toggleExpansion:n[57],getCheckboxState:n[62],onSearchChange:n[63],onRequestClose:n[61],onConfirmSelection:n[59],onClearSelection:n[58]}}),v=new Zi({props:{open:n[2],folders:n[17],defaultFolderId:n[18],onConfirm:n[86],onClose:n[87]}}),A=new ss({props:{open:n[31],onDismiss:n[69],onGetStarted:n[69]}}),M=new us({props:{bookmark:n[34],position:n[33],visible:n[32]}}),M.$on("edit",n[74]),M.$on("remove",n[75]),M.$on("opennewtab",n[72]),M.$on("copyurl",n[73]),M.$on("close",n[71]),K=new ls({props:{toasts:n[30],onDismiss:n[67],onUndo:n[68]}});let H={onSubmit:n[90],onClear:n[91],onCancel:n[92]};return te=new aa({props:H}),n[109](te),{c(){e=C("div"),t=U(),o=C("div"),l=C("button"),r=ot("svg"),s=ot("path"),i=ot("path"),a=U(),Ee(u.$$.fragment),d=U(),_=C("div"),h=U(),m=C("main"),O&&O.c(),k=U(),y.c(),I=U(),Ee(L.$$.fragment),P=U(),Ee(v.$$.fragment),D=U(),Ee(A.$$.fragment),N=U(),Ee(M.$$.fragment),j=U(),Ee(K.$$.fragment),Q=U(),Ee(te.$$.fragment),c(e,"id","background-layer"),_e(e,"visible",n[5].background.mode==="custom"&&!!n[27]),at(e,"background-image",n[5].background.mode==="custom"&&n[27]?`url(${n[27]})`:null),c(s,"d","M12 8.75a3.25 3.25 0 1 1 0 6.5 3.25 3.25 0 0 1 0-6.5Z"),c(s,"fill","none"),c(s,"stroke","currentColor"),c(s,"stroke-width","1.6"),c(i,"d","M21 12l-2.938 3.5-1.562 4.294L12 19l-4.5.794L5.938 15.5 3 12l2.938-3.5L7.5 4.206 12 5l4.5-.794L18.062 8.5 21 12Z"),c(i,"fill","none"),c(i,"stroke","currentColor"),c(i,"stroke-width","1.6"),c(i,"stroke-linecap","round"),c(i,"stroke-linejoin","round"),c(r,"class","icon-button__glyph"),c(r,"viewBox","0 0 24 24"),c(r,"aria-hidden","true"),c(r,"focusable","false"),c(r,"role","img"),c(l,"class","icon-button"),c(l,"type","button"),c(l,"title","Settings"),c(l,"aria-label","Open settings"),c(l,"aria-expanded",n[6]),c(l,"aria-controls","settings-drawer"),c(_,"class","settings-overlay"),c(_,"aria-hidden",g=!n[6]),_e(_,"visible",n[6]),c(o,"class","page")},m(B,Y){z(B,e,Y),z(B,t,Y),z(B,o,Y),b(o,l),b(l,r),b(r,s),b(r,i),n[108](l),b(o,a),ve(u,o,null),b(o,d),b(o,_),b(o,h),b(o,m),O&&O.m(m,null),b(m,k),oe[S].m(m,null),b(o,I),ve(L,o,null),b(o,P),ve(v,o,null),b(o,D),ve(A,o,null),b(o,N),ve(M,o,null),b(o,j),ve(K,o,null),z(B,Q,Y),ve(te,B,Y),ie=!0,R||(ee=[V(l,"click",n[45]),V(_,"pointerdown",n[44])],R=!0)},p(B,Y){var Se;(!ie||Y[0]&134217760)&&_e(e,"visible",B[5].background.mode==="custom"&&!!B[27]),Y[0]&134217760&&at(e,"background-image",B[5].background.mode==="custom"&&B[27]?`url(${B[27]})`:null),(!ie||Y[0]&64)&&c(l,"aria-expanded",B[6]);const we={};Y[0]&64&&(we.open=B[6]),Y[0]&32&&(we.settings=B[5]),Y[0]&16&&(we.folderSummary=B[4]),Y[1]&256&&(we.visibleAccentOptions=B[39]),Y[1]&512&&(we.visibleGradientOptions=B[40]),Y[0]&256&&(we.showAllAccents=B[8]),Y[0]&128&&(we.showAllGradients=B[7]),u.$set(we),(!ie||Y[0]&64&&g!==(g=!B[6]))&&c(_,"aria-hidden",g),(!ie||Y[0]&64)&&_e(_,"visible",B[6]),B[5].enableBookmarkSearch?O?(O.p(B,Y),Y[0]&32&&X(O,1)):(O=pl(B),O.c(),X(O,1),O.m(m,k)):O&&(Ge(),J(O,1,1,()=>{O=null}),Ne());let De=S;S=ce(B),S===De?oe[S].p(B,Y):(Ge(),J(oe[De],1,1,()=>{oe[De]=null}),Ne(),y=oe[S],y?y.p(B,Y):(y=oe[S]=x[S](B),y.c()),X(y,1),y.m(m,null));const ne={};Y[0]&2&&(ne.open=B[1]),Y[1]&1024&&(ne.rootIds=B[41].rootIds??[]),Y[0]&33554432&&(ne.expandedIds=B[25]),Y[0]&65536&&(ne.loadingIds=B[16]),Y[0]&1048576&&(ne.visibleIds=B[20]),Y[0]&524288&&(ne.searchQuery=B[19]),Y[0]&8&&(ne.searchMatches=B[3]),Y[0]&4194307&&(ne.selectedIds=B[1]&&B[22]?B[22]:B[0]),Y[0]&8388626&&(ne.summary=B[1]?B[23]:B[4]),Y[0]&4194307&&(ne.selectedFolderCount=B[1]?((Se=B[22])==null?void 0:Se.size)??0:B[0].size),Y[0]&18874370&&(ne.totalBookmarkCount=B[1]?B[24]:B[21]),L.$set(ne);const Fe={};Y[0]&4&&(Fe.open=B[2]),Y[0]&131072&&(Fe.folders=B[17]),Y[0]&262144&&(Fe.defaultFolderId=B[18]),v.$set(Fe);const T={};Y[1]&1&&(T.open=B[31]),A.$set(T);const ke={};Y[1]&8&&(ke.bookmark=B[34]),Y[1]&4&&(ke.position=B[33]),Y[1]&2&&(ke.visible=B[32]),M.$set(ke);const ze={};Y[0]&1073741824&&(ze.toasts=B[30]),K.$set(ze);const Ye={};te.$set(Ye)},i(B){ie||(X(u.$$.fragment,B),X(O),X(y),X(L.$$.fragment,B),X(v.$$.fragment,B),X(A.$$.fragment,B),X(M.$$.fragment,B),X(K.$$.fragment,B),X(te.$$.fragment,B),ie=!0)},o(B){J(u.$$.fragment,B),J(O),J(y),J(L.$$.fragment,B),J(v.$$.fragment,B),J(A.$$.fragment,B),J(M.$$.fragment,B),J(K.$$.fragment,B),J(te.$$.fragment,B),ie=!1},d(B){B&&(q(e),q(t),q(o),q(Q)),n[108](null),Te(u),O&&O.d(),oe[S].d(),Te(L),Te(v),Te(A),Te(M),Te(K),n[109](null),Te(te,B),R=!1,Le(ee)}}}function pa(n={}){const e=Array.isArray(n.selectedIds)?n.selectedIds.filter(Boolean):[],t=Array.isArray(n.expandedIds)?n.expandedIds.filter(Boolean):[];return{selectedIds:Array.from(new Set(e)),expandedIds:Array.from(new Set(t))}}function wl(n,e){const t=[...n];if(!e)return t;const o=t.findIndex(r=>r.id===e);if(o<=0)return t;const[l]=t.splice(o,1);return[l,...t]}function Kn(n,e,t=[],o=!0){const l=n.nodesById[e];return!l||!l.isFolder||(l.childrenIds??[]).forEach(s=>{const i=n.nodesById[s];i&&(i.url?t.push(i):o&&Kn(n,s,t,!0))}),t}function yl(n=[],e){let t=!1;return{next:n.map(l=>l.id!==e||l.fallback?l:(t=!0,{...l,fallback:!0})),changed:t}}function wa(n,e,t){let o,l,r,s,i,a,u;vl(n,Rl,f=>t(41,u=f));let d="",_="info",g=!0,h=[],m=[],k=new Set,S=null,y=new Set,I=new Set,L=new Set,P=!1,v=!1,D=!1,A=null,N=[],M=null,j="",K=new Set,Q=null,te=[],ie=new Map,R=0,ee=null,O=null,x=[],oe=new Map,ce=0,H=!1,pe=new Set,B=0,Y=0,we=null,De="",ne,Fe,T=vn(),ke=!1,ze=!0,Ye=!1,Se=!1,je=!1,me=!1,Ve=[...St],Re=[...It],Be=[],We=0,be=!1,Qe=!1,$e={x:0,y:0},Oe=null,rt="",Ie=!1,Me=[],ae=!1,de=-1,Xe=null,et=4,it=null,ht=null,nn=null,Bt=null,$n="",eo="",Bn=[],to=new Map,Dt=null,In=null,ft=null,st=null;const Ft=[];Ll(()=>{var f,p;if((async()=>{try{await cr()}catch(w){console.error("Bookmark Dial: failed to load settings",w),t(5,T=vn()),t(101,Se=yt),on(T.theme),ln(T.accent),rn(T.background.gradientId)}try{await ti()}catch(w){console.error("Bookmark Dial: failed to load background",w)}t(99,ze=!1),await Mr(),ur()})(),typeof window<"u"){const w=F=>{const G=F.target;if(!(G instanceof HTMLInputElement||G instanceof HTMLTextAreaElement)){if(Qe&&F.key==="Escape"){_t(),F.stopPropagation();return}if(F.key==="Escape"){if(de>=0){t(11,de=-1),F.stopPropagation();return}if(we!==null){t(26,we=null),F.stopPropagation();return}if(Ie){co(),F.stopPropagation();return}ke&&Fn();return}if(F.key==="/"&&T.enableBookmarkSearch&&!F.ctrlKey&&!F.metaKey){F.preventDefault(),t(35,Ie=!0);return}T.mergeAllBookmarks&&!ke&&!Ie&&!be&&Rr(F)}},E=F=>{if(Qe){const W=F.target;W instanceof Element&&!W.closest(".context-menu")&&_t()}if(we===null)return;const G=F.target;G instanceof Element&&G.closest(".tile-actions")||t(26,we=null)};window.addEventListener("keydown",w),window.addEventListener("pointerdown",E),Ft.push(()=>window.removeEventListener("keydown",w)),Ft.push(()=>window.removeEventListener("pointerdown",E))}if((p=(f=Z==null?void 0:Z.storage)==null?void 0:f.onChanged)!=null&&p.addListener){const w=(E,F)=>{if(F!=="sync"&&F!=="local")return;const W=E[F==="sync"?hn:Xt];!W||!W.newValue||Ir(W.newValue)};Z.storage.onChanged.addListener(w),Ft.push(()=>Z.storage.onChanged.removeListener(w))}return()=>{Dt&&clearTimeout(Dt),it&&(it.disconnect(),it=null),Bt&&(Bt.abort(),Bt=null),st&&(URL.revokeObjectURL(st),st=null),typeof document<"u"&&document.body.classList.remove("settings-open"),Ft.forEach(w=>w==null?void 0:w())}});function vn(){return{theme:ye.theme,accent:ye.accent,background:{...ye.background},titleBackdrop:ye.titleBackdrop,mergeAllBookmarks:ye.mergeAllBookmarks,folderColumnWidth:ye.folderColumnWidth,compactFolderHeader:ye.compactFolderHeader,enableBookmarkSearch:ye.enableBookmarkSearch,enableTopSites:ye.enableTopSites,lastShortcutFolderId:ye.lastShortcutFolderId}}function Tn(f){return Wl.some(p=>p.id===f)?f:ye.theme}function Dn(f){return St.some(p=>p.id===f)?f:ye.accent}function no(f){return It.some(p=>p.id===f)?f:ye.background.gradientId}function oo(f={}){var cn,Et,Vt,bo;const p=Tn(f.theme),w=Dn(f.accent),E=f.background??{},F=E.mode==="custom"?"custom":"gradient",G=no(E.gradientId),W=typeof f.titleBackdrop=="boolean",ue=W?f.titleBackdrop:ye.titleBackdrop,Ze=typeof f.mergeAllBookmarks=="boolean"||typeof f.groupFoldersTogether=="boolean",se=Ze?f.mergeAllBookmarks??f.groupFoldersTogether:ye.mergeAllBookmarks,le=typeof f.folderColumnWidth=="number"?f.folderColumnWidth:ye.folderColumnWidth,re=typeof f.compactFolderHeader=="boolean"?f.compactFolderHeader:ye.compactFolderHeader,he=typeof f.enableBookmarkSearch=="boolean"?f.enableBookmarkSearch:ye.enableBookmarkSearch,nt=typeof f.enableTopSites=="boolean"?f.enableTopSites:ye.enableTopSites,Ke=f.lastShortcutFolderId??ye.lastShortcutFolderId,jt=pa(f.folderSelection),On=!kl(jt.selectedIds,((cn=f.folderSelection)==null?void 0:cn.selectedIds)??[])||!kl(jt.expandedIds,((Et=f.folderSelection)==null?void 0:Et.expandedIds)??[]),Je=p!==f.theme||w!==f.accent||F!==(((Vt=f.background)==null?void 0:Vt.mode)??ye.background.mode)||G!==(((bo=f.background)==null?void 0:bo.gradientId)??ye.background.gradientId)||!W||!Ze||le!==f.folderColumnWidth||re!==f.compactFolderHeader||he!==f.enableBookmarkSearch||nt!==f.enableTopSites||Ke!==f.lastShortcutFolderId;return{settings:{theme:p,accent:w,background:{mode:F,gradientId:G},titleBackdrop:ue,mergeAllBookmarks:se,folderColumnWidth:le,compactFolderHeader:re,enableBookmarkSearch:he,enableTopSites:nt,lastShortcutFolderId:Ke},folderSelection:jt,changed:Je||On||(f.version??_n)!==_n}}function jl(f){return St.find(p=>p.id===f)??St[0]}function lo(f){return It.find(p=>p.id===f)??It[0]}function Vl(){t(102,Ve=wl(St,T==null?void 0:T.accent)),t(8,me=!1)}function Kl(){t(8,me=!0)}function Yl(){me?Vl():Kl()}function Ql(){var f,p;t(103,Re=wl(It,((f=T==null?void 0:T.background)==null?void 0:f.mode)==="gradient"?(p=T==null?void 0:T.background)==null?void 0:p.gradientId:null)),t(7,je=!1)}function Xl(){t(7,je=!0)}function Zl(){je?Ql():Xl()}function Jl(){return!In&&typeof window<"u"&&typeof window.matchMedia=="function"&&(In=window.matchMedia("(prefers-color-scheme: dark)")),In}function on(f){if(typeof document>"u")return;const p=Tn(f),w=Jl();if(p==="system"&&w){if(document.body.classList.toggle("dark",w.matches),!ft){const E=F=>{document.body.classList.toggle("dark",F.matches)};typeof w.addEventListener=="function"?(w.addEventListener("change",E),ft=()=>w.removeEventListener("change",E)):typeof w.addListener=="function"?(w.addListener(E),ft=()=>w.removeListener(E)):ft=null,ft&&Ft.push(ft)}}else ft&&(ft(),ft=null),document.body.classList.toggle("dark",p==="dark");document.body.dataset.theme=p}function ln(f){if(typeof document>"u")return;const p=jl(f),w=document.documentElement;w.style.setProperty("--accent-color",p.colors.base),w.style.setProperty("--accent-color-contrast",p.colors.contrast),w.style.setProperty("--accent-color-soft",p.colors.soft),w.style.setProperty("--accent-color-border",p.colors.border)}function rn(f){if(typeof document>"u")return;const p=lo(f),w=document.documentElement;w.style.setProperty("--page-background-light",p.gradients.light),w.style.setProperty("--page-background-dark",p.gradients.dark)}function mt(){if(!yt||!Ye||!P)return;Dt&&clearTimeout(Dt);const f={theme:T.theme,accent:T.accent,titleBackdrop:T.titleBackdrop,mergeAllBookmarks:T.mergeAllBookmarks,folderColumnWidth:T.folderColumnWidth,compactFolderHeader:T.compactFolderHeader,enableBookmarkSearch:T.enableBookmarkSearch,enableTopSites:T.enableTopSites,lastShortcutFolderId:T.lastShortcutFolderId,background:{...T.background},folderSelection:{selectedIds:Array.from(y),expandedIds:Array.from(I)},version:_n};Dt=setTimeout(async()=>{Dt=null;try{const p=[Z.storage.local.set({[Xt]:f})];_l&&p.push(Z.storage.sync.set({[hn]:f})),await Promise.all(p)}catch(p){console.error("Bookmark Dial: failed to store preferences",p)}},120)}function Fn(){ke&&(t(6,ke=!1),Fe==null||Fe.focus())}function xl(){t(6,ke=!ke)}function $l(f){const p=Tn(f);T.theme!==p&&t(5,T={...T,theme:p})}function er(f){const p=Dn(f);T.accent!==p&&t(5,T={...T,accent:p})}function tr(f){const p=!!f;T.titleBackdrop!==p&&t(5,T={...T,titleBackdrop:p})}function nr(f){const p=!!f;T.mergeAllBookmarks!==p&&t(5,T={...T,mergeAllBookmarks:p})}function or(f){const p=Number(f);T.folderColumnWidth!==p&&t(5,T={...T,folderColumnWidth:p})}function lr(f){const p=!!f;T.compactFolderHeader!==p&&t(5,T={...T,compactFolderHeader:p})}function rr(f){const p=!!f;T.enableBookmarkSearch!==p&&(t(5,T={...T,enableBookmarkSearch:p}),p||(t(35,Ie=!1),t(9,rt="")))}function ir(f){const p=!!f;T.enableTopSites!==p&&(t(5,T={...T,enableTopSites:p}),p&&!ae&&uo())}function sr(f){const p=no(f),w=lo(p),E=w.accent&&St.some(ue=>ue.id===w.accent)?w.accent:null,F=T.background.mode!=="gradient"||T.background.gradientId!==p,G=E?Dn(E):T.accent,W=!!E&&G!==T.accent;!F&&!W||t(5,T={...T,accent:W?G:T.accent,background:{...T.background,mode:"gradient",gradientId:p}})}async function ar(){Fn(),await Qn(),ne==null||ne.open()}async function cr(){if(t(101,Se=!1),t(98,H=!1),!yt){t(5,T=vn()),t(0,y=new Set(pn.selectedIds)),t(95,I=new Set(pn.expandedIds)),t(96,P=!0),on(T.theme),ln(T.accent),rn(T.background.gradientId),bt();return}let f={},p={};if(_l)try{f=await Z.storage.sync.get(hn)}catch(G){console.warn("Bookmark Dial: failed to read sync preferences",G)}try{p=await Z.storage.local.get(Xt)}catch(G){console.warn("Bookmark Dial: failed to read local preferences",G)}let w=f==null?void 0:f[hn],E=!1;!w&&(p!=null&&p[Xt])&&(w=p[Xt],E=!0);const F=oo(w??_s);t(5,T=F.settings),t(0,y=new Set(F.folderSelection.selectedIds.length?F.folderSelection.selectedIds:pn.selectedIds)),t(95,I=new Set(F.folderSelection.expandedIds)),t(96,P=!0),t(101,Se=F.changed||E),t(98,H=F.changed||E),on(T.theme),ln(T.accent),rn(T.background.gradientId),bt()}async function ur(){try{await Ai(Z),S=await fr(),await qt(),await Mt(),dr(),await dt()}catch(f){console.error("Bookmark Dial: initialization failed",f),gt(gn.error,"error")}}async function fr(){const f=await Z.runtime.sendMessage({type:"getFolderId"});if(!(f!=null&&f.folderId))throw new Error((f==null?void 0:f.error)||"Missing folder");return f.folderId}async function qt(){y.size===0&&S&&(t(0,y=new Set([S])),t(98,H=!0))}async function Mt(){const f=Array.from(y);f.length&&(await Promise.allSettled(f.map(p=>Yt(Z,p))),bt())}function dr(){var ue,Ze;const f=ca(()=>dt(),150),p=(se,le)=>{Oi(le),!le.url&&br(le)&&so(le.id),le.url?zt(le.parentId)&&f():y.has(le.id)&&f()};Z.bookmarks.onCreated.addListener(p);const w=(se,le)=>{Pi(se,le),k.has(se)&&f()};Z.bookmarks.onChanged.addListener(w);const E=(se,le)=>{Ui(se,le),(k.has(se)||zt(le.parentId)||zt(le.oldParentId))&&f()};Z.bookmarks.onMoved.addListener(E);const F=(se,le)=>{const re=Nl(se);re&&gr(se,{...le,node:re}),Hi(se,le),(k.has(se)||zt(le.parentId))&&(k.delete(se),f())};Z.bookmarks.onRemoved.addListener(F);const G=()=>f(),W=()=>gt("Importing bookmarks‚Ä¶");(ue=Z.bookmarks.onImportEnded)==null||ue.addListener(G),(Ze=Z.bookmarks.onImportBegan)==null||Ze.addListener(W),Ft.push(()=>{var se,le;Z.bookmarks.onCreated.removeListener(p),Z.bookmarks.onChanged.removeListener(w),Z.bookmarks.onMoved.removeListener(E),Z.bookmarks.onRemoved.removeListener(F),(se=Z.bookmarks.onImportEnded)==null||se.removeListener(G),(le=Z.bookmarks.onImportBegan)==null||le.removeListener(W)})}function gr(f,p={}){if(p!=null&&p.node&&!p.node.url){const w=new Set(dn(f));if(w.size){const E=new Set(y);let F=!1;w.forEach(G=>{E.has(G)&&(E.delete(G),F=!0)}),F&&(t(0,y=E),t(98,H=!0),bt(),mt(),y.size||Promise.resolve().then(()=>qt()).then(()=>Mt()).then(()=>dt()))}f===S&&hr()}}async function hr(){gt("Default folder was removed. Recreating‚Ä¶");try{const f=await Z.runtime.sendMessage({type:"resetFolderCache"});if(f!=null&&f.folderId)S=f.folderId,await so(S),await dt(),gt("Default folder restored.","success");else throw new Error((f==null?void 0:f.error)||"Unable to recreate folder")}catch(f){console.error("Bookmark Dial: missing folder recovery failed",f),gt(gn.error,"error")}}async function ro(f,p=null){const w=f instanceof Set?new Set(f):new Set(f??[]);if(!w.size)return{items:[],counts:new Map,total:0,groups:[]};if(p!=null&&p.aborted)throw new DOMException("Aborted","AbortError");const E=pt(),F=Array.from(w).filter(re=>{const he=E.nodesById[re];return!he||!he.childrenLoaded?!0:(he.childrenIds??[]).some(Ke=>!E.nodesById[Ke])});if(F.length>0&&await Promise.all(F.map(re=>Yt(Z,re))),p!=null&&p.aborted)throw new DOMException("Aborted","AbortError");const G=pt(),W=new Map,ue=new Map,Ze=[],se=[];w.forEach(re=>{const he=Kn(G,re,[],!0),nt=Kn(G,re,[],!1),Ke=kn(re),jt=Ke[Ke.length-1]||"Untitled folder";he.forEach(Je=>{const Et=(mn(Je.url)||Je.url||Je.url||Je.id).toLowerCase(),Vt=ue.get(re)??new Set;Vt.add(Et),ue.set(re,Vt),W.has(Et)||(W.set(Et,Je.id),Ze.push({...Je,sourceFolderId:re,sourcePath:Ke}))});const On=nt.map(Je=>((mn(Je.url)||Je.url||Je.url||Je.id).toLowerCase(),{...Je,sourceFolderId:re,sourcePath:Ke}));se.push({id:re,label:jt,path:Ke,fullPath:Ke.join(" ‚Ä∫ "),items:On})}),se.sort((re,he)=>re.fullPath.localeCompare(he.fullPath));const le=new Map(Array.from(ue.entries()).map(([re,he])=>[re,he.size]));return{items:Ze,counts:le,total:Ze.length,groups:se}}async function dt(){const f=++B;if(!y.size){t(93,h=[]),t(94,m=[]),k=new Set,ie=new Map,t(21,R=0),bt(),t(15,g=!1),gt("Select folders to populate this page.","info");return}Bt&&Bt.abort(),Bt=new AbortController;const p=Bt.signal;try{const w=await ro(y,p);if(f!==B)return;ie=w.counts,t(21,R=w.total),mr(w.items),t(94,m=w.groups.map(E=>({id:E.id,label:E.label,path:E.path,fullPath:E.fullPath,items:E.items.map(F=>io(F))}))),bt(),t(15,g=!1),w.items.length===0?gt(gn.empty):gt("","info")}catch(w){if(w.name==="AbortError")return;console.error("Bookmark Dial: failed to load bookmarks",w),gt(gn.error,"error")}}function io(f){const p=f.title||f.url;return{...f,displayTitle:p,initials:ml(p),palette:bl(p),fallback:!1}}function mr(f){k=new Set(f.map(F=>F.id));const w=[],E=new Map;for(const F of f){const G=F.id,W=to.get(G);if(W&&W.title===F.title&&W.url===F.url&&W.index===F.index)w.push(W),E.set(G,W);else{const ue=io(F);w.push(ue),E.set(G,ue)}}to=E,t(93,h=w)}function br(f){return!f||f.url?!1:zt(f.parentId)}function zt(f){if(!f)return!1;const p=pt();let w=f;for(;w;){if(y.has(w))return!0;const E=p.nodesById[w];w=(E==null?void 0:E.parentId)??null}return!1}async function so(f){if(!f)return;await Yt(Z,f);const p=dn(f),w=new Set(y);let E=!1;p.forEach(F=>{w.has(F)||(w.add(F),E=!0)}),E&&(t(0,y=w),t(98,H=!0),await Mt(),await dt(),mt())}async function kr(f){if(!f)return;const p=dn(f);if(!p.length)return;const w=v,E=w&&ee?ee:w?new Set(y):y,F=new Set(E);if(p.every(W=>F.has(W))?p.forEach(W=>F.delete(W)):p.forEach(W=>F.add(W)),w){t(22,ee=F);const W=++Y,ue=await ro(ee);if(W!==Y)return;oe=ue.counts,t(24,ce=ue.total),t(23,x=sn(ee,oe))}else Ot(y,F)||(t(0,y=F),t(98,H=!0),await qt(),await Mt(),await dt(),mt())}function _r(f){var le;if(!f)return;const p=pt(),w=p.nodesById[f];if(!(w!=null&&w.isFolder)||!(((le=w.childrenIds)==null?void 0:le.some(re=>{const he=p.nodesById[re];return he==null?void 0:he.isFolder}))??!1))return;const F=v,G=F&&O?O:F?new Set(I):I,W=new Set(G??[]),ue=new Set(W),Ze=(re,{persist:he=!1}={})=>{F?t(97,O=re):(t(95,I=re),he&&(t(98,H=!0),mt()))};W.has(f)?W.delete(f):W.add(f);const se=!Ot(ue,W);Ze(W,{persist:se})}async function pr(){if(v){t(22,ee=new Set),Y++,oe=new Map,t(24,ce=0),t(23,x=[]);return}t(0,y=new Set),t(98,H=!0),await qt(),await Mt(),await dt(),mt()}async function wr(){if(!v)return;const f=new Set(ee??[]),p=new Set(O??[]),w=!Ot(y,f),E=!Ot(I,p);t(1,v=!1),ao(),w&&(t(0,y=f),t(98,H=!0),await qt(),await Mt(),await dt()),E&&(t(95,I=p),t(98,H=!0)),w||E?mt():bt()}async function yr(){await Li(Z),t(22,ee=new Set(y)),t(97,O=new Set(I)),oe=new Map(ie),t(24,ce=R),t(23,x=sn(ee,oe)),Y=0,t(19,j=""),t(3,K=new Set),t(20,Q=null),t(1,v=!0)}function ao(){t(22,ee=null),t(97,O=null),t(23,x=[]),oe=new Map,t(24,ce=0),Y=0,t(19,j=""),t(3,K=new Set),t(20,Q=null)}function Sr(){t(1,v=!1),ao()}function sn(f,p){const w=Array.from(f??[]).map(E=>{const F=kn(E),G=F[F.length-1]||"Untitled folder";return{id:E,path:F,label:G,fullPath:F.join(" ‚Ä∫ "),count:(p==null?void 0:p.get(E))??0}});return w.sort((E,F)=>E.fullPath.localeCompare(F.fullPath)),w}function bt(){const f=Array.from(y).sort().join(","),p=Array.from(ie.entries()).sort(([w],[E])=>w.localeCompare(E)).map(([w,E])=>`${w}:${E}`).join(",");if(f===$n&&p===eo){t(4,te=Bn);return}$n=f,eo=p,Bn=sn(y,ie),t(4,te=Bn)}function Cr(f){const w=pt().nodesById[f],E=v&&ee?ee:y;if(!(w!=null&&w.isFolder))return E.has(f)?"selected":"none";const F=dn(f);if(!F.length)return E.has(f)?"selected":"none";const G=F.filter(W=>E.has(W)).length;return G===0?"none":G===F.length?"selected":"partial"}async function Br(f){var Ze;t(19,j=f);const p=f.trim();if(!p){t(3,K=new Set),t(20,Q=null);return}if((Ze=Z==null?void 0:Z.bookmarks)!=null&&Ze.search)try{const le=(await Z.bookmarks.search({query:p})).filter(re=>!re.url);for(const re of le){await Yt(Z,re.id);let he=re.parentId;for(;he;){await Yt(Z,he);const nt=pt().nodesById[he];he=(nt==null?void 0:nt.parentId)??null}}}catch(se){console.warn("Bookmark Dial: folder search failed",se)}const w=Ri(),E=p.toLowerCase(),G=w.filter(se=>{const le=se.title.toLowerCase().includes(E),re=se.path.join(" ").toLowerCase().includes(E);return le||re}).map(se=>se.id);t(3,K=new Set(G));const W=new Set,ue=pt();G.forEach(se=>{var he;let le=ue.nodesById[se];for(;le&&(W.add(le.id),!!le.parentId);)le=ue.nodesById[le.parentId];const re=ue.nodesById[se];(he=re==null?void 0:re.childrenIds)==null||he.forEach(nt=>{const Ke=ue.nodesById[nt];Ke!=null&&Ke.isFolder&&W.add(nt)})}),t(20,Q=W)}function Ir(f){const p=oo(f),w=p.settings;(w.theme!==T.theme||w.accent!==T.accent||w.background.mode!==T.background.mode||w.background.gradientId!==T.background.gradientId||w.titleBackdrop!==T.titleBackdrop||w.mergeAllBookmarks!==T.mergeAllBookmarks||w.folderColumnWidth!==T.folderColumnWidth||w.compactFolderHeader!==T.compactFolderHeader||w.enableBookmarkSearch!==T.enableBookmarkSearch||w.enableTopSites!==T.enableTopSites)&&t(5,T={...T,...w,background:{...w.background}});const F=new Set(p.folderSelection.selectedIds),G=new Set(p.folderSelection.expandedIds),W=!Ot(F,y),ue=!Ot(G,I);W&&(t(0,y=F),bt(),dt()),ue&&t(95,I=G),(W||ue)&&t(98,H=!1)}async function vr(f){try{const p=new URL(chrome.runtime.getURL("/_favicon/"));return p.searchParams.set("pageUrl",f),p.searchParams.set("size",hs.toString()),p.toString()}catch{return""}}function Tr(f){const{next:p,changed:w}=yl(h,f);if(!w)return;t(93,h=p);let E=!1;const F=m.map(G=>{const{next:W,changed:ue}=yl(G.items,f);return ue?(E=!0,{...G,items:W}):G});E&&t(94,m=F)}function Dr(f){t(26,we=we===f?null:f)}function Mn(){t(26,we=null)}function kt(f,p="info",w=null,E=5e3){const F=++We,G={id:F,message:f,type:p,undoData:w};let W=[...Be,G];return W.length>Yo&&(W=W.slice(-Yo)),t(30,Be=W),E>0&&setTimeout(()=>En(F),E),F}function En(f){t(30,Be=Be.filter(p=>p.id!==f))}async function Fr(f){if(!(f!=null&&f.undoData))return;const{action:p,data:w}=f.undoData;try{p==="removeBookmark"&&w&&(await Z.bookmarks.create({parentId:w.parentId,title:w.title,url:w.url,index:w.index}),kt("Bookmark restored","success"))}catch(E){console.error("Bookmark Dial: undo failed",E),kt("Failed to undo","error")}En(f.id)}async function Mr(){if(!yt){t(31,be=!0);return}try{const f=await Z.storage.local.get(Hn);f!=null&&f[Hn]||t(31,be=!0)}catch(f){console.warn("Bookmark Dial: failed to check welcome state",f)}}async function Er(){if(t(31,be=!1),yt)try{await Z.storage.local.set({[Hn]:!0})}catch(f){console.warn("Bookmark Dial: failed to save welcome state",f)}}function Ar(f,p){f.preventDefault(),Mn(),t(34,Oe=p);const w=180,E=180;let F=f.clientX,G=f.clientY;F+w>window.innerWidth&&(F=window.innerWidth-w-8),G+E>window.innerHeight&&(G=window.innerHeight-E-8),t(33,$e={x:F,y:G}),t(32,Qe=!0)}function _t(){t(32,Qe=!1),t(34,Oe=null)}async function Lr(){Oe!=null&&Oe.url&&window.open(Oe.url,"_blank"),_t()}async function Or(){if(Oe!=null&&Oe.url)try{await navigator.clipboard.writeText(Oe.url),kt("URL copied to clipboard","success")}catch(f){console.error("Bookmark Dial: copy failed",f),kt("Failed to copy URL","error")}_t()}function Pr(){Oe&&ho(Oe),_t()}function Ur(){Oe&&An(Oe.id),_t()}function Hr(f){t(9,rt=f)}function co(){t(35,Ie=!1),t(9,rt="")}async function uo(){var f;if(!ae){if(!((f=Z==null?void 0:Z.topSites)!=null&&f.get)){t(104,ae=!0);return}try{const p=await Z.topSites.get();t(10,Me=(p||[]).map((w,E)=>({id:`topsite-${E}`,title:w.title||Zt(w.url),url:w.url,displayTitle:w.title||Zt(w.url),initials:ml(w.title||Zt(w.url)),palette:bl(w.title||Zt(w.url)),fallback:!1,isTopSite:!0}))),t(104,ae=!0)}catch(p){console.warn("Bookmark Dial: failed to load top sites",p),t(104,ae=!0)}}}function Rr(f){const p=T.enableTopSites?[...i,...Me]:i;if(!p.length)return;const w=Gr(),E=p.length;if(["ArrowRight","ArrowLeft","ArrowDown","ArrowUp"].includes(f.key)&&de<0){f.preventDefault(),t(11,de=0);return}if(f.key==="ArrowRight")f.preventDefault(),de+1<E&&t(11,de=de+1);else if(f.key==="ArrowLeft")f.preventDefault(),de-1>=0&&t(11,de=de-1);else if(f.key==="ArrowDown"){f.preventDefault();const G=de+w;G<E&&t(11,de=G)}else if(f.key==="ArrowUp"){f.preventDefault();const G=de-w;G>=0&&t(11,de=G)}else if(f.key==="Enter"&&de>=0){f.preventDefault();const G=p[de];G!=null&&G.url&&(window.location.href=G.url)}else if((f.key==="Delete"||f.key==="Backspace")&&de>=0){f.preventDefault();const G=p[de];if(G&&!G.isTopSite){const W=E-1;An(G.id),W===0?t(11,de=-1):de>=W&&t(11,de=W-1)}}else if(f.key>="0"&&f.key<="9"){const G=f.key==="0"?9:parseInt(f.key,10)-1;if(G<E){f.preventDefault();const W=p[G];W!=null&&W.url&&(window.location.href=W.url)}}}function fo(){if(!Xe){et=4;return}try{et=getComputedStyle(Xe).getPropertyValue("grid-template-columns").split(" ").length||4}catch{et=4}}function Gr(){return et}function Nr(){!Xe||typeof ResizeObserver>"u"||(it&&it.disconnect(),it=new ResizeObserver(()=>{fo()}),it.observe(Xe),fo())}function qr(f){t(11,de=f)}function zr(f){t(105,Xe=f.detail.gridRef)}function Wr(f,p,w=null){if(p.isTopSite){f.preventDefault();return}t(36,ht=p),w||p.parentId,f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("text/plain",p.id)}function jr(f,p){!ht||ht.id===p.id||p.isTopSite||(f.preventDefault(),f.dataTransfer.dropEffect="move",t(37,nn=p))}function Vr(f){f.currentTarget.contains(f.relatedTarget)||t(37,nn=null)}async function Kr(f,p){if(f.preventDefault(),!ht||ht.id===p.id){an();return}if(p.isTopSite){an();return}try{await Z.bookmarks.move(ht.id,{parentId:p.parentId,index:p.index}),kt("Bookmark moved","success")}catch(w){console.error("Bookmark Dial: move failed",w),kt("Failed to move bookmark","error")}an()}function Yr(){an()}function an(){t(36,ht=null),t(37,nn=null)}async function Qr(f=null){A=f,t(2,D=!0)}async function Xr(f){t(2,D=!1);const{folderId:p,url:w,title:E}=f,F=mn(w);if(!F){alert("That does not appear to be a valid URL.");return}try{await Z.bookmarks.create({parentId:p,title:E,url:F}),t(5,T={...T,lastShortcutFolderId:p}),mt()}catch(G){console.error("Bookmark Dial: failed to create bookmark",G),alert("Unable to add shortcut. Please try again.")}}function Zr(){t(2,D=!1),A=null}function go(){if(te.length)return te;const f=sn(y,ie);if(f.length)return f;if(S){const p=kn(S),w=p[p.length-1]||"Bookmark Dial";return[{id:S,path:p,label:w,fullPath:p.join(" ‚Ä∫ "),count:0}]}return[]}function Jr(){if(A)return A;const f=N.length>0?N:go();return f.length===0?null:T.lastShortcutFolderId&&f.some(w=>w.id===T.lastShortcutFolderId)?T.lastShortcutFolderId:f[f.length-1].id}async function ho(f){var W;if(!(f!=null&&f.id))return;Mn();const p=prompt("Update the shortcut URL:",f.url??"");if(p===null)return;const w=mn(p.trim());if(!w){alert("That does not appear to be a valid URL.");return}const E=(W=f.title)!=null&&W.trim()?f.title:f.displayTitle||Zt(w),F=prompt("Update the shortcut title:",E),G=F?F.trim():E;try{await Z.bookmarks.update(f.id,{title:G,url:w})}catch(ue){console.error("Bookmark Dial: failed to update bookmark",ue),alert("Unable to update shortcut. Please try again.")}}async function An(f){Mn(),_t();const p=h.find(w=>w.id===f)||m.flatMap(w=>w.items).find(w=>w.id===f);if(p)try{const[w]=await Z.bookmarks.get(f);await Z.bookmarks.remove(f),kt(`"${p.displayTitle||p.title}" removed`,"info",{action:"removeBookmark",data:{parentId:String(w.parentId),title:String(w.title||""),url:String(w.url||""),index:typeof w.index=="number"?w.index:0}},8e3)}catch(w){console.error("Bookmark Dial: failed to remove bookmark",w),kt("Failed to remove bookmark","error")}}async function xr(f){if(!f){ne==null||ne.close();return}if(!ua(f,ms)){alert("Please choose a JPEG or PNG image under 10 MB.");return}try{yt&&(await mo(f),await Z.storage.local.set({[Qt]:"indexeddb"})),Wt(f),t(5,T={...T,background:{...T.background,mode:"custom"}}),ne==null||ne.close()}catch(p){console.error("Bookmark Dial: failed to save background",p),alert("Unable to store the background image. Try a smaller file.")}}async function $r(){try{yt&&(await li(),await Z.storage.local.remove(Qt))}catch(f){console.error("Bookmark Dial: failed to clear background",f)}Wt(null),t(5,T={...T,background:{...T.background,mode:"gradient"}}),ne==null||ne.close()}function ei(){ne==null||ne.close()}async function ti(){if(!yt){Wt(null),T.background.mode==="custom"&&t(5,T={...T,background:{...T.background,mode:"gradient"}});return}try{const f=await oi();if(f){Wt(f);return}const p=await Z.storage.local.get(Qt),w=(p==null?void 0:p[Qt])||"";if(w&&w.startsWith("data:")){try{const F=await(await fetch(w)).blob();await mo(F),await Z.storage.local.set({[Qt]:"indexeddb"}),Wt(F)}catch(E){console.warn("Bookmark Dial: background migration failed, using legacy",E),ni(w)}return}!w&&T.background.mode==="custom"&&(t(5,T={...T,background:{...T.background,mode:"gradient"}}),t(101,Se=!0))}catch(f){console.error("Bookmark Dial: failed to load background",f)}}function Wt(f){st&&(URL.revokeObjectURL(st),st=null),f?(st=fa(f),t(27,De=st)):t(27,De="")}function ni(f){st&&(URL.revokeObjectURL(st),st=null),t(27,De=f||"")}function gt(f,p="info"){t(13,d=f),t(14,_=p)}function Ln(){return new Promise((f,p)=>{if(typeof indexedDB>"u"){p(new Error("IndexedDB not available"));return}const w=indexedDB.open(bs,1);w.onerror=()=>p(w.error),w.onsuccess=()=>f(w.result),w.onupgradeneeded=E=>{const F=E.target.result;F.objectStoreNames.contains(wt)||F.createObjectStore(wt)}})}async function mo(f){const p=await Ln();return new Promise((w,E)=>{const F=p.transaction(wt,"readwrite"),W=F.objectStore(wt).put(f,Rn);W.onerror=()=>E(W.error),W.onsuccess=()=>w(),F.oncomplete=()=>p.close()})}async function oi(){try{const f=await Ln();return new Promise((p,w)=>{const E=f.transaction(wt,"readonly"),G=E.objectStore(wt).get(Rn);G.onerror=()=>w(G.error),G.onsuccess=()=>p(G.result||null),E.oncomplete=()=>f.close()})}catch{return null}}async function li(){try{const f=await Ln();return new Promise((p,w)=>{const E=f.transaction(wt,"readwrite"),G=E.objectStore(wt).delete(Rn);G.onerror=()=>w(G.error),G.onsuccess=()=>p(),E.oncomplete=()=>f.close()})}catch{}}function ri(f){lt[f?"unshift":"push"](()=>{Fe=f,t(29,Fe)})}function ii(f){lt[f?"unshift":"push"](()=>{ne=f,t(28,ne)})}return n.$$.update=()=>{if(n.$$.dirty[3]&1024&&t(106,o=new Set(Re.slice(0,jn).map(f=>f.id))),n.$$.dirty[3]&512&&t(107,l=new Set(Ve.slice(0,Vn).map(f=>f.id))),n.$$.dirty[0]&160|n.$$.dirty[3]&8192&&!je&&T.background.mode==="gradient"&&T.background.gradientId&&!o.has(T.background.gradientId)&&t(7,je=!0),n.$$.dirty[0]&128|n.$$.dirty[3]&1024&&t(40,r=je?Re:Re.slice(0,jn)),n.$$.dirty[0]&288|n.$$.dirty[3]&16384&&!me&&T.accent&&!l.has(T.accent)&&t(8,me=!0),n.$$.dirty[0]&256|n.$$.dirty[3]&512&&t(39,s=me?Ve:Ve.slice(0,Vn)),n.$$.dirty[0]&32|n.$$.dirty[3]&488&&!ze&&P&&(on(T.theme),ln(T.accent),rn(T.background.gradientId),(Se||H||Ye)&&mt(),t(100,Ye=!0),t(101,Se=!1),t(98,H=!1)),n.$$.dirty[0]&64&&typeof document<"u"&&document.body.classList.toggle("settings-open",ke),n.$$.dirty[0]&32|n.$$.dirty[3]&4096&&Xe&&T.mergeAllBookmarks&&Nr(),n.$$.dirty[0]&10|n.$$.dirty[3]&20&&t(25,pe=(()=>{const f=v&&O?O:I,p=new Set(f??[]);if(K.size){const w=pt();K.forEach(E=>{var G,W;let F=((G=w.nodesById[E])==null?void 0:G.parentId)??null;for(;F;)p.add(F),F=((W=w.nodesById[F])==null?void 0:W.parentId)??null})}return p})()),n.$$.dirty[0]&512|n.$$.dirty[3]&1&&t(12,i=(()=>{if(!rt.trim())return h;const f=rt.toLowerCase().trim();return h.filter(p=>{var w,E,F;return((w=p.title)==null?void 0:w.toLowerCase().includes(f))||((E=p.url)==null?void 0:E.toLowerCase().includes(f))||((F=p.displayTitle)==null?void 0:F.toLowerCase().includes(f))})})()),n.$$.dirty[0]&512|n.$$.dirty[3]&2&&t(38,a=(()=>{if(!rt.trim())return m;const f=rt.toLowerCase().trim();return m.map(p=>({...p,items:p.items.filter(w=>{var E,F,G;return((E=w.title)==null?void 0:E.toLowerCase().includes(f))||((F=w.url)==null?void 0:F.toLowerCase().includes(f))||((G=w.displayTitle)==null?void 0:G.toLowerCase().includes(f))})})).filter(p=>p.items.length>0)})()),n.$$.dirty[0]&32|n.$$.dirty[3]&2048&&T.enableTopSites&&!ae&&uo(),n.$$.dirty[0]&7200){const f=T.mergeAllBookmarks?T.enableTopSites?i.length+Me.length:i.length:0;de>=f&&t(11,de=Math.max(f-1,-1))}n.$$.dirty[0]&21&&(D||te.length||y.size)&&(t(17,N=go()),t(18,M=Jr()))},[y,v,D,K,te,T,ke,je,me,rt,Me,de,i,d,_,g,L,N,M,j,Q,R,ee,x,ce,pe,we,De,ne,Fe,Be,be,Qe,$e,Oe,Ie,ht,nn,a,s,r,u,Yl,Zl,Fn,xl,$l,er,tr,nr,or,lr,rr,ir,sr,ar,kr,_r,pr,wr,yr,Sr,Cr,Br,vr,Tr,Dr,En,Fr,Er,Ar,_t,Lr,Or,Pr,Ur,Hr,co,qr,zr,Wr,jr,Vr,Kr,Yr,Qr,Xr,Zr,ho,An,xr,$r,ei,h,m,I,P,O,H,ze,Ye,Se,Ve,Re,ae,Xe,o,l,ri,ii]}class ya extends He{constructor(e){super(),Ue(this,e,wa,_a,Pe,{},null,[-1,-1,-1,-1,-1,-1,-1])}}new ya({target:document.getElementById("app")});
