var jr=Object.defineProperty;var Vr=(n,e,t)=>e in n?jr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var al=(n,e,t)=>Vr(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();function $(){}const An=n=>n;function ii(n){return n()}function Hl(){return Object.create(null)}function Pe(n){n.forEach(ii)}function We(n){return typeof n=="function"}function Re(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let jn;function Rl(n,e){return n===e?!0:(jn||(jn=document.createElement("a")),jn.href=e,n===jn.href)}function Kr(n){return Object.keys(n).length===0}function ri(n,...e){if(n==null){for(const l of e)l(void 0);return $}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function fn(n){let e;return ri(n,t=>e=t)(),e}function si(n,e,t){n.$$.on_destroy.push(ri(e,t))}function Gl(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const ai=typeof window<"u";let nl=ai?()=>window.performance.now():()=>Date.now(),yl=ai?n=>requestAnimationFrame(n):$;const cn=new Set;function ci(n){cn.forEach(e=>{e.c(n)||(cn.delete(e),e.f())}),cn.size!==0&&yl(ci)}function ll(n){let e;return cn.size===0&&yl(ci),{promise:new Promise(t=>{cn.add(e={c:n,f:t})}),abort(){cn.delete(e)}}}function g(n,e){n.appendChild(e)}function ui(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function Yr(n){const e=S("style");return e.textContent="/* empty */",Qr(ui(n),e),e.sheet}function Qr(n,e){return g(n.head||n,e),e.sheet}function G(n,e,t){n.insertBefore(e,t||null)}function R(n){n.parentNode&&n.parentNode.removeChild(n)}function Xr(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function S(n){return document.createElement(n)}function at(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ce(n){return document.createTextNode(n)}function U(){return ce(" ")}function Qe(){return ce("")}function V(n,e,t,l){return n.addEventListener(e,t,l),()=>n.removeEventListener(e,t,l)}function Zr(n){return function(e){return e.preventDefault(),n.call(this,e)}}function Jr(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function c(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function xr(n){return Array.from(n.childNodes)}function Te(n,e){e=""+e,n.data!==e&&(n.data=e)}function an(n,e){n.value=e??""}function wt(n,e,t,l){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function Wl(n,e,t){for(let l=0;l<n.options.length;l+=1){const o=n.options[l];if(o.__value===e){o.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function $r(n){const e=n.querySelector(":checked");return e&&e.__value}function de(n,e,t){n.classList.toggle(e,!!t)}function fi(n,e,{bubbles:t=!1,cancelable:l=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:l})}const el=new Map;let tl=0;function es(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function ts(n,e){const t={stylesheet:Yr(e),rules:{}};return el.set(n,t),t}function Fn(n,e,t,l,o,i,r,s=0){const a=16.666/l;let u=`{
`;for(let p=0;p<=1;p+=a){const w=e+(t-e)*i(p);u+=p*100+`%{${r(w,1-w)}}
`}const f=u+`100% {${r(t,1-t)}}
}`,b=`__svelte_${es(f)}_${s}`,h=ui(n),{stylesheet:_,rules:y}=el.get(h)||ts(h,n);y[b]||(y[b]=!0,_.insertRule(`@keyframes ${b} ${f}`,_.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${b} ${l}ms linear ${o}ms 1 both`,tl+=1,b}function En(n,e){const t=(n.style.animation||"").split(", "),l=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),o=t.length-l.length;o&&(n.style.animation=l.join(", "),tl-=o,tl||ns())}function ns(){yl(()=>{tl||(el.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&R(e)}),el.clear())})}function ls(n,e,t,l){if(!e)return $;const o=n.getBoundingClientRect();if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom)return $;const{delay:i=0,duration:r=300,easing:s=An,start:a=nl()+i,end:u=a+r,tick:f=$,css:b}=t(n,{from:e,to:o},l);let h=!0,_=!1,y;function m(){b&&(y=Fn(n,0,1,r,i,s,b)),i||(_=!0)}function p(){b&&En(n,y),h=!1}return ll(w=>{if(!_&&w>=a&&(_=!0),_&&w>=u&&(f(1,0),p()),!h)return!1;if(_){const I=w-a,F=0+1*s(I/r);f(F,1-F)}return!0}),m(),f(0,1),p}function os(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,o=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=l,di(n,o)}}function di(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(n),o=l.transform==="none"?"":l.transform;n.style.transform=`${o} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let Mn;function Dn(n){Mn=n}function gi(){if(!Mn)throw new Error("Function called outside component initialization");return Mn}function hi(n){gi().$$.on_mount.push(n)}function mi(){const n=gi();return(e,t,{cancelable:l=!1}={})=>{const o=n.$$.callbacks[e];if(o){const i=fi(e,t,{cancelable:l});return o.slice().forEach(r=>{r.call(n,i)}),!i.defaultPrevented}return!0}}function is(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(l=>l.call(this,e))}const sn=[],ct=[];let un=[];const ql=[],bi=Promise.resolve();let hl=!1;function ki(){hl||(hl=!0,bi.then(_i))}function Cl(){return ki(),bi}function Ct(n){un.push(n)}const cl=new Set;let ln=0;function _i(){if(ln!==0)return;const n=Mn;do{try{for(;ln<sn.length;){const e=sn[ln];ln++,Dn(e),rs(e.$$)}}catch(e){throw sn.length=0,ln=0,e}for(Dn(null),sn.length=0,ln=0;ct.length;)ct.pop()();for(let e=0;e<un.length;e+=1){const t=un[e];cl.has(t)||(cl.add(t),t())}un.length=0}while(sn.length);for(;ql.length;)ql.pop()();hl=!1,cl.clear(),Dn(n)}function rs(n){if(n.fragment!==null){n.update(),Pe(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ct)}}function ss(n){const e=[],t=[];un.forEach(l=>n.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),un=e}let Sn;function Sl(){return Sn||(Sn=Promise.resolve(),Sn.then(()=>{Sn=null})),Sn}function Zt(n,e,t){n.dispatchEvent(fi(`${e?"intro":"outro"}${t}`))}const Zn=new Set;let yt;function Ne(){yt={r:0,c:[],p:yt}}function He(){yt.r||Pe(yt.c),yt=yt.p}function j(n,e){n&&n.i&&(Zn.delete(n),n.i(e))}function Y(n,e,t,l){if(n&&n.o){if(Zn.has(n))return;Zn.add(n),yt.c.push(()=>{Zn.delete(n),l&&(t&&n.d(1),l())}),n.o(e)}else l&&l()}const Tl={duration:0};function as(n,e,t){const l={direction:"in"};let o=e(n,t,l),i=!1,r,s,a=0;function u(){r&&En(n,r)}function f(){const{delay:h=0,duration:_=300,easing:y=An,tick:m=$,css:p}=o||Tl;p&&(r=Fn(n,0,1,_,h,y,p,a++)),m(0,1);const w=nl()+h,I=w+_;s&&s.abort(),i=!0,Ct(()=>Zt(n,!0,"start")),s=ll(F=>{if(i){if(F>=I)return m(1,0),Zt(n,!0,"end"),u(),i=!1;if(F>=w){const O=y((F-w)/_);m(O,1-O)}}return i})}let b=!1;return{start(){b||(b=!0,En(n),We(o)?(o=o(l),Sl().then(f)):f())},invalidate(){b=!1},end(){i&&(u(),i=!1)}}}function cs(n,e,t){const l={direction:"out"};let o=e(n,t,l),i=!0,r;const s=yt;s.r+=1;let a;function u(){const{delay:f=0,duration:b=300,easing:h=An,tick:_=$,css:y}=o||Tl;y&&(r=Fn(n,1,0,b,f,h,y));const m=nl()+f,p=m+b;Ct(()=>Zt(n,!1,"start")),"inert"in n&&(a=n.inert,n.inert=!0),ll(w=>{if(i){if(w>=p)return _(0,1),Zt(n,!1,"end"),--s.r||Pe(s.c),!1;if(w>=m){const I=h((w-m)/b);_(1-I,I)}}return i})}return We(o)?Sl().then(()=>{o=o(l),u()}):u(),{end(f){f&&"inert"in n&&(n.inert=a),f&&o.tick&&o.tick(1,0),i&&(r&&En(n,r),i=!1)}}}function Vn(n,e,t,l){let i=e(n,t,{direction:"both"}),r=l?0:1,s=null,a=null,u=null,f;function b(){u&&En(n,u)}function h(y,m){const p=y.b-r;return m*=Math.abs(p),{a:r,b:y.b,d:p,duration:m,start:y.start,end:y.start+m,group:y.group}}function _(y){const{delay:m=0,duration:p=300,easing:w=An,tick:I=$,css:F}=i||Tl,O={start:nl()+m,b:y};y||(O.group=yt,yt.r+=1),"inert"in n&&(y?f!==void 0&&(n.inert=f):(f=n.inert,n.inert=!0)),s||a?a=O:(F&&(b(),u=Fn(n,r,y,p,m,w,F)),y&&I(0,1),s=h(O,p),Ct(()=>Zt(n,y,"start")),ll(v=>{if(a&&v>a.start&&(s=h(a,p),a=null,Zt(n,s.b,"start"),F&&(b(),u=Fn(n,r,s.b,s.duration,0,w,i.css))),s){if(v>=s.end)I(r=s.b,1-r),Zt(n,s.b,"end"),a||(s.b?b():--s.group.r||Pe(s.group.c)),s=null;else if(v>=s.start){const P=v-s.start;r=s.a+s.d*w(P/s.duration),I(r,1-r)}}return!!(s||a)}))}return{run(y){We(i)?Sl().then(()=>{i=i({direction:y?"in":"out"}),_(y)}):_(y)},end(){b(),s=a=null}}}function pe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Jt(n,e){n.d(1),e.delete(n.key)}function xt(n,e){Y(n,1,1,()=>{e.delete(n.key)})}function us(n,e){n.f(),xt(n,e)}function lt(n,e,t,l,o,i,r,s,a,u,f,b){let h=n.length,_=i.length,y=h;const m={};for(;y--;)m[n[y].key]=y;const p=[],w=new Map,I=new Map,F=[];for(y=_;y--;){const B=b(o,i,y),z=t(B);let A=r.get(z);A?F.push(()=>A.p(B,e)):(A=u(z,B),A.c()),w.set(z,p[y]=A),z in m&&I.set(z,Math.abs(y-m[z]))}const O=new Set,v=new Set;function P(B){j(B,1),B.m(s,f),r.set(B.key,B),f=B.first,_--}for(;h&&_;){const B=p[_-1],z=n[h-1],A=B.key,J=z.key;B===z?(f=B.first,h--,_--):w.has(J)?!r.has(A)||O.has(A)?P(B):v.has(J)?h--:I.get(A)>I.get(J)?(v.add(A),P(B)):(O.add(J),h--):(a(z,r),h--)}for(;h--;){const B=n[h];w.has(B.key)||a(B,r)}for(;_;)P(p[_-1]);return Pe(F),p}function _e(n){n&&n.c()}function ge(n,e,t){const{fragment:l,after_update:o}=n.$$;l&&l.m(e,t),Ct(()=>{const i=n.$$.on_mount.map(ii).filter(We);n.$$.on_destroy?n.$$.on_destroy.push(...i):Pe(i),n.$$.on_mount=[]}),o.forEach(Ct)}function he(n,e){const t=n.$$;t.fragment!==null&&(ss(t.after_update),Pe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function fs(n,e){n.$$.dirty[0]===-1&&(sn.push(n),ki(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function qe(n,e,t,l,o,i,r=null,s=[-1]){const a=Mn;Dn(n);const u=n.$$={fragment:null,ctx:[],props:i,update:$,not_equal:o,bound:Hl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Hl(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(b,h,..._)=>{const y=_.length?_[0]:h;return u.ctx&&o(u.ctx[b],u.ctx[b]=y)&&(!u.skip_bound&&u.bound[b]&&u.bound[b](y),f&&fs(n,b)),h}):[],u.update(),f=!0,Pe(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const b=xr(e.target);u.fragment&&u.fragment.l(b),b.forEach(R)}else u.fragment&&u.fragment.c();e.intro&&j(n.$$.fragment),ge(n,e.target,e.anchor),_i()}Dn(a)}class je{constructor(){al(this,"$$");al(this,"$$set")}$destroy(){he(this,1),this.$destroy=$}$on(e,t){if(!We(t))return $;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const o=l.indexOf(t);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Kr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ds="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ds);const on=[];function gs(n,e=$){let t;const l=new Set;function o(s){if(Re(n,s)&&(n=s,t)){const a=!on.length;for(const u of l)u[1](),on.push(u,n);if(a){for(let u=0;u<on.length;u+=2)on[u][0](on[u+1]);on.length=0}}}function i(s){o(s(n))}function r(s,a=$){const u=[s,a];return l.add(u),l.size===1&&(t=e(o,i)||$),s(n),()=>{l.delete(u),l.size===0&&t&&(t(),t=null)}}return{set:o,update:i,subscribe:r}}const hs={nodesById:{},rootIds:[]},ot=gs(hs),pi={subscribe:ot.subscribe};function vl(n,{includeChildren:e=!1}={}){const t=Array.isArray(n.children),l=t?[...n.children]:[],o=e?l.sort((s,a)=>(s.index??0)-(a.index??0)):[],r=l.filter(s=>!s.url).length>0;return{id:n.id,parentId:n.parentId??null,title:n.title??"",url:n.url??null,index:typeof n.index=="number"?n.index:0,isFolder:!n.url,childrenIds:e?o.map(s=>s.id):[],childrenLoaded:e,hasChildren:!n.url&&(e||t?r:!0)}}function wi(n){ot.update(e=>{const t={...e.nodesById};let l=[...e.rootIds];for(const o of n){const i=t[o.id];t[o.id]=i?{...i,...o}:o,!o.parentId&&!l.includes(o.id)&&l.push(o.id)}return l.sort((o,i)=>{const r=t[o],s=t[i];return((r==null?void 0:r.index)??0)-((s==null?void 0:s.index)??0)}),{...e,nodesById:t,rootIds:l}})}function ml(n,e,t){ot.update(l=>{const o={...l.nodesById},i=o[n];if(!i)return l;const r=Array.from(new Set(e));r.sort((a,u)=>{const f=o[a],b=o[u];return((f==null?void 0:f.index)??0)-((b==null?void 0:b.index)??0)});const s=r.some(a=>{var u;return(u=o[a])==null?void 0:u.isFolder});return o[n]={...i,childrenIds:r,childrenLoaded:t?!0:i.childrenLoaded,hasChildren:s},{...l,nodesById:o}})}async function ms(n){const e=await n.bookmarks.getTree(),t=Array.isArray(e)?e[0]:null,o=((t==null?void 0:t.children)??[]).map(i=>vl(i,{includeChildren:!1}));return ot.set({nodesById:Object.fromEntries(o.map(i=>[i.id,i])),rootIds:o.map(i=>i.id)}),o.map(i=>i.id)}async function bs(n){const e=await n.bookmarks.getTree(),t=Array.isArray(e)?e[0]:null;if(!t)return[];const l=[],o=[];function i(s,a=!1){const b=(Array.isArray(s.children)?[...s.children]:[]).sort((y,m)=>(y.index??0)-(m.index??0)),h=b.filter(y=>!y.url),_={id:s.id,parentId:s.parentId??null,title:s.title??"",url:s.url??null,index:typeof s.index=="number"?s.index:0,isFolder:!s.url,childrenIds:b.map(y=>y.id),childrenLoaded:!0,hasChildren:h.length>0};s.url||(l.push(_),a&&o.push(s.id));for(const y of h)i(y,!1)}const r=t.children??[];for(const s of r)i(s,!0);return ot.set({nodesById:Object.fromEntries(l.map(s=>[s.id,s])),rootIds:o}),o}function Wt(){return fn(ot)}function yi(n){return fn(ot).nodesById[n]}async function Tn(n,e){const t=await n.bookmarks.getSubTree(e),l=Array.isArray(t)?t[0]:null;if(!l)return{folderIds:[]};const o=[l],i=[],r=[];for(;o.length;){const s=o.shift(),a=Array.isArray(s.children),u=vl(s,{includeChildren:a});i.push(u),s.url||r.push(s.id),a&&o.push(...s.children)}return wi(i),i.forEach(s=>{if(s.isFolder&&ml(s.id,s.childrenIds,!0),s.parentId){const u=fn(ot).nodesById[s.parentId];if(u){const f=u.childrenIds?[...u.childrenIds]:[];f.push(s.id),ml(s.parentId,f,u.childrenLoaded)}}}),{folderIds:r}}function Jn(n){const e=fn(ot),t=[];let l=e.nodesById[n];for(;l&&(l.title&&t.unshift(l.title),!!l.parentId);)l=e.nodesById[l.parentId];return t}function ks(n){const e=vl(n,{includeChildren:!1});if(wi([e]),e.parentId){const t=yi(e.parentId),l=t!=null&&t.childrenIds?[...t.childrenIds]:[];l.splice(e.index??l.length,0,e.id),ml(e.parentId,l,t==null?void 0:t.childrenLoaded)}}function _s(n,e){ot.update(t=>{const l=t.nodesById[n];if(!l)return t;const o={...t.nodesById,[n]:{...l,...e}};return{...t,nodesById:o}})}function ps(n,{parentId:e,oldParentId:t,index:l}){ot.update(o=>{const i={...o.nodesById},r=i[n];if(!r)return o;const s={...r,parentId:e,index:typeof l=="number"?l:r.index};if(i[n]=s,t&&i[t]){const a=i[t],u=(a.childrenIds??[]).filter(b=>b!==n),f=u.some(b=>{var h;return(h=i[b])==null?void 0:h.isFolder});i[t]={...a,childrenIds:u,hasChildren:f}}if(e&&i[e]){const a=i[e],u=[...a.childrenIds??[]];u.includes(n)||u.splice(l??u.length,0,n);const f=u.some(b=>{var h;return(h=i[b])==null?void 0:h.isFolder});i[e]={...a,childrenIds:u,hasChildren:f}}return{...o,nodesById:i}})}function ws(n,{parentId:e}){ot.update(t=>{var s;const l={...t.nodesById},o=new Set([n]),i=[n];for(;i.length;){const a=i.pop(),u=l[a];u&&(s=u.childrenIds)!=null&&s.length&&u.childrenIds.forEach(f=>{o.has(f)||(o.add(f),i.push(f))})}o.forEach(a=>{delete l[a]});let r=t.rootIds;if(r.includes(n)&&(r=r.filter(a=>a!==n)),e&&l[e]){const a=l[e],u=(a.childrenIds??[]).filter(b=>b!==n),f=u.some(b=>{var h;return(h=l[b])==null?void 0:h.isFolder});l[e]={...a,childrenIds:u,hasChildren:f}}return{...t,nodesById:l,rootIds:r}})}function Kn(n){var o;const e=fn(ot),t=[],l=[n];for(;l.length;){const i=l.pop(),r=e.nodesById[i];r&&r.isFolder&&(t.push(i),(o=r.childrenIds)!=null&&o.length&&r.childrenIds.forEach(s=>{const a=e.nodesById[s];a!=null&&a.isFolder&&l.push(s)}))}return t}function ys(){const n=fn(ot);return Object.values(n.nodesById).filter(e=>e.isFolder).map(e=>({id:e.id,title:e.title??"",path:Jn(e.id)}))}function jl(n,e,t){const l=n.slice();return l[26]=e[t],l}function Vl(n){let e,t,l,o,i,r,s,a,u,f,b,h,_,y=(n[12].title||"Untitled folder")+"",m,p,w,I,F,O,v,P=n[11]&&n[15]&&Kl(n);return{c(){var B;e=S("li"),t=S("div"),l=S("button"),o=at("svg"),i=at("path"),u=U(),f=S("label"),b=S("input"),h=U(),_=S("span"),m=ce(y),w=U(),P&&P.c(),c(i,"d","M6 4.5 10 8l-4 3.5"),c(i,"fill","none"),c(i,"stroke","currentColor"),c(i,"stroke-width","1.6"),c(i,"stroke-linecap","round"),c(i,"stroke-linejoin","round"),c(o,"viewBox","0 0 16 16"),c(o,"aria-hidden","true"),c(o,"focusable","false"),c(l,"type","button"),c(l,"class","folder-node__expander svelte-ux2jgn"),c(l,"aria-hidden",r=!n[11]),c(l,"aria-label",s=n[15]?"Collapse folder":"Expand folder"),l.disabled=a=!n[11],de(l,"hidden",!n[11]),c(b,"type","checkbox"),c(b,"class","folder-node__checkbox svelte-ux2jgn"),c(_,"class","folder-node__title svelte-ux2jgn"),c(_,"title",p=n[12].title||"Untitled folder"),c(f,"class","folder-node__label svelte-ux2jgn"),c(t,"class","folder-node__row svelte-ux2jgn"),c(t,"style",n[16]),c(e,"class","folder-node svelte-ux2jgn"),c(e,"data-expanded",n[15]),c(e,"data-depth",n[1]),c(e,"data-match",I=((B=n[5])==null?void 0:B.has(n[0]))??!1)},m(B,z){G(B,e,z),g(e,t),g(t,l),g(l,o),g(o,i),g(t,u),g(t,f),g(f,b),n[24](b),g(f,h),g(f,_),g(_,m),g(e,w),P&&P.m(e,null),F=!0,O||(v=[V(l,"click",n[17]),V(b,"change",n[18])],O=!0)},p(B,z){var A;(!F||z&2048&&r!==(r=!B[11]))&&c(l,"aria-hidden",r),(!F||z&32768&&s!==(s=B[15]?"Collapse folder":"Expand folder"))&&c(l,"aria-label",s),(!F||z&2048&&a!==(a=!B[11]))&&(l.disabled=a),(!F||z&2048)&&de(l,"hidden",!B[11]),(!F||z&4096)&&y!==(y=(B[12].title||"Untitled folder")+"")&&Te(m,y),(!F||z&4096&&p!==(p=B[12].title||"Untitled folder"))&&c(_,"title",p),B[11]&&B[15]?P?(P.p(B,z),z&34816&&j(P,1)):(P=Kl(B),P.c(),j(P,1),P.m(e,null)):P&&(Ne(),Y(P,1,1,()=>{P=null}),He()),(!F||z&32768)&&c(e,"data-expanded",B[15]),(!F||z&2)&&c(e,"data-depth",B[1]),(!F||z&33&&I!==(I=((A=B[5])==null?void 0:A.has(B[0]))??!1))&&c(e,"data-match",I)},i(B){F||(j(P),F=!0)},o(B){Y(P),F=!1},d(B){B&&R(e),n[24](null),P&&P.d(),O=!1,Pe(v)}}}function Kl(n){let e,t=[],l=new Map,o,i=pe(n[13]);const r=s=>s[26];for(let s=0;s<i.length;s+=1){let a=jl(n,i,s),u=r(a);l.set(u,t[s]=Yl(u,a))}return{c(){e=S("ul");for(let s=0;s<t.length;s+=1)t[s].c();c(e,"class","folder-node__children svelte-ux2jgn")},m(s,a){G(s,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);o=!0},p(s,a){a&9214&&(i=pe(s[13]),Ne(),t=lt(t,a,r,1,s,i,l,e,xt,Yl,null,jl),He())},i(s){if(!o){for(let a=0;a<i.length;a+=1)j(t[a]);o=!0}},o(s){for(let a=0;a<t.length;a+=1)Y(t[a]);o=!1},d(s){s&&R(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Yl(n,e){let t,l,o;return l=new Ci({props:{nodeId:e[26],depth:e[1]+1,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[5],selectedIds:e[6],toggleSelection:e[7],toggleExpansion:e[8],getCheckboxState:e[9]}}),{key:n,first:null,c(){t=Qe(),_e(l.$$.fragment),this.first=t},m(i,r){G(i,t,r),ge(l,i,r),o=!0},p(i,r){e=i;const s={};r&8192&&(s.nodeId=e[26]),r&2&&(s.depth=e[1]+1),r&4&&(s.expandedIds=e[2]),r&8&&(s.loadingIds=e[3]),r&16&&(s.visibleIds=e[4]),r&32&&(s.searchMatches=e[5]),r&64&&(s.selectedIds=e[6]),r&128&&(s.toggleSelection=e[7]),r&256&&(s.toggleExpansion=e[8]),r&512&&(s.getCheckboxState=e[9]),l.$set(s)},i(i){o||(j(l.$$.fragment,i),o=!0)},o(i){Y(l.$$.fragment,i),o=!1},d(i){i&&R(t),he(l,i)}}}function Cs(n){let e,t,l=n[14]&&Vl(n);return{c(){l&&l.c(),e=Qe()},m(o,i){l&&l.m(o,i),G(o,e,i),t=!0},p(o,[i]){o[14]?l?(l.p(o,i),i&16384&&j(l,1)):(l=Vl(o),l.c(),j(l,1),l.m(e.parentNode,e)):l&&(Ne(),Y(l,1,1,()=>{l=null}),He())},i(o){t||(j(l),t=!0)},o(o){Y(l),t=!1},d(o){o&&R(e),l&&l.d(o)}}}function Ss(n,e,t){let l,o,i,r,s,a,u,f,b,h;si(n,pi,K=>t(23,h=K));let{nodeId:_}=e,{depth:y=0}=e,{expandedIds:m}=e,{loadingIds:p}=e,{visibleIds:w}=e,{searchMatches:I}=e,{selectedIds:F}=e,{toggleSelection:O}=e,{toggleExpansion:v}=e,{getCheckboxState:P}=e,B;const z=`--depth: ${y}`;function A(K){K.stopPropagation(),s&&(v==null||v(_))}function J(K){K.stopPropagation(),O==null||O(_)}function X(K){ct[K?"unshift":"push"](()=>{B=K,t(10,B),t(21,f),t(9,P),t(6,F),t(0,_)})}return n.$$set=K=>{"nodeId"in K&&t(0,_=K.nodeId),"depth"in K&&t(1,y=K.depth),"expandedIds"in K&&t(2,m=K.expandedIds),"loadingIds"in K&&t(3,p=K.loadingIds),"visibleIds"in K&&t(4,w=K.visibleIds),"searchMatches"in K&&t(5,I=K.searchMatches),"selectedIds"in K&&t(6,F=K.selectedIds),"toggleSelection"in K&&t(7,O=K.toggleSelection),"toggleExpansion"in K&&t(8,v=K.toggleExpansion),"getCheckboxState"in K&&t(9,P=K.getCheckboxState)},n.$$.update=()=>{var K,x;n.$$.dirty&8388608&&t(22,l=h),n.$$.dirty&4194305&&t(12,o=(K=l==null?void 0:l.nodesById)==null?void 0:K[_]),n.$$.dirty&4096&&t(20,i=(o==null?void 0:o.isFolder)??!1),n.$$.dirty&4198400&&t(13,r=((x=o==null?void 0:o.childrenIds)==null?void 0:x.filter(re=>{var H;const ue=(H=l==null?void 0:l.nodesById)==null?void 0:H[re];return ue==null?void 0:ue.isFolder}))??[]),n.$$.dirty&1056768&&t(11,s=i&&r.length>0),n.$$.dirty&2053&&t(15,a=s&&(m==null?void 0:m.has(_))),n.$$.dirty&9&&(p==null||p.has(_)),n.$$.dirty&17&&t(19,u=!w||w.has(_)),n.$$.dirty&577&&t(21,f=P&&F?P(_):"none"),n.$$.dirty&2098176&&B&&(f==="partial"?(t(10,B.indeterminate=!0,B),t(10,B.checked=!1,B)):(t(10,B.indeterminate=!1,B),t(10,B.checked=f==="selected",B))),n.$$.dirty&1576960&&t(14,b=!!(o&&i&&u))},[_,y,m,p,w,I,F,O,v,P,B,s,o,r,b,a,z,A,J,u,i,f,l,h,X]}class Ci extends je{constructor(e){super(),qe(this,e,Ss,Cs,Re,{nodeId:0,depth:1,expandedIds:2,loadingIds:3,visibleIds:4,searchMatches:5,selectedIds:6,toggleSelection:7,toggleExpansion:8,getCheckboxState:9})}}function Ql(n,e,t){const l=n.slice();return l[22]=e[t],l}function Xl(n,e,t){const l=n.slice();return l[25]=e[t],l}function Zl(n){let e,t,l,o,i,r,s,a,u,f,b,h,_,y,m,p,w,I,F,O,v,P,B,z,A,J,X=n[9]===1?"":"s",K,x,re,ue,H,Q,ee,te,fe=n[10]===1?"":"s",me,Xe,D,E,be,De,ne,Se,T,N,et;const rt=[vs,Ts],Fe=[];function Ee(Ue,ye){return Ue[1].length===0?0:1}_=Ee(n),y=Fe[_]=rt[_](n);let Ce=n[9]>0&&xl(n);function ut(Ue,ye){return Ue[8].length===0?Bs:Is}let Ve=ut(n),Ge=Ve(n);return{c(){e=S("div"),t=S("section"),l=S("header"),o=S("div"),o.innerHTML='<h2 id="folder-modal-title">Select bookmark folders</h2> <p class="folder-modal__hint svelte-gn1lpb">Choose one or more folders to show in your new tab. Selecting a folder includes all of its subfolders.</p>',i=U(),r=S("button"),r.textContent="√ó",s=U(),a=S("div"),u=S("input"),f=U(),b=S("div"),h=S("div"),y.c(),m=U(),p=S("aside"),w=S("header"),I=S("h3"),I.textContent="Selected folders",F=U(),Ce&&Ce.c(),O=U(),Ge.c(),v=U(),P=S("footer"),B=S("div"),z=S("span"),A=ce(n[9]),J=ce(" folder"),K=ce(X),x=ce(" selected"),re=U(),ue=S("span"),ue.textContent="‚Ä¢",H=U(),Q=S("span"),ee=ce(n[10]),te=ce(" bookmark"),me=ce(fe),Xe=U(),D=S("div"),E=S("button"),E.textContent="Cancel",be=U(),De=S("button"),ne=ce("Confirm selection"),c(r,"type","button"),c(r,"class","folder-modal__close svelte-gn1lpb"),c(r,"aria-label","Close"),c(l,"class","folder-modal__header svelte-gn1lpb"),c(u,"type","search"),c(u,"placeholder","Search folders"),u.value=n[5],c(u,"class","svelte-gn1lpb"),c(a,"class","folder-modal__search svelte-gn1lpb"),c(h,"class","folder-modal__tree svelte-gn1lpb"),c(w,"class","svelte-gn1lpb"),c(p,"class","folder-modal__summary svelte-gn1lpb"),c(b,"class","folder-modal__body svelte-gn1lpb"),c(ue,"aria-hidden","true"),c(B,"class","folder-modal__totals svelte-gn1lpb"),c(E,"type","button"),c(E,"class","ghost-button svelte-gn1lpb"),c(De,"type","button"),c(De,"class","primary-button svelte-gn1lpb"),De.disabled=Se=n[9]===0,c(D,"class","folder-modal__actions svelte-gn1lpb"),c(P,"class","folder-modal__footer svelte-gn1lpb"),c(t,"class","folder-modal svelte-gn1lpb"),c(t,"role","dialog"),c(t,"aria-modal","true"),c(t,"aria-labelledby","folder-modal-title"),c(e,"class","modal-overlay svelte-gn1lpb"),c(e,"role","presentation")},m(Ue,ye){G(Ue,e,ye),g(e,t),g(t,l),g(l,o),g(l,i),g(l,r),g(t,s),g(t,a),g(a,u),n[21](u),g(t,f),g(t,b),g(b,h),Fe[_].m(h,null),g(b,m),g(b,p),g(p,w),g(w,I),g(w,F),Ce&&Ce.m(w,null),g(p,O),Ge.m(p,null),g(t,v),g(t,P),g(P,B),g(B,z),g(z,A),g(z,J),g(z,K),g(z,x),g(B,re),g(B,ue),g(B,H),g(B,Q),g(Q,ee),g(Q,te),g(Q,me),g(P,Xe),g(P,D),g(D,E),g(D,be),g(D,De),g(De,ne),T=!0,N||(et=[V(r,"click",function(){We(n[14])&&n[14].apply(this,arguments)}),V(u,"input",n[19]),V(E,"click",function(){We(n[14])&&n[14].apply(this,arguments)}),V(De,"click",function(){We(n[15])&&n[15].apply(this,arguments)}),V(e,"click",n[18])],N=!0)},p(Ue,ye){n=Ue,(!T||ye&32&&u.value!==n[5])&&(u.value=n[5]);let tt=_;_=Ee(n),_===tt?Fe[_].p(n,ye):(Ne(),Y(Fe[tt],1,1,()=>{Fe[tt]=null}),He(),y=Fe[_],y?y.p(n,ye):(y=Fe[_]=rt[_](n),y.c()),j(y,1),y.m(h,null)),n[9]>0?Ce?Ce.p(n,ye):(Ce=xl(n),Ce.c(),Ce.m(w,null)):Ce&&(Ce.d(1),Ce=null),Ve===(Ve=ut(n))&&Ge?Ge.p(n,ye):(Ge.d(1),Ge=Ve(n),Ge&&(Ge.c(),Ge.m(p,null))),(!T||ye&512)&&Te(A,n[9]),(!T||ye&512)&&X!==(X=n[9]===1?"":"s")&&Te(K,X),(!T||ye&1024)&&Te(ee,n[10]),(!T||ye&1024)&&fe!==(fe=n[10]===1?"":"s")&&Te(me,fe),(!T||ye&512&&Se!==(Se=n[9]===0))&&(De.disabled=Se)},i(Ue){T||(j(y),T=!0)},o(Ue){Y(y),T=!1},d(Ue){Ue&&R(e),n[21](null),Fe[_].d(),Ce&&Ce.d(),Ge.d(),N=!1,Pe(et)}}}function Ts(n){let e,t=[],l=new Map,o,i=pe(n[1]);const r=s=>s[25];for(let s=0;s<i.length;s+=1){let a=Xl(n,i,s),u=r(a);l.set(u,t[s]=Jl(u,a))}return{c(){e=S("ul");for(let s=0;s<t.length;s+=1)t[s].c();c(e,"class","folder-tree svelte-gn1lpb")},m(s,a){G(s,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);o=!0},p(s,a){a&14558&&(i=pe(s[1]),Ne(),t=lt(t,a,r,1,s,i,l,e,xt,Jl,null,Xl),He())},i(s){if(!o){for(let a=0;a<i.length;a+=1)j(t[a]);o=!0}},o(s){for(let a=0;a<t.length;a+=1)Y(t[a]);o=!1},d(s){s&&R(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function vs(n){let e;return{c(){e=S("p"),e.textContent="No bookmark folders available.",c(e,"class","folder-modal__empty svelte-gn1lpb")},m(t,l){G(t,e,l)},p:$,i:$,o:$,d(t){t&&R(e)}}}function Jl(n,e){let t,l,o;return l=new Ci({props:{nodeId:e[25],depth:0,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[6],selectedIds:e[7],toggleSelection:e[11],toggleExpansion:e[12],getCheckboxState:e[13]}}),{key:n,first:null,c(){t=Qe(),_e(l.$$.fragment),this.first=t},m(i,r){G(i,t,r),ge(l,i,r),o=!0},p(i,r){e=i;const s={};r&2&&(s.nodeId=e[25]),r&4&&(s.expandedIds=e[2]),r&8&&(s.loadingIds=e[3]),r&16&&(s.visibleIds=e[4]),r&64&&(s.searchMatches=e[6]),r&128&&(s.selectedIds=e[7]),r&2048&&(s.toggleSelection=e[11]),r&4096&&(s.toggleExpansion=e[12]),r&8192&&(s.getCheckboxState=e[13]),l.$set(s)},i(i){o||(j(l.$$.fragment,i),o=!0)},o(i){Y(l.$$.fragment,i),o=!1},d(i){i&&R(t),he(l,i)}}}function xl(n){let e,t,l;return{c(){e=S("button"),e.textContent="Clear all",c(e,"type","button"),c(e,"class","summary-clear svelte-gn1lpb")},m(o,i){G(o,e,i),t||(l=V(e,"click",function(){We(n[16])&&n[16].apply(this,arguments)}),t=!0)},p(o,i){n=o},d(o){o&&R(e),t=!1,l()}}}function Is(n){let e,t=[],l=new Map,o=pe(n[8]);const i=r=>r[22].id;for(let r=0;r<o.length;r+=1){let s=Ql(n,o,r),a=i(s);l.set(a,t[r]=eo(a,s))}return{c(){e=S("ul");for(let r=0;r<t.length;r+=1)t[r].c();c(e,"class","folder-modal__selection-list svelte-gn1lpb")},m(r,s){G(r,e,s);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,s){s&256&&(o=pe(r[8]),t=lt(t,s,i,1,r,o,l,e,Jt,eo,null,Ql))},d(r){r&&R(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function Bs(n){let e;return{c(){e=S("p"),e.textContent="Pick folders to see them here.",c(e,"class","folder-modal__empty svelte-gn1lpb")},m(t,l){G(t,e,l)},p:$,d(t){t&&R(e)}}}function $l(n){let e,t=n[22].count+"",l;return{c(){e=S("span"),l=ce(t),c(e,"class","selection-chip__count svelte-gn1lpb")},m(o,i){G(o,e,i),g(e,l)},p(o,i){i&256&&t!==(t=o[22].count+"")&&Te(l,t)},d(o){o&&R(e)}}}function eo(n,e){let t,l,o,i=e[22].label+"",r,s,a,u,f=typeof e[22].count=="number"&&$l(e);return{key:n,first:null,c(){t=S("li"),l=S("span"),o=S("span"),r=ce(i),s=U(),f&&f.c(),u=U(),c(o,"class","selection-chip__label svelte-gn1lpb"),c(l,"class","selection-chip svelte-gn1lpb"),c(l,"title",a=e[22].fullPath),this.first=t},m(b,h){G(b,t,h),g(t,l),g(l,o),g(o,r),g(l,s),f&&f.m(l,null),g(t,u)},p(b,h){e=b,h&256&&i!==(i=e[22].label+"")&&Te(r,i),typeof e[22].count=="number"?f?f.p(e,h):(f=$l(e),f.c(),f.m(l,null)):f&&(f.d(1),f=null),h&256&&a!==(a=e[22].fullPath)&&c(l,"title",a)},d(b){b&&R(t),f&&f.d()}}}function Ds(n){let e,t,l=n[0]&&Zl(n);return{c(){l&&l.c(),e=Qe()},m(o,i){l&&l.m(o,i),G(o,e,i),t=!0},p(o,[i]){o[0]?l?(l.p(o,i),i&1&&j(l,1)):(l=Zl(o),l.c(),j(l,1),l.m(e.parentNode,e)):l&&(Ne(),Y(l,1,1,()=>{l=null}),He())},i(o){t||(j(l),t=!0)},o(o){Y(l),t=!1},d(o){o&&R(e),l&&l.d(o)}}}function Fs(n,e,t){let{open:l=!1}=e,{rootIds:o=[]}=e,{expandedIds:i}=e,{loadingIds:r}=e,{visibleIds:s}=e,{searchQuery:a=""}=e,{searchMatches:u}=e,{selectedIds:f}=e,{summary:b=[]}=e,{selectedFolderCount:h=0}=e,{totalBookmarkCount:_=0}=e,{toggleSelection:y}=e,{toggleExpansion:m}=e,{getCheckboxState:p}=e,{onSearchChange:w}=e,{onRequestClose:I}=e,{onConfirmSelection:F}=e,{onClearSelection:O}=e,v;function P(A){A.target===A.currentTarget&&(A.preventDefault(),I==null||I())}function B(A){w==null||w(A.target.value)}function z(A){ct[A?"unshift":"push"](()=>{v=A,t(17,v)})}return n.$$set=A=>{"open"in A&&t(0,l=A.open),"rootIds"in A&&t(1,o=A.rootIds),"expandedIds"in A&&t(2,i=A.expandedIds),"loadingIds"in A&&t(3,r=A.loadingIds),"visibleIds"in A&&t(4,s=A.visibleIds),"searchQuery"in A&&t(5,a=A.searchQuery),"searchMatches"in A&&t(6,u=A.searchMatches),"selectedIds"in A&&t(7,f=A.selectedIds),"summary"in A&&t(8,b=A.summary),"selectedFolderCount"in A&&t(9,h=A.selectedFolderCount),"totalBookmarkCount"in A&&t(10,_=A.totalBookmarkCount),"toggleSelection"in A&&t(11,y=A.toggleSelection),"toggleExpansion"in A&&t(12,m=A.toggleExpansion),"getCheckboxState"in A&&t(13,p=A.getCheckboxState),"onSearchChange"in A&&t(20,w=A.onSearchChange),"onRequestClose"in A&&t(14,I=A.onRequestClose),"onConfirmSelection"in A&&t(15,F=A.onConfirmSelection),"onClearSelection"in A&&t(16,O=A.onClearSelection)},n.$$.update=()=>{if(n.$$.dirty&147457&&l){Cl().then(()=>{v==null||v.focus(),v==null||v.select()});const A=J=>{J.key==="Escape"&&(J.preventDefault(),I==null||I())};document.addEventListener("keydown",A,{once:!0})}},[l,o,i,r,s,a,u,f,b,h,_,y,m,p,I,F,O,v,P,B,w,z]}class Es extends je{constructor(e){super(),qe(this,e,Fs,Ds,Re,{open:0,rootIds:1,expandedIds:2,loadingIds:3,visibleIds:4,searchQuery:5,searchMatches:6,selectedIds:7,summary:8,selectedFolderCount:9,totalBookmarkCount:10,toggleSelection:11,toggleExpansion:12,getCheckboxState:13,onSearchChange:20,onRequestClose:14,onConfirmSelection:15,onClearSelection:16})}}function to(n,e,t){const l=n.slice();return l[18]=e[t],l}function no(n){let e,t,l,o,i,r,s,a,u,f,b,h,_=[],y=new Map,m,p,w,I,F,O,v,P,B,z,A,J,X,K,x,re,ue,H=pe(n[1]);const Q=ee=>ee[18].id;for(let ee=0;ee<H.length;ee+=1){let te=to(n,H,ee),fe=Q(te);y.set(fe,_[ee]=oo(fe,te))}return{c(){e=S("div"),t=S("section"),l=S("header"),o=S("h2"),o.textContent="Add New Shortcut",i=U(),r=S("button"),r.textContent="√ó",s=U(),a=S("form"),u=S("div"),f=S("label"),f.innerHTML=`Folder
            <span class="form-hint svelte-1xx9qid">Where to save the shortcut</span>`,b=U(),h=S("select");for(let ee=0;ee<_.length;ee+=1)_[ee].c();m=U(),p=S("div"),w=S("label"),w.innerHTML=`URL
            <span class="form-hint svelte-1xx9qid">The website address</span>`,I=U(),F=S("input"),O=U(),v=S("div"),P=S("label"),P.innerHTML=`Title
            <span class="form-hint svelte-1xx9qid">Display name for the shortcut</span>`,B=U(),z=S("input"),A=U(),J=S("div"),X=S("button"),X.textContent="Cancel",K=U(),x=S("button"),x.textContent="Add Shortcut",c(o,"id","add-shortcut-modal-title"),c(o,"class","svelte-1xx9qid"),c(r,"type","button"),c(r,"class","add-shortcut-modal__close svelte-1xx9qid"),c(r,"aria-label","Close"),c(l,"class","add-shortcut-modal__header svelte-1xx9qid"),c(f,"for","shortcut-folder"),c(f,"class","svelte-1xx9qid"),c(h,"id","shortcut-folder"),h.required=!0,c(h,"class","svelte-1xx9qid"),n[2]===void 0&&Ct(()=>n[14].call(h)),c(u,"class","form-group svelte-1xx9qid"),c(w,"for","shortcut-url"),c(w,"class","svelte-1xx9qid"),c(F,"id","shortcut-url"),c(F,"type","url"),c(F,"placeholder","https://example.com"),F.required=!0,c(F,"class","svelte-1xx9qid"),c(p,"class","form-group svelte-1xx9qid"),c(P,"for","shortcut-title"),c(P,"class","svelte-1xx9qid"),c(z,"id","shortcut-title"),c(z,"type","text"),c(z,"placeholder","Example Site"),z.required=!0,c(z,"class","svelte-1xx9qid"),c(v,"class","form-group svelte-1xx9qid"),c(X,"type","button"),c(X,"class","button button--secondary svelte-1xx9qid"),c(x,"type","submit"),c(x,"class","button button--primary svelte-1xx9qid"),c(J,"class","add-shortcut-modal__actions svelte-1xx9qid"),c(a,"class","add-shortcut-modal__form svelte-1xx9qid"),c(t,"class","add-shortcut-modal svelte-1xx9qid"),c(t,"role","dialog"),c(t,"aria-modal","true"),c(t,"aria-labelledby","add-shortcut-modal-title"),c(e,"class","modal-overlay svelte-1xx9qid"),c(e,"role","presentation")},m(ee,te){G(ee,e,te),g(e,t),g(t,l),g(l,o),g(l,i),g(l,r),g(t,s),g(t,a),g(a,u),g(u,f),g(u,b),g(u,h);for(let fe=0;fe<_.length;fe+=1)_[fe]&&_[fe].m(h,null);Wl(h,n[2],!0),g(a,m),g(a,p),g(p,w),g(p,I),g(p,F),n[15](F),an(F,n[4]),g(a,O),g(a,v),g(v,P),g(v,B),g(v,z),an(z,n[5]),g(a,A),g(a,J),g(J,X),g(J,K),g(J,x),re||(ue=[V(r,"click",n[7]),V(h,"change",n[14]),V(F,"input",n[16]),V(F,"blur",n[8]),V(z,"input",n[17]),V(X,"click",n[7]),V(a,"submit",n[9]),V(e,"click",n[6])],re=!0)},p(ee,te){te&2&&(H=pe(ee[1]),_=lt(_,te,Q,1,ee,H,y,h,Jt,oo,null,to)),te&6&&Wl(h,ee[2]),te&16&&F.value!==ee[4]&&an(F,ee[4]),te&32&&z.value!==ee[5]&&an(z,ee[5])},d(ee){ee&&R(e);for(let te=0;te<_.length;te+=1)_[te].d();n[15](null),re=!1,Pe(ue)}}}function lo(n){let e,t=n[18].count+"",l,o;return{c(){e=ce("("),l=ce(t),o=ce(")")},m(i,r){G(i,e,r),G(i,l,r),G(i,o,r)},p(i,r){r&2&&t!==(t=i[18].count+"")&&Te(l,t)},d(i){i&&(R(e),R(l),R(o))}}}function oo(n,e){let t,l=io(e[18])+"",o,i,r,s,a=e[18].count!==void 0&&lo(e);return{key:n,first:null,c(){t=S("option"),o=ce(l),i=U(),a&&a.c(),r=U(),t.__value=s=e[18].id,an(t,t.__value),this.first=t},m(u,f){G(u,t,f),g(t,o),g(t,i),a&&a.m(t,null),g(t,r)},p(u,f){e=u,f&2&&l!==(l=io(e[18])+"")&&Te(o,l),e[18].count!==void 0?a?a.p(e,f):(a=lo(e),a.c(),a.m(t,r)):a&&(a.d(1),a=null),f&2&&s!==(s=e[18].id)&&(t.__value=s,an(t,t.__value))},d(u){u&&R(t),a&&a.d()}}}function Ms(n){let e,t=n[0]&&no(n);return{c(){t&&t.c(),e=Qe()},m(l,o){t&&t.m(l,o),G(l,e,o)},p(l,[o]){l[0]?t?t.p(l,o):(t=no(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$,o:$,d(l){l&&R(e),t&&t.d(l)}}}function io(n){return n.fullPath||n.label||"Untitled folder"}function As(n,e,t){let{open:l=!1}=e,{folders:o=[]}=e,{defaultFolderId:i=null}=e,{onConfirm:r=null}=e,{onClose:s=null}=e,a="",u="",f="",b,h=!1;function _(v){v.target===v.currentTarget&&(v.preventDefault(),y())}function y(){s==null||s()}function m(){if(!f&&u)try{const v=new URL(u);t(5,f=v.hostname.replace(/^www\./,""))}catch{}}function p(v){if(v.preventDefault(),!a){alert("Please select a folder.");return}if(!u.trim()){alert("Please enter a URL.");return}if(!f.trim()){alert("Please enter a title.");return}r==null||r({folderId:a,url:u.trim(),title:f.trim()})}function w(){a=$r(this),t(2,a),t(0,l),t(1,o),t(10,i),t(13,h),t(3,b),t(1,o)}function I(v){ct[v?"unshift":"push"](()=>{b=v,t(3,b)})}function F(){u=this.value,t(4,u),t(0,l),t(13,h),t(10,i),t(1,o),t(3,b)}function O(){f=this.value,t(5,f),t(0,l),t(13,h),t(10,i),t(1,o),t(3,b)}return n.$$set=v=>{"open"in v&&t(0,l=v.open),"folders"in v&&t(1,o=v.folders),"defaultFolderId"in v&&t(10,i=v.defaultFolderId),"onConfirm"in v&&t(11,r=v.onConfirm),"onClose"in v&&t(12,s=v.onClose)},n.$$.update=()=>{if(n.$$.dirty&1031&&l&&o.length>0&&(a&&o.some(P=>P.id===a)||t(2,a=i||o[0].id)),n.$$.dirty&9227)if(l&&!h){t(13,h=!0),t(4,u=""),t(5,f=""),t(2,a=i||(o.length>0?o[0].id:"")),Cl().then(()=>{b==null||b.focus()});const v=P=>{P.key==="Escape"&&(P.preventDefault(),y())};document.addEventListener("keydown",v,{once:!0})}else!l&&h&&t(13,h=!1)},[l,o,a,b,u,f,_,y,m,p,i,r,s,h,w,I,F,O]}class Ls extends je{constructor(e){super(),qe(this,e,As,Ms,Re,{open:0,folders:1,defaultFolderId:10,onConfirm:11,onClose:12})}}function Os(n){let e,t,l,o;return{c(){e=S("img"),Rl(e.src,t=n[9])||c(e,"src",t),c(e,"alt",""),c(e,"loading","lazy")},m(i,r){G(i,e,r),l||(o=V(e,"error",n[14]),l=!0)},p(i,r){r[0]&512&&!Rl(e.src,t=i[9])&&c(e,"src",t)},d(i){i&&R(e),l=!1,o()}}}function Ps(n){let e=n[0].initials+"",t;return{c(){t=ce(e)},m(l,o){G(l,t,o)},p(l,o){o[0]&1&&e!==(e=l[0].initials+"")&&Te(t,e)},d(l){l&&R(t)}}}function ro(n){let e,t=n[0].displayTitle+"",l;return{c(){e=S("div"),l=ce(t),c(e,"class","tile-title"),de(e,"tile-title--pill",n[2])},m(o,i){G(o,e,i),g(e,l)},p(o,i){i[0]&1&&t!==(t=o[0].displayTitle+"")&&Te(l,t),i[0]&4&&de(e,"tile-title--pill",o[2])},d(o){o&&R(e)}}}function so(n){let e,t,l,o,i,r;return{c(){e=S("div"),t=S("button"),t.textContent="Edit",l=U(),o=S("button"),o.textContent="Remove",c(t,"type","button"),c(t,"role","menuitem"),c(t,"class","tile-menu__item"),c(o,"type","button"),c(o,"role","menuitem"),c(o,"class","tile-menu__item tile-menu__item--danger"),c(e,"class","tile-menu"),c(e,"role","menu")},m(s,a){G(s,e,a),g(e,t),g(e,l),g(e,o),i||(r=[V(t,"click",n[12]),V(o,"click",n[13])],i=!0)},p:$,d(s){s&&R(e),i=!1,Pe(r)}}}function Us(n){let e,t,l,o,i,r,s,a,u,f,b,h,_,y,m,p,w,I;function F(z,A){return z[0].fallback?Ps:Os}let O=F(n),v=O(n),P=n[1]&&ro(n),B=n[3]&&so(n);return{c(){e=S("article"),t=S("a"),l=S("div"),v.c(),i=U(),P&&P.c(),a=U(),u=S("div"),f=S("button"),b=at("svg"),h=at("circle"),_=at("circle"),y=at("circle"),p=U(),B&&B.c(),c(l,"class","tile-icon"),c(l,"style",o=`--dial-color: ${n[0].palette.background}; --dial-text: ${n[0].palette.text};`),c(l,"aria-hidden","true"),c(t,"class","tile-link"),c(t,"href",r=n[0].url||"#!"),c(t,"title",s=n[0].title||n[0].url||"Shortcut"),c(t,"draggable","false"),c(h,"cx","8"),c(h,"cy","3.5"),c(h,"r","1.25"),c(_,"cx","8"),c(_,"cy","8"),c(_,"r","1.25"),c(y,"cx","8"),c(y,"cy","12.5"),c(y,"r","1.25"),c(b,"viewBox","0 0 16 16"),c(b,"aria-hidden","true"),c(b,"focusable","false"),c(f,"class","tile-menu-button"),c(f,"type","button"),c(f,"aria-haspopup","true"),c(f,"aria-expanded",n[3]),c(f,"aria-label",m=`Open options for ${n[8]}`),de(f,"tile-menu-button--active",n[3]),c(u,"class","tile-actions"),c(e,"class","tile"),c(e,"draggable",n[10]),de(e,"tile--focused",n[4]),de(e,"tile--dragging",n[5]),de(e,"tile--drag-over",n[6]),de(e,"tile--top-site",n[7]),de(e,"tile--icon-only",!n[1])},m(z,A){G(z,e,A),g(e,t),g(t,l),v.m(l,null),g(t,i),P&&P.m(t,null),g(e,a),g(e,u),g(u,f),g(f,b),g(b,h),g(b,_),g(b,y),g(u,p),B&&B.m(u,null),w||(I=[V(t,"focus",n[16]),V(f,"click",n[11]),V(e,"contextmenu",n[15]),V(e,"dragstart",n[17]),V(e,"dragover",n[18]),V(e,"dragleave",n[19]),V(e,"drop",n[20]),V(e,"dragend",n[21])],w=!0)},p(z,A){O===(O=F(z))&&v?v.p(z,A):(v.d(1),v=O(z),v&&(v.c(),v.m(l,null))),A[0]&1&&o!==(o=`--dial-color: ${z[0].palette.background}; --dial-text: ${z[0].palette.text};`)&&c(l,"style",o),z[1]?P?P.p(z,A):(P=ro(z),P.c(),P.m(t,null)):P&&(P.d(1),P=null),A[0]&1&&r!==(r=z[0].url||"#!")&&c(t,"href",r),A[0]&1&&s!==(s=z[0].title||z[0].url||"Shortcut")&&c(t,"title",s),A[0]&8&&c(f,"aria-expanded",z[3]),A[0]&256&&m!==(m=`Open options for ${z[8]}`)&&c(f,"aria-label",m),A[0]&8&&de(f,"tile-menu-button--active",z[3]),z[3]?B?B.p(z,A):(B=so(z),B.c(),B.m(u,null)):B&&(B.d(1),B=null),A[0]&1024&&c(e,"draggable",z[10]),A[0]&16&&de(e,"tile--focused",z[4]),A[0]&32&&de(e,"tile--dragging",z[5]),A[0]&64&&de(e,"tile--drag-over",z[6]),A[0]&128&&de(e,"tile--top-site",z[7]),A[0]&2&&de(e,"tile--icon-only",!z[1])},i:$,o:$,d(z){z&&R(e),v.d(),P&&P.d(),B&&B.d(),w=!1,Pe(I)}}}function zs(n,e,t){let l,o,i,{bookmark:r}=e,{showTitle:s=!0}=e,{titleBackdrop:a=!1}=e,{menuOpen:u=!1}=e,{focused:f=!1}=e,{dragging:b=!1}=e,{dragOver:h=!1}=e,{isTopSite:_=!1}=e,{onToggleMenu:y=()=>{}}=e,{onEdit:m=()=>{}}=e,{onRemove:p=()=>{}}=e,{onFallback:w=()=>{}}=e,{onContextMenu:I=()=>{}}=e,{onFocus:F=()=>{}}=e,{onDragStart:O=()=>{}}=e,{onDragOver:v=()=>{}}=e,{onDragLeave:P=()=>{}}=e,{onDrop:B=()=>{}}=e,{onDragEnd:z=()=>{}}=e,{getFaviconUrl:A=()=>""}=e,J="Shortcut",X="",K=null;function x(E){E.preventDefault(),E.stopPropagation(),y==null||y()}function re(E){E.preventDefault(),E.stopPropagation(),m==null||m()}function ue(E){E.preventDefault(),E.stopPropagation(),p==null||p()}function H(){w==null||w()}function Q(E){E.preventDefault(),I==null||I(E)}function ee(){F==null||F()}function te(E){if(!i){E.preventDefault();return}O==null||O(E)}function fe(E){i&&(E.preventDefault(),v==null||v(E))}function me(E){i&&(P==null||P(E))}function Xe(E){i&&(E.preventDefault(),B==null||B(E))}function D(E){i&&(z==null||z(E))}return n.$$set=E=>{"bookmark"in E&&t(0,r=E.bookmark),"showTitle"in E&&t(1,s=E.showTitle),"titleBackdrop"in E&&t(2,a=E.titleBackdrop),"menuOpen"in E&&t(3,u=E.menuOpen),"focused"in E&&t(4,f=E.focused),"dragging"in E&&t(5,b=E.dragging),"dragOver"in E&&t(6,h=E.dragOver),"isTopSite"in E&&t(7,_=E.isTopSite),"onToggleMenu"in E&&t(22,y=E.onToggleMenu),"onEdit"in E&&t(23,m=E.onEdit),"onRemove"in E&&t(24,p=E.onRemove),"onFallback"in E&&t(25,w=E.onFallback),"onContextMenu"in E&&t(26,I=E.onContextMenu),"onFocus"in E&&t(27,F=E.onFocus),"onDragStart"in E&&t(28,O=E.onDragStart),"onDragOver"in E&&t(29,v=E.onDragOver),"onDragLeave"in E&&t(30,P=E.onDragLeave),"onDrop"in E&&t(31,B=E.onDrop),"onDragEnd"in E&&t(32,z=E.onDragEnd),"getFaviconUrl"in E&&t(33,A=E.getFaviconUrl)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&t(8,J=(r==null?void 0:r.displayTitle)||(r==null?void 0:r.title)||(r==null?void 0:r.url)||"Shortcut"),n.$$.dirty[0]&1&&t(36,l=r==null?void 0:r.url),n.$$.dirty[0]&1&&t(35,o=r==null?void 0:r.fallback),n.$$.dirty[1]&60)if(l&&!o&&l!==K){t(34,K=l);const E=l;t(9,X=""),A(E).then(be=>{E===K&&(be?t(9,X=be):H())}).catch(()=>{E===K&&H()})}else o&&(t(34,K=null),t(9,X=""));n.$$.dirty[0]&128&&t(10,i=!_)},[r,s,a,u,f,b,h,_,J,X,i,x,re,ue,H,Q,ee,te,fe,me,Xe,D,y,m,p,w,I,F,O,v,P,B,z,A,K,o,l]}class Il extends je{constructor(e){super(),qe(this,e,zs,Us,Re,{bookmark:0,showTitle:1,titleBackdrop:2,menuOpen:3,focused:4,dragging:5,dragOver:6,isTopSite:7,onToggleMenu:22,onEdit:23,onRemove:24,onFallback:25,onContextMenu:26,onFocus:27,onDragStart:28,onDragOver:29,onDragLeave:30,onDrop:31,onDragEnd:32,getFaviconUrl:33},null,[-1,-1])}}function Si(n){const e=n-1;return e*e*e+1}function bl(n,{delay:e=0,duration:t=400,easing:l=An}={}){const o=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:l,css:i=>`opacity: ${i*o}`}}function kl(n,{delay:e=0,duration:t=400,easing:l=Si,x:o=0,y:i=0,opacity:r=0}={}){const s=getComputedStyle(n),a=+s.opacity,u=s.transform==="none"?"":s.transform,f=a*(1-r),[b,h]=Gl(o),[_,y]=Gl(i);return{delay:e,duration:t,easing:l,css:(m,p)=>`
			transform: ${u} translate(${(1-m)*b}${h}, ${(1-m)*_}${y});
			opacity: ${a-f*p}`}}function Ns(n,{from:e,to:t},l={}){const o=getComputedStyle(n),i=o.transform==="none"?"":o.transform,[r,s]=o.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*r/t.width-(t.left+r),u=e.top+e.height*s/t.height-(t.top+s),{delay:f=0,duration:b=_=>Math.sqrt(_)*120,easing:h=Si}=l;return{delay:f,duration:We(b)?b(Math.sqrt(a*a+u*u)):b,easing:h,css:(_,y)=>{const m=y*a,p=y*u,w=_+y*e.width/t.width,I=_+y*e.height/t.height;return`transform: ${i} translate(${m}px, ${p}px) scale(${w}, ${I});`}}}function ao(n,e,t){const l=n.slice();return l[7]=e[t],l}function co(n){let e,t,l;function o(){return n[5](n[7])}return{c(){e=S("button"),e.textContent="Undo",c(e,"type","button"),c(e,"class","toast__undo svelte-f4o70y")},m(i,r){G(i,e,r),t||(l=V(e,"click",o),t=!0)},p(i,r){n=i},d(i){i&&R(e),t=!1,l()}}}function uo(n,e){let t,l,o=e[7].message+"",i,r,s,a,u,f,b,h,_,y=$,m,p,w,I=e[7].undoData&&co(e);function F(){return e[6](e[7])}return{key:n,first:null,c(){t=S("div"),l=S("span"),i=ce(o),r=U(),s=S("div"),I&&I.c(),a=U(),u=S("button"),u.textContent="√ó",f=U(),c(l,"class","toast__message svelte-f4o70y"),c(u,"type","button"),c(u,"class","toast__dismiss svelte-f4o70y"),c(u,"aria-label","Dismiss notification"),c(s,"class","toast__actions svelte-f4o70y"),c(t,"class","toast svelte-f4o70y"),c(t,"role","alert"),de(t,"toast--success",e[7].type==="success"),de(t,"toast--error",e[7].type==="error"),de(t,"toast--info",e[7].type==="info"),this.first=t},m(O,v){G(O,t,v),g(t,l),g(l,i),g(t,r),g(t,s),I&&I.m(s,null),g(s,a),g(s,u),g(t,f),m=!0,p||(w=V(u,"click",F),p=!0)},p(O,v){e=O,(!m||v&1)&&o!==(o=e[7].message+"")&&Te(i,o),e[7].undoData?I?I.p(e,v):(I=co(e),I.c(),I.m(s,a)):I&&(I.d(1),I=null),(!m||v&1)&&de(t,"toast--success",e[7].type==="success"),(!m||v&1)&&de(t,"toast--error",e[7].type==="error"),(!m||v&1)&&de(t,"toast--info",e[7].type==="info")},r(){_=t.getBoundingClientRect()},f(){os(t),y(),di(t,_)},a(){y(),y=ls(t,_,Ns,{duration:250})},i(O){m||(O&&Ct(()=>{m&&(h&&h.end(1),b=as(t,kl,{y:50,duration:250}),b.start())}),m=!0)},o(O){b&&b.invalidate(),O&&(h=cs(t,bl,{duration:150})),m=!1},d(O){O&&R(t),I&&I.d(),O&&h&&h.end(),p=!1,w()}}}function Hs(n){let e,t=[],l=new Map,o,i=pe(n[0]);const r=s=>s[7].id;for(let s=0;s<i.length;s+=1){let a=ao(n,i,s),u=r(a);l.set(u,t[s]=uo(u,a))}return{c(){e=S("div");for(let s=0;s<t.length;s+=1)t[s].c();c(e,"class","toast-container svelte-f4o70y"),c(e,"aria-live","polite"),c(e,"aria-label","Notifications")},m(s,a){G(s,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);o=!0},p(s,[a]){if(a&7){i=pe(s[0]),Ne();for(let u=0;u<t.length;u+=1)t[u].r();t=lt(t,a,r,1,s,i,l,e,us,uo,null,ao);for(let u=0;u<t.length;u+=1)t[u].a();He()}},i(s){if(!o){for(let a=0;a<i.length;a+=1)j(t[a]);o=!0}},o(s){for(let a=0;a<t.length;a+=1)Y(t[a]);o=!1},d(s){s&&R(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Rs(n,e,t){let{toasts:l=[]}=e,{onDismiss:o=()=>{}}=e,{onUndo:i=()=>{}}=e;function r(f){o==null||o(f)}function s(f){i==null||i(f)}const a=f=>s(f),u=f=>r(f.id);return n.$$set=f=>{"toasts"in f&&t(0,l=f.toasts),"onDismiss"in f&&t(3,o=f.onDismiss),"onUndo"in f&&t(4,i=f.onUndo)},[l,r,s,o,i,a,u]}class Gs extends je{constructor(e){super(),qe(this,e,Rs,Hs,Re,{toasts:0,onDismiss:3,onUndo:4})}}function fo(n){let e,t,l,o,i,r,s,a,u,f,b,h,_;return{c(){e=S("div"),t=S("article"),l=S("header"),l.innerHTML='<h2 id="welcome-title" class="svelte-1g41oro">Welcome to Bookmark Dial</h2> <p class="welcome-subtitle svelte-1g41oro">Your new tab, reimagined.</p>',o=U(),i=S("div"),i.innerHTML='<section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">üìÅ</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Select Your Folders</h3> <p class="svelte-1g41oro">Open <strong class="svelte-1g41oro">Settings</strong> (gear icon) and click <strong class="svelte-1g41oro">Manage folders</strong> to choose which bookmark folders appear on your new tab.</p></div></section> <section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">‚ûï</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Add Shortcuts</h3> <p class="svelte-1g41oro">Click the <strong class="svelte-1g41oro">+ Add shortcut</strong> tile to quickly add new bookmarks directly from this page.</p></div></section> <section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">üé®</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Customize Your Theme</h3> <p class="svelte-1g41oro">Choose from multiple themes, accent colors, and gradient backgrounds to personalize your experience.</p></div></section> <section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">‚å®Ô∏è</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Keyboard Shortcuts</h3> <p class="svelte-1g41oro">Use <kbd class="svelte-1g41oro">Arrow keys</kbd> to navigate, <kbd class="svelte-1g41oro">Enter</kbd> to open, and <kbd class="svelte-1g41oro">Delete</kbd> or <kbd class="svelte-1g41oro">Backspace</kbd> to remove bookmarks.</p></div></section>',r=U(),s=S("footer"),a=S("button"),a.textContent="Get Started",c(l,"class","welcome-header svelte-1g41oro"),c(i,"class","welcome-content svelte-1g41oro"),c(a,"type","button"),c(a,"class","welcome-button svelte-1g41oro"),c(s,"class","welcome-footer svelte-1g41oro"),c(t,"class","welcome-modal svelte-1g41oro"),c(t,"role","dialog"),c(t,"aria-modal","true"),c(t,"aria-labelledby","welcome-title"),c(e,"class","welcome-overlay svelte-1g41oro"),c(e,"role","presentation")},m(y,m){G(y,e,m),g(e,t),g(t,l),g(t,o),g(t,i),g(t,r),g(t,s),g(s,a),b=!0,h||(_=[V(a,"click",function(){We(n[1])&&n[1].apply(this,arguments)}),V(e,"click",n[2])],h=!0)},p(y,m){n=y},i(y){b||(y&&Ct(()=>{b&&(u||(u=Vn(t,kl,{y:30,duration:300},!0)),u.run(1))}),y&&Ct(()=>{b&&(f||(f=Vn(e,bl,{duration:200},!0)),f.run(1))}),b=!0)},o(y){y&&(u||(u=Vn(t,kl,{y:30,duration:300},!1)),u.run(0)),y&&(f||(f=Vn(e,bl,{duration:200},!1)),f.run(0)),b=!1},d(y){y&&R(e),y&&u&&u.end(),y&&f&&f.end(),h=!1,Pe(_)}}}function Ws(n){let e,t,l,o=n[0]&&fo(n);return{c(){o&&o.c(),e=Qe()},m(i,r){o&&o.m(i,r),G(i,e,r),t||(l=V(window,"keydown",function(){We(n[0]?n[3]:null)&&(n[0]?n[3]:null).apply(this,arguments)}),t=!0)},p(i,[r]){n=i,n[0]?o?(o.p(n,r),r&1&&j(o,1)):(o=fo(n),o.c(),j(o,1),o.m(e.parentNode,e)):o&&(Ne(),Y(o,1,1,()=>{o=null}),He())},i(i){j(o)},o(i){Y(o)},d(i){i&&R(e),o&&o.d(i),t=!1,l()}}}function qs(n,e,t){let{open:l=!1}=e,{onDismiss:o=()=>{}}=e,{onGetStarted:i=()=>{}}=e;function r(a){a.target===a.currentTarget&&(o==null||o())}function s(a){a.key==="Escape"&&(a.preventDefault(),o==null||o())}return n.$$set=a=>{"open"in a&&t(0,l=a.open),"onDismiss"in a&&t(4,o=a.onDismiss),"onGetStarted"in a&&t(1,i=a.onGetStarted)},[l,i,r,s,o]}class js extends je{constructor(e){super(),qe(this,e,qs,Ws,Re,{open:0,onDismiss:4,onGetStarted:1})}}function go(n){let e,t,l,o,i,r,s,a,u,f,b,h,_,y,m,p,w,I,F;return{c(){e=S("div"),t=U(),l=S("menu"),o=S("li"),i=S("button"),i.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><path d="M9 2h5v5M14 2L7 9M6 4H3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V9" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Open in new tab`,r=U(),s=S("li"),a=S("button"),a.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><rect x="5" y="5" width="8" height="9" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><path d="M11 5V3a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2" stroke="currentColor" stroke-width="1.5" fill="none"></path></svg>
        Copy URL`,u=U(),f=S("li"),b=U(),h=S("li"),_=S("button"),_.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><path d="M11.5 2.5l2 2L5 13H3v-2l8.5-8.5z" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Edit bookmark`,y=U(),m=S("li"),p=S("button"),p.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><path d="M3 4h10M6 4V3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1M5 4v9a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V4" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Remove`,c(e,"class","context-menu-overlay svelte-6dpg3b"),c(e,"role","presentation"),c(i,"type","button"),c(i,"class","context-menu__item svelte-6dpg3b"),c(i,"role","menuitem"),c(o,"class","svelte-6dpg3b"),c(a,"type","button"),c(a,"class","context-menu__item svelte-6dpg3b"),c(a,"role","menuitem"),c(s,"class","svelte-6dpg3b"),c(f,"class","context-menu__divider svelte-6dpg3b"),c(f,"role","separator"),c(_,"type","button"),c(_,"class","context-menu__item svelte-6dpg3b"),c(_,"role","menuitem"),c(h,"class","svelte-6dpg3b"),c(p,"type","button"),c(p,"class","context-menu__item context-menu__item--danger svelte-6dpg3b"),c(p,"role","menuitem"),c(m,"class","svelte-6dpg3b"),c(l,"class","context-menu svelte-6dpg3b"),c(l,"style",n[1]),c(l,"aria-label",w="Actions for "+n[2])},m(O,v){G(O,e,v),G(O,t,v),G(O,l,v),g(l,o),g(o,i),g(l,r),g(l,s),g(s,a),g(l,u),g(l,f),g(l,b),g(l,h),g(h,_),g(l,y),g(l,m),g(m,p),I||(F=[V(e,"click",n[7]),V(e,"contextmenu",Zr(n[7])),V(i,"click",n[5]),V(a,"click",n[6]),V(_,"click",n[3]),V(p,"click",n[4])],I=!0)},p(O,v){v&2&&c(l,"style",O[1]),v&4&&w!==(w="Actions for "+O[2])&&c(l,"aria-label",w)},d(O){O&&(R(e),R(t),R(l)),I=!1,Pe(F)}}}function Vs(n){let e,t,l,o=n[0]&&go(n);return{c(){o&&o.c(),e=Qe()},m(i,r){o&&o.m(i,r),G(i,e,r),t||(l=V(window,"keydown",function(){We(n[0]?n[8]:null)&&(n[0]?n[8]:null).apply(this,arguments)}),t=!0)},p(i,[r]){n=i,n[0]?o?o.p(n,r):(o=go(n),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:$,o:$,d(i){i&&R(e),o&&o.d(i),t=!1,l()}}}function ho(n){var i;const e=document.querySelectorAll(".context-menu__item"),t=document.activeElement;let o=Array.from(e).indexOf(t)+n;o<0&&(o=e.length-1),o>=e.length&&(o=0),(i=e[o])==null||i.focus()}function Ks(n,e,t){let l,o,{bookmark:i=null}=e,{position:r={x:0,y:0}}=e,{visible:s=!1}=e;const a=mi();function u(){a("edit")}function f(){a("remove")}function b(){a("opennewtab")}function h(){a("copyurl")}function _(){a("close")}function y(m){m.key==="Escape"?(m.preventDefault(),_()):m.key==="ArrowDown"?(m.preventDefault(),ho(1)):m.key==="ArrowUp"&&(m.preventDefault(),ho(-1))}return n.$$set=m=>{"bookmark"in m&&t(9,i=m.bookmark),"position"in m&&t(10,r=m.position),"visible"in m&&t(0,s=m.visible)},n.$$.update=()=>{n.$$.dirty&512&&t(2,l=(i==null?void 0:i.title)||(i==null?void 0:i.url)||"bookmark"),n.$$.dirty&1024&&t(1,o=`left: ${r.x}px; top: ${r.y}px;`)},[s,o,l,u,f,b,h,_,y,i,r]}class Ys extends je{constructor(e){super(),qe(this,e,Ks,Vs,Re,{bookmark:9,position:10,visible:0})}}function mo(n){let e,t,l,o,i,r,s,a,u,f,b,h=n[1]&&bo(n);return{c(){e=S("div"),t=at("svg"),l=at("circle"),o=at("path"),i=U(),r=S("input"),s=U(),h&&h.c(),a=U(),u=S("button"),u.innerHTML='<svg viewBox="0 0 16 16" aria-hidden="true" class="svelte-qypsdi"><path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>',c(l,"cx","6.5"),c(l,"cy","6.5"),c(l,"r","5"),c(l,"stroke","currentColor"),c(l,"stroke-width","1.5"),c(l,"fill","none"),c(o,"d","M10.5 10.5L14 14"),c(o,"stroke","currentColor"),c(o,"stroke-width","1.5"),c(o,"stroke-linecap","round"),c(t,"class","search-bar__icon svelte-qypsdi"),c(t,"viewBox","0 0 16 16"),c(t,"aria-hidden","true"),c(r,"type","search"),c(r,"class","search-bar__input svelte-qypsdi"),c(r,"placeholder","Search bookmarks‚Ä¶"),r.value=n[1],c(r,"aria-label","Search bookmarks"),c(u,"type","button"),c(u,"class","search-bar__close svelte-qypsdi"),c(u,"aria-label","Close search"),c(e,"class","search-bar svelte-qypsdi"),c(e,"role","search")},m(_,y){G(_,e,y),g(e,t),g(t,l),g(t,o),g(e,i),g(e,r),n[8](r),g(e,s),h&&h.m(e,null),g(e,a),g(e,u),f||(b=[V(r,"input",n[4]),V(r,"keydown",n[6]),V(u,"click",function(){We(n[2])&&n[2].apply(this,arguments)})],f=!0)},p(_,y){n=_,y&2&&r.value!==n[1]&&(r.value=n[1]),n[1]?h?h.p(n,y):(h=bo(n),h.c(),h.m(e,a)):h&&(h.d(1),h=null)},d(_){_&&R(e),n[8](null),h&&h.d(),f=!1,Pe(b)}}}function bo(n){let e,t,l;return{c(){e=S("button"),e.textContent="√ó",c(e,"type","button"),c(e,"class","search-bar__clear svelte-qypsdi"),c(e,"aria-label","Clear search")},m(o,i){G(o,e,i),t||(l=V(e,"click",n[5]),t=!0)},p:$,d(o){o&&R(e),t=!1,l()}}}function Qs(n){let e,t=n[0]&&mo(n);return{c(){t&&t.c(),e=Qe()},m(l,o){t&&t.m(l,o),G(l,e,o)},p(l,[o]){l[0]?t?t.p(l,o):(t=mo(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:$,o:$,d(l){l&&R(e),t&&t.d(l)}}}function Xs(n,e,t){let{visible:l=!1}=e,{query:o=""}=e,{onSearchChange:i=()=>{}}=e,{onClose:r=()=>{}}=e,s;function a(h){i==null||i(h.target.value)}function u(){i==null||i(""),s==null||s.focus()}function f(h){h.key==="Escape"&&(h.preventDefault(),o?i==null||i(""):r==null||r())}function b(h){ct[h?"unshift":"push"](()=>{s=h,t(3,s)})}return n.$$set=h=>{"visible"in h&&t(0,l=h.visible),"query"in h&&t(1,o=h.query),"onSearchChange"in h&&t(7,i=h.onSearchChange),"onClose"in h&&t(2,r=h.onClose)},n.$$.update=()=>{n.$$.dirty&9&&l&&s&&s.focus()},[l,o,r,s,a,u,f,i,b]}class Zs extends je{constructor(e){super(),qe(this,e,Xs,Qs,Re,{visible:0,query:1,onSearchChange:7,onClose:2})}}const Yn={loading:"Loading Bookmark Dial‚Ä¶",empty:"No bookmarks yet. Add shortcuts from this page or the bookmark manager.",error:"Bookmark Dial folder is unavailable. Try reopening the tab or reinstalling the extension."},Js=64,vn="customBackgroundImage",In="uiPreferences",Qn="dialPreferences",xn=2,ul="hasSeenWelcome",xs=10*1024*1024,ko=5,$s="BookmarkDialDB",qt="backgrounds",fl="customBackground",$n={selectedIds:[],expandedIds:[]},Ti=[{id:"dark",label:"Dark"},{id:"light",label:"Light"},{id:"system",label:"System"}],Vt=[{id:"cobalt",label:"Cobalt",colors:{base:"#2563eb",contrast:"#f8fafc",soft:"rgba(37, 99, 235, 0.14)",border:"rgba(37, 99, 235, 0.45)"}},{id:"violet",label:"Violet",colors:{base:"#8b5cf6",contrast:"#faf5ff",soft:"rgba(139, 92, 246, 0.16)",border:"rgba(139, 92, 246, 0.45)"}},{id:"emerald",label:"Emerald",colors:{base:"#059669",contrast:"#ecfdf5",soft:"rgba(5, 150, 105, 0.14)",border:"rgba(5, 150, 105, 0.45)"}},{id:"amber",label:"Amber",colors:{base:"#d97706",contrast:"#fffbeb",soft:"rgba(217, 119, 6, 0.18)",border:"rgba(217, 119, 6, 0.5)"}},{id:"rose",label:"Rose",colors:{base:"#e11d48",contrast:"#fff1f2",soft:"rgba(225, 29, 72, 0.16)",border:"rgba(225, 29, 72, 0.45)"}},{id:"slate",label:"Slate",colors:{base:"#475569",contrast:"#f8fafc",soft:"rgba(71, 85, 105, 0.18)",border:"rgba(71, 85, 105, 0.5)"}},{id:"sky",label:"Sky",colors:{base:"#0284c7",contrast:"#e0f2fe",soft:"rgba(2, 132, 199, 0.16)",border:"rgba(2, 132, 199, 0.45)"}},{id:"blush",label:"Blush",colors:{base:"#ec4899",contrast:"#fff0f6",soft:"rgba(236, 72, 153, 0.18)",border:"rgba(236, 72, 153, 0.5)"}},{id:"moss",label:"Moss",colors:{base:"#4d7c0f",contrast:"#ecfccb",soft:"rgba(77, 124, 15, 0.18)",border:"rgba(77, 124, 15, 0.5)"}},{id:"bronze",label:"Bronze",colors:{base:"#b45309",contrast:"#fff7ed",soft:"rgba(180, 83, 9, 0.2)",border:"rgba(180, 83, 9, 0.55)"}},{id:"orchid",label:"Orchid",colors:{base:"#c026d3",contrast:"#fdf4ff",soft:"rgba(192, 38, 211, 0.18)",border:"rgba(192, 38, 211, 0.5)"}},{id:"mint",label:"Mint",colors:{base:"#14b8a6",contrast:"#e0fefa",soft:"rgba(20, 184, 166, 0.16)",border:"rgba(20, 184, 166, 0.46)"}},{id:"graphite",label:"Graphite",colors:{base:"#1f2937",contrast:"#f8fafc",soft:"rgba(31, 41, 55, 0.22)",border:"rgba(31, 41, 55, 0.6)"}},{id:"sunset",label:"Sunset",colors:{base:"#ea580c",contrast:"#fff7ed",soft:"rgba(234, 88, 12, 0.18)",border:"rgba(234, 88, 12, 0.52)"}},{id:"glacier",label:"Glacier",colors:{base:"#0ea5e9",contrast:"#f0f9ff",soft:"rgba(14, 165, 233, 0.16)",border:"rgba(14, 165, 233, 0.45)"}},{id:"amethyst",label:"Amethyst",colors:{base:"#6d28d9",contrast:"#f5f3ff",soft:"rgba(109, 40, 217, 0.18)",border:"rgba(109, 40, 217, 0.5)"}},{id:"sand",label:"Sand",colors:{base:"#ca8a04",contrast:"#fffbeb",soft:"rgba(202, 138, 4, 0.2)",border:"rgba(202, 138, 4, 0.5)"}},{id:"cranberry",label:"Cranberry",colors:{base:"#be123c",contrast:"#fff1f5",soft:"rgba(190, 18, 60, 0.18)",border:"rgba(190, 18, 60, 0.5)"}}],Xt=[{id:"aurora",label:"Aurora",gradients:{light:"linear-gradient(135deg, #d8b4fe 0%, #6366f1 50%, #22d3ee 100%)",dark:"linear-gradient(135deg, #312e81 0%, #1e3a8a 50%, #0f172a 100%)"},accent:"violet"},{id:"sunrise",label:"Sunrise",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 50%, #f97316 100%)",dark:"linear-gradient(135deg, #7c2d12 0%, #c2410c 45%, #ea580c 100%)"},accent:"amber"},{id:"forest",label:"Forest",gradients:{light:"linear-gradient(135deg, #bbf7d0 0%, #34d399 50%, #0f766e 100%)",dark:"linear-gradient(135deg, #064e3b 0%, #059669 50%, #0f172a 100%)"},accent:"emerald"},{id:"ocean",label:"Ocean",gradients:{light:"linear-gradient(135deg, #bae6fd 0%, #38bdf8 50%, #0ea5e9 100%)",dark:"linear-gradient(135deg, #0c4a6e 0%, #0369a1 50%, #082f49 100%)"},accent:"sky"},{id:"twilight",label:"Twilight",gradients:{light:"linear-gradient(135deg, #fecdd3 0%, #fda4af 50%, #fb7185 100%)",dark:"linear-gradient(135deg, #7f1d1d 0%, #be123c 50%, #9f1239 100%)"},accent:"orchid"},{id:"slate",label:"Slate",gradients:{light:"linear-gradient(135deg, #e2e8f0 0%, #cbd5f5 50%, #94a3b8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #020617 100%)"},accent:"slate"},{id:"blossom",label:"Blossom",gradients:{light:"linear-gradient(135deg, #ffe4e6 0%, #fbcfe8 45%, #f472b6 100%)",dark:"linear-gradient(135deg, #831843 0%, #9d174d 50%, #701a75 100%)"},accent:"blush"},{id:"lagoon",label:"Lagoon",gradients:{light:"linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 40%, #5eead4 100%)",dark:"linear-gradient(135deg, #022c22 0%, #0d9488 45%, #14b8a6 100%)"},accent:"mint"},{id:"ember",label:"Ember",gradients:{light:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 40%, #fb7185 100%)",dark:"linear-gradient(135deg, #450a0a 0%, #9f1239 50%, #be123c 100%)"},accent:"rose"},{id:"lilac",label:"Lilac",gradients:{light:"linear-gradient(135deg, #f5f3ff 0%, #ede9fe 45%, #d8b4fe 100%)",dark:"linear-gradient(135deg, #312e81 0%, #5b21b6 50%, #7c3aed 100%)"},accent:"violet"},{id:"zenith",label:"Zenith",gradients:{light:"linear-gradient(135deg, #e0f2fe 0%, #dbeafe 45%, #818cf8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #1f3b8a 45%, #3730a3 100%)"},accent:"cobalt"},{id:"sage",label:"Sage",gradients:{light:"linear-gradient(135deg, #ecfccb 0%, #bbf7d0 45%, #84cc16 100%)",dark:"linear-gradient(135deg, #052e16 0%, #166534 45%, #15803d 100%)"},accent:"moss"},{id:"velvet",label:"Velvet",gradients:{light:"linear-gradient(135deg, #fdf4ff 0%, #f5d0fe 45%, #f0abfc 100%)",dark:"linear-gradient(135deg, #4a044e 0%, #6b21a8 45%, #86198f 100%)"},accent:"orchid"},{id:"citrus",label:"Citrus",gradients:{light:"linear-gradient(135deg, #fefce8 0%, #fef08a 45%, #facc15 100%)",dark:"linear-gradient(135deg, #422006 0%, #854d0e 50%, #b45309 100%)"},accent:"amber"},{id:"glacier",label:"Glacier",gradients:{light:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 45%, #bae6fd 100%)",dark:"linear-gradient(135deg, #082f49 0%, #0c4a6e 45%, #0284c7 100%)"},accent:"sky"},{id:"terracotta",label:"Terracotta",gradients:{light:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 45%, #f97316 100%)",dark:"linear-gradient(135deg, #431407 0%, #7c2d12 45%, #9a3412 100%)"},accent:"bronze"},{id:"nocturne",label:"Nocturne",gradients:{light:"linear-gradient(135deg, #ede9fe 0%, #c7d2fe 45%, #4338ca 100%)",dark:"linear-gradient(135deg, #020617 0%, #111827 45%, #312e81 100%)"},accent:"slate"},{id:"horizon",label:"Horizon",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 40%, #60a5fa 100%)",dark:"linear-gradient(135deg, #451a03 0%, #9a3412 45%, #1d4ed8 100%)"},accent:"cobalt"}],Kt=Xt[0],ea=Kt!=null&&Kt.accent&&Vt.some(n=>n.id===Kt.accent)?Kt.accent:Vt[0].id,Be={theme:"system",accent:ea,background:{mode:"gradient",gradientId:(Kt==null?void 0:Kt.id)??Xt[0].id},titleBackdrop:!0,mergeAllBookmarks:!0,folderColumnWidth:1170,compactFolderHeader:!0,enableBookmarkSearch:!1,enableTopSites:!1,lastShortcutFolderId:null,tile:{size:"medium",iconShape:"50%",fontWeight:500,fontSize:"0.9rem",padding:"0.2rem 0.6rem",blur:8,textContrast:"normal",bgLightness:3,showTitle:!0},immersive:{enabled:!1,opacity:.15}},ta={...Be,folderSelection:{...$n},version:xn},_l=6,pl=10,vi=[{value:"tiny",label:"Tiny",width:80,gridMin:70},{value:"small",label:"Small",width:100,gridMin:90},{value:"medium",label:"Medium",width:128,gridMin:118},{value:"large",label:"Large",width:156,gridMin:146},{value:"extra-large",label:"Extra Large",width:184,gridMin:174}],na=[{value:"0%",label:"Square"},{value:"12%",label:"Soft"},{value:"24%",label:"Rounded"},{value:"38%",label:"Pill"},{value:"50%",label:"Circle"}],la=[{value:400,label:"Light"},{value:450,label:"Normal"},{value:500,label:"Medium"},{value:600,label:"Semibold"},{value:700,label:"Bold"}],oa=[{value:"0.75rem",label:"Tiny"},{value:"0.825rem",label:"Small"},{value:"0.9rem",label:"Regular"},{value:"1rem",label:"Medium"},{value:"1.1rem",label:"Large"}],ia=[{value:"0.1rem 0.35rem",label:"Minimal"},{value:"0.15rem 0.5rem",label:"Compact"},{value:"0.2rem 0.6rem",label:"Comfortable"},{value:"0.28rem 0.75rem",label:"Spacious"},{value:"0.35rem 0.9rem",label:"Roomy"}],ra=[{value:0,label:"None"},{value:4,label:"Subtle"},{value:8,label:"Glass"},{value:14,label:"Frosted"},{value:20,label:"Heavy"}],sa=[{value:"faint",label:"Faint"},{value:"soft",label:"Soft"},{value:"normal",label:"Normal"},{value:"strong",label:"Strong"},{value:"bold",label:"Bold"}],Ii=[{value:1,label:"Whisper",lightLight:97,lightDark:75},{value:2,label:"Muted",lightLight:92,lightDark:65},{value:3,label:"Balanced",lightLight:85,lightDark:55},{value:4,label:"Visible",lightLight:75,lightDark:50},{value:5,label:"Prominent",lightLight:60,lightDark:45}],pt={size:"medium",iconShape:"50%",fontWeight:500,fontSize:"0.9rem",padding:"0.2rem 0.6rem",blur:8,textContrast:"normal",bgLightness:3,showTitle:!0},aa=[{value:0,label:"Invisible"},{value:.15,label:"Ghost"},{value:.3,label:"Shadow"},{value:.45,label:"Subtle"},{value:.6,label:"Soft"}],dl={enabled:!1,opacity:.15};function _o(n,e,t){const l=n.slice();return l[4]=e[t],l}function po(n,e){let t,l=e[4].label+"",o,i,r,s,a;function u(){return e[3](e[4])}return{key:n,first:null,c(){t=S("button"),o=ce(l),i=U(),c(t,"type","button"),c(t,"class","choice-button"),c(t,"data-active",r=e[1]===e[4].id),this.first=t},m(f,b){G(f,t,b),g(t,o),g(t,i),s||(a=V(t,"click",u),s=!0)},p(f,b){e=f,b&1&&l!==(l=e[4].label+"")&&Te(o,l),b&3&&r!==(r=e[1]===e[4].id)&&c(t,"data-active",r)},d(f){f&&R(t),s=!1,a()}}}function ca(n){let e,t=[],l=new Map,o=pe(n[0]);const i=r=>r[4].id;for(let r=0;r<o.length;r+=1){let s=_o(n,o,r),a=i(s);l.set(a,t[r]=po(a,s))}return{c(){e=S("div");for(let r=0;r<t.length;r+=1)t[r].c();c(e,"class","choice-row")},m(r,s){G(r,e,s);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,[s]){s&7&&(o=pe(r[0]),t=lt(t,s,i,1,r,o,l,e,Jt,po,null,_o))},i:$,o:$,d(r){r&&R(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function ua(n,e,t){let{options:l=[]}=e,{selected:o="system"}=e,{onChange:i=()=>{}}=e;const r=s=>i(s.id);return n.$$set=s=>{"options"in s&&t(0,l=s.options),"selected"in s&&t(1,o=s.selected),"onChange"in s&&t(2,i=s.onChange)},[l,o,i,r]}class fa extends je{constructor(e){super(),qe(this,e,ua,ca,Re,{options:0,selected:1,onChange:2})}}function wo(n,e,t){const l=n.slice();return l[7]=e[t],l}function yo(n,e){let t,l,o,i,r,s;function a(){return e[6](e[7])}return{key:n,first:null,c(){t=S("button"),c(t,"type","button"),c(t,"class","accent-swatch"),wt(t,"--swatch-color",e[7].colors.base),c(t,"data-active",l=e[1]===e[7].id),c(t,"aria-label",o=e[7].label),c(t,"title",i=e[7].label),this.first=t},m(u,f){G(u,t,f),r||(s=V(t,"click",a),r=!0)},p(u,f){e=u,f&1&&wt(t,"--swatch-color",e[7].colors.base),f&3&&l!==(l=e[1]===e[7].id)&&c(t,"data-active",l),f&1&&o!==(o=e[7].label)&&c(t,"aria-label",o),f&1&&i!==(i=e[7].label)&&c(t,"title",i)},d(u){u&&R(t),r=!1,s()}}}function Co(n){let e,t,l=n[2]?"Show fewer accent colors":"More accent colors",o,i,r;return{c(){e=S("div"),t=S("button"),o=ce(l),c(t,"type","button"),c(t,"class","swatch-toggle-button"),c(t,"aria-expanded",n[2]),c(e,"class","swatch-toggle-row")},m(s,a){G(s,e,a),g(e,t),g(t,o),i||(r=V(t,"click",function(){We(n[5])&&n[5].apply(this,arguments)}),i=!0)},p(s,a){n=s,a&4&&l!==(l=n[2]?"Show fewer accent colors":"More accent colors")&&Te(o,l),a&4&&c(t,"aria-expanded",n[2])},d(s){s&&R(e),i=!1,r()}}}function da(n){let e,t=[],l=new Map,o,i,r=pe(n[0]);const s=u=>u[7].id;for(let u=0;u<r.length;u+=1){let f=wo(n,r,u),b=s(f);l.set(b,t[u]=yo(b,f))}let a=(n[0].length>n[3]||n[2])&&Co(n);return{c(){e=S("div");for(let u=0;u<t.length;u+=1)t[u].c();o=U(),a&&a.c(),i=Qe(),c(e,"class","accent-grid")},m(u,f){G(u,e,f);for(let b=0;b<t.length;b+=1)t[b]&&t[b].m(e,null);G(u,o,f),a&&a.m(u,f),G(u,i,f)},p(u,[f]){f&19&&(r=pe(u[0]),t=lt(t,f,s,1,u,r,l,e,Jt,yo,null,wo)),u[0].length>u[3]||u[2]?a?a.p(u,f):(a=Co(u),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i:$,o:$,d(u){u&&(R(e),R(o),R(i));for(let f=0;f<t.length;f+=1)t[f].d();a&&a.d(u)}}}function ga(n,e,t){let{options:l=[]}=e,{selected:o=""}=e,{showAll:i=!1}=e,{previewCount:r=10}=e,{onSelect:s=()=>{}}=e,{onToggleShowAll:a=()=>{}}=e;const u=f=>s(f.id);return n.$$set=f=>{"options"in f&&t(0,l=f.options),"selected"in f&&t(1,o=f.selected),"showAll"in f&&t(2,i=f.showAll),"previewCount"in f&&t(3,r=f.previewCount),"onSelect"in f&&t(4,s=f.onSelect),"onToggleShowAll"in f&&t(5,a=f.onToggleShowAll)},[l,o,i,r,s,a,u]}class ha extends je{constructor(e){super(),qe(this,e,ga,da,Re,{options:0,selected:1,showAll:2,previewCount:3,onSelect:4,onToggleShowAll:5})}}function So(n,e,t){const l=n.slice();return l[9]=e[t],l}function To(n,e){let t,l,o=e[9].label+"",i,r,s,a,u;function f(){return e[8](e[9])}return{key:n,first:null,c(){t=S("button"),l=S("span"),i=ce(o),r=U(),c(t,"type","button"),c(t,"class","gradient-option"),wt(t,"--gradient-sample-light",e[9].gradients.light),wt(t,"--gradient-sample-dark",e[9].gradients.dark),c(t,"data-active",s=!e[2]&&e[1]===e[9].id),this.first=t},m(b,h){G(b,t,h),g(t,l),g(l,i),g(t,r),a||(u=V(t,"click",f),a=!0)},p(b,h){e=b,h&1&&o!==(o=e[9].label+"")&&Te(i,o),h&1&&wt(t,"--gradient-sample-light",e[9].gradients.light),h&1&&wt(t,"--gradient-sample-dark",e[9].gradients.dark),h&7&&s!==(s=!e[2]&&e[1]===e[9].id)&&c(t,"data-active",s)},d(b){b&&R(t),a=!1,u()}}}function vo(n){let e,t,l=n[3]?"Show fewer gradients":"More gradients",o,i,r;return{c(){e=S("div"),t=S("button"),o=ce(l),c(t,"type","button"),c(t,"class","swatch-toggle-button"),c(t,"aria-expanded",n[3]),c(e,"class","swatch-toggle-row")},m(s,a){G(s,e,a),g(e,t),g(t,o),i||(r=V(t,"click",function(){We(n[6])&&n[6].apply(this,arguments)}),i=!0)},p(s,a){n=s,a&8&&l!==(l=n[3]?"Show fewer gradients":"More gradients")&&Te(o,l),a&8&&c(t,"aria-expanded",n[3])},d(s){s&&R(e),i=!1,r()}}}function ma(n){let e,t=[],l=new Map,o,i,r,s,a,u,f=pe(n[0]);const b=_=>_[9].id;for(let _=0;_<f.length;_+=1){let y=So(n,f,_),m=b(y);l.set(m,t[_]=To(m,y))}let h=(n[0].length>n[4]||n[3])&&vo(n);return{c(){e=S("div");for(let _=0;_<t.length;_+=1)t[_].c();o=U(),h&&h.c(),i=U(),r=S("section"),s=S("button"),s.textContent="Custom background‚Ä¶",c(e,"class","gradient-grid"),c(s,"type","button"),c(s,"class","custom-background-button"),c(r,"class","settings-group")},m(_,y){G(_,e,y);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);G(_,o,y),h&&h.m(_,y),G(_,i,y),G(_,r,y),g(r,s),a||(u=V(s,"click",function(){We(n[7])&&n[7].apply(this,arguments)}),a=!0)},p(_,[y]){n=_,y&39&&(f=pe(n[0]),t=lt(t,y,b,1,n,f,l,e,Jt,To,null,So)),n[0].length>n[4]||n[3]?h?h.p(n,y):(h=vo(n),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null)},i:$,o:$,d(_){_&&(R(e),R(o),R(i),R(r));for(let y=0;y<t.length;y+=1)t[y].d();h&&h.d(_),a=!1,u()}}}function ba(n,e,t){let{options:l=[]}=e,{selectedGradientId:o=null}=e,{isCustomMode:i=!1}=e,{showAll:r=!1}=e,{previewCount:s=6}=e,{onSelect:a=()=>{}}=e,{onToggleShowAll:u=()=>{}}=e,{onCustomClick:f=()=>{}}=e;const b=h=>a(h.id);return n.$$set=h=>{"options"in h&&t(0,l=h.options),"selectedGradientId"in h&&t(1,o=h.selectedGradientId),"isCustomMode"in h&&t(2,i=h.isCustomMode),"showAll"in h&&t(3,r=h.showAll),"previewCount"in h&&t(4,s=h.previewCount),"onSelect"in h&&t(5,a=h.onSelect),"onToggleShowAll"in h&&t(6,u=h.onToggleShowAll),"onCustomClick"in h&&t(7,f=h.onCustomClick)},[l,o,i,r,s,a,u,f,b]}class ka extends je{constructor(e){super(),qe(this,e,ba,ma,Re,{options:0,selectedGradientId:1,isCustomMode:2,showAll:3,previewCount:4,onSelect:5,onToggleShowAll:6,onCustomClick:7})}}function Io(n,e,t){const l=n.slice();return l[2]=e[t],l}function _a(n){let e=[],t=new Map,l,o=pe(n[0]);const i=r=>r[2].id;for(let r=0;r<o.length;r+=1){let s=Io(n,o,r),a=i(s);t.set(a,e[r]=Bo(a,s))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();l=Qe()},m(r,s){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(r,s);G(r,l,s)},p(r,s){s&1&&(o=pe(r[0]),e=lt(e,s,i,1,r,o,t,l.parentNode,Jt,Bo,l,Io))},d(r){r&&R(l);for(let s=0;s<e.length;s+=1)e[s].d(r)}}}function pa(n){let e;return{c(){e=S("span"),e.textContent="Default folder",c(e,"class","folder-chip folder-chip--empty"),c(e,"title","Default Bookmark Dial folder")},m(t,l){G(t,e,l)},p:$,d(t){t&&R(e)}}}function Bo(n,e){let t,l,o=e[2].label+"",i,r,s,a=e[2].count+"",u,f,b;return{key:n,first:null,c(){t=S("span"),l=S("span"),i=ce(o),r=U(),s=S("span"),u=ce(a),f=U(),c(l,"class","folder-chip__label"),c(s,"class","folder-chip__count"),c(t,"class","folder-chip"),c(t,"title",b=e[2].fullPath),this.first=t},m(h,_){G(h,t,_),g(t,l),g(l,i),g(t,r),g(t,s),g(s,u),g(t,f)},p(h,_){e=h,_&1&&o!==(o=e[2].label+"")&&Te(i,o),_&1&&a!==(a=e[2].count+"")&&Te(u,a),_&1&&b!==(b=e[2].fullPath)&&c(t,"title",b)},d(h){h&&R(t)}}}function wa(n){let e,t,l,o,i,r;function s(f,b){return f[0].length===0?pa:_a}let a=s(n),u=a(n);return{c(){e=S("div"),t=S("div"),u.c(),l=U(),o=S("button"),o.textContent="Manage folders",c(t,"class","folder-bar__summary"),c(o,"type","button"),c(o,"class","ghost-button folder-bar__action"),c(e,"class","folder-bar")},m(f,b){G(f,e,b),g(e,t),u.m(t,null),g(e,l),g(e,o),i||(r=V(o,"click",function(){We(n[1])&&n[1].apply(this,arguments)}),i=!0)},p(f,[b]){n=f,a===(a=s(n))&&u?u.p(n,b):(u.d(1),u=a(n),u&&(u.c(),u.m(t,null)))},i:$,o:$,d(f){f&&R(e),u.d(),i=!1,r()}}}function ya(n,e,t){let{summary:l=[]}=e,{onChooseFolders:o=()=>{}}=e;return n.$$set=i=>{"summary"in i&&t(0,l=i.summary),"onChooseFolders"in i&&t(1,o=i.onChooseFolders)},[l,o]}class Ca extends je{constructor(e){super(),qe(this,e,ya,wa,Re,{summary:0,onChooseFolders:1})}}function Do(n,e,t){const l=n.slice();return l[12]=e[t],l[14]=t,l}function Fo(n){let e,t,l,o,i,r;return{c(){e=S("div"),t=S("span"),l=ce(n[1]),o=U(),i=S("span"),r=ce(n[4]),c(t,"class","stepped-slider__label"),c(i,"class","stepped-slider__value"),c(e,"class","stepped-slider__header")},m(s,a){G(s,e,a),g(e,t),g(t,l),g(e,o),g(e,i),g(i,r)},p(s,a){a&2&&Te(l,s[1]),a&16&&Te(r,s[4])},d(s){s&&R(e)}}}function Eo(n){let e,t;return{c(){e=S("span"),t=ce(n[2]),c(e,"class","stepped-slider__description")},m(l,o){G(l,e,o),g(e,t)},p(l,o){o&4&&Te(t,l[2])},d(l){l&&R(e)}}}function Mo(n,e){let t,l,o,i,r,s;function a(){return e[10](e[14])}function u(...f){return e[11](e[14],...f)}return{key:n,first:null,c(){t=S("button"),c(t,"type","button"),c(t,"class","stepped-slider__dot"),c(t,"aria-label",l=e[12].label),c(t,"aria-pressed",o=e[14]===e[3]),c(t,"title",i=e[12].label),de(t,"stepped-slider__dot--active",e[14]===e[3]),de(t,"stepped-slider__dot--passed",e[14]<e[3]),this.first=t},m(f,b){G(f,t,b),r||(s=[V(t,"click",a),V(t,"keydown",u)],r=!0)},p(f,b){e=f,b&1&&l!==(l=e[12].label)&&c(t,"aria-label",l),b&9&&o!==(o=e[14]===e[3])&&c(t,"aria-pressed",o),b&1&&i!==(i=e[12].label)&&c(t,"title",i),b&9&&de(t,"stepped-slider__dot--active",e[14]===e[3]),b&9&&de(t,"stepped-slider__dot--passed",e[14]<e[3])},d(f){f&&R(t),r=!1,Pe(s)}}}function Sa(n){let e,t,l,o,i,r=[],s=new Map,a,u,f,b,h,_,y,m=n[1]&&Fo(n),p=n[2]&&Eo(n),w=pe(n[0]);const I=F=>F[12].value;for(let F=0;F<w.length;F+=1){let O=Do(n,w,F),v=I(O);s.set(v,r[F]=Mo(v,O))}return{c(){e=S("div"),m&&m.c(),t=U(),p&&p.c(),l=U(),o=S("div"),i=S("div");for(let F=0;F<r.length;F+=1)r[F].c();u=U(),f=S("input"),c(i,"class","stepped-slider__dots"),c(i,"role","group"),c(i,"aria-label",a=n[1]+" options"),c(f,"type","range"),c(f,"min","0"),c(f,"max",b=n[0].length-1),c(f,"step","1"),f.value=h=n[3]>=0?n[3]:0,c(f,"aria-label",n[1]),c(f,"aria-valuetext",n[4]),c(o,"class","stepped-slider__track-wrapper"),c(e,"class","stepped-slider")},m(F,O){G(F,e,O),m&&m.m(e,null),g(e,t),p&&p.m(e,null),g(e,l),g(e,o),g(o,i);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(i,null);g(o,u),g(o,f),_||(y=V(f,"input",n[5]),_=!0)},p(F,[O]){F[1]?m?m.p(F,O):(m=Fo(F),m.c(),m.m(e,t)):m&&(m.d(1),m=null),F[2]?p?p.p(F,O):(p=Eo(F),p.c(),p.m(e,l)):p&&(p.d(1),p=null),O&201&&(w=pe(F[0]),r=lt(r,O,I,1,F,w,s,i,Jt,Mo,null,Do)),O&2&&a!==(a=F[1]+" options")&&c(i,"aria-label",a),O&1&&b!==(b=F[0].length-1)&&c(f,"max",b),O&8&&h!==(h=F[3]>=0?F[3]:0)&&(f.value=h),O&2&&c(f,"aria-label",F[1]),O&16&&c(f,"aria-valuetext",F[4])},i:$,o:$,d(F){F&&R(e),m&&m.d(),p&&p.d();for(let O=0;O<r.length;O+=1)r[O].d();_=!1,y()}}}function Ta(n,e,t){let l,o,{options:i=[]}=e,{value:r=""}=e,{label:s=""}=e,{description:a=""}=e,{onChange:u=()=>{}}=e;function f(m){const p=parseInt(m.currentTarget.value,10);i[p]&&u(i[p].value)}function b(m){i[m]&&u(i[m].value)}function h(m,p){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),b(p))}const _=m=>b(m),y=(m,p)=>h(p,m);return n.$$set=m=>{"options"in m&&t(0,i=m.options),"value"in m&&t(8,r=m.value),"label"in m&&t(1,s=m.label),"description"in m&&t(2,a=m.description),"onChange"in m&&t(9,u=m.onChange)},n.$$.update=()=>{n.$$.dirty&257&&t(3,l=i.findIndex(m=>m.value===r)),n.$$.dirty&9&&t(4,o=l>=0?i[l].label:"")},[i,s,a,l,o,f,b,h,r,u,_,y]}class At extends je{constructor(e){super(),qe(this,e,Ta,Sa,Re,{options:0,value:8,label:1,description:2,onChange:9})}}function Ao(n){var w,I,F,O;let e,t,l,o,i,r,s,a,u,f,b,h,_,y,m,p;return e=new At({props:{label:"Font weight",description:"Thickness of title text",options:la,value:((w=n[1].tile)==null?void 0:w.fontWeight)??500,onChange:n[23]}}),l=new At({props:{label:"Font size",description:"Size of the bookmark title text",options:oa,value:((I=n[1].tile)==null?void 0:I.fontSize)??"0.9rem",onChange:n[24]}}),i=new At({props:{label:"Title padding",description:"Space between text and backdrop edge",options:ia,value:((F=n[1].tile)==null?void 0:F.padding)??"0.2rem 0.6rem",onChange:n[25]}}),s=new At({props:{label:"Text visibility",description:"How bold/opaque the title text appears",options:sa,value:((O=n[1].tile)==null?void 0:O.textContrast)??"normal",onChange:n[27]}}),{c(){_e(e.$$.fragment),t=U(),_e(l.$$.fragment),o=U(),_e(i.$$.fragment),r=U(),_e(s.$$.fragment),a=U(),u=S("label"),f=S("input"),h=U(),_=S("div"),_.innerHTML='<span class="settings-toggle__label">Rounded backdrop</span> <span class="settings-toggle__description">Adds a blurred pill behind text for better readability.</span>',c(f,"type","checkbox"),f.checked=b=n[1].titleBackdrop,c(_,"class","settings-toggle__body"),c(u,"class","settings-toggle"),c(u,"title","Adds a soft highlight behind each title for contrast.")},m(v,P){ge(e,v,P),G(v,t,P),ge(l,v,P),G(v,o,P),ge(i,v,P),G(v,r,P),ge(s,v,P),G(v,a,P),G(v,u,P),g(u,f),g(u,h),g(u,_),y=!0,m||(p=V(f,"change",n[35]),m=!0)},p(v,P){var X,K,x,re;const B={};P[0]&2&&(B.value=((X=v[1].tile)==null?void 0:X.fontWeight)??500),P[0]&8388608&&(B.onChange=v[23]),e.$set(B);const z={};P[0]&2&&(z.value=((K=v[1].tile)==null?void 0:K.fontSize)??"0.9rem"),P[0]&16777216&&(z.onChange=v[24]),l.$set(z);const A={};P[0]&2&&(A.value=((x=v[1].tile)==null?void 0:x.padding)??"0.2rem 0.6rem"),P[0]&33554432&&(A.onChange=v[25]),i.$set(A);const J={};P[0]&2&&(J.value=((re=v[1].tile)==null?void 0:re.textContrast)??"normal"),P[0]&134217728&&(J.onChange=v[27]),s.$set(J),(!y||P[0]&2&&b!==(b=v[1].titleBackdrop))&&(f.checked=b)},i(v){y||(j(e.$$.fragment,v),j(l.$$.fragment,v),j(i.$$.fragment,v),j(s.$$.fragment,v),y=!0)},o(v){Y(e.$$.fragment,v),Y(l.$$.fragment,v),Y(i.$$.fragment,v),Y(s.$$.fragment,v),y=!1},d(v){v&&(R(t),R(o),R(r),R(a),R(u)),he(e,v),he(l,v),he(i,v),he(s,v),m=!1,p()}}}function Lo(n){var a,u;let e,t,l,o,i,r,s;return o=new At({props:{label:"Blur intensity",description:"Glass-like frosted blur effect strength",options:ra,value:((a=n[1].tile)==null?void 0:a.blur)??8,onChange:n[26]}}),r=new At({props:{label:"Background intensity",description:"How visible the backdrop pill appears against your wallpaper",options:Ii,value:((u=n[1].tile)==null?void 0:u.bgLightness)??3,onChange:n[28]}}),{c(){e=S("section"),t=S("h3"),t.textContent="Backdrop style",l=U(),_e(o.$$.fragment),i=U(),_e(r.$$.fragment),c(e,"class","settings-group")},m(f,b){G(f,e,b),g(e,t),g(e,l),ge(o,e,null),g(e,i),ge(r,e,null),s=!0},p(f,b){var y,m;const h={};b[0]&2&&(h.value=((y=f[1].tile)==null?void 0:y.blur)??8),b[0]&67108864&&(h.onChange=f[26]),o.$set(h);const _={};b[0]&2&&(_.value=((m=f[1].tile)==null?void 0:m.bgLightness)??3),b[0]&268435456&&(_.onChange=f[28]),r.$set(_)},i(f){s||(j(o.$$.fragment,f),j(r.$$.fragment,f),s=!0)},o(f){Y(o.$$.fragment,f),Y(r.$$.fragment,f),s=!1},d(f){f&&R(e),he(o),he(r)}}}function Oo(n){var r,s;let e,t,l,o;e=new At({props:{label:"UI visibility",description:"How visible elements are when not hovered",options:aa,value:((r=n[1].immersive)==null?void 0:r.opacity)??.15,onChange:n[31]}});let i=((s=n[1].immersive)==null?void 0:s.opacity)===0&&Po();return{c(){_e(e.$$.fragment),t=U(),i&&i.c(),l=Qe()},m(a,u){ge(e,a,u),G(a,t,u),i&&i.m(a,u),G(a,l,u),o=!0},p(a,u){var b,h;const f={};u[0]&2&&(f.value=((b=a[1].immersive)==null?void 0:b.opacity)??.15),u[1]&1&&(f.onChange=a[31]),e.$set(f),((h=a[1].immersive)==null?void 0:h.opacity)===0?i||(i=Po(),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},i(a){o||(j(e.$$.fragment,a),o=!0)},o(a){Y(e.$$.fragment,a),o=!1},d(a){a&&(R(t),R(l)),he(e,a),i&&i.d(a)}}}function Po(n){let e;return{c(){e=S("p"),e.textContent="UI is completely invisible. Use Esc key to access settings.",c(e,"class","settings-warning")},m(t,l){G(t,e,l)},d(t){t&&R(e)}}}function Uo(n){let e,t,l,o,i,r,s,a,u,f,b,h,_,y;return{c(){e=S("div"),t=S("label"),l=S("span"),l.textContent="Folder width",o=U(),i=S("input"),s=U(),a=S("label"),u=S("input"),b=U(),h=S("div"),h.innerHTML='<span class="settings-toggle__label">Compact header</span> <span class="settings-toggle__description">Hide folder path to save space.</span>',c(l,"class","settings-control__label"),c(i,"type","range"),c(i,"min","480"),c(i,"max","1860"),c(i,"step","20"),i.value=r=n[1].folderColumnWidth,c(t,"class","settings-control"),c(u,"type","checkbox"),u.checked=f=n[1].compactFolderHeader,c(h,"class","settings-toggle__body"),c(a,"class","settings-toggle"),c(e,"class","ungrouped-settings")},m(m,p){G(m,e,p),g(e,t),g(t,l),g(t,o),g(t,i),g(e,s),g(e,a),g(a,u),g(a,b),g(a,h),_||(y=[V(i,"input",n[38]),V(u,"change",n[39])],_=!0)},p(m,p){p[0]&2&&r!==(r=m[1].folderColumnWidth)&&(i.value=r),p[0]&2&&f!==(f=m[1].compactFolderHeader)&&(u.checked=f)},d(m){m&&R(e),_=!1,Pe(y)}}}function va(n){var hn,Ln,mn,On,Pn;let e,t,l,o,i,r,s,a,u,f,b,h,_,y,m,p,w,I,F,O,v,P,B,z,A,J,X,K,x,re,ue,H,Q,ee,te,fe,me,Xe,D,E,be,De,ne,Se,T,N,et,rt,Fe,Ee,Ce,ut,Ve,Ge,Ue,ye,tt,dn,ze,ft,St,it,dt,we,nt,gt,st,ht,Tt,kt,vt,It,Lt,gn,mt,Ot,Oe,xe,Bt;f=new fa({props:{options:Ti,selected:n[1].theme,onChange:n[8]}}),m=new ha({props:{options:n[3],selected:n[1].accent,showAllAccents:n[5],previewCount:pl,onSelect:n[9],onToggleShowAll:n[18]}}),O=new ka({props:{options:n[4],selectedGradientId:n[1].background.gradientId,isCustomMode:n[1].background.mode==="custom",showAllGradients:n[6],previewCount:_l,onSelect:n[11],onToggleShowAll:n[19],onCustomClick:n[12]}}),A=new At({props:{label:"Tile size",description:"Overall size of bookmark tiles in the grid",options:vi,value:((hn=n[1].tile)==null?void 0:hn.size)??"medium",onChange:n[21]}}),X=new At({props:{label:"Icon shape",description:"Border rounding of favicon icons",options:na,value:((Ln=n[1].tile)==null?void 0:Ln.iconShape)??"50%",onChange:n[22]}});let Me=((mn=n[1].tile)==null?void 0:mn.showTitle)!==!1&&Ao(n),Ae=n[1].titleBackdrop&&((On=n[1].tile)==null?void 0:On.showTitle)!==!1&&Lo(n),Le=((Pn=n[1].immersive)==null?void 0:Pn.enabled)&&Oo(n);Ve=new Ca({props:{summary:n[2],onChooseFolders:n[20]}});let Ze=!n[1].mergeAllBookmarks&&Uo(n);return{c(){var ve,le;e=S("aside"),t=S("header"),l=S("h2"),l.innerHTML=`<img src="/icons/icon-48.png" alt="Bookmark Dial" class="settings-drawer__brand-icon"/>
      Settings`,o=U(),i=S("button"),i.textContent="√ó",r=U(),s=S("section"),a=S("h3"),a.textContent="Theme",u=U(),_e(f.$$.fragment),b=U(),h=S("section"),_=S("h3"),_.textContent="Accent color",y=U(),_e(m.$$.fragment),p=U(),w=S("section"),I=S("h3"),I.textContent="Gradient background",F=U(),_e(O.$$.fragment),v=U(),P=S("section"),B=S("h3"),B.textContent="Tile appearance",z=U(),_e(A.$$.fragment),J=U(),_e(X.$$.fragment),K=U(),x=S("section"),re=S("h3"),re.textContent="Tile title",ue=U(),H=S("label"),Q=S("input"),te=U(),fe=S("div"),fe.innerHTML='<span class="settings-toggle__label">Show title</span> <span class="settings-toggle__description">Display bookmark names below icons.</span>',me=U(),Me&&Me.c(),Xe=U(),Ae&&Ae.c(),D=U(),E=S("section"),be=S("h3"),be.textContent="Immersive mode",De=U(),ne=S("label"),Se=S("input"),N=U(),et=S("div"),et.innerHTML='<span class="settings-toggle__label">Enable immersive mode</span> <span class="settings-toggle__description">Fade UI elements to reveal your background. Hover to interact.</span>',rt=U(),Le&&Le.c(),Fe=U(),Ee=S("section"),Ce=S("h3"),Ce.textContent="Folders",ut=U(),_e(Ve.$$.fragment),Ge=U(),Ue=S("label"),ye=S("input"),dn=U(),ze=S("div"),ze.innerHTML='<span class="settings-toggle__label">Merge bookmarks from all folders</span> <span class="settings-toggle__description">Display all bookmarks in a single deduplicated grid.</span>',ft=U(),Ze&&Ze.c(),St=U(),it=S("section"),dt=S("h3"),dt.textContent="Experimental",we=U(),nt=S("label"),gt=S("input"),ht=U(),Tt=S("div"),Tt.innerHTML='<span class="settings-toggle__label">Bookmark search</span> <span class="settings-toggle__description">Press <kbd>/</kbd> to search bookmarks.</span>',kt=U(),vt=S("label"),It=S("input"),gn=U(),mt=S("div"),mt.innerHTML='<span class="settings-toggle__label">Show frequently visited</span> <span class="settings-toggle__description">Include your most visited sites alongside bookmarks.</span>',c(i,"type","button"),c(i,"class","settings-drawer__close"),c(i,"aria-label","Close settings"),c(t,"class","settings-drawer__header"),c(s,"class","settings-group"),c(h,"class","settings-group"),c(w,"class","settings-group"),c(P,"class","settings-group"),c(Q,"type","checkbox"),Q.checked=ee=((ve=n[1].tile)==null?void 0:ve.showTitle)??!0,c(fe,"class","settings-toggle__body"),c(H,"class","settings-toggle"),c(H,"title","Show or hide bookmark titles below icons."),c(x,"class","settings-group"),c(Se,"type","checkbox"),Se.checked=T=((le=n[1].immersive)==null?void 0:le.enabled)??!1,c(et,"class","settings-toggle__body"),c(ne,"class","settings-toggle"),c(ne,"title","Fade UI elements to reveal your background. Hover to interact."),c(E,"class","settings-group"),c(ye,"type","checkbox"),ye.checked=tt=n[1].mergeAllBookmarks,c(ze,"class","settings-toggle__body"),c(Ue,"class","settings-toggle folder-group-toggle"),c(Ee,"class","settings-group settings-group--folders"),c(gt,"type","checkbox"),gt.checked=st=n[1].enableBookmarkSearch,c(Tt,"class","settings-toggle__body"),c(nt,"class","settings-toggle"),c(It,"type","checkbox"),It.checked=Lt=n[1].enableTopSites,c(mt,"class","settings-toggle__body"),c(vt,"class","settings-toggle"),c(it,"class","settings-group"),c(e,"id","settings-drawer"),c(e,"class","settings-drawer"),c(e,"data-open",n[0]),c(e,"aria-hidden",Ot=!n[0]),c(e,"tabindex","-1")},m(ve,le){G(ve,e,le),g(e,t),g(t,l),g(t,o),g(t,i),g(e,r),g(e,s),g(s,a),g(s,u),ge(f,s,null),g(e,b),g(e,h),g(h,_),g(h,y),ge(m,h,null),g(e,p),g(e,w),g(w,I),g(w,F),ge(O,w,null),g(e,v),g(e,P),g(P,B),g(P,z),ge(A,P,null),g(P,J),ge(X,P,null),g(e,K),g(e,x),g(x,re),g(x,ue),g(x,H),g(H,Q),g(H,te),g(H,fe),g(x,me),Me&&Me.m(x,null),g(e,Xe),Ae&&Ae.m(e,null),g(e,D),g(e,E),g(E,be),g(E,De),g(E,ne),g(ne,Se),g(ne,N),g(ne,et),g(E,rt),Le&&Le.m(E,null),g(e,Fe),g(e,Ee),g(Ee,Ce),g(Ee,ut),ge(Ve,Ee,null),g(Ee,Ge),g(Ee,Ue),g(Ue,ye),g(Ue,dn),g(Ue,ze),g(Ee,ft),Ze&&Ze.m(Ee,null),g(e,St),g(e,it),g(it,dt),g(it,we),g(it,nt),g(nt,gt),g(nt,ht),g(nt,Tt),g(it,kt),g(it,vt),g(vt,It),g(vt,gn),g(vt,mt),n[42](e),Oe=!0,xe||(Bt=[V(i,"click",function(){We(n[7])&&n[7].apply(this,arguments)}),V(Q,"change",n[34]),V(Se,"change",n[36]),V(ye,"change",n[37]),V(gt,"change",n[40]),V(It,"change",n[41]),V(e,"click",Jr(n[33]))],xe=!0)},p(ve,le){var Un,Yt,bt,$t,zn,Nn,Hn;n=ve;const bn={};le[0]&2&&(bn.selected=n[1].theme),le[0]&256&&(bn.onChange=n[8]),f.$set(bn);const Pt={};le[0]&8&&(Pt.options=n[3]),le[0]&2&&(Pt.selected=n[1].accent),le[0]&32&&(Pt.showAllAccents=n[5]),le[0]&512&&(Pt.onSelect=n[9]),le[0]&262144&&(Pt.onToggleShowAll=n[18]),m.$set(Pt);const _t={};le[0]&16&&(_t.options=n[4]),le[0]&2&&(_t.selectedGradientId=n[1].background.gradientId),le[0]&2&&(_t.isCustomMode=n[1].background.mode==="custom"),le[0]&64&&(_t.showAllGradients=n[6]),le[0]&2048&&(_t.onSelect=n[11]),le[0]&524288&&(_t.onToggleShowAll=n[19]),le[0]&4096&&(_t.onCustomClick=n[12]),O.$set(_t);const Ut={};le[0]&2&&(Ut.value=((Un=n[1].tile)==null?void 0:Un.size)??"medium"),le[0]&2097152&&(Ut.onChange=n[21]),A.$set(Ut);const zt={};le[0]&2&&(zt.value=((Yt=n[1].tile)==null?void 0:Yt.iconShape)??"50%"),le[0]&4194304&&(zt.onChange=n[22]),X.$set(zt),(!Oe||le[0]&2&&ee!==(ee=((bt=n[1].tile)==null?void 0:bt.showTitle)??!0))&&(Q.checked=ee),(($t=n[1].tile)==null?void 0:$t.showTitle)!==!1?Me?(Me.p(n,le),le[0]&2&&j(Me,1)):(Me=Ao(n),Me.c(),j(Me,1),Me.m(x,null)):Me&&(Ne(),Y(Me,1,1,()=>{Me=null}),He()),n[1].titleBackdrop&&((zn=n[1].tile)==null?void 0:zn.showTitle)!==!1?Ae?(Ae.p(n,le),le[0]&2&&j(Ae,1)):(Ae=Lo(n),Ae.c(),j(Ae,1),Ae.m(e,D)):Ae&&(Ne(),Y(Ae,1,1,()=>{Ae=null}),He()),(!Oe||le[0]&2&&T!==(T=((Nn=n[1].immersive)==null?void 0:Nn.enabled)??!1))&&(Se.checked=T),(Hn=n[1].immersive)!=null&&Hn.enabled?Le?(Le.p(n,le),le[0]&2&&j(Le,1)):(Le=Oo(n),Le.c(),j(Le,1),Le.m(E,null)):Le&&(Ne(),Y(Le,1,1,()=>{Le=null}),He());const Nt={};le[0]&4&&(Nt.summary=n[2]),le[0]&1048576&&(Nt.onChooseFolders=n[20]),Ve.$set(Nt),(!Oe||le[0]&2&&tt!==(tt=n[1].mergeAllBookmarks))&&(ye.checked=tt),n[1].mergeAllBookmarks?Ze&&(Ze.d(1),Ze=null):Ze?Ze.p(n,le):(Ze=Uo(n),Ze.c(),Ze.m(Ee,null)),(!Oe||le[0]&2&&st!==(st=n[1].enableBookmarkSearch))&&(gt.checked=st),(!Oe||le[0]&2&&Lt!==(Lt=n[1].enableTopSites))&&(It.checked=Lt),(!Oe||le[0]&1)&&c(e,"data-open",n[0]),(!Oe||le[0]&1&&Ot!==(Ot=!n[0]))&&c(e,"aria-hidden",Ot)},i(ve){Oe||(j(f.$$.fragment,ve),j(m.$$.fragment,ve),j(O.$$.fragment,ve),j(A.$$.fragment,ve),j(X.$$.fragment,ve),j(Me),j(Ae),j(Le),j(Ve.$$.fragment,ve),Oe=!0)},o(ve){Y(f.$$.fragment,ve),Y(m.$$.fragment,ve),Y(O.$$.fragment,ve),Y(A.$$.fragment,ve),Y(X.$$.fragment,ve),Y(Me),Y(Ae),Y(Le),Y(Ve.$$.fragment,ve),Oe=!1},d(ve){ve&&R(e),he(f),he(m),he(O),he(A),he(X),Me&&Me.d(),Ae&&Ae.d(),Le&&Le.d(),he(Ve),Ze&&Ze.d(),n[42](null),xe=!1,Pe(Bt)}}}function Ia(n,e,t){let{open:l=!1}=e,{settings:o}=e,{folderSummary:i=[]}=e,{visibleAccentOptions:r=[]}=e,{visibleGradientOptions:s=[]}=e,{showAllAccents:a=!1}=e,{showAllGradients:u=!1}=e,{onClose:f=()=>{}}=e,{onThemeChange:b=()=>{}}=e,{onAccentChange:h=()=>{}}=e,{onTitleBackdropChange:_=()=>{}}=e,{onGradientSelect:y=()=>{}}=e,{onCustomBackgroundClick:m=()=>{}}=e,{onMergeAllChange:p=()=>{}}=e,{onFolderColumnWidthChange:w=()=>{}}=e,{onCompactHeaderChange:I=()=>{}}=e,{onSearchToggle:F=()=>{}}=e,{onTopSitesToggle:O=()=>{}}=e,{onToggleAccents:v=()=>{}}=e,{onToggleGradients:P=()=>{}}=e,{onOpenFolderModal:B=()=>{}}=e,{onTileSizeChange:z=()=>{}}=e,{onTileIconShapeChange:A=()=>{}}=e,{onTileFontWeightChange:J=()=>{}}=e,{onTileFontSizeChange:X=()=>{}}=e,{onTilePaddingChange:K=()=>{}}=e,{onTileBlurChange:x=()=>{}}=e,{onTileTextContrastChange:re=()=>{}}=e,{onTileBgLightnessChange:ue=()=>{}}=e,{onShowTitleChange:H=()=>{}}=e,{onImmersiveEnabledChange:Q=()=>{}}=e,{onImmersiveOpacityChange:ee=()=>{}}=e,te;function fe(N){is.call(this,n,N)}const me=N=>H(N.currentTarget.checked),Xe=N=>_(N.currentTarget.checked),D=N=>Q(N.currentTarget.checked),E=N=>p(N.currentTarget.checked),be=N=>w(Number(N.currentTarget.value)),De=N=>I(N.currentTarget.checked),ne=N=>F(N.currentTarget.checked),Se=N=>O(N.currentTarget.checked);function T(N){ct[N?"unshift":"push"](()=>{te=N,t(32,te)})}return n.$$set=N=>{"open"in N&&t(0,l=N.open),"settings"in N&&t(1,o=N.settings),"folderSummary"in N&&t(2,i=N.folderSummary),"visibleAccentOptions"in N&&t(3,r=N.visibleAccentOptions),"visibleGradientOptions"in N&&t(4,s=N.visibleGradientOptions),"showAllAccents"in N&&t(5,a=N.showAllAccents),"showAllGradients"in N&&t(6,u=N.showAllGradients),"onClose"in N&&t(7,f=N.onClose),"onThemeChange"in N&&t(8,b=N.onThemeChange),"onAccentChange"in N&&t(9,h=N.onAccentChange),"onTitleBackdropChange"in N&&t(10,_=N.onTitleBackdropChange),"onGradientSelect"in N&&t(11,y=N.onGradientSelect),"onCustomBackgroundClick"in N&&t(12,m=N.onCustomBackgroundClick),"onMergeAllChange"in N&&t(13,p=N.onMergeAllChange),"onFolderColumnWidthChange"in N&&t(14,w=N.onFolderColumnWidthChange),"onCompactHeaderChange"in N&&t(15,I=N.onCompactHeaderChange),"onSearchToggle"in N&&t(16,F=N.onSearchToggle),"onTopSitesToggle"in N&&t(17,O=N.onTopSitesToggle),"onToggleAccents"in N&&t(18,v=N.onToggleAccents),"onToggleGradients"in N&&t(19,P=N.onToggleGradients),"onOpenFolderModal"in N&&t(20,B=N.onOpenFolderModal),"onTileSizeChange"in N&&t(21,z=N.onTileSizeChange),"onTileIconShapeChange"in N&&t(22,A=N.onTileIconShapeChange),"onTileFontWeightChange"in N&&t(23,J=N.onTileFontWeightChange),"onTileFontSizeChange"in N&&t(24,X=N.onTileFontSizeChange),"onTilePaddingChange"in N&&t(25,K=N.onTilePaddingChange),"onTileBlurChange"in N&&t(26,x=N.onTileBlurChange),"onTileTextContrastChange"in N&&t(27,re=N.onTileTextContrastChange),"onTileBgLightnessChange"in N&&t(28,ue=N.onTileBgLightnessChange),"onShowTitleChange"in N&&t(29,H=N.onShowTitleChange),"onImmersiveEnabledChange"in N&&t(30,Q=N.onImmersiveEnabledChange),"onImmersiveOpacityChange"in N&&t(31,ee=N.onImmersiveOpacityChange)},n.$$.update=()=>{n.$$.dirty[0]&1|n.$$.dirty[1]&2&&l&&te&&te.focus()},[l,o,i,r,s,a,u,f,b,h,_,y,m,p,w,I,F,O,v,P,B,z,A,J,X,K,x,re,ue,H,Q,ee,te,fe,me,Xe,D,E,be,De,ne,Se,T]}class Ba extends je{constructor(e){super(),qe(this,e,Ia,va,Re,{open:0,settings:1,folderSummary:2,visibleAccentOptions:3,visibleGradientOptions:4,showAllAccents:5,showAllGradients:6,onClose:7,onThemeChange:8,onAccentChange:9,onTitleBackdropChange:10,onGradientSelect:11,onCustomBackgroundClick:12,onMergeAllChange:13,onFolderColumnWidthChange:14,onCompactHeaderChange:15,onSearchToggle:16,onTopSitesToggle:17,onToggleAccents:18,onToggleGradients:19,onOpenFolderModal:20,onTileSizeChange:21,onTileIconShapeChange:22,onTileFontWeightChange:23,onTileFontSizeChange:24,onTilePaddingChange:25,onTileBlurChange:26,onTileTextContrastChange:27,onTileBgLightnessChange:28,onShowTitleChange:29,onImmersiveEnabledChange:30,onImmersiveOpacityChange:31},null,[-1,-1])}}function zo(n,e,t){const l=n.slice();return l[36]=e[t],l[38]=t,l}function No(n,e,t){const l=n.slice();return l[39]=e[t],l[41]=t,l}function Ho(n,e){var y,m;let t,l,o;function i(){return e[23](e[39])}function r(){return e[24](e[39])}function s(){return e[25](e[39])}function a(){return e[26](e[39])}function u(...p){return e[27](e[39],...p)}function f(){return e[28](e[41])}function b(...p){return e[29](e[39],...p)}function h(...p){return e[30](e[39],...p)}function _(...p){return e[31](e[39],...p)}return l=new Il({props:{bookmark:e[39],showTitle:e[3],titleBackdrop:e[4],menuOpen:e[6]===e[39].id,focused:e[5]===e[41],dragging:((y=e[7])==null?void 0:y.id)===e[39].id,dragOver:((m=e[8])==null?void 0:m.id)===e[39].id,onToggleMenu:i,onEdit:r,onRemove:s,onFallback:a,onContextMenu:u,onFocus:f,onDragStart:b,onDragOver:h,onDragLeave:e[17],onDrop:_,onDragEnd:e[19],getFaviconUrl:e[21]}}),{key:n,first:null,c(){t=Qe(),_e(l.$$.fragment),this.first=t},m(p,w){G(p,t,w),ge(l,p,w),o=!0},p(p,w){var F,O;e=p;const I={};w[0]&1&&(I.bookmark=e[39]),w[0]&8&&(I.showTitle=e[3]),w[0]&16&&(I.titleBackdrop=e[4]),w[0]&65&&(I.menuOpen=e[6]===e[39].id),w[0]&33&&(I.focused=e[5]===e[41]),w[0]&129&&(I.dragging=((F=e[7])==null?void 0:F.id)===e[39].id),w[0]&257&&(I.dragOver=((O=e[8])==null?void 0:O.id)===e[39].id),w[0]&513&&(I.onToggleMenu=i),w[0]&1025&&(I.onEdit=r),w[0]&2049&&(I.onRemove=s),w[0]&4097&&(I.onFallback=a),w[0]&8193&&(I.onContextMenu=u),w[0]&16385&&(I.onFocus=f),w[0]&32769&&(I.onDragStart=b),w[0]&65537&&(I.onDragOver=h),w[0]&131072&&(I.onDragLeave=e[17]),w[0]&262145&&(I.onDrop=_),w[0]&524288&&(I.onDragEnd=e[19]),w[0]&2097152&&(I.getFaviconUrl=e[21]),l.$set(I)},i(p){o||(j(l.$$.fragment,p),o=!0)},o(p){Y(l.$$.fragment,p),o=!1},d(p){p&&R(t),he(l,p)}}}function Ro(n){let e=[],t=new Map,l,o,i=pe(n[1]);const r=s=>s[36].id;for(let s=0;s<i.length;s+=1){let a=zo(n,i,s),u=r(a);t.set(u,e[s]=Go(u,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=Qe()},m(s,a){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,a);G(s,l,a),o=!0},p(s,a){a[0]&2113595&&(i=pe(s[1]),Ne(),e=lt(e,a,r,1,s,i,t,l.parentNode,xt,Go,l,zo),He())},i(s){if(!o){for(let a=0;a<i.length;a+=1)j(e[a]);o=!0}},o(s){for(let a=0;a<e.length;a+=1)Y(e[a]);o=!1},d(s){s&&R(l);for(let a=0;a<e.length;a+=1)e[a].d(s)}}}function Go(n,e){let t,l,o;function i(){return e[32](e[38])}return l=new Il({props:{bookmark:e[36],showTitle:e[3],titleBackdrop:e[4],menuOpen:!1,focused:e[5]===e[0].length+e[38],dragging:!1,dragOver:!1,onToggleMenu:Fa,onEdit:Ea,onRemove:Ma,onFallback:Aa,onContextMenu:La,onFocus:i,onDragStart:Oa,onDragOver:Pa,onDragLeave:Ua,onDrop:za,onDragEnd:Na,getFaviconUrl:e[21],isTopSite:!0}}),{key:n,first:null,c(){t=Qe(),_e(l.$$.fragment),this.first=t},m(r,s){G(r,t,s),ge(l,r,s),o=!0},p(r,s){e=r;const a={};s[0]&2&&(a.bookmark=e[36]),s[0]&8&&(a.showTitle=e[3]),s[0]&16&&(a.titleBackdrop=e[4]),s[0]&35&&(a.focused=e[5]===e[0].length+e[38]),s[0]&16387&&(a.onFocus=i),s[0]&2097152&&(a.getFaviconUrl=e[21]),l.$set(a)},i(r){o||(j(l.$$.fragment,r),o=!0)},o(r){Y(l.$$.fragment,r),o=!1},d(r){r&&R(t),he(l,r)}}}function Wo(n){let e;return{c(){e=S("div"),e.textContent="Add shortcut"},m(t,l){G(t,e,l)},d(t){t&&R(e)}}}function Da(n){let e,t=[],l=new Map,o,i,r,s,a,u,f,b,h,_=pe(n[0]);const y=w=>w[39].id;for(let w=0;w<_.length;w+=1){let I=No(n,_,w),F=y(I);l.set(F,t[w]=Ho(F,I))}let m=n[2]&&n[1].length>0&&Ro(n),p=n[3]&&Wo();return{c(){e=S("div");for(let w=0;w<t.length;w+=1)t[w].c();o=U(),m&&m.c(),i=U(),r=S("article"),s=S("button"),a=S("span"),a.textContent="+",u=U(),p&&p.c(),c(a,"aria-hidden","true"),c(s,"class","add-button"),c(s,"type","button"),c(s,"aria-label","Add new bookmark shortcut"),c(r,"class","tile add-tile"),c(r,"draggable","false"),c(e,"id","dial-grid"),c(e,"class","grid"),c(e,"aria-label","Bookmark Dial links"),c(e,"tabindex","-1"),c(e,"role","group")},m(w,I){G(w,e,I);for(let F=0;F<t.length;F+=1)t[F]&&t[F].m(e,null);g(e,o),m&&m.m(e,null),g(e,i),g(e,r),g(r,s),g(s,a),g(s,u),p&&p.m(s,null),n[34](e),f=!0,b||(h=V(s,"click",n[33]),b=!0)},p(w,I){I[0]&3145721&&(_=pe(w[0]),Ne(),t=lt(t,I,y,1,w,_,l,e,xt,Ho,o,No),He()),w[2]&&w[1].length>0?m?(m.p(w,I),I[0]&6&&j(m,1)):(m=Ro(w),m.c(),j(m,1),m.m(e,i)):m&&(Ne(),Y(m,1,1,()=>{m=null}),He()),w[3]?p||(p=Wo(),p.c(),p.m(s,null)):p&&(p.d(1),p=null)},i(w){if(!f){for(let I=0;I<_.length;I+=1)j(t[I]);j(m),f=!0}},o(w){for(let I=0;I<t.length;I+=1)Y(t[I]);Y(m),f=!1},d(w){w&&R(e);for(let I=0;I<t.length;I+=1)t[I].d();m&&m.d(),p&&p.d(),n[34](null),b=!1,h()}}}const Fa=()=>{},Ea=()=>{},Ma=()=>{},Aa=()=>{},La=()=>{},Oa=()=>{},Pa=()=>{},Ua=()=>{},za=()=>{},Na=()=>{};function Ha(n,e,t){const l=mi();let{bookmarks:o=[]}=e,{topSites:i=[]}=e,{showTopSites:r=!1}=e,{showTitle:s=!0}=e,{titleBackdrop:a=!1}=e,{focusedIndex:u=-1}=e,{openMenuId:f=null}=e,{draggedBookmark:b=null}=e,{dragOverBookmark:h=null}=e,{onTileMenu:_=()=>{}}=e,{onTileEdit:y=()=>{}}=e,{onTileRemove:m=()=>{}}=e,{onTileFallback:p=()=>{}}=e,{onTileContextMenu:w=()=>{}}=e,{onTileFocus:I=()=>{}}=e,{onDragStart:F=()=>{}}=e,{onDragOver:O=()=>{}}=e,{onDragLeave:v=()=>{}}=e,{onDrop:P=()=>{}}=e,{onDragEnd:B=()=>{}}=e,{onAddShortcut:z=()=>{}}=e,{getFaviconUrl:A=async()=>""}=e,J=null;hi(()=>{l("gridmount",{gridRef:J})});const X=D=>_(D.id),K=D=>y(D),x=D=>m(D.id),re=D=>p(D.id),ue=(D,E)=>w(E,D),H=D=>I(D),Q=(D,E)=>F(E,D),ee=(D,E)=>O(E,D),te=(D,E)=>P(E,D),fe=D=>I(o.length+D),me=()=>z();function Xe(D){ct[D?"unshift":"push"](()=>{J=D,t(22,J)})}return n.$$set=D=>{"bookmarks"in D&&t(0,o=D.bookmarks),"topSites"in D&&t(1,i=D.topSites),"showTopSites"in D&&t(2,r=D.showTopSites),"showTitle"in D&&t(3,s=D.showTitle),"titleBackdrop"in D&&t(4,a=D.titleBackdrop),"focusedIndex"in D&&t(5,u=D.focusedIndex),"openMenuId"in D&&t(6,f=D.openMenuId),"draggedBookmark"in D&&t(7,b=D.draggedBookmark),"dragOverBookmark"in D&&t(8,h=D.dragOverBookmark),"onTileMenu"in D&&t(9,_=D.onTileMenu),"onTileEdit"in D&&t(10,y=D.onTileEdit),"onTileRemove"in D&&t(11,m=D.onTileRemove),"onTileFallback"in D&&t(12,p=D.onTileFallback),"onTileContextMenu"in D&&t(13,w=D.onTileContextMenu),"onTileFocus"in D&&t(14,I=D.onTileFocus),"onDragStart"in D&&t(15,F=D.onDragStart),"onDragOver"in D&&t(16,O=D.onDragOver),"onDragLeave"in D&&t(17,v=D.onDragLeave),"onDrop"in D&&t(18,P=D.onDrop),"onDragEnd"in D&&t(19,B=D.onDragEnd),"onAddShortcut"in D&&t(20,z=D.onAddShortcut),"getFaviconUrl"in D&&t(21,A=D.getFaviconUrl)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&J&&l("gridmount",{gridRef:J})},[o,i,r,s,a,u,f,b,h,_,y,m,p,w,I,F,O,v,P,B,z,A,J,X,K,x,re,ue,H,Q,ee,te,fe,me,Xe]}class Ra extends je{constructor(e){super(),qe(this,e,Ha,Da,Re,{bookmarks:0,topSites:1,showTopSites:2,showTitle:3,titleBackdrop:4,focusedIndex:5,openMenuId:6,draggedBookmark:7,dragOverBookmark:8,onTileMenu:9,onTileEdit:10,onTileRemove:11,onTileFallback:12,onTileContextMenu:13,onTileFocus:14,onDragStart:15,onDragOver:16,onDragLeave:17,onDrop:18,onDragEnd:19,onAddShortcut:20,getFaviconUrl:21},null,[-1,-1])}}function qo(n,e,t){const l=n.slice();return l[29]=e[t],l}function Ga(n){let e,t=n[0].label+"",l,o,i,r=n[0].fullPath&&n[0].fullPath!==n[0].label&&jo(n);return{c(){e=S("h4"),l=ce(t),o=U(),r&&r.c(),i=Qe(),c(e,"class","folder-section__title")},m(s,a){G(s,e,a),g(e,l),G(s,o,a),r&&r.m(s,a),G(s,i,a)},p(s,a){a[0]&1&&t!==(t=s[0].label+"")&&Te(l,t),s[0].fullPath&&s[0].fullPath!==s[0].label?r?r.p(s,a):(r=jo(s),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(s){s&&(R(e),R(o),R(i)),r&&r.d(s)}}}function Wa(n){let e,t=n[0].label+"",l,o;return{c(){e=S("h4"),l=ce(t),c(e,"class","folder-section__title"),c(e,"title",o=n[0].fullPath)},m(i,r){G(i,e,r),g(e,l)},p(i,r){r[0]&1&&t!==(t=i[0].label+"")&&Te(l,t),r[0]&1&&o!==(o=i[0].fullPath)&&c(e,"title",o)},d(i){i&&R(e)}}}function jo(n){let e,t=n[0].fullPath+"",l;return{c(){e=S("p"),l=ce(t),c(e,"class","folder-section__path")},m(o,i){G(o,e,i),g(e,l)},p(o,i){i[0]&1&&t!==(t=o[0].fullPath+"")&&Te(l,t)},d(o){o&&R(e)}}}function qa(n){let e,t,l,o,i,r,s,a,u=n[2]&&Vo();return{c(){e=S("div"),t=S("article"),l=S("button"),o=S("span"),o.textContent="+",i=U(),u&&u.c(),c(o,"aria-hidden","true"),c(l,"class","add-button"),c(l,"type","button"),c(t,"class","tile add-tile"),c(t,"draggable","false"),c(e,"class","grid folder-section__grid"),c(e,"role","group"),c(e,"aria-label",r=`Shortcuts in ${n[0].fullPath||n[0].label}`)},m(f,b){G(f,e,b),g(e,t),g(t,l),g(l,o),g(l,i),u&&u.m(l,null),s||(a=V(l,"click",n[28]),s=!0)},p(f,b){f[2]?u||(u=Vo(),u.c(),u.m(l,null)):u&&(u.d(1),u=null),b[0]&1&&r!==(r=`Shortcuts in ${f[0].fullPath||f[0].label}`)&&c(e,"aria-label",r)},i:$,o:$,d(f){f&&R(e),u&&u.d(),s=!1,a()}}}function ja(n){let e,t=[],l=new Map,o,i,r,s,a,u,f,b,h,_=pe(n[0].items);const y=p=>p[29].id;for(let p=0;p<_.length;p+=1){let w=qo(n,_,p),I=y(w);l.set(I,t[p]=Ko(I,w))}let m=n[2]&&Yo();return{c(){e=S("div");for(let p=0;p<t.length;p+=1)t[p].c();o=U(),i=S("article"),r=S("button"),s=S("span"),s.textContent="+",a=U(),m&&m.c(),c(s,"aria-hidden","true"),c(r,"class","add-button"),c(r,"type","button"),c(i,"class","tile add-tile"),c(i,"draggable","false"),c(e,"class","grid folder-section__grid"),c(e,"role","group"),c(e,"aria-label",u=`Shortcuts in ${n[0].fullPath||n[0].label}`)},m(p,w){G(p,e,w);for(let I=0;I<t.length;I+=1)t[I]&&t[I].m(e,null);g(e,o),g(e,i),g(i,r),g(r,s),g(r,a),m&&m.m(r,null),f=!0,b||(h=V(r,"click",n[27]),b=!0)},p(p,w){w[0]&393213&&(_=pe(p[0].items),Ne(),t=lt(t,w,y,1,p,_,l,e,xt,Ko,o,qo),He()),p[2]?m||(m=Yo(),m.c(),m.m(r,null)):m&&(m.d(1),m=null),(!f||w[0]&1&&u!==(u=`Shortcuts in ${p[0].fullPath||p[0].label}`))&&c(e,"aria-label",u)},i(p){if(!f){for(let w=0;w<_.length;w+=1)j(t[w]);f=!0}},o(p){for(let w=0;w<t.length;w+=1)Y(t[w]);f=!1},d(p){p&&R(e);for(let w=0;w<t.length;w+=1)t[w].d();m&&m.d(),b=!1,h()}}}function Vo(n){let e;return{c(){e=S("div"),e.textContent="Add shortcut"},m(t,l){G(t,e,l)},d(t){t&&R(e)}}}function Ko(n,e){var _,y;let t,l,o;function i(){return e[19](e[29])}function r(){return e[20](e[29])}function s(){return e[21](e[29])}function a(){return e[22](e[29])}function u(...m){return e[23](e[29],...m)}function f(...m){return e[24](e[29],...m)}function b(...m){return e[25](e[29],...m)}function h(...m){return e[26](e[29],...m)}return l=new Il({props:{bookmark:e[29],showTitle:e[2],titleBackdrop:e[3],menuOpen:e[4]===e[29].id,focused:!1,dragging:((_=e[5])==null?void 0:_.id)===e[29].id,dragOver:((y=e[6])==null?void 0:y.id)===e[29].id,onToggleMenu:i,onEdit:r,onRemove:s,onFallback:a,onContextMenu:u,onFocus:Ka,onDragStart:f,onDragOver:b,onDragLeave:e[14],onDrop:h,onDragEnd:e[16],getFaviconUrl:e[18]}}),{key:n,first:null,c(){t=Qe(),_e(l.$$.fragment),this.first=t},m(m,p){G(m,t,p),ge(l,m,p),o=!0},p(m,p){var I,F;e=m;const w={};p[0]&1&&(w.bookmark=e[29]),p[0]&4&&(w.showTitle=e[2]),p[0]&8&&(w.titleBackdrop=e[3]),p[0]&17&&(w.menuOpen=e[4]===e[29].id),p[0]&33&&(w.dragging=((I=e[5])==null?void 0:I.id)===e[29].id),p[0]&65&&(w.dragOver=((F=e[6])==null?void 0:F.id)===e[29].id),p[0]&129&&(w.onToggleMenu=i),p[0]&257&&(w.onEdit=r),p[0]&513&&(w.onRemove=s),p[0]&1025&&(w.onFallback=a),p[0]&2049&&(w.onContextMenu=u),p[0]&4097&&(w.onDragStart=f),p[0]&8193&&(w.onDragOver=b),p[0]&16384&&(w.onDragLeave=e[14]),p[0]&32769&&(w.onDrop=h),p[0]&65536&&(w.onDragEnd=e[16]),p[0]&262144&&(w.getFaviconUrl=e[18]),l.$set(w)},i(m){o||(j(l.$$.fragment,m),o=!0)},o(m){Y(l.$$.fragment,m),o=!1},d(m){m&&R(t),he(l,m)}}}function Yo(n){let e;return{c(){e=S("div"),e.textContent="Add shortcut"},m(t,l){G(t,e,l)},d(t){t&&R(e)}}}function Va(n){let e,t,l,o,i,r,s;function a(y,m){return y[1]?Wa:Ga}let u=a(n),f=u(n);const b=[ja,qa],h=[];function _(y,m){return y[0].items.length?0:1}return i=_(n),r=h[i]=b[i](n),{c(){e=S("section"),t=S("header"),l=S("div"),f.c(),o=U(),r.c(),c(l,"class","folder-section__titles"),c(t,"class","folder-section__header"),c(e,"class","folder-section")},m(y,m){G(y,e,m),g(e,t),g(t,l),f.m(l,null),g(e,o),h[i].m(e,null),s=!0},p(y,m){u===(u=a(y))&&f?f.p(y,m):(f.d(1),f=u(y),f&&(f.c(),f.m(l,null)));let p=i;i=_(y),i===p?h[i].p(y,m):(Ne(),Y(h[p],1,1,()=>{h[p]=null}),He(),r=h[i],r?r.p(y,m):(r=h[i]=b[i](y),r.c()),j(r,1),r.m(e,null))},i(y){s||(j(r),s=!0)},o(y){Y(r),s=!1},d(y){y&&R(e),f.d(),h[i].d()}}}const Ka=()=>{};function Ya(n,e,t){let{group:l}=e,{compactHeader:o=!0}=e,{showTitle:i=!0}=e,{titleBackdrop:r=!1}=e,{openMenuId:s=null}=e,{draggedBookmark:a=null}=e,{dragOverBookmark:u=null}=e,{onTileMenu:f=()=>{}}=e,{onTileEdit:b=()=>{}}=e,{onTileRemove:h=()=>{}}=e,{onTileFallback:_=()=>{}}=e,{onTileContextMenu:y=()=>{}}=e,{onDragStart:m=()=>{}}=e,{onDragOver:p=()=>{}}=e,{onDragLeave:w=()=>{}}=e,{onDrop:I=()=>{}}=e,{onDragEnd:F=()=>{}}=e,{onAddShortcut:O=()=>{}}=e,{getFaviconUrl:v=async()=>""}=e;const P=H=>f(H.id),B=H=>b(H),z=H=>h(H.id),A=H=>_(H.id),J=(H,Q)=>y(Q,H),X=(H,Q)=>m(Q,H,l.id),K=(H,Q)=>p(Q,H),x=(H,Q)=>I(Q,H),re=()=>O(l.id),ue=()=>O(l.id);return n.$$set=H=>{"group"in H&&t(0,l=H.group),"compactHeader"in H&&t(1,o=H.compactHeader),"showTitle"in H&&t(2,i=H.showTitle),"titleBackdrop"in H&&t(3,r=H.titleBackdrop),"openMenuId"in H&&t(4,s=H.openMenuId),"draggedBookmark"in H&&t(5,a=H.draggedBookmark),"dragOverBookmark"in H&&t(6,u=H.dragOverBookmark),"onTileMenu"in H&&t(7,f=H.onTileMenu),"onTileEdit"in H&&t(8,b=H.onTileEdit),"onTileRemove"in H&&t(9,h=H.onTileRemove),"onTileFallback"in H&&t(10,_=H.onTileFallback),"onTileContextMenu"in H&&t(11,y=H.onTileContextMenu),"onDragStart"in H&&t(12,m=H.onDragStart),"onDragOver"in H&&t(13,p=H.onDragOver),"onDragLeave"in H&&t(14,w=H.onDragLeave),"onDrop"in H&&t(15,I=H.onDrop),"onDragEnd"in H&&t(16,F=H.onDragEnd),"onAddShortcut"in H&&t(17,O=H.onAddShortcut),"getFaviconUrl"in H&&t(18,v=H.getFaviconUrl)},[l,o,i,r,s,a,u,f,b,h,_,y,m,p,w,I,F,O,v,P,B,z,A,J,X,K,x,re,ue]}class Qa extends je{constructor(e){super(),qe(this,e,Ya,Va,Re,{group:0,compactHeader:1,showTitle:2,titleBackdrop:3,openMenuId:4,draggedBookmark:5,dragOverBookmark:6,onTileMenu:7,onTileEdit:8,onTileRemove:9,onTileFallback:10,onTileContextMenu:11,onDragStart:12,onDragOver:13,onDragLeave:14,onDrop:15,onDragEnd:16,onAddShortcut:17,getFaviconUrl:18},null,[-1,-1])}}function Qo(n,e,t){const l=n.slice();return l[20]=e[t],l}function Xo(n,e){let t,l,o;return l=new Qa({props:{group:e[20],compactHeader:e[2],showTitle:e[3],titleBackdrop:e[4],openMenuId:e[5],draggedBookmark:e[6],dragOverBookmark:e[7],onTileMenu:e[8],onTileEdit:e[9],onTileRemove:e[10],onTileFallback:e[11],onTileContextMenu:e[12],onDragStart:e[13],onDragOver:e[14],onDragLeave:e[15],onDrop:e[16],onDragEnd:e[17],onAddShortcut:e[18],getFaviconUrl:e[19]}}),{key:n,first:null,c(){t=Qe(),_e(l.$$.fragment),this.first=t},m(i,r){G(i,t,r),ge(l,i,r),o=!0},p(i,r){e=i;const s={};r&1&&(s.group=e[20]),r&4&&(s.compactHeader=e[2]),r&8&&(s.showTitle=e[3]),r&16&&(s.titleBackdrop=e[4]),r&32&&(s.openMenuId=e[5]),r&64&&(s.draggedBookmark=e[6]),r&128&&(s.dragOverBookmark=e[7]),r&256&&(s.onTileMenu=e[8]),r&512&&(s.onTileEdit=e[9]),r&1024&&(s.onTileRemove=e[10]),r&2048&&(s.onTileFallback=e[11]),r&4096&&(s.onTileContextMenu=e[12]),r&8192&&(s.onDragStart=e[13]),r&16384&&(s.onDragOver=e[14]),r&32768&&(s.onDragLeave=e[15]),r&65536&&(s.onDrop=e[16]),r&131072&&(s.onDragEnd=e[17]),r&262144&&(s.onAddShortcut=e[18]),r&524288&&(s.getFaviconUrl=e[19]),l.$set(s)},i(i){o||(j(l.$$.fragment,i),o=!0)},o(i){Y(l.$$.fragment,i),o=!1},d(i){i&&R(t),he(l,i)}}}function Xa(n){let e,t=[],l=new Map,o=`${n[1]}px`,i,r=pe(n[0]);const s=a=>a[20].id;for(let a=0;a<r.length;a+=1){let u=Qo(n,r,a),f=s(u);l.set(f,t[a]=Xo(f,u))}return{c(){e=S("div");for(let a=0;a<t.length;a+=1)t[a].c();c(e,"class","folder-grid-list"),c(e,"aria-label","Bookmark folders"),wt(e,"max-width",o)},m(a,u){G(a,e,u);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);i=!0},p(a,[u]){u&1048573&&(r=pe(a[0]),Ne(),t=lt(t,u,s,1,a,r,l,e,xt,Xo,null,Qo),He()),u&2&&o!==(o=`${a[1]}px`)&&wt(e,"max-width",o)},i(a){if(!i){for(let u=0;u<r.length;u+=1)j(t[u]);i=!0}},o(a){for(let u=0;u<t.length;u+=1)Y(t[u]);i=!1},d(a){a&&R(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function Za(n,e,t){let{groups:l=[]}=e,{columnWidth:o=1170}=e,{compactHeader:i=!0}=e,{showTitle:r=!0}=e,{titleBackdrop:s=!1}=e,{openMenuId:a=null}=e,{draggedBookmark:u=null}=e,{dragOverBookmark:f=null}=e,{onTileMenu:b=()=>{}}=e,{onTileEdit:h=()=>{}}=e,{onTileRemove:_=()=>{}}=e,{onTileFallback:y=()=>{}}=e,{onTileContextMenu:m=()=>{}}=e,{onDragStart:p=()=>{}}=e,{onDragOver:w=()=>{}}=e,{onDragLeave:I=()=>{}}=e,{onDrop:F=()=>{}}=e,{onDragEnd:O=()=>{}}=e,{onAddShortcut:v=()=>{}}=e,{getFaviconUrl:P=async()=>""}=e;return n.$$set=B=>{"groups"in B&&t(0,l=B.groups),"columnWidth"in B&&t(1,o=B.columnWidth),"compactHeader"in B&&t(2,i=B.compactHeader),"showTitle"in B&&t(3,r=B.showTitle),"titleBackdrop"in B&&t(4,s=B.titleBackdrop),"openMenuId"in B&&t(5,a=B.openMenuId),"draggedBookmark"in B&&t(6,u=B.draggedBookmark),"dragOverBookmark"in B&&t(7,f=B.dragOverBookmark),"onTileMenu"in B&&t(8,b=B.onTileMenu),"onTileEdit"in B&&t(9,h=B.onTileEdit),"onTileRemove"in B&&t(10,_=B.onTileRemove),"onTileFallback"in B&&t(11,y=B.onTileFallback),"onTileContextMenu"in B&&t(12,m=B.onTileContextMenu),"onDragStart"in B&&t(13,p=B.onDragStart),"onDragOver"in B&&t(14,w=B.onDragOver),"onDragLeave"in B&&t(15,I=B.onDragLeave),"onDrop"in B&&t(16,F=B.onDrop),"onDragEnd"in B&&t(17,O=B.onDragEnd),"onAddShortcut"in B&&t(18,v=B.onAddShortcut),"getFaviconUrl"in B&&t(19,P=B.getFaviconUrl)},[l,o,i,r,s,a,u,f,b,h,_,y,m,p,w,I,F,O,v,P]}class Ja extends je{constructor(e){super(),qe(this,e,Za,Xa,Re,{groups:0,columnWidth:1,compactHeader:2,showTitle:3,titleBackdrop:4,openMenuId:5,draggedBookmark:6,dragOverBookmark:7,onTileMenu:8,onTileEdit:9,onTileRemove:10,onTileFallback:11,onTileContextMenu:12,onDragStart:13,onDragOver:14,onDragLeave:15,onDrop:16,onDragEnd:17,onAddShortcut:18,getFaviconUrl:19})}}function xa(n){let e,t,l,o,i,r,s,a,u,f,b,h,_,y,m,p,w,I,F,O,v,P;return{c(){e=S("dialog"),t=S("form"),l=S("header"),l.innerHTML="<h2>Custom background</h2>",o=U(),i=S("div"),r=S("label"),s=S("span"),s.textContent="Choose an image (JPEG/PNG, up to 10¬†MB)",a=U(),u=S("input"),f=U(),b=S("p"),b.textContent="The selected image is stored locally on this device only.",h=U(),_=S("footer"),y=S("button"),y.textContent="Remove",m=U(),p=S("span"),w=U(),I=S("button"),I.textContent="Cancel",F=U(),O=S("button"),O.textContent="Save",c(u,"type","file"),c(u,"accept","image/png,image/jpeg,image/jpg"),c(r,"class","file-picker"),c(b,"class","hint"),c(i,"class","dialog-body"),c(y,"type","button"),c(y,"id","clear-background"),c(y,"class","ghost-button"),c(p,"class","spacer"),c(I,"type","button"),c(I,"id","cancel-background"),c(O,"type","submit"),c(O,"id","save-background"),c(_,"class","dialog-footer"),c(t,"id","background-form"),c(t,"method","dialog")},m(B,z){G(B,e,z),g(e,t),g(t,l),g(t,o),g(t,i),g(i,r),g(r,s),g(r,a),g(r,u),n[10](u),g(i,f),g(i,b),g(t,h),g(t,_),g(_,y),g(_,m),g(_,p),g(_,w),g(_,I),g(_,F),g(_,O),n[11](e),v||(P=[V(y,"click",n[3]),V(I,"click",n[4]),V(t,"submit",n[2])],v=!0)},p:$,i:$,o:$,d(B){B&&R(e),n[10](null),n[11](null),v=!1,Pe(P)}}}function $a(n,e,t){let l=null,o=null,{onSubmit:i=()=>{}}=e,{onClear:r=()=>{}}=e,{onCancel:s=()=>{}}=e;function a(){o&&t(1,o.value="",o),l==null||l.showModal()}function u(){l==null||l.close()}function f(m){var w;m.preventDefault();const p=((w=o==null?void 0:o.files)==null?void 0:w[0])??null;i(p)}function b(m){m.preventDefault(),r()}function h(m){m.preventDefault(),s()}function _(m){ct[m?"unshift":"push"](()=>{o=m,t(1,o)})}function y(m){ct[m?"unshift":"push"](()=>{l=m,t(0,l)})}return n.$$set=m=>{"onSubmit"in m&&t(5,i=m.onSubmit),"onClear"in m&&t(6,r=m.onClear),"onCancel"in m&&t(7,s=m.onCancel)},[l,o,f,b,h,i,r,s,a,u,_,y]}class ec extends je{constructor(e){super(),qe(this,e,$a,xa,Re,{onSubmit:5,onClear:6,onCancel:7,open:8,close:9})}get open(){return this.$$.ctx[8]}get close(){return this.$$.ctx[9]}}function Xn(n){try{return new URL(n).href}catch{try{return new URL(`https://${n}`).href}catch{return null}}}function Bn(n){try{return new URL(n).hostname.replace(/^www\./i,"")}catch{return n}}function Zo(n){return n?n.trim().split(/\s+/)[0].slice(0,2).toUpperCase():"‚Ä¢"}function tc(n,e){let t;return(...l)=>{clearTimeout(t),t=setTimeout(()=>n(...l),e)}}function Jo(n){const e=(n||"").trim().toLowerCase();if(!e)return{background:"linear-gradient(145deg, #fde68a, #fbbf24)",text:"rgba(15, 23, 42, 0.85)"};let t=0,l=0,o=0;for(let m=0;m<e.length;m++){const p=e.charCodeAt(m),w=m+1;t+=p*w,l+=p*(w+1.5),o+=p*(w+2.5)}const i=gl(t,360),r=gl(l,36)-18,s=gl(i+24+r,360),a=52+Math.abs(l)%30,u=42+Math.abs(o)%20,f=Math.min(96,a+8),b=Math.min(78,u+12),h=`hsl(${i}, ${a}%, ${u}%)`,_=`hsl(${s}, ${f}%, ${b}%)`,y=u>54?"rgba(30, 41, 59, 0.85)":"rgba(255, 255, 255, 0.88)";return{background:`linear-gradient(140deg, ${h}, ${_})`,text:y}}function gl(n,e){return(n%e+e)%e}function nc(n,e=10*1024*1024){return["image/jpeg","image/png"].includes(n.type)&&n.size<=e}function xo(n=[],e=[]){return n.length!==e.length?!1:n.every((t,l)=>t===e[l])}function rn(n,e){if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function lc(n){return n?URL.createObjectURL(n):""}const Z=chrome;var li;const jt=!!((li=chrome==null?void 0:chrome.storage)!=null&&li.local);var oi;const $o=!!((oi=chrome==null?void 0:chrome.storage)!=null&&oi.sync);function oc(n,e,t){const l=n.slice();return l[202]=e[t],l[204]=t,l}function ei(n){let e,t;return e=new Zs({props:{visible:n[35],query:n[9],onSearchChange:n[87],onClose:n[88]}}),{c(){_e(e.$$.fragment)},m(l,o){ge(e,l,o),t=!0},p(l,o){const i={};o[1]&16&&(i.visible=l[35]),o[0]&512&&(i.query=l[9]),e.$set(i)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){Y(e.$$.fragment,l),t=!1},d(l){he(e,l)}}}function ic(n){let e,t,l,o,i,r,s,a;const u=[ac,sc],f=[];function b(h,_){return h[5].mergeAllBookmarks?0:1}return i=b(n),r=f[i]=u[i](n),{c(){e=S("section"),t=ce(n[13]),o=U(),r.c(),s=Qe(),c(e,"id","status"),c(e,"role","status"),c(e,"aria-live","polite"),c(e,"data-tone",l=n[13]?n[14]:null)},m(h,_){G(h,e,_),g(e,t),G(h,o,_),f[i].m(h,_),G(h,s,_),a=!0},p(h,_){(!a||_[0]&8192)&&Te(t,h[13]),(!a||_[0]&24576&&l!==(l=h[13]?h[14]:null))&&c(e,"data-tone",l);let y=i;i=b(h),i===y?f[i].p(h,_):(Ne(),Y(f[y],1,1,()=>{f[y]=null}),He(),r=f[i],r?r.p(h,_):(r=f[i]=u[i](h),r.c()),j(r,1),r.m(s.parentNode,s))},i(h){a||(j(r),a=!0)},o(h){Y(r),a=!1},d(h){h&&(R(e),R(o),R(s)),f[i].d(h)}}}function rc(n){let e,t=pe(Array(5)),l=[];for(let o=0;o<t.length;o+=1)l[o]=cc(oc(n,t,o));return{c(){e=S("div");for(let o=0;o<l.length;o+=1)l[o].c();c(e,"class","grid skeleton-grid"),c(e,"aria-hidden","true")},m(o,i){G(o,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p:$,i:$,o:$,d(o){o&&R(e),Xr(l,o)}}}function sc(n){var l;let e,t;return e=new Ja({props:{groups:n[38],columnWidth:n[5].folderColumnWidth,compactHeader:n[5].compactFolderHeader,showTitle:((l=n[5].tile)==null?void 0:l.showTitle)??!0,titleBackdrop:n[5].titleBackdrop,openMenuId:n[26],draggedBookmark:n[36],dragOverBookmark:n[37],onTileMenu:n[77],onTileEdit:n[99],onTileRemove:n[100],onTileFallback:n[76],onTileContextMenu:n[81],onDragStart:n[91],onDragOver:n[92],onDragLeave:n[93],onDrop:n[94],onDragEnd:n[95],onAddShortcut:n[96],getFaviconUrl:n[75]}}),{c(){_e(e.$$.fragment)},m(o,i){ge(e,o,i),t=!0},p(o,i){var s;const r={};i[1]&128&&(r.groups=o[38]),i[0]&32&&(r.columnWidth=o[5].folderColumnWidth),i[0]&32&&(r.compactHeader=o[5].compactFolderHeader),i[0]&32&&(r.showTitle=((s=o[5].tile)==null?void 0:s.showTitle)??!0),i[0]&32&&(r.titleBackdrop=o[5].titleBackdrop),i[0]&67108864&&(r.openMenuId=o[26]),i[1]&32&&(r.draggedBookmark=o[36]),i[1]&64&&(r.dragOverBookmark=o[37]),e.$set(r)},i(o){t||(j(e.$$.fragment,o),t=!0)},o(o){Y(e.$$.fragment,o),t=!1},d(o){he(e,o)}}}function ac(n){var l;let e,t;return e=new Ra({props:{bookmarks:n[12],topSites:n[10],showTopSites:n[5].enableTopSites,showTitle:((l=n[5].tile)==null?void 0:l.showTitle)??!0,titleBackdrop:n[5].titleBackdrop,focusedIndex:n[11],openMenuId:n[26],draggedBookmark:n[36],dragOverBookmark:n[37],onTileMenu:n[77],onTileEdit:n[99],onTileRemove:n[100],onTileFallback:n[76],onTileContextMenu:n[81],onTileFocus:n[89],onDragStart:n[91],onDragOver:n[92],onDragLeave:n[93],onDrop:n[94],onDragEnd:n[95],onAddShortcut:n[96],getFaviconUrl:n[75]}}),e.$on("gridmount",n[90]),{c(){_e(e.$$.fragment)},m(o,i){ge(e,o,i),t=!0},p(o,i){var s;const r={};i[0]&4096&&(r.bookmarks=o[12]),i[0]&1024&&(r.topSites=o[10]),i[0]&32&&(r.showTopSites=o[5].enableTopSites),i[0]&32&&(r.showTitle=((s=o[5].tile)==null?void 0:s.showTitle)??!0),i[0]&32&&(r.titleBackdrop=o[5].titleBackdrop),i[0]&2048&&(r.focusedIndex=o[11]),i[0]&67108864&&(r.openMenuId=o[26]),i[1]&32&&(r.draggedBookmark=o[36]),i[1]&64&&(r.dragOverBookmark=o[37]),e.$set(r)},i(o){t||(j(e.$$.fragment,o),t=!0)},o(o){Y(e.$$.fragment,o),t=!1},d(o){he(e,o)}}}function cc(n){let e;return{c(){e=S("div"),e.innerHTML='<div class="skeleton-icon"></div> <div class="skeleton-title"></div> ',c(e,"class","tile skeleton-tile")},m(t,l){G(t,e,l)},p:$,d(t){t&&R(e)}}}function uc(n){var Xe;let e,t,l,o,i,r,s,a,u,f,b,h,_,y,m,p,w,I,F,O,v,P,B,z,A,J,X,K,x,re,ue,H;u=new Ba({props:{open:n[6],settings:n[5],folderSummary:n[4],visibleAccentOptions:n[39],visibleGradientOptions:n[40],showAllAccents:n[8],showAllGradients:n[7],onClose:n[44],onThemeChange:n[46],onAccentChange:n[47],onTitleBackdropChange:n[48],onGradientSelect:n[65],onCustomBackgroundClick:n[66],onMergeAllChange:n[49],onFolderColumnWidthChange:n[50],onCompactHeaderChange:n[51],onSearchToggle:n[52],onTopSitesToggle:n[53],onToggleAccents:n[42],onToggleGradients:n[43],onOpenFolderModal:n[71],onTileSizeChange:n[54],onTileIconShapeChange:n[55],onTileFontWeightChange:n[56],onTileFontSizeChange:n[57],onTilePaddingChange:n[58],onTileBlurChange:n[59],onTileTextContrastChange:n[60],onTileBgLightnessChange:n[61],onShowTitleChange:n[62],onImmersiveEnabledChange:n[63],onImmersiveOpacityChange:n[64]}});let Q=n[5].enableBookmarkSearch&&ei(n);const ee=[rc,ic],te=[];function fe(D,E){return D[15]?0:1}p=fe(n),w=te[p]=ee[p](n),F=new Es({props:{open:n[1],rootIds:n[41].rootIds??[],expandedIds:n[25],loadingIds:n[16],visibleIds:n[20],searchQuery:n[19],searchMatches:n[3],selectedIds:n[1]&&n[22]?n[22]:n[0],summary:n[1]?n[23]:n[4],selectedFolderCount:n[1]?((Xe=n[22])==null?void 0:Xe.size)??0:n[0].size,totalBookmarkCount:n[1]?n[24]:n[21],toggleSelection:n[67],toggleExpansion:n[68],getCheckboxState:n[73],onSearchChange:n[74],onRequestClose:n[72],onConfirmSelection:n[70],onClearSelection:n[69]}}),v=new Ls({props:{open:n[2],folders:n[17],defaultFolderId:n[18],onConfirm:n[97],onClose:n[98]}}),B=new js({props:{open:n[31],onDismiss:n[80],onGetStarted:n[80]}}),A=new Ys({props:{bookmark:n[34],position:n[33],visible:n[32]}}),A.$on("edit",n[85]),A.$on("remove",n[86]),A.$on("opennewtab",n[83]),A.$on("copyurl",n[84]),A.$on("close",n[82]),X=new Gs({props:{toasts:n[30],onDismiss:n[78],onUndo:n[79]}});let me={onSubmit:n[101],onClear:n[102],onCancel:n[103]};return x=new ec({props:me}),n[120](x),{c(){e=S("div"),t=U(),l=S("div"),o=S("button"),i=at("svg"),r=at("path"),s=at("path"),a=U(),_e(u.$$.fragment),f=U(),b=S("div"),_=U(),y=S("main"),Q&&Q.c(),m=U(),w.c(),I=U(),_e(F.$$.fragment),O=U(),_e(v.$$.fragment),P=U(),_e(B.$$.fragment),z=U(),_e(A.$$.fragment),J=U(),_e(X.$$.fragment),K=U(),_e(x.$$.fragment),c(e,"id","background-layer"),de(e,"visible",n[5].background.mode==="custom"&&!!n[27]),wt(e,"background-image",n[5].background.mode==="custom"&&n[27]?`url(${n[27]})`:null),c(r,"d","M12 8.75a3.25 3.25 0 1 1 0 6.5 3.25 3.25 0 0 1 0-6.5Z"),c(r,"fill","none"),c(r,"stroke","currentColor"),c(r,"stroke-width","1.6"),c(s,"d","M21 12l-2.938 3.5-1.562 4.294L12 19l-4.5.794L5.938 15.5 3 12l2.938-3.5L7.5 4.206 12 5l4.5-.794L18.062 8.5 21 12Z"),c(s,"fill","none"),c(s,"stroke","currentColor"),c(s,"stroke-width","1.6"),c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(i,"class","icon-button__glyph"),c(i,"viewBox","0 0 24 24"),c(i,"aria-hidden","true"),c(i,"focusable","false"),c(i,"role","img"),c(o,"class","icon-button"),c(o,"type","button"),c(o,"title","Settings"),c(o,"aria-label","Open settings"),c(o,"aria-expanded",n[6]),c(o,"aria-controls","settings-drawer"),c(b,"class","settings-overlay"),c(b,"aria-hidden",h=!n[6]),de(b,"visible",n[6]),c(l,"class","page")},m(D,E){G(D,e,E),G(D,t,E),G(D,l,E),g(l,o),g(o,i),g(i,r),g(i,s),n[119](o),g(l,a),ge(u,l,null),g(l,f),g(l,b),g(l,_),g(l,y),Q&&Q.m(y,null),g(y,m),te[p].m(y,null),g(l,I),ge(F,l,null),g(l,O),ge(v,l,null),g(l,P),ge(B,l,null),g(l,z),ge(A,l,null),g(l,J),ge(X,l,null),G(D,K,E),ge(x,D,E),re=!0,ue||(H=[V(o,"click",n[45]),V(b,"pointerdown",n[44])],ue=!0)},p(D,E){var Fe;(!re||E[0]&134217760)&&de(e,"visible",D[5].background.mode==="custom"&&!!D[27]),E[0]&134217760&&wt(e,"background-image",D[5].background.mode==="custom"&&D[27]?`url(${D[27]})`:null),(!re||E[0]&64)&&c(o,"aria-expanded",D[6]);const be={};E[0]&64&&(be.open=D[6]),E[0]&32&&(be.settings=D[5]),E[0]&16&&(be.folderSummary=D[4]),E[1]&256&&(be.visibleAccentOptions=D[39]),E[1]&512&&(be.visibleGradientOptions=D[40]),E[0]&256&&(be.showAllAccents=D[8]),E[0]&128&&(be.showAllGradients=D[7]),u.$set(be),(!re||E[0]&64&&h!==(h=!D[6]))&&c(b,"aria-hidden",h),(!re||E[0]&64)&&de(b,"visible",D[6]),D[5].enableBookmarkSearch?Q?(Q.p(D,E),E[0]&32&&j(Q,1)):(Q=ei(D),Q.c(),j(Q,1),Q.m(y,m)):Q&&(Ne(),Y(Q,1,1,()=>{Q=null}),He());let De=p;p=fe(D),p===De?te[p].p(D,E):(Ne(),Y(te[De],1,1,()=>{te[De]=null}),He(),w=te[p],w?w.p(D,E):(w=te[p]=ee[p](D),w.c()),j(w,1),w.m(y,null));const ne={};E[0]&2&&(ne.open=D[1]),E[1]&1024&&(ne.rootIds=D[41].rootIds??[]),E[0]&33554432&&(ne.expandedIds=D[25]),E[0]&65536&&(ne.loadingIds=D[16]),E[0]&1048576&&(ne.visibleIds=D[20]),E[0]&524288&&(ne.searchQuery=D[19]),E[0]&8&&(ne.searchMatches=D[3]),E[0]&4194307&&(ne.selectedIds=D[1]&&D[22]?D[22]:D[0]),E[0]&8388626&&(ne.summary=D[1]?D[23]:D[4]),E[0]&4194307&&(ne.selectedFolderCount=D[1]?((Fe=D[22])==null?void 0:Fe.size)??0:D[0].size),E[0]&18874370&&(ne.totalBookmarkCount=D[1]?D[24]:D[21]),F.$set(ne);const Se={};E[0]&4&&(Se.open=D[2]),E[0]&131072&&(Se.folders=D[17]),E[0]&262144&&(Se.defaultFolderId=D[18]),v.$set(Se);const T={};E[1]&1&&(T.open=D[31]),B.$set(T);const N={};E[1]&8&&(N.bookmark=D[34]),E[1]&4&&(N.position=D[33]),E[1]&2&&(N.visible=D[32]),A.$set(N);const et={};E[0]&1073741824&&(et.toasts=D[30]),X.$set(et);const rt={};x.$set(rt)},i(D){re||(j(u.$$.fragment,D),j(Q),j(w),j(F.$$.fragment,D),j(v.$$.fragment,D),j(B.$$.fragment,D),j(A.$$.fragment,D),j(X.$$.fragment,D),j(x.$$.fragment,D),re=!0)},o(D){Y(u.$$.fragment,D),Y(Q),Y(w),Y(F.$$.fragment,D),Y(v.$$.fragment,D),Y(B.$$.fragment,D),Y(A.$$.fragment,D),Y(X.$$.fragment,D),Y(x.$$.fragment,D),re=!1},d(D){D&&(R(e),R(t),R(l),R(K)),n[119](null),he(u),Q&&Q.d(),te[p].d(),he(F),he(v),he(B),he(A),he(X),n[120](null),he(x,D),ue=!1,Pe(H)}}}function fc(n={}){const e=Array.isArray(n.selectedIds)?n.selectedIds.filter(Boolean):[],t=Array.isArray(n.expandedIds)?n.expandedIds.filter(Boolean):[];return{selectedIds:Array.from(new Set(e)),expandedIds:Array.from(new Set(t))}}function ti(n,e){const t=[...n];if(!e)return t;const l=t.findIndex(i=>i.id===e);if(l<=0)return t;const[o]=t.splice(l,1);return[o,...t]}function wl(n,e,t=[],l=!0){const o=n.nodesById[e];return!o||!o.isFolder||(o.childrenIds??[]).forEach(r=>{const s=n.nodesById[r];s&&(s.url?t.push(s):l&&wl(n,r,t,!0))}),t}function ni(n=[],e){let t=!1;return{next:n.map(o=>o.id!==e||o.fallback?o:(t=!0,{...o,fallback:!0})),changed:t}}function dc(n,e,t){let l,o,i,r,s,a,u;si(n,pi,d=>t(41,u=d));let f="",b="info",h=!0,_=[],y=[],m=new Set,p=null,w=new Set,I=new Set,F=new Set,O=!1,v=!1,P=!1,B=null,z=[],A=null,J="",X=new Set,K=null,x=[],re=new Map,ue=0,H=null,Q=null,ee=[],te=new Map,fe=0,me=!1,Xe=new Set,D=0,E=0,be=null,De="",ne,Se,T=Me(),N=!1,et=!0,rt=!1,Fe=!1,Ee=!1,Ce=!1,ut=[...Vt],Ve=[...Xt],Ge=[],Ue=0,ye=!1,tt=!1,dn={x:0,y:0},ze=null,ft="",St=!1,it=[],dt=!1,we=-1,nt=null,gt=4,st=null,ht=null,Tt=null,kt=null,vt="",It="",Lt=[],gn=new Map,mt=null,Ot=null,Oe=null,xe=null;const Bt=[];hi(()=>{var d,k;if((async()=>{try{await Ki()}catch(C){console.error("Bookmark Dial: failed to load settings",C),t(5,T=Me()),t(112,Fe=jt),Ut(T.theme),zt(T.accent),Nt(T.background.gradientId)}try{await Nr()}catch(C){console.error("Bookmark Dial: failed to load background",C)}t(110,et=!1),await gr(),Yi()})(),typeof window<"u"){const C=L=>{var q;const W=L.target;if(!(W instanceof HTMLInputElement||W instanceof HTMLTextAreaElement)){if(tt&&L.key==="Escape"){Rt(),L.stopPropagation();return}if(L.key==="Escape"){if(we>=0){t(11,we=-1),L.stopPropagation();return}if(be!==null){t(26,be=null),L.stopPropagation();return}if(St){Al(),L.stopPropagation();return}if(N){$t();return}if((q=T.immersive)!=null&&q.enabled&&!N){t(6,N=!0),L.stopPropagation();return}return}if(L.key==="/"&&T.enableBookmarkSearch&&!L.ctrlKey&&!L.metaKey){L.preventDefault(),t(35,St=!0);return}if(L.key==="i"&&!L.ctrlKey&&!L.metaKey&&!L.altKey){L.preventDefault(),qi();return}T.mergeAllBookmarks&&!N&&!St&&!ye&&yr(L)}},M=L=>{if(tt){const q=L.target;q instanceof Element&&!q.closest(".context-menu")&&Rt()}if(be===null)return;const W=L.target;W instanceof Element&&W.closest(".tile-actions")||t(26,be=null)};window.addEventListener("keydown",C),window.addEventListener("pointerdown",M),Bt.push(()=>window.removeEventListener("keydown",C)),Bt.push(()=>window.removeEventListener("pointerdown",M))}if((k=(d=Z==null?void 0:Z.storage)==null?void 0:d.onChanged)!=null&&k.addListener){const C=(M,L)=>{if(L!=="sync"&&L!=="local")return;const q=M[L==="sync"?Qn:In];!q||!q.newValue||ar(q.newValue)};Z.storage.onChanged.addListener(C),Bt.push(()=>Z.storage.onChanged.removeListener(C))}return()=>{mt&&clearTimeout(mt),st&&(st.disconnect(),st=null),kt&&(kt.abort(),kt=null),xe&&(URL.revokeObjectURL(xe),xe=null),typeof document<"u"&&(document.body.classList.remove("settings-open"),document.body.classList.remove("immersive")),Bt.forEach(C=>C==null?void 0:C())}});function Me(){return{theme:Be.theme,accent:Be.accent,background:{...Be.background},titleBackdrop:Be.titleBackdrop,mergeAllBookmarks:Be.mergeAllBookmarks,folderColumnWidth:Be.folderColumnWidth,compactFolderHeader:Be.compactFolderHeader,enableBookmarkSearch:Be.enableBookmarkSearch,enableTopSites:Be.enableTopSites,lastShortcutFolderId:Be.lastShortcutFolderId,tile:{...pt},immersive:{...dl}}}function Ae(d){return Ti.some(k=>k.id===d)?d:Be.theme}function Le(d){return Vt.some(k=>k.id===d)?d:Be.accent}function Ze(d){return Xt.some(k=>k.id===d)?d:Be.background.gradientId}function hn(d={}){var wn,yn,Cn,Nl;const k=Ae(d.theme),C=Le(d.accent),M=d.background??{},L=M.mode==="custom"?"custom":"gradient",W=Ze(M.gradientId),q=typeof d.titleBackdrop=="boolean",se=q?d.titleBackdrop:Be.titleBackdrop,Ie=typeof d.mergeAllBookmarks=="boolean"||typeof d.groupFoldersTogether=="boolean",ae=Ie?d.mergeAllBookmarks??d.groupFoldersTogether:Be.mergeAllBookmarks,oe=typeof d.folderColumnWidth=="number"?d.folderColumnWidth:Be.folderColumnWidth,ie=typeof d.compactFolderHeader=="boolean"?d.compactFolderHeader:Be.compactFolderHeader,ke=typeof d.enableBookmarkSearch=="boolean"?d.enableBookmarkSearch:Be.enableBookmarkSearch,$e=typeof d.enableTopSites=="boolean"?d.enableTopSites:Be.enableTopSites,Ke=d.lastShortcutFolderId??Be.lastShortcutFolderId,Ye=d.tile??{},tn={size:Ye.size??pt.size,iconShape:Ye.iconShape??pt.iconShape,fontWeight:typeof Ye.fontWeight=="number"?Ye.fontWeight:pt.fontWeight,fontSize:Ye.fontSize??pt.fontSize,padding:Ye.padding??pt.padding,blur:typeof Ye.blur=="number"?Ye.blur:pt.blur,textContrast:Ye.textContrast??pt.textContrast,bgLightness:typeof Ye.bgLightness=="number"?Ye.bgLightness:pt.bgLightness,showTitle:typeof Ye.showTitle=="boolean"?Ye.showTitle:pt.showTitle},Je=d.tile!==void 0,Mt=d.immersive??{},Gt={enabled:typeof Mt.enabled=="boolean"?Mt.enabled:dl.enabled,opacity:typeof Mt.opacity=="number"?Mt.opacity:dl.opacity},Qt=d.immersive!==void 0,nn=fc(d.folderSelection),Wn=!xo(nn.selectedIds,((wn=d.folderSelection)==null?void 0:wn.selectedIds)??[])||!xo(nn.expandedIds,((yn=d.folderSelection)==null?void 0:yn.expandedIds)??[]),qn=k!==d.theme||C!==d.accent||L!==(((Cn=d.background)==null?void 0:Cn.mode)??Be.background.mode)||W!==(((Nl=d.background)==null?void 0:Nl.gradientId)??Be.background.gradientId)||!q||!Ie||!Je||!Qt||oe!==d.folderColumnWidth||ie!==d.compactFolderHeader||ke!==d.enableBookmarkSearch||$e!==d.enableTopSites||Ke!==d.lastShortcutFolderId;return{settings:{theme:k,accent:C,background:{mode:L,gradientId:W},titleBackdrop:se,mergeAllBookmarks:ae,folderColumnWidth:oe,compactFolderHeader:ie,enableBookmarkSearch:ke,enableTopSites:$e,lastShortcutFolderId:Ke,tile:tn,immersive:Gt},folderSelection:nn,changed:qn||Wn||(d.version??xn)!==xn}}function Ln(d){return Vt.find(k=>k.id===d)??Vt[0]}function mn(d){return Xt.find(k=>k.id===d)??Xt[0]}function On(){t(113,ut=ti(Vt,T==null?void 0:T.accent)),t(8,Ce=!1)}function Pn(){t(8,Ce=!0)}function ve(){Ce?On():Pn()}function le(){var d,k;t(114,Ve=ti(Xt,((d=T==null?void 0:T.background)==null?void 0:d.mode)==="gradient"?(k=T==null?void 0:T.background)==null?void 0:k.gradientId:null)),t(7,Ee=!1)}function bn(){t(7,Ee=!0)}function Pt(){Ee?le():bn()}function _t(){return!Ot&&typeof window<"u"&&typeof window.matchMedia=="function"&&(Ot=window.matchMedia("(prefers-color-scheme: dark)")),Ot}function Ut(d){if(typeof document>"u")return;const k=Ae(d),C=_t();if(k==="system"&&C){if(document.body.classList.toggle("dark",C.matches),T!=null&&T.tile&&Yt(T.tile.textContrast,T.tile.bgLightness),!Oe){const M=L=>{document.body.classList.toggle("dark",L.matches),T!=null&&T.tile&&Yt(T.tile.textContrast,T.tile.bgLightness)};typeof C.addEventListener=="function"?(C.addEventListener("change",M),Oe=()=>C.removeEventListener("change",M)):typeof C.addListener=="function"?(C.addListener(M),Oe=()=>C.removeListener(M)):Oe=null,Oe&&Bt.push(Oe)}}else Oe&&(Oe(),Oe=null),document.body.classList.toggle("dark",k==="dark"),T!=null&&T.tile&&Yt(T.tile.textContrast,T.tile.bgLightness);document.body.dataset.theme=k}function zt(d){if(typeof document>"u")return;const k=Ln(d),C=document.documentElement;C.style.setProperty("--accent-color",k.colors.base),C.style.setProperty("--accent-color-contrast",k.colors.contrast),C.style.setProperty("--accent-color-soft",k.colors.soft),C.style.setProperty("--accent-color-border",k.colors.border)}function Nt(d){if(typeof document>"u")return;const k=mn(d),C=document.documentElement;C.style.setProperty("--page-background-light",k.gradients.light),C.style.setProperty("--page-background-dark",k.gradients.dark)}function Un(d){if(typeof document>"u"||!d)return;const k=document.documentElement,C=vi.find(M=>M.value===d.size);C&&(k.style.setProperty("--tile-width",`${C.width}px`),k.style.setProperty("--tile-grid-min",`${C.gridMin}px`)),k.style.setProperty("--tile-icon-radius",d.iconShape),k.style.setProperty("--tile-font-weight",String(d.fontWeight)),k.style.setProperty("--tile-font-size",d.fontSize),k.style.setProperty("--tile-padding",d.padding),k.style.setProperty("--tile-blur",`${d.blur}px`),Yt(d.textContrast,d.bgLightness)}function Yt(d,k){if(typeof document>"u")return;const C=document.documentElement,M=document.body.classList.contains("dark"),L={faint:M?.35:.4,soft:M?.55:.58,normal:M?.78:.75,strong:M?.9:.88,bold:M?.98:.96},W=L[d]??L.normal,q=Ii.find(ae=>ae.value===k),se=q?M?q.lightDark:q.lightLight:M?20:85,Ie=M?{1:.08,2:.14,3:.22,4:.32,5:.45}[k]??.22:{1:.04,2:.07,3:.1,4:.15,5:.22}[k]??.1;M?(C.style.setProperty("--tile-text-color",`hsla(210, 40%, 98%, ${W})`),C.style.setProperty("--tile-bg-color",`hsla(220, 30%, ${se}%, ${Ie})`)):(C.style.setProperty("--tile-text-color",`hsla(222, 50%, 2%, ${W})`),C.style.setProperty("--tile-bg-color",`hsla(222, 50%, ${se}%, ${Ie})`))}function bt(){if(!jt||!rt||!O)return;mt&&clearTimeout(mt);const d={theme:T.theme,accent:T.accent,titleBackdrop:T.titleBackdrop,mergeAllBookmarks:T.mergeAllBookmarks,folderColumnWidth:T.folderColumnWidth,compactFolderHeader:T.compactFolderHeader,enableBookmarkSearch:T.enableBookmarkSearch,enableTopSites:T.enableTopSites,lastShortcutFolderId:T.lastShortcutFolderId,background:{...T.background},tile:T.tile?{...T.tile}:void 0,immersive:T.immersive?{...T.immersive}:void 0,folderSelection:{selectedIds:Array.from(w),expandedIds:Array.from(I)},version:xn};mt=setTimeout(async()=>{mt=null;try{const k=[Z.storage.local.set({[In]:d})];$o&&k.push(Z.storage.sync.set({[Qn]:d})),await Promise.all(k)}catch(k){console.error("Bookmark Dial: failed to store preferences",k)}},120)}function $t(){N&&(t(6,N=!1),Se==null||Se.focus())}function zn(){t(6,N=!N)}function Nn(d){const k=Ae(d);T.theme!==k&&t(5,T={...T,theme:k})}function Hn(d){const k=Le(d);T.accent!==k&&t(5,T={...T,accent:k})}function Bi(d){const k=!!d;T.titleBackdrop!==k&&t(5,T={...T,titleBackdrop:k})}function Di(d){const k=!!d;T.mergeAllBookmarks!==k&&t(5,T={...T,mergeAllBookmarks:k})}function Fi(d){const k=Number(d);T.folderColumnWidth!==k&&t(5,T={...T,folderColumnWidth:k})}function Ei(d){const k=!!d;T.compactFolderHeader!==k&&t(5,T={...T,compactFolderHeader:k})}function Mi(d){const k=!!d;T.enableBookmarkSearch!==k&&(t(5,T={...T,enableBookmarkSearch:k}),k||(t(35,St=!1),t(9,ft="")))}function Ai(d){const k=!!d;T.enableTopSites!==k&&(t(5,T={...T,enableTopSites:k}),k&&!dt&&Ll())}function Li(d){var k;((k=T.tile)==null?void 0:k.size)!==d&&t(5,T={...T,tile:{...T.tile,size:d}})}function Oi(d){var k;((k=T.tile)==null?void 0:k.iconShape)!==d&&t(5,T={...T,tile:{...T.tile,iconShape:d}})}function Pi(d){var k;((k=T.tile)==null?void 0:k.fontWeight)!==d&&t(5,T={...T,tile:{...T.tile,fontWeight:d}})}function Ui(d){var k;((k=T.tile)==null?void 0:k.fontSize)!==d&&t(5,T={...T,tile:{...T.tile,fontSize:d}})}function zi(d){var k;((k=T.tile)==null?void 0:k.padding)!==d&&t(5,T={...T,tile:{...T.tile,padding:d}})}function Ni(d){var k;((k=T.tile)==null?void 0:k.blur)!==d&&t(5,T={...T,tile:{...T.tile,blur:d}})}function Hi(d){var k;((k=T.tile)==null?void 0:k.textContrast)!==d&&t(5,T={...T,tile:{...T.tile,textContrast:d}})}function Ri(d){var k;((k=T.tile)==null?void 0:k.bgLightness)!==d&&t(5,T={...T,tile:{...T.tile,bgLightness:d}})}function Gi(d){var k;((k=T.tile)==null?void 0:k.showTitle)!==d&&t(5,T={...T,tile:{...T.tile,showTitle:d}})}function Bl(d){var C;const k=!!d;((C=T.immersive)==null?void 0:C.enabled)!==k&&(t(5,T={...T,immersive:{...T.immersive,enabled:k}}),k&&Ft("Immersive Mode on. Hover to see bookmarks. Press Esc for settings.","info",null,4e3))}function Wi(d){var k;((k=T.immersive)==null?void 0:k.opacity)!==d&&t(5,T={...T,immersive:{...T.immersive,opacity:d}})}function qi(){var d;Bl(!((d=T.immersive)!=null&&d.enabled))}function ji(d){const k=Ze(d),C=mn(k),M=C.accent&&Vt.some(se=>se.id===C.accent)?C.accent:null,L=T.background.mode!=="gradient"||T.background.gradientId!==k,W=M?Le(M):T.accent,q=!!M&&W!==T.accent;!L&&!q||t(5,T={...T,accent:q?W:T.accent,background:{...T.background,mode:"gradient",gradientId:k}})}async function Vi(){$t(),await Cl(),ne==null||ne.open()}async function Ki(){if(t(112,Fe=!1),t(109,me=!1),!jt){t(5,T=Me()),t(0,w=new Set($n.selectedIds)),t(106,I=new Set($n.expandedIds)),t(107,O=!0),Ut(T.theme),zt(T.accent),Nt(T.background.gradientId),Ht();return}let d={},k={};if($o)try{d=await Z.storage.sync.get(Qn)}catch(W){console.warn("Bookmark Dial: failed to read sync preferences",W)}try{k=await Z.storage.local.get(In)}catch(W){console.warn("Bookmark Dial: failed to read local preferences",W)}let C=d==null?void 0:d[Qn],M=!1;!C&&(k!=null&&k[In])&&(C=k[In],M=!0);const L=hn(C??ta);t(5,T=L.settings),t(0,w=new Set(L.folderSelection.selectedIds.length?L.folderSelection.selectedIds:$n.selectedIds)),t(106,I=new Set(L.folderSelection.expandedIds)),t(107,O=!0),t(112,Fe=L.changed||M),t(109,me=L.changed||M),Ut(T.theme),zt(T.accent),Nt(T.background.gradientId),Ht()}async function Yi(){try{await ms(Z),p=await Qi(),await kn(),await en(),Xi(),await Dt()}catch(d){console.error("Bookmark Dial: initialization failed",d),Et(Yn.error,"error")}}async function Qi(){const d=await Z.runtime.sendMessage({type:"getFolderId"});if(!(d!=null&&d.folderId))throw new Error((d==null?void 0:d.error)||"Missing folder");return d.folderId}async function kn(){w.size===0&&p&&(t(0,w=new Set([p])),t(109,me=!0))}async function en(){const d=Array.from(w);d.length&&(await Promise.allSettled(d.map(k=>Tn(Z,k))),Ht())}function Xi(){var se,Ie;const d=tc(()=>Dt(),150),k=(ae,oe)=>{ks(oe),!oe.url&&$i(oe)&&El(oe.id),oe.url?_n(oe.parentId)&&d():w.has(oe.id)&&d()};Z.bookmarks.onCreated.addListener(k);const C=(ae,oe)=>{_s(ae,oe),m.has(ae)&&d()};Z.bookmarks.onChanged.addListener(C);const M=(ae,oe)=>{ps(ae,oe),(m.has(ae)||_n(oe.parentId)||_n(oe.oldParentId))&&d()};Z.bookmarks.onMoved.addListener(M);const L=(ae,oe)=>{const ie=yi(ae);ie&&Zi(ae,{...oe,node:ie}),ws(ae,oe),(m.has(ae)||_n(oe.parentId))&&(m.delete(ae),d())};Z.bookmarks.onRemoved.addListener(L);const W=()=>d(),q=()=>Et("Importing bookmarks‚Ä¶");(se=Z.bookmarks.onImportEnded)==null||se.addListener(W),(Ie=Z.bookmarks.onImportBegan)==null||Ie.addListener(q),Bt.push(()=>{var ae,oe;Z.bookmarks.onCreated.removeListener(k),Z.bookmarks.onChanged.removeListener(C),Z.bookmarks.onMoved.removeListener(M),Z.bookmarks.onRemoved.removeListener(L),(ae=Z.bookmarks.onImportEnded)==null||ae.removeListener(W),(oe=Z.bookmarks.onImportBegan)==null||oe.removeListener(q)})}function Zi(d,k={}){if(k!=null&&k.node&&!k.node.url){const C=new Set(Kn(d));if(C.size){const M=new Set(w);let L=!1;C.forEach(W=>{M.has(W)&&(M.delete(W),L=!0)}),L&&(t(0,w=M),t(109,me=!0),Ht(),bt(),w.size||Promise.resolve().then(()=>kn()).then(()=>en()).then(()=>Dt()))}d===p&&Ji()}}async function Ji(){Et("Default folder was removed. Recreating‚Ä¶");try{const d=await Z.runtime.sendMessage({type:"resetFolderCache"});if(d!=null&&d.folderId)p=d.folderId,await El(p),await Dt(),Et("Default folder restored.","success");else throw new Error((d==null?void 0:d.error)||"Unable to recreate folder")}catch(d){console.error("Bookmark Dial: missing folder recovery failed",d),Et(Yn.error,"error")}}async function Dl(d,k=null){const C=d instanceof Set?new Set(d):new Set(d??[]);if(!C.size)return{items:[],counts:new Map,total:0,groups:[]};if(k!=null&&k.aborted)throw new DOMException("Aborted","AbortError");const M=Wt(),L=Array.from(C).filter(ie=>{const ke=M.nodesById[ie];return!ke||!ke.childrenLoaded?!0:(ke.childrenIds??[]).some(Ke=>!M.nodesById[Ke])});if(L.length>0&&await Promise.all(L.map(ie=>Tn(Z,ie))),k!=null&&k.aborted)throw new DOMException("Aborted","AbortError");const W=Wt(),q=new Map,se=new Map,Ie=[],ae=[];C.forEach(ie=>{const ke=wl(W,ie,[],!0),$e=wl(W,ie,[],!1),Ke=Jn(ie),Ye=Ke[Ke.length-1]||"Untitled folder";ke.forEach(Je=>{const Gt=(Xn(Je.url)||Je.url||Je.url||Je.id).toLowerCase(),Qt=se.get(ie)??new Set;Qt.add(Gt),se.set(ie,Qt),q.has(Gt)||(q.set(Gt,Je.id),Ie.push({...Je,sourceFolderId:ie,sourcePath:Ke}))});const tn=$e.map(Je=>((Xn(Je.url)||Je.url||Je.url||Je.id).toLowerCase(),{...Je,sourceFolderId:ie,sourcePath:Ke}));ae.push({id:ie,label:Ye,path:Ke,fullPath:Ke.join(" ‚Ä∫ "),items:tn})}),ae.sort((ie,ke)=>ie.fullPath.localeCompare(ke.fullPath));const oe=new Map(Array.from(se.entries()).map(([ie,ke])=>[ie,ke.size]));return{items:Ie,counts:oe,total:Ie.length,groups:ae}}async function Dt(){const d=++D;if(!w.size){t(104,_=[]),t(105,y=[]),m=new Set,re=new Map,t(21,ue=0),Ht(),t(15,h=!1),Et("Select folders to populate this page.","info");return}kt&&kt.abort(),kt=new AbortController;const k=kt.signal;try{const C=await Dl(w,k);if(d!==D)return;re=C.counts,t(21,ue=C.total),xi(C.items),t(105,y=C.groups.map(M=>({id:M.id,label:M.label,path:M.path,fullPath:M.fullPath,items:M.items.map(L=>Fl(L))}))),Ht(),t(15,h=!1),C.items.length===0?Et(Yn.empty):Et("","info")}catch(C){if(C.name==="AbortError")return;console.error("Bookmark Dial: failed to load bookmarks",C),Et(Yn.error,"error")}}function Fl(d){const k=d.title||d.url;return{...d,displayTitle:k,initials:Zo(k),palette:Jo(k),fallback:!1}}function xi(d){m=new Set(d.map(L=>L.id));const C=[],M=new Map;for(const L of d){const W=L.id,q=gn.get(W);if(q&&q.title===L.title&&q.url===L.url&&q.index===L.index)C.push(q),M.set(W,q);else{const se=Fl(L);C.push(se),M.set(W,se)}}gn=M,t(104,_=C)}function $i(d){return!d||d.url?!1:_n(d.parentId)}function _n(d){if(!d)return!1;const k=Wt();let C=d;for(;C;){if(w.has(C))return!0;const M=k.nodesById[C];C=(M==null?void 0:M.parentId)??null}return!1}async function El(d){if(!d)return;await Tn(Z,d);const k=Kn(d),C=new Set(w);let M=!1;k.forEach(L=>{C.has(L)||(C.add(L),M=!0)}),M&&(t(0,w=C),t(109,me=!0),await en(),await Dt(),bt())}async function er(d){if(!d)return;const k=Kn(d);if(!k.length)return;const C=v,M=C&&H?H:C?new Set(w):w,L=new Set(M);if(k.every(q=>L.has(q))?k.forEach(q=>L.delete(q)):k.forEach(q=>L.add(q)),C){t(22,H=L);const q=++E,se=await Dl(H);if(q!==E)return;te=se.counts,t(24,fe=se.total),t(23,ee=Rn(H,te))}else rn(w,L)||(t(0,w=L),t(109,me=!0),await kn(),await en(),await Dt(),bt())}function tr(d){var oe;if(!d)return;const k=Wt(),C=k.nodesById[d];if(!(C!=null&&C.isFolder)||!(((oe=C.childrenIds)==null?void 0:oe.some(ie=>{const ke=k.nodesById[ie];return ke==null?void 0:ke.isFolder}))??!1))return;const L=v,W=L&&Q?Q:L?new Set(I):I,q=new Set(W??[]),se=new Set(q),Ie=(ie,{persist:ke=!1}={})=>{L?t(108,Q=ie):(t(106,I=ie),ke&&(t(109,me=!0),bt()))};q.has(d)?q.delete(d):q.add(d);const ae=!rn(se,q);Ie(q,{persist:ae})}async function nr(){if(v){t(22,H=new Set),E++,te=new Map,t(24,fe=0),t(23,ee=[]);return}t(0,w=new Set),t(109,me=!0),await kn(),await en(),await Dt(),bt()}async function lr(){if(!v)return;const d=new Set(H??[]),k=new Set(Q??[]),C=!rn(w,d),M=!rn(I,k);t(1,v=!1),Ml(),C&&(t(0,w=d),t(109,me=!0),await kn(),await en(),await Dt()),M&&(t(106,I=k),t(109,me=!0)),C||M?bt():Ht()}async function or(){await bs(Z),t(22,H=new Set(w)),t(108,Q=new Set(I)),te=new Map(re),t(24,fe=ue),t(23,ee=Rn(H,te)),E=0,t(19,J=""),t(3,X=new Set),t(20,K=null),t(1,v=!0)}function Ml(){t(22,H=null),t(108,Q=null),t(23,ee=[]),te=new Map,t(24,fe=0),E=0,t(19,J=""),t(3,X=new Set),t(20,K=null)}function ir(){t(1,v=!1),Ml()}function Rn(d,k){const C=Array.from(d??[]).map(M=>{const L=Jn(M),W=L[L.length-1]||"Untitled folder";return{id:M,path:L,label:W,fullPath:L.join(" ‚Ä∫ "),count:(k==null?void 0:k.get(M))??0}});return C.sort((M,L)=>M.fullPath.localeCompare(L.fullPath)),C}function Ht(){const d=Array.from(w).sort().join(","),k=Array.from(re.entries()).sort(([C],[M])=>C.localeCompare(M)).map(([C,M])=>`${C}:${M}`).join(",");if(d===vt&&k===It){t(4,x=Lt);return}vt=d,It=k,Lt=Rn(w,re),t(4,x=Lt)}function rr(d){const C=Wt().nodesById[d],M=v&&H?H:w;if(!(C!=null&&C.isFolder))return M.has(d)?"selected":"none";const L=Kn(d);if(!L.length)return M.has(d)?"selected":"none";const W=L.filter(q=>M.has(q)).length;return W===0?"none":W===L.length?"selected":"partial"}async function sr(d){var Ie;t(19,J=d);const k=d.trim();if(!k){t(3,X=new Set),t(20,K=null);return}if((Ie=Z==null?void 0:Z.bookmarks)!=null&&Ie.search)try{const oe=(await Z.bookmarks.search({query:k})).filter(ie=>!ie.url);for(const ie of oe){await Tn(Z,ie.id);let ke=ie.parentId;for(;ke;){await Tn(Z,ke);const $e=Wt().nodesById[ke];ke=($e==null?void 0:$e.parentId)??null}}}catch(ae){console.warn("Bookmark Dial: folder search failed",ae)}const C=ys(),M=k.toLowerCase(),W=C.filter(ae=>{const oe=ae.title.toLowerCase().includes(M),ie=ae.path.join(" ").toLowerCase().includes(M);return oe||ie}).map(ae=>ae.id);t(3,X=new Set(W));const q=new Set,se=Wt();W.forEach(ae=>{var ke;let oe=se.nodesById[ae];for(;oe&&(q.add(oe.id),!!oe.parentId);)oe=se.nodesById[oe.parentId];const ie=se.nodesById[ae];(ke=ie==null?void 0:ie.childrenIds)==null||ke.forEach($e=>{const Ke=se.nodesById[$e];Ke!=null&&Ke.isFolder&&q.add($e)})}),t(20,K=q)}function ar(d){var ae,oe,ie,ke,$e,Ke,Ye,tn,Je,Mt,Gt,Qt,nn,Wn,qn,wn,yn,Cn;const k=hn(d),C=k.settings,M=((ae=C.tile)==null?void 0:ae.size)!==((oe=T.tile)==null?void 0:oe.size)||((ie=C.tile)==null?void 0:ie.iconShape)!==((ke=T.tile)==null?void 0:ke.iconShape)||(($e=C.tile)==null?void 0:$e.fontWeight)!==((Ke=T.tile)==null?void 0:Ke.fontWeight)||((Ye=C.tile)==null?void 0:Ye.fontSize)!==((tn=T.tile)==null?void 0:tn.fontSize)||((Je=C.tile)==null?void 0:Je.padding)!==((Mt=T.tile)==null?void 0:Mt.padding)||((Gt=C.tile)==null?void 0:Gt.blur)!==((Qt=T.tile)==null?void 0:Qt.blur)||((nn=C.tile)==null?void 0:nn.textContrast)!==((Wn=T.tile)==null?void 0:Wn.textContrast)||((qn=C.tile)==null?void 0:qn.bgLightness)!==((wn=T.tile)==null?void 0:wn.bgLightness)||((yn=C.tile)==null?void 0:yn.showTitle)!==((Cn=T.tile)==null?void 0:Cn.showTitle);(C.theme!==T.theme||C.accent!==T.accent||C.background.mode!==T.background.mode||C.background.gradientId!==T.background.gradientId||C.titleBackdrop!==T.titleBackdrop||C.mergeAllBookmarks!==T.mergeAllBookmarks||C.folderColumnWidth!==T.folderColumnWidth||C.compactFolderHeader!==T.compactFolderHeader||C.enableBookmarkSearch!==T.enableBookmarkSearch||C.enableTopSites!==T.enableTopSites||C.lastShortcutFolderId!==T.lastShortcutFolderId||M)&&t(5,T={...T,...C,background:{...C.background},tile:C.tile?{...C.tile}:T.tile});const W=new Set(k.folderSelection.selectedIds),q=new Set(k.folderSelection.expandedIds),se=!rn(W,w),Ie=!rn(q,I);se&&(t(0,w=W),Ht(),Dt()),Ie&&t(106,I=q),(se||Ie)&&t(109,me=!1)}async function cr(d){try{const k=new URL(chrome.runtime.getURL("/_favicon/"));return k.searchParams.set("pageUrl",d),k.searchParams.set("size",Js.toString()),k.toString()}catch{return""}}function ur(d){const{next:k,changed:C}=ni(_,d);if(!C)return;t(104,_=k);let M=!1;const L=y.map(W=>{const{next:q,changed:se}=ni(W.items,d);return se?(M=!0,{...W,items:q}):W});M&&t(105,y=L)}function fr(d){t(26,be=be===d?null:d)}function ol(){t(26,be=null)}function Ft(d,k="info",C=null,M=5e3){const L=++Ue,W={id:L,message:d,type:k,undoData:C};let q=[...Ge,W];return q.length>ko&&(q=q.slice(-ko)),t(30,Ge=q),M>0&&setTimeout(()=>il(L),M),L}function il(d){t(30,Ge=Ge.filter(k=>k.id!==d))}async function dr(d){if(!(d!=null&&d.undoData))return;const{action:k,data:C}=d.undoData;try{k==="removeBookmark"&&C&&(await Z.bookmarks.create({parentId:C.parentId,title:C.title,url:C.url,index:C.index}),Ft("Bookmark restored","success"))}catch(M){console.error("Bookmark Dial: undo failed",M),Ft("Failed to undo","error")}il(d.id)}async function gr(){if(!jt){t(31,ye=!0);return}try{const d=await Z.storage.local.get(ul);d!=null&&d[ul]||t(31,ye=!0)}catch(d){console.warn("Bookmark Dial: failed to check welcome state",d)}}async function hr(){if(t(31,ye=!1),jt)try{await Z.storage.local.set({[ul]:!0})}catch(d){console.warn("Bookmark Dial: failed to save welcome state",d)}}function mr(d,k){d.preventDefault(),ol(),t(34,ze=k);const C=180,M=180;let L=d.clientX,W=d.clientY;L+C>window.innerWidth&&(L=window.innerWidth-C-8),W+M>window.innerHeight&&(W=window.innerHeight-M-8),t(33,dn={x:L,y:W}),t(32,tt=!0)}function Rt(){t(32,tt=!1),t(34,ze=null)}async function br(){ze!=null&&ze.url&&window.open(ze.url,"_blank"),Rt()}async function kr(){if(ze!=null&&ze.url)try{await navigator.clipboard.writeText(ze.url),Ft("URL copied to clipboard","success")}catch(d){console.error("Bookmark Dial: copy failed",d),Ft("Failed to copy URL","error")}Rt()}function _r(){ze&&Ul(ze),Rt()}function pr(){ze&&rl(ze.id),Rt()}function wr(d){t(9,ft=d)}function Al(){t(35,St=!1),t(9,ft="")}async function Ll(){var d;if(!dt){if(!((d=Z==null?void 0:Z.topSites)!=null&&d.get)){t(115,dt=!0);return}try{const k=await Z.topSites.get();t(10,it=(k||[]).map((C,M)=>({id:`topsite-${M}`,title:C.title||Bn(C.url),url:C.url,displayTitle:C.title||Bn(C.url),initials:Zo(C.title||Bn(C.url)),palette:Jo(C.title||Bn(C.url)),fallback:!1,isTopSite:!0}))),t(115,dt=!0)}catch(k){console.warn("Bookmark Dial: failed to load top sites",k),t(115,dt=!0)}}}function yr(d){const k=T.enableTopSites?[...s,...it]:s;if(!k.length)return;const C=Cr(),M=k.length;if(["ArrowRight","ArrowLeft","ArrowDown","ArrowUp"].includes(d.key)&&we<0){d.preventDefault(),t(11,we=0);return}if(d.key==="ArrowRight")d.preventDefault(),we+1<M&&t(11,we=we+1);else if(d.key==="ArrowLeft")d.preventDefault(),we-1>=0&&t(11,we=we-1);else if(d.key==="ArrowDown"){d.preventDefault();const W=we+C;W<M&&t(11,we=W)}else if(d.key==="ArrowUp"){d.preventDefault();const W=we-C;W>=0&&t(11,we=W)}else if(d.key==="Enter"&&we>=0){d.preventDefault();const W=k[we];W!=null&&W.url&&(window.location.href=W.url)}else if((d.key==="Delete"||d.key==="Backspace")&&we>=0){d.preventDefault();const W=k[we];if(W&&!W.isTopSite){const q=M-1;rl(W.id),q===0?t(11,we=-1):we>=q&&t(11,we=q-1)}}else if(d.key>="0"&&d.key<="9"){const W=d.key==="0"?9:parseInt(d.key,10)-1;if(W<M){d.preventDefault();const q=k[W];q!=null&&q.url&&(window.location.href=q.url)}}}function Ol(){if(!nt){gt=4;return}try{gt=getComputedStyle(nt).getPropertyValue("grid-template-columns").split(" ").length||4}catch{gt=4}}function Cr(){return gt}function Sr(){!nt||typeof ResizeObserver>"u"||(st&&st.disconnect(),st=new ResizeObserver(()=>{Ol()}),st.observe(nt),Ol())}function Tr(d){t(11,we=d)}function vr(d){t(116,nt=d.detail.gridRef)}function Ir(d,k,C=null){if(k.isTopSite){d.preventDefault();return}t(36,ht=k),C||k.parentId,d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("text/plain",k.id)}function Br(d,k){!ht||ht.id===k.id||k.isTopSite||(d.preventDefault(),d.dataTransfer.dropEffect="move",t(37,Tt=k))}function Dr(d){d.currentTarget.contains(d.relatedTarget)||t(37,Tt=null)}async function Fr(d,k){if(d.preventDefault(),!ht||ht.id===k.id){Gn();return}if(k.isTopSite){Gn();return}try{await Z.bookmarks.move(ht.id,{parentId:k.parentId,index:k.index}),Ft("Bookmark moved","success")}catch(C){console.error("Bookmark Dial: move failed",C),Ft("Failed to move bookmark","error")}Gn()}function Er(){Gn()}function Gn(){t(36,ht=null),t(37,Tt=null)}async function Mr(d=null){B=d,t(2,P=!0)}async function Ar(d){t(2,P=!1);const{folderId:k,url:C,title:M}=d,L=Xn(C);if(!L){alert("That does not appear to be a valid URL.");return}try{await Z.bookmarks.create({parentId:k,title:M,url:L}),t(5,T={...T,lastShortcutFolderId:k}),bt()}catch(W){console.error("Bookmark Dial: failed to create bookmark",W),alert("Unable to add shortcut. Please try again.")}}function Lr(){t(2,P=!1),B=null}function Pl(){if(x.length)return x;const d=Rn(w,re);if(d.length)return d;if(p){const k=Jn(p),C=k[k.length-1]||"Bookmark Dial";return[{id:p,path:k,label:C,fullPath:k.join(" ‚Ä∫ "),count:0}]}return[]}function Or(){if(B)return B;const d=z.length>0?z:Pl();return d.length===0?null:T.lastShortcutFolderId&&d.some(C=>C.id===T.lastShortcutFolderId)?T.lastShortcutFolderId:d[d.length-1].id}async function Ul(d){var q;if(!(d!=null&&d.id))return;ol();const k=prompt("Update the shortcut URL:",d.url??"");if(k===null)return;const C=Xn(k.trim());if(!C){alert("That does not appear to be a valid URL.");return}const M=(q=d.title)!=null&&q.trim()?d.title:d.displayTitle||Bn(C),L=prompt("Update the shortcut title:",M),W=L?L.trim():M;try{await Z.bookmarks.update(d.id,{title:W,url:C})}catch(se){console.error("Bookmark Dial: failed to update bookmark",se),alert("Unable to update shortcut. Please try again.")}}async function rl(d){ol(),Rt();const k=_.find(C=>C.id===d)||y.flatMap(C=>C.items).find(C=>C.id===d);if(k)try{const[C]=await Z.bookmarks.get(d);await Z.bookmarks.remove(d),Ft(`"${k.displayTitle||k.title}" removed`,"info",{action:"removeBookmark",data:{parentId:String(C.parentId),title:String(C.title||""),url:String(C.url||""),index:typeof C.index=="number"?C.index:0}},8e3)}catch(C){console.error("Bookmark Dial: failed to remove bookmark",C),Ft("Failed to remove bookmark","error")}}async function Pr(d){if(!d){ne==null||ne.close();return}if(!nc(d,xs)){alert("Please choose a JPEG or PNG image under 10 MB.");return}try{jt&&(await zl(d),await Z.storage.local.set({[vn]:"indexeddb"})),pn(d),t(5,T={...T,background:{...T.background,mode:"custom"}}),ne==null||ne.close()}catch(k){console.error("Bookmark Dial: failed to save background",k),alert("Unable to store the background image. Try a smaller file.")}}async function Ur(){try{jt&&(await Gr(),await Z.storage.local.remove(vn))}catch(d){console.error("Bookmark Dial: failed to clear background",d)}pn(null),t(5,T={...T,background:{...T.background,mode:"gradient"}}),ne==null||ne.close()}function zr(){ne==null||ne.close()}async function Nr(){if(!jt){pn(null),T.background.mode==="custom"&&t(5,T={...T,background:{...T.background,mode:"gradient"}});return}try{const d=await Rr();if(d){pn(d);return}const k=await Z.storage.local.get(vn),C=(k==null?void 0:k[vn])||"";if(C&&C.startsWith("data:")){try{const L=await(await fetch(C)).blob();await zl(L),await Z.storage.local.set({[vn]:"indexeddb"}),pn(L)}catch(M){console.warn("Bookmark Dial: background migration failed, using legacy",M),Hr(C)}return}!C&&T.background.mode==="custom"&&(t(5,T={...T,background:{...T.background,mode:"gradient"}}),t(112,Fe=!0))}catch(d){console.error("Bookmark Dial: failed to load background",d)}}function pn(d){xe&&(URL.revokeObjectURL(xe),xe=null),d?(xe=lc(d),t(27,De=xe)):t(27,De="")}function Hr(d){xe&&(URL.revokeObjectURL(xe),xe=null),t(27,De=d||"")}function Et(d,k="info"){t(13,f=d),t(14,b=k)}function sl(){return new Promise((d,k)=>{if(typeof indexedDB>"u"){k(new Error("IndexedDB not available"));return}const C=indexedDB.open($s,1);C.onerror=()=>k(C.error),C.onsuccess=()=>d(C.result),C.onupgradeneeded=M=>{const L=M.target.result;L.objectStoreNames.contains(qt)||L.createObjectStore(qt)}})}async function zl(d){const k=await sl();return new Promise((C,M)=>{const L=k.transaction(qt,"readwrite"),q=L.objectStore(qt).put(d,fl);q.onerror=()=>M(q.error),q.onsuccess=()=>C(),L.oncomplete=()=>k.close()})}async function Rr(){try{const d=await sl();return new Promise((k,C)=>{const M=d.transaction(qt,"readonly"),W=M.objectStore(qt).get(fl);W.onerror=()=>C(W.error),W.onsuccess=()=>k(W.result||null),M.oncomplete=()=>d.close()})}catch{return null}}async function Gr(){try{const d=await sl();return new Promise((k,C)=>{const M=d.transaction(qt,"readwrite"),W=M.objectStore(qt).delete(fl);W.onerror=()=>C(W.error),W.onsuccess=()=>k(),M.oncomplete=()=>d.close()})}catch{}}function Wr(d){ct[d?"unshift":"push"](()=>{Se=d,t(29,Se)})}function qr(d){ct[d?"unshift":"push"](()=>{ne=d,t(28,ne)})}return n.$$.update=()=>{var d,k;if(n.$$.dirty[3]&2097152&&t(117,l=new Set(Ve.slice(0,_l).map(C=>C.id))),n.$$.dirty[3]&1048576&&t(118,o=new Set(ut.slice(0,pl).map(C=>C.id))),n.$$.dirty[0]&160|n.$$.dirty[3]&16777216&&!Ee&&T.background.mode==="gradient"&&T.background.gradientId&&!l.has(T.background.gradientId)&&t(7,Ee=!0),n.$$.dirty[0]&128|n.$$.dirty[3]&2097152&&t(40,i=Ee?Ve:Ve.slice(0,_l)),n.$$.dirty[0]&288|n.$$.dirty[3]&33554432&&!Ce&&T.accent&&!o.has(T.accent)&&t(8,Ce=!0),n.$$.dirty[0]&256|n.$$.dirty[3]&1048576&&t(39,r=Ce?ut:ut.slice(0,pl)),n.$$.dirty[0]&32|n.$$.dirty[3]&999424&&!et&&O&&(Ut(T.theme),zt(T.accent),Nt(T.background.gradientId),Un(T.tile),(Fe||me||rt)&&bt(),t(111,rt=!0),t(112,Fe=!1),t(109,me=!1)),n.$$.dirty[0]&64&&typeof document<"u"&&document.body.classList.toggle("settings-open",N),n.$$.dirty[0]&32&&typeof document<"u"){const C=((d=T.immersive)==null?void 0:d.enabled)??!1;document.body.classList.toggle("immersive",C),C?document.documentElement.style.setProperty("--immersive-opacity-setting",String(((k=T.immersive)==null?void 0:k.opacity)??.15)):document.documentElement.style.removeProperty("--immersive-opacity-setting")}if(n.$$.dirty[0]&32|n.$$.dirty[3]&8388608&&nt&&T.mergeAllBookmarks&&Sr(),n.$$.dirty[0]&10|n.$$.dirty[3]&40960&&t(25,Xe=(()=>{const C=v&&Q?Q:I,M=new Set(C??[]);if(X.size){const L=Wt();X.forEach(W=>{var se,Ie;let q=((se=L.nodesById[W])==null?void 0:se.parentId)??null;for(;q;)M.add(q),q=((Ie=L.nodesById[q])==null?void 0:Ie.parentId)??null})}return M})()),n.$$.dirty[0]&512|n.$$.dirty[3]&2048&&t(12,s=(()=>{if(!ft.trim())return _;const C=ft.toLowerCase().trim();return _.filter(M=>{var L,W,q;return((L=M.title)==null?void 0:L.toLowerCase().includes(C))||((W=M.url)==null?void 0:W.toLowerCase().includes(C))||((q=M.displayTitle)==null?void 0:q.toLowerCase().includes(C))})})()),n.$$.dirty[0]&512|n.$$.dirty[3]&4096&&t(38,a=(()=>{if(!ft.trim())return y;const C=ft.toLowerCase().trim();return y.map(M=>({...M,items:M.items.filter(L=>{var W,q,se;return((W=L.title)==null?void 0:W.toLowerCase().includes(C))||((q=L.url)==null?void 0:q.toLowerCase().includes(C))||((se=L.displayTitle)==null?void 0:se.toLowerCase().includes(C))})})).filter(M=>M.items.length>0)})()),n.$$.dirty[0]&32|n.$$.dirty[3]&4194304&&T.enableTopSites&&!dt&&Ll(),n.$$.dirty[0]&7200){const C=T.mergeAllBookmarks?T.enableTopSites?s.length+it.length:s.length:0;we>=C&&t(11,we=Math.max(C-1,-1))}n.$$.dirty[0]&21&&(P||x.length||w.size)&&(t(17,z=Pl()),t(18,A=Or()))},[w,v,P,X,x,T,N,Ee,Ce,ft,it,we,s,f,b,h,F,z,A,J,K,ue,H,ee,fe,Xe,be,De,ne,Se,Ge,ye,tt,dn,ze,St,ht,Tt,a,r,i,u,ve,Pt,$t,zn,Nn,Hn,Bi,Di,Fi,Ei,Mi,Ai,Li,Oi,Pi,Ui,zi,Ni,Hi,Ri,Gi,Bl,Wi,ji,Vi,er,tr,nr,lr,or,ir,rr,sr,cr,ur,fr,il,dr,hr,mr,Rt,br,kr,_r,pr,wr,Al,Tr,vr,Ir,Br,Dr,Fr,Er,Mr,Ar,Lr,Ul,rl,Pr,Ur,zr,_,y,I,O,Q,me,et,rt,Fe,ut,Ve,dt,nt,l,o,Wr,qr]}class gc extends je{constructor(e){super(),qe(this,e,dc,uc,Re,{},null,[-1,-1,-1,-1,-1,-1,-1])}}new gc({target:document.getElementById("app")});
