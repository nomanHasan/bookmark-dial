var Kr=Object.defineProperty;var Yr=(n,e,t)=>e in n?Kr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var cl=(n,e,t)=>Yr(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();function ee(){}const Ln=n=>n;function ri(n){return n()}function Rl(){return Object.create(null)}function Ue(n){n.forEach(ri)}function je(n){return typeof n=="function"}function Ge(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Vn;function Gl(n,e){return n===e?!0:(Vn||(Vn=document.createElement("a")),Vn.href=e,n===Vn.href)}function Qr(n){return Object.keys(n).length===0}function si(n,...e){if(n==null){for(const l of e)l(void 0);return ee}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function fn(n){let e;return si(n,t=>e=t)(),e}function ai(n,e,t){n.$$.on_destroy.push(si(e,t))}function Wl(n){const e=typeof n=="string"&&n.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[n,"px"]}const ci=typeof window<"u";let ll=ci?()=>window.performance.now():()=>Date.now(),yl=ci?n=>requestAnimationFrame(n):ee;const cn=new Set;function ui(n){cn.forEach(e=>{e.c(n)||(cn.delete(e),e.f())}),cn.size!==0&&yl(ui)}function ol(n){let e;return cn.size===0&&yl(ui),{promise:new Promise(t=>{cn.add(e={c:n,f:t})}),abort(){cn.delete(e)}}}function g(n,e){n.appendChild(e)}function fi(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function Xr(n){const e=T("style");return e.textContent="/* empty */",Zr(fi(n),e),e.sheet}function Zr(n,e){return g(n.head||n,e),e.sheet}function G(n,e,t){n.insertBefore(e,t||null)}function R(n){n.parentNode&&n.parentNode.removeChild(n)}function Jr(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function T(n){return document.createElement(n)}function at(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function fe(n){return document.createTextNode(n)}function U(){return fe(" ")}function Xe(){return fe("")}function V(n,e,t,l){return n.addEventListener(e,t,l),()=>n.removeEventListener(e,t,l)}function xr(n){return function(e){return e.preventDefault(),n.call(this,e)}}function $r(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function c(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function es(n){return Array.from(n.childNodes)}function Te(n,e){e=""+e,n.data!==e&&(n.data=e)}function an(n,e){n.value=e??""}function St(n,e,t,l){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,"")}function ql(n,e,t){for(let l=0;l<n.options.length;l+=1){const o=n.options[l];if(o.__value===e){o.selected=!0;return}}(!t||e!==void 0)&&(n.selectedIndex=-1)}function ts(n){const e=n.querySelector(":checked");return e&&e.__value}function he(n,e,t){n.classList.toggle(e,!!t)}function di(n,e,{bubbles:t=!1,cancelable:l=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:l})}const tl=new Map;let nl=0;function ns(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function ls(n,e){const t={stylesheet:Xr(e),rules:{}};return tl.set(n,t),t}function Fn(n,e,t,l,o,i,r,s=0){const a=16.666/l;let u=`{
`;for(let _=0;_<=1;_+=a){const w=e+(t-e)*i(_);u+=_*100+`%{${r(w,1-w)}}
`}const f=u+`100% {${r(t,1-t)}}
}`,b=`__svelte_${ns(f)}_${s}`,h=fi(n),{stylesheet:p,rules:S}=tl.get(h)||ls(h,n);S[b]||(S[b]=!0,p.insertRule(`@keyframes ${b} ${f}`,p.cssRules.length));const m=n.style.animation||"";return n.style.animation=`${m?`${m}, `:""}${b} ${l}ms linear ${o}ms 1 both`,nl+=1,b}function Mn(n,e){const t=(n.style.animation||"").split(", "),l=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),o=t.length-l.length;o&&(n.style.animation=l.join(", "),nl-=o,nl||os())}function os(){yl(()=>{nl||(tl.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&R(e)}),tl.clear())})}function is(n,e,t,l){if(!e)return ee;const o=n.getBoundingClientRect();if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom)return ee;const{delay:i=0,duration:r=300,easing:s=Ln,start:a=ll()+i,end:u=a+r,tick:f=ee,css:b}=t(n,{from:e,to:o},l);let h=!0,p=!1,S;function m(){b&&(S=Fn(n,0,1,r,i,s,b)),i||(p=!0)}function _(){b&&Mn(n,S),h=!1}return ol(w=>{if(!p&&w>=a&&(p=!0),p&&w>=u&&(f(1,0),_()),!h)return!1;if(p){const v=w-a,F=0+1*s(v/r);f(F,1-F)}return!0}),m(),f(0,1),_}function rs(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:l}=e,o=n.getBoundingClientRect();n.style.position="absolute",n.style.width=t,n.style.height=l,gi(n,o)}}function gi(n,e){const t=n.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const l=getComputedStyle(n),o=l.transform==="none"?"":l.transform;n.style.transform=`${o} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}let An;function En(n){An=n}function hi(){if(!An)throw new Error("Function called outside component initialization");return An}function mi(n){hi().$$.on_mount.push(n)}function bi(){const n=hi();return(e,t,{cancelable:l=!1}={})=>{const o=n.$$.callbacks[e];if(o){const i=di(e,t,{cancelable:l});return o.slice().forEach(r=>{r.call(n,i)}),!i.defaultPrevented}return!0}}function ss(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(l=>l.call(this,e))}const sn=[],ct=[];let un=[];const jl=[],ki=Promise.resolve();let ml=!1;function _i(){ml||(ml=!0,ki.then(pi))}function Cl(){return _i(),ki}function Ct(n){un.push(n)}const ul=new Set;let ln=0;function pi(){if(ln!==0)return;const n=An;do{try{for(;ln<sn.length;){const e=sn[ln];ln++,En(e),as(e.$$)}}catch(e){throw sn.length=0,ln=0,e}for(En(null),sn.length=0,ln=0;ct.length;)ct.pop()();for(let e=0;e<un.length;e+=1){const t=un[e];ul.has(t)||(ul.add(t),t())}un.length=0}while(sn.length);for(;jl.length;)jl.pop()();ml=!1,ul.clear(),En(n)}function as(n){if(n.fragment!==null){n.update(),Ue(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ct)}}function cs(n){const e=[],t=[];un.forEach(l=>n.indexOf(l)===-1?e.push(l):t.push(l)),t.forEach(l=>l()),un=e}let Tn;function Tl(){return Tn||(Tn=Promise.resolve(),Tn.then(()=>{Tn=null})),Tn}function Zt(n,e,t){n.dispatchEvent(di(`${e?"intro":"outro"}${t}`))}const Jn=new Set;let yt;function He(){yt={r:0,c:[],p:yt}}function Re(){yt.r||Ue(yt.c),yt=yt.p}function j(n,e){n&&n.i&&(Jn.delete(n),n.i(e))}function Y(n,e,t,l){if(n&&n.o){if(Jn.has(n))return;Jn.add(n),yt.c.push(()=>{Jn.delete(n),l&&(t&&n.d(1),l())}),n.o(e)}else l&&l()}const vl={duration:0};function us(n,e,t){const l={direction:"in"};let o=e(n,t,l),i=!1,r,s,a=0;function u(){r&&Mn(n,r)}function f(){const{delay:h=0,duration:p=300,easing:S=Ln,tick:m=ee,css:_}=o||vl;_&&(r=Fn(n,0,1,p,h,S,_,a++)),m(0,1);const w=ll()+h,v=w+p;s&&s.abort(),i=!0,Ct(()=>Zt(n,!0,"start")),s=ol(F=>{if(i){if(F>=v)return m(1,0),Zt(n,!0,"end"),u(),i=!1;if(F>=w){const P=S((F-w)/p);m(P,1-P)}}return i})}let b=!1;return{start(){b||(b=!0,Mn(n),je(o)?(o=o(l),Tl().then(f)):f())},invalidate(){b=!1},end(){i&&(u(),i=!1)}}}function fs(n,e,t){const l={direction:"out"};let o=e(n,t,l),i=!0,r;const s=yt;s.r+=1;let a;function u(){const{delay:f=0,duration:b=300,easing:h=Ln,tick:p=ee,css:S}=o||vl;S&&(r=Fn(n,1,0,b,f,h,S));const m=ll()+f,_=m+b;Ct(()=>Zt(n,!1,"start")),"inert"in n&&(a=n.inert,n.inert=!0),ol(w=>{if(i){if(w>=_)return p(0,1),Zt(n,!1,"end"),--s.r||Ue(s.c),!1;if(w>=m){const v=h((w-m)/b);p(1-v,v)}}return i})}return je(o)?Tl().then(()=>{o=o(l),u()}):u(),{end(f){f&&"inert"in n&&(n.inert=a),f&&o.tick&&o.tick(1,0),i&&(r&&Mn(n,r),i=!1)}}}function Kn(n,e,t,l){let i=e(n,t,{direction:"both"}),r=l?0:1,s=null,a=null,u=null,f;function b(){u&&Mn(n,u)}function h(S,m){const _=S.b-r;return m*=Math.abs(_),{a:r,b:S.b,d:_,duration:m,start:S.start,end:S.start+m,group:S.group}}function p(S){const{delay:m=0,duration:_=300,easing:w=Ln,tick:v=ee,css:F}=i||vl,P={start:ll()+m,b:S};S||(P.group=yt,yt.r+=1),"inert"in n&&(S?f!==void 0&&(n.inert=f):(f=n.inert,n.inert=!0)),s||a?a=P:(F&&(b(),u=Fn(n,r,S,_,m,w,F)),S&&v(0,1),s=h(P,_),Ct(()=>Zt(n,S,"start")),ol(A=>{if(a&&A>a.start&&(s=h(a,_),a=null,Zt(n,s.b,"start"),F&&(b(),u=Fn(n,r,s.b,s.duration,0,w,i.css))),s){if(A>=s.end)v(r=s.b,1-r),Zt(n,s.b,"end"),a||(s.b?b():--s.group.r||Ue(s.group.c)),s=null;else if(A>=s.start){const z=A-s.start;r=s.a+s.d*w(z/s.duration),v(r,1-r)}}return!!(s||a)}))}return{run(S){je(i)?Tl().then(()=>{i=i({direction:S?"in":"out"}),p(S)}):p(S)},end(){b(),s=a=null}}}function pe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function Jt(n,e){n.d(1),e.delete(n.key)}function xt(n,e){Y(n,1,1,()=>{e.delete(n.key)})}function ds(n,e){n.f(),xt(n,e)}function lt(n,e,t,l,o,i,r,s,a,u,f,b){let h=n.length,p=i.length,S=h;const m={};for(;S--;)m[n[S].key]=S;const _=[],w=new Map,v=new Map,F=[];for(S=p;S--;){const I=b(o,i,S),E=t(I);let D=r.get(E);D?F.push(()=>D.p(I,e)):(D=u(E,I),D.c()),w.set(E,_[S]=D),E in m&&v.set(E,Math.abs(S-m[E]))}const P=new Set,A=new Set;function z(I){j(I,1),I.m(s,f),r.set(I.key,I),f=I.first,p--}for(;h&&p;){const I=_[p-1],E=n[h-1],D=I.key,$=E.key;I===E?(f=I.first,h--,p--):w.has($)?!r.has(D)||P.has(D)?z(I):A.has($)?h--:v.get(D)>v.get($)?(A.add(D),z(I)):(P.add($),h--):(a(E,r),h--)}for(;h--;){const I=n[h];w.has(I.key)||a(I,r)}for(;p;)z(_[p-1]);return Ue(F),_}function me(n){n&&n.c()}function de(n,e,t){const{fragment:l,after_update:o}=n.$$;l&&l.m(e,t),Ct(()=>{const i=n.$$.on_mount.map(ri).filter(je);n.$$.on_destroy?n.$$.on_destroy.push(...i):Ue(i),n.$$.on_mount=[]}),o.forEach(Ct)}function ge(n,e){const t=n.$$;t.fragment!==null&&(cs(t.after_update),Ue(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function gs(n,e){n.$$.dirty[0]===-1&&(sn.push(n),_i(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Ve(n,e,t,l,o,i,r=null,s=[-1]){const a=An;En(n);const u=n.$$={fragment:null,ctx:[],props:i,update:ee,not_equal:o,bound:Rl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Rl(),dirty:s,skip_bound:!1,root:e.target||a.$$.root};r&&r(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(b,h,...p)=>{const S=p.length?p[0]:h;return u.ctx&&o(u.ctx[b],u.ctx[b]=S)&&(!u.skip_bound&&u.bound[b]&&u.bound[b](S),f&&gs(n,b)),h}):[],u.update(),f=!0,Ue(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const b=es(e.target);u.fragment&&u.fragment.l(b),b.forEach(R)}else u.fragment&&u.fragment.c();e.intro&&j(n.$$.fragment),de(n,e.target,e.anchor),pi()}En(a)}class Ke{constructor(){cl(this,"$$");cl(this,"$$set")}$destroy(){ge(this,1),this.$destroy=ee}$on(e,t){if(!je(t))return ee;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(t),()=>{const o=l.indexOf(t);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Qr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const hs="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(hs);const on=[];function ms(n,e=ee){let t;const l=new Set;function o(s){if(Ge(n,s)&&(n=s,t)){const a=!on.length;for(const u of l)u[1](),on.push(u,n);if(a){for(let u=0;u<on.length;u+=2)on[u][0](on[u+1]);on.length=0}}}function i(s){o(s(n))}function r(s,a=ee){const u=[s,a];return l.add(u),l.size===1&&(t=e(o,i)||ee),s(n),()=>{l.delete(u),l.size===0&&t&&(t(),t=null)}}return{set:o,update:i,subscribe:r}}const bs={nodesById:{},rootIds:[]},ot=ms(bs),wi={subscribe:ot.subscribe};function Il(n,{includeChildren:e=!1}={}){const t=Array.isArray(n.children),l=t?[...n.children]:[],o=e?l.sort((s,a)=>(s.index??0)-(a.index??0)):[],r=l.filter(s=>!s.url).length>0;return{id:n.id,parentId:n.parentId??null,title:n.title??"",url:n.url??null,index:typeof n.index=="number"?n.index:0,isFolder:!n.url,childrenIds:e?o.map(s=>s.id):[],childrenLoaded:e,hasChildren:!n.url&&(e||t?r:!0)}}function Si(n){ot.update(e=>{const t={...e.nodesById};let l=[...e.rootIds];for(const o of n){const i=t[o.id];t[o.id]=i?{...i,...o}:o,!o.parentId&&!l.includes(o.id)&&l.push(o.id)}return l.sort((o,i)=>{const r=t[o],s=t[i];return((r==null?void 0:r.index)??0)-((s==null?void 0:s.index)??0)}),{...e,nodesById:t,rootIds:l}})}function bl(n,e,t){ot.update(l=>{const o={...l.nodesById},i=o[n];if(!i)return l;const r=Array.from(new Set(e));r.sort((a,u)=>{const f=o[a],b=o[u];return((f==null?void 0:f.index)??0)-((b==null?void 0:b.index)??0)});const s=r.some(a=>{var u;return(u=o[a])==null?void 0:u.isFolder});return o[n]={...i,childrenIds:r,childrenLoaded:t?!0:i.childrenLoaded,hasChildren:s},{...l,nodesById:o}})}async function ks(n){const e=await n.bookmarks.getTree(),t=Array.isArray(e)?e[0]:null,o=((t==null?void 0:t.children)??[]).map(i=>Il(i,{includeChildren:!1}));return ot.set({nodesById:Object.fromEntries(o.map(i=>[i.id,i])),rootIds:o.map(i=>i.id)}),o.map(i=>i.id)}async function _s(n){const e=await n.bookmarks.getTree(),t=Array.isArray(e)?e[0]:null;if(!t)return[];const l=[],o=[];function i(s,a=!1){const b=(Array.isArray(s.children)?[...s.children]:[]).sort((S,m)=>(S.index??0)-(m.index??0)),h=b.filter(S=>!S.url),p={id:s.id,parentId:s.parentId??null,title:s.title??"",url:s.url??null,index:typeof s.index=="number"?s.index:0,isFolder:!s.url,childrenIds:b.map(S=>S.id),childrenLoaded:!0,hasChildren:h.length>0};s.url||(l.push(p),a&&o.push(s.id));for(const S of h)i(S,!1)}const r=t.children??[];for(const s of r)i(s,!0);return ot.set({nodesById:Object.fromEntries(l.map(s=>[s.id,s])),rootIds:o}),o}function Wt(){return fn(ot)}function yi(n){return fn(ot).nodesById[n]}async function vn(n,e){const t=await n.bookmarks.getSubTree(e),l=Array.isArray(t)?t[0]:null;if(!l)return{folderIds:[]};const o=[l],i=[],r=[];for(;o.length;){const s=o.shift(),a=Array.isArray(s.children),u=Il(s,{includeChildren:a});i.push(u),s.url||r.push(s.id),a&&o.push(...s.children)}return Si(i),i.forEach(s=>{if(s.isFolder&&bl(s.id,s.childrenIds,!0),s.parentId){const u=fn(ot).nodesById[s.parentId];if(u){const f=u.childrenIds?[...u.childrenIds]:[];f.push(s.id),bl(s.parentId,f,u.childrenLoaded)}}}),{folderIds:r}}function xn(n){const e=fn(ot),t=[];let l=e.nodesById[n];for(;l&&(l.title&&t.unshift(l.title),!!l.parentId);)l=e.nodesById[l.parentId];return t}function ps(n){const e=Il(n,{includeChildren:!1});if(Si([e]),e.parentId){const t=yi(e.parentId),l=t!=null&&t.childrenIds?[...t.childrenIds]:[];l.splice(e.index??l.length,0,e.id),bl(e.parentId,l,t==null?void 0:t.childrenLoaded)}}function ws(n,e){ot.update(t=>{const l=t.nodesById[n];if(!l)return t;const o={...t.nodesById,[n]:{...l,...e}};return{...t,nodesById:o}})}function Ss(n,{parentId:e,oldParentId:t,index:l}){ot.update(o=>{const i={...o.nodesById},r=i[n];if(!r)return o;const s={...r,parentId:e,index:typeof l=="number"?l:r.index};if(i[n]=s,t&&i[t]){const a=i[t],u=(a.childrenIds??[]).filter(b=>b!==n),f=u.some(b=>{var h;return(h=i[b])==null?void 0:h.isFolder});i[t]={...a,childrenIds:u,hasChildren:f}}if(e&&i[e]){const a=i[e],u=[...a.childrenIds??[]];u.includes(n)||u.splice(l??u.length,0,n);const f=u.some(b=>{var h;return(h=i[b])==null?void 0:h.isFolder});i[e]={...a,childrenIds:u,hasChildren:f}}return{...o,nodesById:i}})}function ys(n,{parentId:e}){ot.update(t=>{var s;const l={...t.nodesById},o=new Set([n]),i=[n];for(;i.length;){const a=i.pop(),u=l[a];u&&(s=u.childrenIds)!=null&&s.length&&u.childrenIds.forEach(f=>{o.has(f)||(o.add(f),i.push(f))})}o.forEach(a=>{delete l[a]});let r=t.rootIds;if(r.includes(n)&&(r=r.filter(a=>a!==n)),e&&l[e]){const a=l[e],u=(a.childrenIds??[]).filter(b=>b!==n),f=u.some(b=>{var h;return(h=l[b])==null?void 0:h.isFolder});l[e]={...a,childrenIds:u,hasChildren:f}}return{...t,nodesById:l,rootIds:r}})}function Yn(n){var o;const e=fn(ot),t=[],l=[n];for(;l.length;){const i=l.pop(),r=e.nodesById[i];r&&r.isFolder&&(t.push(i),(o=r.childrenIds)!=null&&o.length&&r.childrenIds.forEach(s=>{const a=e.nodesById[s];a!=null&&a.isFolder&&l.push(s)}))}return t}function Cs(){const n=fn(ot);return Object.values(n.nodesById).filter(e=>e.isFolder).map(e=>({id:e.id,title:e.title??"",path:xn(e.id)}))}function Vl(n,e,t){const l=n.slice();return l[26]=e[t],l}function Kl(n){let e,t,l,o,i,r,s,a,u,f,b,h,p,S=(n[12].title||"Untitled folder")+"",m,_,w,v,F,P,A,z=n[11]&&n[15]&&Yl(n);return{c(){var I;e=T("li"),t=T("div"),l=T("button"),o=at("svg"),i=at("path"),u=U(),f=T("label"),b=T("input"),h=U(),p=T("span"),m=fe(S),w=U(),z&&z.c(),c(i,"d","M6 4.5 10 8l-4 3.5"),c(i,"fill","none"),c(i,"stroke","currentColor"),c(i,"stroke-width","1.6"),c(i,"stroke-linecap","round"),c(i,"stroke-linejoin","round"),c(o,"viewBox","0 0 16 16"),c(o,"aria-hidden","true"),c(o,"focusable","false"),c(l,"type","button"),c(l,"class","folder-node__expander svelte-ux2jgn"),c(l,"aria-hidden",r=!n[11]),c(l,"aria-label",s=n[15]?"Collapse folder":"Expand folder"),l.disabled=a=!n[11],he(l,"hidden",!n[11]),c(b,"type","checkbox"),c(b,"class","folder-node__checkbox svelte-ux2jgn"),c(p,"class","folder-node__title svelte-ux2jgn"),c(p,"title",_=n[12].title||"Untitled folder"),c(f,"class","folder-node__label svelte-ux2jgn"),c(t,"class","folder-node__row svelte-ux2jgn"),c(t,"style",n[16]),c(e,"class","folder-node svelte-ux2jgn"),c(e,"data-expanded",n[15]),c(e,"data-depth",n[1]),c(e,"data-match",v=((I=n[5])==null?void 0:I.has(n[0]))??!1)},m(I,E){G(I,e,E),g(e,t),g(t,l),g(l,o),g(o,i),g(t,u),g(t,f),g(f,b),n[24](b),g(f,h),g(f,p),g(p,m),g(e,w),z&&z.m(e,null),F=!0,P||(A=[V(l,"click",n[17]),V(b,"change",n[18])],P=!0)},p(I,E){var D;(!F||E&2048&&r!==(r=!I[11]))&&c(l,"aria-hidden",r),(!F||E&32768&&s!==(s=I[15]?"Collapse folder":"Expand folder"))&&c(l,"aria-label",s),(!F||E&2048&&a!==(a=!I[11]))&&(l.disabled=a),(!F||E&2048)&&he(l,"hidden",!I[11]),(!F||E&4096)&&S!==(S=(I[12].title||"Untitled folder")+"")&&Te(m,S),(!F||E&4096&&_!==(_=I[12].title||"Untitled folder"))&&c(p,"title",_),I[11]&&I[15]?z?(z.p(I,E),E&34816&&j(z,1)):(z=Yl(I),z.c(),j(z,1),z.m(e,null)):z&&(He(),Y(z,1,1,()=>{z=null}),Re()),(!F||E&32768)&&c(e,"data-expanded",I[15]),(!F||E&2)&&c(e,"data-depth",I[1]),(!F||E&33&&v!==(v=((D=I[5])==null?void 0:D.has(I[0]))??!1))&&c(e,"data-match",v)},i(I){F||(j(z),F=!0)},o(I){Y(z),F=!1},d(I){I&&R(e),n[24](null),z&&z.d(),P=!1,Ue(A)}}}function Yl(n){let e,t=[],l=new Map,o,i=pe(n[13]);const r=s=>s[26];for(let s=0;s<i.length;s+=1){let a=Vl(n,i,s),u=r(a);l.set(u,t[s]=Ql(u,a))}return{c(){e=T("ul");for(let s=0;s<t.length;s+=1)t[s].c();c(e,"class","folder-node__children svelte-ux2jgn")},m(s,a){G(s,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);o=!0},p(s,a){a&9214&&(i=pe(s[13]),He(),t=lt(t,a,r,1,s,i,l,e,xt,Ql,null,Vl),Re())},i(s){if(!o){for(let a=0;a<i.length;a+=1)j(t[a]);o=!0}},o(s){for(let a=0;a<t.length;a+=1)Y(t[a]);o=!1},d(s){s&&R(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Ql(n,e){let t,l,o;return l=new Ci({props:{nodeId:e[26],depth:e[1]+1,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[5],selectedIds:e[6],toggleSelection:e[7],toggleExpansion:e[8],getCheckboxState:e[9]}}),{key:n,first:null,c(){t=Xe(),me(l.$$.fragment),this.first=t},m(i,r){G(i,t,r),de(l,i,r),o=!0},p(i,r){e=i;const s={};r&8192&&(s.nodeId=e[26]),r&2&&(s.depth=e[1]+1),r&4&&(s.expandedIds=e[2]),r&8&&(s.loadingIds=e[3]),r&16&&(s.visibleIds=e[4]),r&32&&(s.searchMatches=e[5]),r&64&&(s.selectedIds=e[6]),r&128&&(s.toggleSelection=e[7]),r&256&&(s.toggleExpansion=e[8]),r&512&&(s.getCheckboxState=e[9]),l.$set(s)},i(i){o||(j(l.$$.fragment,i),o=!0)},o(i){Y(l.$$.fragment,i),o=!1},d(i){i&&R(t),ge(l,i)}}}function Ts(n){let e,t,l=n[14]&&Kl(n);return{c(){l&&l.c(),e=Xe()},m(o,i){l&&l.m(o,i),G(o,e,i),t=!0},p(o,[i]){o[14]?l?(l.p(o,i),i&16384&&j(l,1)):(l=Kl(o),l.c(),j(l,1),l.m(e.parentNode,e)):l&&(He(),Y(l,1,1,()=>{l=null}),Re())},i(o){t||(j(l),t=!0)},o(o){Y(l),t=!1},d(o){o&&R(e),l&&l.d(o)}}}function vs(n,e,t){let l,o,i,r,s,a,u,f,b,h;ai(n,wi,K=>t(23,h=K));let{nodeId:p}=e,{depth:S=0}=e,{expandedIds:m}=e,{loadingIds:_}=e,{visibleIds:w}=e,{searchMatches:v}=e,{selectedIds:F}=e,{toggleSelection:P}=e,{toggleExpansion:A}=e,{getCheckboxState:z}=e,I;const E=`--depth: ${S}`;function D(K){K.stopPropagation(),s&&(A==null||A(p))}function $(K){K.stopPropagation(),P==null||P(p)}function X(K){ct[K?"unshift":"push"](()=>{I=K,t(10,I),t(21,f),t(9,z),t(6,F),t(0,p)})}return n.$$set=K=>{"nodeId"in K&&t(0,p=K.nodeId),"depth"in K&&t(1,S=K.depth),"expandedIds"in K&&t(2,m=K.expandedIds),"loadingIds"in K&&t(3,_=K.loadingIds),"visibleIds"in K&&t(4,w=K.visibleIds),"searchMatches"in K&&t(5,v=K.searchMatches),"selectedIds"in K&&t(6,F=K.selectedIds),"toggleSelection"in K&&t(7,P=K.toggleSelection),"toggleExpansion"in K&&t(8,A=K.toggleExpansion),"getCheckboxState"in K&&t(9,z=K.getCheckboxState)},n.$$.update=()=>{var K,J;n.$$.dirty&8388608&&t(22,l=h),n.$$.dirty&4194305&&t(12,o=(K=l==null?void 0:l.nodesById)==null?void 0:K[p]),n.$$.dirty&4096&&t(20,i=(o==null?void 0:o.isFolder)??!1),n.$$.dirty&4198400&&t(13,r=((J=o==null?void 0:o.childrenIds)==null?void 0:J.filter(le=>{var N;const ue=(N=l==null?void 0:l.nodesById)==null?void 0:N[le];return ue==null?void 0:ue.isFolder}))??[]),n.$$.dirty&1056768&&t(11,s=i&&r.length>0),n.$$.dirty&2053&&t(15,a=s&&(m==null?void 0:m.has(p))),n.$$.dirty&9&&(_==null||_.has(p)),n.$$.dirty&17&&t(19,u=!w||w.has(p)),n.$$.dirty&577&&t(21,f=z&&F?z(p):"none"),n.$$.dirty&2098176&&I&&(f==="partial"?(t(10,I.indeterminate=!0,I),t(10,I.checked=!1,I)):(t(10,I.indeterminate=!1,I),t(10,I.checked=f==="selected",I))),n.$$.dirty&1576960&&t(14,b=!!(o&&i&&u))},[p,S,m,_,w,v,F,P,A,z,I,s,o,r,b,a,E,D,$,u,i,f,l,h,X]}class Ci extends Ke{constructor(e){super(),Ve(this,e,vs,Ts,Ge,{nodeId:0,depth:1,expandedIds:2,loadingIds:3,visibleIds:4,searchMatches:5,selectedIds:6,toggleSelection:7,toggleExpansion:8,getCheckboxState:9})}}function Xl(n,e,t){const l=n.slice();return l[22]=e[t],l}function Zl(n,e,t){const l=n.slice();return l[25]=e[t],l}function Jl(n){let e,t,l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v,F,P,A,z,I,E,D,$,X=n[9]===1?"":"s",K,J,le,ue,N,Q,Z,te,ce=n[10]===1?"":"s",be,Ze,B,M,ke,Ee,ne,Ce,C,ve,H;const rt=[Bs,Is],Fe=[];function Me(ze,Se){return ze[1].length===0?0:1}p=Me(n),S=Fe[p]=rt[p](n);let ye=n[9]>0&&$l(n);function ut(ze,Se){return ze[8].length===0?Es:Ds}let Ye=ut(n),We=Ye(n);return{c(){e=T("div"),t=T("section"),l=T("header"),o=T("div"),o.innerHTML='<h2 id="folder-modal-title">Select bookmark folders</h2> <p class="folder-modal__hint svelte-gn1lpb">Choose one or more folders to show in your new tab. Selecting a folder includes all of its subfolders.</p>',i=U(),r=T("button"),r.textContent="√ó",s=U(),a=T("div"),u=T("input"),f=U(),b=T("div"),h=T("div"),S.c(),m=U(),_=T("aside"),w=T("header"),v=T("h3"),v.textContent="Selected folders",F=U(),ye&&ye.c(),P=U(),We.c(),A=U(),z=T("footer"),I=T("div"),E=T("span"),D=fe(n[9]),$=fe(" folder"),K=fe(X),J=fe(" selected"),le=U(),ue=T("span"),ue.textContent="‚Ä¢",N=U(),Q=T("span"),Z=fe(n[10]),te=fe(" bookmark"),be=fe(ce),Ze=U(),B=T("div"),M=T("button"),M.textContent="Cancel",ke=U(),Ee=T("button"),ne=fe("Confirm selection"),c(r,"type","button"),c(r,"class","folder-modal__close svelte-gn1lpb"),c(r,"aria-label","Close"),c(l,"class","folder-modal__header svelte-gn1lpb"),c(u,"type","search"),c(u,"placeholder","Search folders"),u.value=n[5],c(u,"class","svelte-gn1lpb"),c(a,"class","folder-modal__search svelte-gn1lpb"),c(h,"class","folder-modal__tree svelte-gn1lpb"),c(w,"class","svelte-gn1lpb"),c(_,"class","folder-modal__summary svelte-gn1lpb"),c(b,"class","folder-modal__body svelte-gn1lpb"),c(ue,"aria-hidden","true"),c(I,"class","folder-modal__totals svelte-gn1lpb"),c(M,"type","button"),c(M,"class","ghost-button svelte-gn1lpb"),c(Ee,"type","button"),c(Ee,"class","primary-button svelte-gn1lpb"),Ee.disabled=Ce=n[9]===0,c(B,"class","folder-modal__actions svelte-gn1lpb"),c(z,"class","folder-modal__footer svelte-gn1lpb"),c(t,"class","folder-modal svelte-gn1lpb"),c(t,"role","dialog"),c(t,"aria-modal","true"),c(t,"aria-labelledby","folder-modal-title"),c(e,"class","modal-overlay svelte-gn1lpb"),c(e,"role","presentation")},m(ze,Se){G(ze,e,Se),g(e,t),g(t,l),g(l,o),g(l,i),g(l,r),g(t,s),g(t,a),g(a,u),n[21](u),g(t,f),g(t,b),g(b,h),Fe[p].m(h,null),g(b,m),g(b,_),g(_,w),g(w,v),g(w,F),ye&&ye.m(w,null),g(_,P),We.m(_,null),g(t,A),g(t,z),g(z,I),g(I,E),g(E,D),g(E,$),g(E,K),g(E,J),g(I,le),g(I,ue),g(I,N),g(I,Q),g(Q,Z),g(Q,te),g(Q,be),g(z,Ze),g(z,B),g(B,M),g(B,ke),g(B,Ee),g(Ee,ne),C=!0,ve||(H=[V(r,"click",function(){je(n[14])&&n[14].apply(this,arguments)}),V(u,"input",n[19]),V(M,"click",function(){je(n[14])&&n[14].apply(this,arguments)}),V(Ee,"click",function(){je(n[15])&&n[15].apply(this,arguments)}),V(e,"click",n[18])],ve=!0)},p(ze,Se){n=ze,(!C||Se&32&&u.value!==n[5])&&(u.value=n[5]);let tt=p;p=Me(n),p===tt?Fe[p].p(n,Se):(He(),Y(Fe[tt],1,1,()=>{Fe[tt]=null}),Re(),S=Fe[p],S?S.p(n,Se):(S=Fe[p]=rt[p](n),S.c()),j(S,1),S.m(h,null)),n[9]>0?ye?ye.p(n,Se):(ye=$l(n),ye.c(),ye.m(w,null)):ye&&(ye.d(1),ye=null),Ye===(Ye=ut(n))&&We?We.p(n,Se):(We.d(1),We=Ye(n),We&&(We.c(),We.m(_,null))),(!C||Se&512)&&Te(D,n[9]),(!C||Se&512)&&X!==(X=n[9]===1?"":"s")&&Te(K,X),(!C||Se&1024)&&Te(Z,n[10]),(!C||Se&1024)&&ce!==(ce=n[10]===1?"":"s")&&Te(be,ce),(!C||Se&512&&Ce!==(Ce=n[9]===0))&&(Ee.disabled=Ce)},i(ze){C||(j(S),C=!0)},o(ze){Y(S),C=!1},d(ze){ze&&R(e),n[21](null),Fe[p].d(),ye&&ye.d(),We.d(),ve=!1,Ue(H)}}}function Is(n){let e,t=[],l=new Map,o,i=pe(n[1]);const r=s=>s[25];for(let s=0;s<i.length;s+=1){let a=Zl(n,i,s),u=r(a);l.set(u,t[s]=xl(u,a))}return{c(){e=T("ul");for(let s=0;s<t.length;s+=1)t[s].c();c(e,"class","folder-tree svelte-gn1lpb")},m(s,a){G(s,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);o=!0},p(s,a){a&14558&&(i=pe(s[1]),He(),t=lt(t,a,r,1,s,i,l,e,xt,xl,null,Zl),Re())},i(s){if(!o){for(let a=0;a<i.length;a+=1)j(t[a]);o=!0}},o(s){for(let a=0;a<t.length;a+=1)Y(t[a]);o=!1},d(s){s&&R(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Bs(n){let e;return{c(){e=T("p"),e.textContent="No bookmark folders available.",c(e,"class","folder-modal__empty svelte-gn1lpb")},m(t,l){G(t,e,l)},p:ee,i:ee,o:ee,d(t){t&&R(e)}}}function xl(n,e){let t,l,o;return l=new Ci({props:{nodeId:e[25],depth:0,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[6],selectedIds:e[7],toggleSelection:e[11],toggleExpansion:e[12],getCheckboxState:e[13]}}),{key:n,first:null,c(){t=Xe(),me(l.$$.fragment),this.first=t},m(i,r){G(i,t,r),de(l,i,r),o=!0},p(i,r){e=i;const s={};r&2&&(s.nodeId=e[25]),r&4&&(s.expandedIds=e[2]),r&8&&(s.loadingIds=e[3]),r&16&&(s.visibleIds=e[4]),r&64&&(s.searchMatches=e[6]),r&128&&(s.selectedIds=e[7]),r&2048&&(s.toggleSelection=e[11]),r&4096&&(s.toggleExpansion=e[12]),r&8192&&(s.getCheckboxState=e[13]),l.$set(s)},i(i){o||(j(l.$$.fragment,i),o=!0)},o(i){Y(l.$$.fragment,i),o=!1},d(i){i&&R(t),ge(l,i)}}}function $l(n){let e,t,l;return{c(){e=T("button"),e.textContent="Clear all",c(e,"type","button"),c(e,"class","summary-clear svelte-gn1lpb")},m(o,i){G(o,e,i),t||(l=V(e,"click",function(){je(n[16])&&n[16].apply(this,arguments)}),t=!0)},p(o,i){n=o},d(o){o&&R(e),t=!1,l()}}}function Ds(n){let e,t=[],l=new Map,o=pe(n[8]);const i=r=>r[22].id;for(let r=0;r<o.length;r+=1){let s=Xl(n,o,r),a=i(s);l.set(a,t[r]=to(a,s))}return{c(){e=T("ul");for(let r=0;r<t.length;r+=1)t[r].c();c(e,"class","folder-modal__selection-list svelte-gn1lpb")},m(r,s){G(r,e,s);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,s){s&256&&(o=pe(r[8]),t=lt(t,s,i,1,r,o,l,e,Jt,to,null,Xl))},d(r){r&&R(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function Es(n){let e;return{c(){e=T("p"),e.textContent="Pick folders to see them here.",c(e,"class","folder-modal__empty svelte-gn1lpb")},m(t,l){G(t,e,l)},p:ee,d(t){t&&R(e)}}}function eo(n){let e,t=n[22].count+"",l;return{c(){e=T("span"),l=fe(t),c(e,"class","selection-chip__count svelte-gn1lpb")},m(o,i){G(o,e,i),g(e,l)},p(o,i){i&256&&t!==(t=o[22].count+"")&&Te(l,t)},d(o){o&&R(e)}}}function to(n,e){let t,l,o,i=e[22].label+"",r,s,a,u,f=typeof e[22].count=="number"&&eo(e);return{key:n,first:null,c(){t=T("li"),l=T("span"),o=T("span"),r=fe(i),s=U(),f&&f.c(),u=U(),c(o,"class","selection-chip__label svelte-gn1lpb"),c(l,"class","selection-chip svelte-gn1lpb"),c(l,"title",a=e[22].fullPath),this.first=t},m(b,h){G(b,t,h),g(t,l),g(l,o),g(o,r),g(l,s),f&&f.m(l,null),g(t,u)},p(b,h){e=b,h&256&&i!==(i=e[22].label+"")&&Te(r,i),typeof e[22].count=="number"?f?f.p(e,h):(f=eo(e),f.c(),f.m(l,null)):f&&(f.d(1),f=null),h&256&&a!==(a=e[22].fullPath)&&c(l,"title",a)},d(b){b&&R(t),f&&f.d()}}}function Fs(n){let e,t,l=n[0]&&Jl(n);return{c(){l&&l.c(),e=Xe()},m(o,i){l&&l.m(o,i),G(o,e,i),t=!0},p(o,[i]){o[0]?l?(l.p(o,i),i&1&&j(l,1)):(l=Jl(o),l.c(),j(l,1),l.m(e.parentNode,e)):l&&(He(),Y(l,1,1,()=>{l=null}),Re())},i(o){t||(j(l),t=!0)},o(o){Y(l),t=!1},d(o){o&&R(e),l&&l.d(o)}}}function Ms(n,e,t){let{open:l=!1}=e,{rootIds:o=[]}=e,{expandedIds:i}=e,{loadingIds:r}=e,{visibleIds:s}=e,{searchQuery:a=""}=e,{searchMatches:u}=e,{selectedIds:f}=e,{summary:b=[]}=e,{selectedFolderCount:h=0}=e,{totalBookmarkCount:p=0}=e,{toggleSelection:S}=e,{toggleExpansion:m}=e,{getCheckboxState:_}=e,{onSearchChange:w}=e,{onRequestClose:v}=e,{onConfirmSelection:F}=e,{onClearSelection:P}=e,A;function z(D){D.target===D.currentTarget&&(D.preventDefault(),v==null||v())}function I(D){w==null||w(D.target.value)}function E(D){ct[D?"unshift":"push"](()=>{A=D,t(17,A)})}return n.$$set=D=>{"open"in D&&t(0,l=D.open),"rootIds"in D&&t(1,o=D.rootIds),"expandedIds"in D&&t(2,i=D.expandedIds),"loadingIds"in D&&t(3,r=D.loadingIds),"visibleIds"in D&&t(4,s=D.visibleIds),"searchQuery"in D&&t(5,a=D.searchQuery),"searchMatches"in D&&t(6,u=D.searchMatches),"selectedIds"in D&&t(7,f=D.selectedIds),"summary"in D&&t(8,b=D.summary),"selectedFolderCount"in D&&t(9,h=D.selectedFolderCount),"totalBookmarkCount"in D&&t(10,p=D.totalBookmarkCount),"toggleSelection"in D&&t(11,S=D.toggleSelection),"toggleExpansion"in D&&t(12,m=D.toggleExpansion),"getCheckboxState"in D&&t(13,_=D.getCheckboxState),"onSearchChange"in D&&t(20,w=D.onSearchChange),"onRequestClose"in D&&t(14,v=D.onRequestClose),"onConfirmSelection"in D&&t(15,F=D.onConfirmSelection),"onClearSelection"in D&&t(16,P=D.onClearSelection)},n.$$.update=()=>{if(n.$$.dirty&147457&&l){Cl().then(()=>{A==null||A.focus(),A==null||A.select()});const D=$=>{$.key==="Escape"&&($.preventDefault(),v==null||v())};document.addEventListener("keydown",D,{once:!0})}},[l,o,i,r,s,a,u,f,b,h,p,S,m,_,v,F,P,A,z,I,w,E]}class As extends Ke{constructor(e){super(),Ve(this,e,Ms,Fs,Ge,{open:0,rootIds:1,expandedIds:2,loadingIds:3,visibleIds:4,searchQuery:5,searchMatches:6,selectedIds:7,summary:8,selectedFolderCount:9,totalBookmarkCount:10,toggleSelection:11,toggleExpansion:12,getCheckboxState:13,onSearchChange:20,onRequestClose:14,onConfirmSelection:15,onClearSelection:16})}}function no(n,e,t){const l=n.slice();return l[18]=e[t],l}function lo(n){let e,t,l,o,i,r,s,a,u,f,b,h,p=[],S=new Map,m,_,w,v,F,P,A,z,I,E,D,$,X,K,J,le,ue,N=pe(n[1]);const Q=Z=>Z[18].id;for(let Z=0;Z<N.length;Z+=1){let te=no(n,N,Z),ce=Q(te);S.set(ce,p[Z]=io(ce,te))}return{c(){e=T("div"),t=T("section"),l=T("header"),o=T("h2"),o.textContent="Add New Shortcut",i=U(),r=T("button"),r.textContent="√ó",s=U(),a=T("form"),u=T("div"),f=T("label"),f.innerHTML=`Folder
            <span class="form-hint svelte-1xx9qid">Where to save the shortcut</span>`,b=U(),h=T("select");for(let Z=0;Z<p.length;Z+=1)p[Z].c();m=U(),_=T("div"),w=T("label"),w.innerHTML=`URL
            <span class="form-hint svelte-1xx9qid">The website address</span>`,v=U(),F=T("input"),P=U(),A=T("div"),z=T("label"),z.innerHTML=`Title
            <span class="form-hint svelte-1xx9qid">Display name for the shortcut</span>`,I=U(),E=T("input"),D=U(),$=T("div"),X=T("button"),X.textContent="Cancel",K=U(),J=T("button"),J.textContent="Add Shortcut",c(o,"id","add-shortcut-modal-title"),c(o,"class","svelte-1xx9qid"),c(r,"type","button"),c(r,"class","add-shortcut-modal__close svelte-1xx9qid"),c(r,"aria-label","Close"),c(l,"class","add-shortcut-modal__header svelte-1xx9qid"),c(f,"for","shortcut-folder"),c(f,"class","svelte-1xx9qid"),c(h,"id","shortcut-folder"),h.required=!0,c(h,"class","svelte-1xx9qid"),n[2]===void 0&&Ct(()=>n[14].call(h)),c(u,"class","form-group svelte-1xx9qid"),c(w,"for","shortcut-url"),c(w,"class","svelte-1xx9qid"),c(F,"id","shortcut-url"),c(F,"type","url"),c(F,"placeholder","https://example.com"),F.required=!0,c(F,"class","svelte-1xx9qid"),c(_,"class","form-group svelte-1xx9qid"),c(z,"for","shortcut-title"),c(z,"class","svelte-1xx9qid"),c(E,"id","shortcut-title"),c(E,"type","text"),c(E,"placeholder","Example Site"),E.required=!0,c(E,"class","svelte-1xx9qid"),c(A,"class","form-group svelte-1xx9qid"),c(X,"type","button"),c(X,"class","button button--secondary svelte-1xx9qid"),c(J,"type","submit"),c(J,"class","button button--primary svelte-1xx9qid"),c($,"class","add-shortcut-modal__actions svelte-1xx9qid"),c(a,"class","add-shortcut-modal__form svelte-1xx9qid"),c(t,"class","add-shortcut-modal svelte-1xx9qid"),c(t,"role","dialog"),c(t,"aria-modal","true"),c(t,"aria-labelledby","add-shortcut-modal-title"),c(e,"class","modal-overlay svelte-1xx9qid"),c(e,"role","presentation")},m(Z,te){G(Z,e,te),g(e,t),g(t,l),g(l,o),g(l,i),g(l,r),g(t,s),g(t,a),g(a,u),g(u,f),g(u,b),g(u,h);for(let ce=0;ce<p.length;ce+=1)p[ce]&&p[ce].m(h,null);ql(h,n[2],!0),g(a,m),g(a,_),g(_,w),g(_,v),g(_,F),n[15](F),an(F,n[4]),g(a,P),g(a,A),g(A,z),g(A,I),g(A,E),an(E,n[5]),g(a,D),g(a,$),g($,X),g($,K),g($,J),le||(ue=[V(r,"click",n[7]),V(h,"change",n[14]),V(F,"input",n[16]),V(F,"blur",n[8]),V(E,"input",n[17]),V(X,"click",n[7]),V(a,"submit",n[9]),V(e,"click",n[6])],le=!0)},p(Z,te){te&2&&(N=pe(Z[1]),p=lt(p,te,Q,1,Z,N,S,h,Jt,io,null,no)),te&6&&ql(h,Z[2]),te&16&&F.value!==Z[4]&&an(F,Z[4]),te&32&&E.value!==Z[5]&&an(E,Z[5])},d(Z){Z&&R(e);for(let te=0;te<p.length;te+=1)p[te].d();n[15](null),le=!1,Ue(ue)}}}function oo(n){let e,t=n[18].count+"",l,o;return{c(){e=fe("("),l=fe(t),o=fe(")")},m(i,r){G(i,e,r),G(i,l,r),G(i,o,r)},p(i,r){r&2&&t!==(t=i[18].count+"")&&Te(l,t)},d(i){i&&(R(e),R(l),R(o))}}}function io(n,e){let t,l=ro(e[18])+"",o,i,r,s,a=e[18].count!==void 0&&oo(e);return{key:n,first:null,c(){t=T("option"),o=fe(l),i=U(),a&&a.c(),r=U(),t.__value=s=e[18].id,an(t,t.__value),this.first=t},m(u,f){G(u,t,f),g(t,o),g(t,i),a&&a.m(t,null),g(t,r)},p(u,f){e=u,f&2&&l!==(l=ro(e[18])+"")&&Te(o,l),e[18].count!==void 0?a?a.p(e,f):(a=oo(e),a.c(),a.m(t,r)):a&&(a.d(1),a=null),f&2&&s!==(s=e[18].id)&&(t.__value=s,an(t,t.__value))},d(u){u&&R(t),a&&a.d()}}}function Ls(n){let e,t=n[0]&&lo(n);return{c(){t&&t.c(),e=Xe()},m(l,o){t&&t.m(l,o),G(l,e,o)},p(l,[o]){l[0]?t?t.p(l,o):(t=lo(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ee,o:ee,d(l){l&&R(e),t&&t.d(l)}}}function ro(n){return n.fullPath||n.label||"Untitled folder"}function Os(n,e,t){let{open:l=!1}=e,{folders:o=[]}=e,{defaultFolderId:i=null}=e,{onConfirm:r=null}=e,{onClose:s=null}=e,a="",u="",f="",b,h=!1;function p(A){A.target===A.currentTarget&&(A.preventDefault(),S())}function S(){s==null||s()}function m(){if(!f&&u)try{const A=new URL(u);t(5,f=A.hostname.replace(/^www\./,""))}catch{}}function _(A){if(A.preventDefault(),!a){alert("Please select a folder.");return}if(!u.trim()){alert("Please enter a URL.");return}if(!f.trim()){alert("Please enter a title.");return}r==null||r({folderId:a,url:u.trim(),title:f.trim()})}function w(){a=ts(this),t(2,a),t(0,l),t(1,o),t(10,i),t(13,h),t(3,b),t(1,o)}function v(A){ct[A?"unshift":"push"](()=>{b=A,t(3,b)})}function F(){u=this.value,t(4,u),t(0,l),t(13,h),t(10,i),t(1,o),t(3,b)}function P(){f=this.value,t(5,f),t(0,l),t(13,h),t(10,i),t(1,o),t(3,b)}return n.$$set=A=>{"open"in A&&t(0,l=A.open),"folders"in A&&t(1,o=A.folders),"defaultFolderId"in A&&t(10,i=A.defaultFolderId),"onConfirm"in A&&t(11,r=A.onConfirm),"onClose"in A&&t(12,s=A.onClose)},n.$$.update=()=>{if(n.$$.dirty&1031&&l&&o.length>0&&(a&&o.some(z=>z.id===a)||t(2,a=i||o[0].id)),n.$$.dirty&9227)if(l&&!h){t(13,h=!0),t(4,u=""),t(5,f=""),t(2,a=i||(o.length>0?o[0].id:"")),Cl().then(()=>{b==null||b.focus()});const A=z=>{z.key==="Escape"&&(z.preventDefault(),S())};document.addEventListener("keydown",A,{once:!0})}else!l&&h&&t(13,h=!1)},[l,o,a,b,u,f,p,S,m,_,i,r,s,h,w,v,F,P]}class Ps extends Ke{constructor(e){super(),Ve(this,e,Os,Ls,Ge,{open:0,folders:1,defaultFolderId:10,onConfirm:11,onClose:12})}}function Us(n){let e,t,l,o;return{c(){e=T("img"),Gl(e.src,t=n[9])||c(e,"src",t),c(e,"alt",""),c(e,"loading","lazy")},m(i,r){G(i,e,r),l||(o=V(e,"error",n[14]),l=!0)},p(i,r){r[0]&512&&!Gl(e.src,t=i[9])&&c(e,"src",t)},d(i){i&&R(e),l=!1,o()}}}function zs(n){let e=n[0].initials+"",t;return{c(){t=fe(e)},m(l,o){G(l,t,o)},p(l,o){o[0]&1&&e!==(e=l[0].initials+"")&&Te(t,e)},d(l){l&&R(t)}}}function so(n){let e,t=n[0].displayTitle+"",l;return{c(){e=T("div"),l=fe(t),c(e,"class","tile-title"),he(e,"tile-title--pill",n[2])},m(o,i){G(o,e,i),g(e,l)},p(o,i){i[0]&1&&t!==(t=o[0].displayTitle+"")&&Te(l,t),i[0]&4&&he(e,"tile-title--pill",o[2])},d(o){o&&R(e)}}}function ao(n){let e,t,l,o,i,r;return{c(){e=T("div"),t=T("button"),t.textContent="Edit",l=U(),o=T("button"),o.textContent="Remove",c(t,"type","button"),c(t,"role","menuitem"),c(t,"class","tile-menu__item"),c(o,"type","button"),c(o,"role","menuitem"),c(o,"class","tile-menu__item tile-menu__item--danger"),c(e,"class","tile-menu"),c(e,"role","menu")},m(s,a){G(s,e,a),g(e,t),g(e,l),g(e,o),i||(r=[V(t,"click",n[12]),V(o,"click",n[13])],i=!0)},p:ee,d(s){s&&R(e),i=!1,Ue(r)}}}function Ns(n){let e,t,l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v;function F(E,D){return E[0].fallback?zs:Us}let P=F(n),A=P(n),z=n[1]&&so(n),I=n[3]&&ao(n);return{c(){e=T("article"),t=T("a"),l=T("div"),A.c(),i=U(),z&&z.c(),a=U(),u=T("div"),f=T("button"),b=at("svg"),h=at("circle"),p=at("circle"),S=at("circle"),_=U(),I&&I.c(),c(l,"class","tile-icon"),c(l,"style",o=`--dial-color: ${n[0].palette.background}; --dial-text: ${n[0].palette.text};`),c(l,"aria-hidden","true"),c(t,"class","tile-link"),c(t,"href",r=n[0].url||"#!"),c(t,"title",s=n[0].title||n[0].url||"Shortcut"),c(t,"draggable","false"),c(h,"cx","8"),c(h,"cy","3.5"),c(h,"r","1.25"),c(p,"cx","8"),c(p,"cy","8"),c(p,"r","1.25"),c(S,"cx","8"),c(S,"cy","12.5"),c(S,"r","1.25"),c(b,"viewBox","0 0 16 16"),c(b,"aria-hidden","true"),c(b,"focusable","false"),c(f,"class","tile-menu-button"),c(f,"type","button"),c(f,"aria-haspopup","true"),c(f,"aria-expanded",n[3]),c(f,"aria-label",m=`Open options for ${n[8]}`),he(f,"tile-menu-button--active",n[3]),c(u,"class","tile-actions"),c(e,"class","tile"),c(e,"draggable",n[10]),he(e,"tile--focused",n[4]),he(e,"tile--dragging",n[5]),he(e,"tile--drag-over",n[6]),he(e,"tile--top-site",n[7]),he(e,"tile--icon-only",!n[1])},m(E,D){G(E,e,D),g(e,t),g(t,l),A.m(l,null),g(t,i),z&&z.m(t,null),g(e,a),g(e,u),g(u,f),g(f,b),g(b,h),g(b,p),g(b,S),g(u,_),I&&I.m(u,null),w||(v=[V(t,"focus",n[16]),V(f,"click",n[11]),V(e,"contextmenu",n[15]),V(e,"dragstart",n[17]),V(e,"dragover",n[18]),V(e,"dragleave",n[19]),V(e,"drop",n[20]),V(e,"dragend",n[21])],w=!0)},p(E,D){P===(P=F(E))&&A?A.p(E,D):(A.d(1),A=P(E),A&&(A.c(),A.m(l,null))),D[0]&1&&o!==(o=`--dial-color: ${E[0].palette.background}; --dial-text: ${E[0].palette.text};`)&&c(l,"style",o),E[1]?z?z.p(E,D):(z=so(E),z.c(),z.m(t,null)):z&&(z.d(1),z=null),D[0]&1&&r!==(r=E[0].url||"#!")&&c(t,"href",r),D[0]&1&&s!==(s=E[0].title||E[0].url||"Shortcut")&&c(t,"title",s),D[0]&8&&c(f,"aria-expanded",E[3]),D[0]&256&&m!==(m=`Open options for ${E[8]}`)&&c(f,"aria-label",m),D[0]&8&&he(f,"tile-menu-button--active",E[3]),E[3]?I?I.p(E,D):(I=ao(E),I.c(),I.m(u,null)):I&&(I.d(1),I=null),D[0]&1024&&c(e,"draggable",E[10]),D[0]&16&&he(e,"tile--focused",E[4]),D[0]&32&&he(e,"tile--dragging",E[5]),D[0]&64&&he(e,"tile--drag-over",E[6]),D[0]&128&&he(e,"tile--top-site",E[7]),D[0]&2&&he(e,"tile--icon-only",!E[1])},i:ee,o:ee,d(E){E&&R(e),A.d(),z&&z.d(),I&&I.d(),w=!1,Ue(v)}}}function Hs(n,e,t){let l,o,i,{bookmark:r}=e,{showTitle:s=!0}=e,{titleBackdrop:a=!1}=e,{menuOpen:u=!1}=e,{focused:f=!1}=e,{dragging:b=!1}=e,{dragOver:h=!1}=e,{isTopSite:p=!1}=e,{onToggleMenu:S=()=>{}}=e,{onEdit:m=()=>{}}=e,{onRemove:_=()=>{}}=e,{onFallback:w=()=>{}}=e,{onContextMenu:v=()=>{}}=e,{onFocus:F=()=>{}}=e,{onDragStart:P=()=>{}}=e,{onDragOver:A=()=>{}}=e,{onDragLeave:z=()=>{}}=e,{onDrop:I=()=>{}}=e,{onDragEnd:E=()=>{}}=e,{getFaviconUrl:D=()=>""}=e,$="Shortcut",X="",K=null;function J(M){M.preventDefault(),M.stopPropagation(),S==null||S()}function le(M){M.preventDefault(),M.stopPropagation(),m==null||m()}function ue(M){M.preventDefault(),M.stopPropagation(),_==null||_()}function N(){w==null||w()}function Q(M){M.preventDefault(),v==null||v(M)}function Z(){F==null||F()}function te(M){if(!i){M.preventDefault();return}P==null||P(M)}function ce(M){i&&(M.preventDefault(),A==null||A(M))}function be(M){i&&(z==null||z(M))}function Ze(M){i&&(M.preventDefault(),I==null||I(M))}function B(M){i&&(E==null||E(M))}return n.$$set=M=>{"bookmark"in M&&t(0,r=M.bookmark),"showTitle"in M&&t(1,s=M.showTitle),"titleBackdrop"in M&&t(2,a=M.titleBackdrop),"menuOpen"in M&&t(3,u=M.menuOpen),"focused"in M&&t(4,f=M.focused),"dragging"in M&&t(5,b=M.dragging),"dragOver"in M&&t(6,h=M.dragOver),"isTopSite"in M&&t(7,p=M.isTopSite),"onToggleMenu"in M&&t(22,S=M.onToggleMenu),"onEdit"in M&&t(23,m=M.onEdit),"onRemove"in M&&t(24,_=M.onRemove),"onFallback"in M&&t(25,w=M.onFallback),"onContextMenu"in M&&t(26,v=M.onContextMenu),"onFocus"in M&&t(27,F=M.onFocus),"onDragStart"in M&&t(28,P=M.onDragStart),"onDragOver"in M&&t(29,A=M.onDragOver),"onDragLeave"in M&&t(30,z=M.onDragLeave),"onDrop"in M&&t(31,I=M.onDrop),"onDragEnd"in M&&t(32,E=M.onDragEnd),"getFaviconUrl"in M&&t(33,D=M.getFaviconUrl)},n.$$.update=()=>{if(n.$$.dirty[0]&1&&t(8,$=(r==null?void 0:r.displayTitle)||(r==null?void 0:r.title)||(r==null?void 0:r.url)||"Shortcut"),n.$$.dirty[0]&1&&t(36,l=r==null?void 0:r.url),n.$$.dirty[0]&1&&t(35,o=r==null?void 0:r.fallback),n.$$.dirty[1]&60)if(l&&!o&&l!==K){t(34,K=l);const M=l;t(9,X=""),D(M).then(ke=>{M===K&&(ke?t(9,X=ke):N())}).catch(()=>{M===K&&N()})}else o&&(t(34,K=null),t(9,X=""));n.$$.dirty[0]&128&&t(10,i=!p)},[r,s,a,u,f,b,h,p,$,X,i,J,le,ue,N,Q,Z,te,ce,be,Ze,B,S,m,_,w,v,F,P,A,z,I,E,D,K,o,l]}class Bl extends Ke{constructor(e){super(),Ve(this,e,Hs,Ns,Ge,{bookmark:0,showTitle:1,titleBackdrop:2,menuOpen:3,focused:4,dragging:5,dragOver:6,isTopSite:7,onToggleMenu:22,onEdit:23,onRemove:24,onFallback:25,onContextMenu:26,onFocus:27,onDragStart:28,onDragOver:29,onDragLeave:30,onDrop:31,onDragEnd:32,getFaviconUrl:33},null,[-1,-1])}}function Ti(n){const e=n-1;return e*e*e+1}function kl(n,{delay:e=0,duration:t=400,easing:l=Ln}={}){const o=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:l,css:i=>`opacity: ${i*o}`}}function _l(n,{delay:e=0,duration:t=400,easing:l=Ti,x:o=0,y:i=0,opacity:r=0}={}){const s=getComputedStyle(n),a=+s.opacity,u=s.transform==="none"?"":s.transform,f=a*(1-r),[b,h]=Wl(o),[p,S]=Wl(i);return{delay:e,duration:t,easing:l,css:(m,_)=>`
			transform: ${u} translate(${(1-m)*b}${h}, ${(1-m)*p}${S});
			opacity: ${a-f*_}`}}function Rs(n,{from:e,to:t},l={}){const o=getComputedStyle(n),i=o.transform==="none"?"":o.transform,[r,s]=o.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*r/t.width-(t.left+r),u=e.top+e.height*s/t.height-(t.top+s),{delay:f=0,duration:b=p=>Math.sqrt(p)*120,easing:h=Ti}=l;return{delay:f,duration:je(b)?b(Math.sqrt(a*a+u*u)):b,easing:h,css:(p,S)=>{const m=S*a,_=S*u,w=p+S*e.width/t.width,v=p+S*e.height/t.height;return`transform: ${i} translate(${m}px, ${_}px) scale(${w}, ${v});`}}}function co(n,e,t){const l=n.slice();return l[7]=e[t],l}function uo(n){let e,t,l;function o(){return n[5](n[7])}return{c(){e=T("button"),e.textContent="Undo",c(e,"type","button"),c(e,"class","toast__undo svelte-f4o70y")},m(i,r){G(i,e,r),t||(l=V(e,"click",o),t=!0)},p(i,r){n=i},d(i){i&&R(e),t=!1,l()}}}function fo(n,e){let t,l,o=e[7].message+"",i,r,s,a,u,f,b,h,p,S=ee,m,_,w,v=e[7].undoData&&uo(e);function F(){return e[6](e[7])}return{key:n,first:null,c(){t=T("div"),l=T("span"),i=fe(o),r=U(),s=T("div"),v&&v.c(),a=U(),u=T("button"),u.textContent="√ó",f=U(),c(l,"class","toast__message svelte-f4o70y"),c(u,"type","button"),c(u,"class","toast__dismiss svelte-f4o70y"),c(u,"aria-label","Dismiss notification"),c(s,"class","toast__actions svelte-f4o70y"),c(t,"class","toast svelte-f4o70y"),c(t,"role","alert"),he(t,"toast--success",e[7].type==="success"),he(t,"toast--error",e[7].type==="error"),he(t,"toast--info",e[7].type==="info"),this.first=t},m(P,A){G(P,t,A),g(t,l),g(l,i),g(t,r),g(t,s),v&&v.m(s,null),g(s,a),g(s,u),g(t,f),m=!0,_||(w=V(u,"click",F),_=!0)},p(P,A){e=P,(!m||A&1)&&o!==(o=e[7].message+"")&&Te(i,o),e[7].undoData?v?v.p(e,A):(v=uo(e),v.c(),v.m(s,a)):v&&(v.d(1),v=null),(!m||A&1)&&he(t,"toast--success",e[7].type==="success"),(!m||A&1)&&he(t,"toast--error",e[7].type==="error"),(!m||A&1)&&he(t,"toast--info",e[7].type==="info")},r(){p=t.getBoundingClientRect()},f(){rs(t),S(),gi(t,p)},a(){S(),S=is(t,p,Rs,{duration:250})},i(P){m||(P&&Ct(()=>{m&&(h&&h.end(1),b=us(t,_l,{y:50,duration:250}),b.start())}),m=!0)},o(P){b&&b.invalidate(),P&&(h=fs(t,kl,{duration:150})),m=!1},d(P){P&&R(t),v&&v.d(),P&&h&&h.end(),_=!1,w()}}}function Gs(n){let e,t=[],l=new Map,o,i=pe(n[0]);const r=s=>s[7].id;for(let s=0;s<i.length;s+=1){let a=co(n,i,s),u=r(a);l.set(u,t[s]=fo(u,a))}return{c(){e=T("div");for(let s=0;s<t.length;s+=1)t[s].c();c(e,"class","toast-container svelte-f4o70y"),c(e,"aria-live","polite"),c(e,"aria-label","Notifications")},m(s,a){G(s,e,a);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);o=!0},p(s,[a]){if(a&7){i=pe(s[0]),He();for(let u=0;u<t.length;u+=1)t[u].r();t=lt(t,a,r,1,s,i,l,e,ds,fo,null,co);for(let u=0;u<t.length;u+=1)t[u].a();Re()}},i(s){if(!o){for(let a=0;a<i.length;a+=1)j(t[a]);o=!0}},o(s){for(let a=0;a<t.length;a+=1)Y(t[a]);o=!1},d(s){s&&R(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Ws(n,e,t){let{toasts:l=[]}=e,{onDismiss:o=()=>{}}=e,{onUndo:i=()=>{}}=e;function r(f){o==null||o(f)}function s(f){i==null||i(f)}const a=f=>s(f),u=f=>r(f.id);return n.$$set=f=>{"toasts"in f&&t(0,l=f.toasts),"onDismiss"in f&&t(3,o=f.onDismiss),"onUndo"in f&&t(4,i=f.onUndo)},[l,r,s,o,i,a,u]}class qs extends Ke{constructor(e){super(),Ve(this,e,Ws,Gs,Ge,{toasts:0,onDismiss:3,onUndo:4})}}function go(n){let e,t,l,o,i,r,s,a,u,f,b,h,p;return{c(){e=T("div"),t=T("article"),l=T("header"),l.innerHTML='<h2 id="welcome-title" class="svelte-1g41oro">Welcome to Bookmark Dial</h2> <p class="welcome-subtitle svelte-1g41oro">Your new tab, reimagined.</p>',o=U(),i=T("div"),i.innerHTML='<section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">üìÅ</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Select Your Folders</h3> <p class="svelte-1g41oro">Open <strong class="svelte-1g41oro">Settings</strong> (gear icon) and click <strong class="svelte-1g41oro">Manage folders</strong> to choose which bookmark folders appear on your new tab.</p></div></section> <section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">‚ûï</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Add Shortcuts</h3> <p class="svelte-1g41oro">Click the <strong class="svelte-1g41oro">+ Add shortcut</strong> tile to quickly add new bookmarks directly from this page.</p></div></section> <section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">üé®</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Customize Your Theme</h3> <p class="svelte-1g41oro">Choose from multiple themes, accent colors, and gradient backgrounds to personalize your experience.</p></div></section> <section class="welcome-step svelte-1g41oro"><div class="welcome-step__icon svelte-1g41oro" aria-hidden="true">‚å®Ô∏è</div> <div class="welcome-step__text svelte-1g41oro"><h3 class="svelte-1g41oro">Keyboard Shortcuts</h3> <p class="svelte-1g41oro">Use <kbd class="svelte-1g41oro">Arrow keys</kbd> to navigate, <kbd class="svelte-1g41oro">Enter</kbd> to open, and <kbd class="svelte-1g41oro">Delete</kbd> or <kbd class="svelte-1g41oro">Backspace</kbd> to remove bookmarks.</p></div></section>',r=U(),s=T("footer"),a=T("button"),a.textContent="Get Started",c(l,"class","welcome-header svelte-1g41oro"),c(i,"class","welcome-content svelte-1g41oro"),c(a,"type","button"),c(a,"class","welcome-button svelte-1g41oro"),c(s,"class","welcome-footer svelte-1g41oro"),c(t,"class","welcome-modal svelte-1g41oro"),c(t,"role","dialog"),c(t,"aria-modal","true"),c(t,"aria-labelledby","welcome-title"),c(e,"class","welcome-overlay svelte-1g41oro"),c(e,"role","presentation")},m(S,m){G(S,e,m),g(e,t),g(t,l),g(t,o),g(t,i),g(t,r),g(t,s),g(s,a),b=!0,h||(p=[V(a,"click",function(){je(n[1])&&n[1].apply(this,arguments)}),V(e,"click",n[2])],h=!0)},p(S,m){n=S},i(S){b||(S&&Ct(()=>{b&&(u||(u=Kn(t,_l,{y:30,duration:300},!0)),u.run(1))}),S&&Ct(()=>{b&&(f||(f=Kn(e,kl,{duration:200},!0)),f.run(1))}),b=!0)},o(S){S&&(u||(u=Kn(t,_l,{y:30,duration:300},!1)),u.run(0)),S&&(f||(f=Kn(e,kl,{duration:200},!1)),f.run(0)),b=!1},d(S){S&&R(e),S&&u&&u.end(),S&&f&&f.end(),h=!1,Ue(p)}}}function js(n){let e,t,l,o=n[0]&&go(n);return{c(){o&&o.c(),e=Xe()},m(i,r){o&&o.m(i,r),G(i,e,r),t||(l=V(window,"keydown",function(){je(n[0]?n[3]:null)&&(n[0]?n[3]:null).apply(this,arguments)}),t=!0)},p(i,[r]){n=i,n[0]?o?(o.p(n,r),r&1&&j(o,1)):(o=go(n),o.c(),j(o,1),o.m(e.parentNode,e)):o&&(He(),Y(o,1,1,()=>{o=null}),Re())},i(i){j(o)},o(i){Y(o)},d(i){i&&R(e),o&&o.d(i),t=!1,l()}}}function Vs(n,e,t){let{open:l=!1}=e,{onDismiss:o=()=>{}}=e,{onGetStarted:i=()=>{}}=e;function r(a){a.target===a.currentTarget&&(o==null||o())}function s(a){a.key==="Escape"&&(a.preventDefault(),o==null||o())}return n.$$set=a=>{"open"in a&&t(0,l=a.open),"onDismiss"in a&&t(4,o=a.onDismiss),"onGetStarted"in a&&t(1,i=a.onGetStarted)},[l,i,r,s,o]}class Ks extends Ke{constructor(e){super(),Ve(this,e,Vs,js,Ge,{open:0,onDismiss:4,onGetStarted:1})}}function ho(n){let e,t,l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v,F;return{c(){e=T("div"),t=U(),l=T("menu"),o=T("li"),i=T("button"),i.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><path d="M9 2h5v5M14 2L7 9M6 4H3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V9" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Open in new tab`,r=U(),s=T("li"),a=T("button"),a.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><rect x="5" y="5" width="8" height="9" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"></rect><path d="M11 5V3a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h2" stroke="currentColor" stroke-width="1.5" fill="none"></path></svg>
        Copy URL`,u=U(),f=T("li"),b=U(),h=T("li"),p=T("button"),p.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><path d="M11.5 2.5l2 2L5 13H3v-2l8.5-8.5z" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Edit bookmark`,S=U(),m=T("li"),_=T("button"),_.innerHTML=`<svg class="context-menu__icon svelte-6dpg3b" viewBox="0 0 16 16" aria-hidden="true"><path d="M3 4h10M6 4V3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v1M5 4v9a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V4" stroke="currentColor" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        Remove`,c(e,"class","context-menu-overlay svelte-6dpg3b"),c(e,"role","presentation"),c(i,"type","button"),c(i,"class","context-menu__item svelte-6dpg3b"),c(i,"role","menuitem"),c(o,"class","svelte-6dpg3b"),c(a,"type","button"),c(a,"class","context-menu__item svelte-6dpg3b"),c(a,"role","menuitem"),c(s,"class","svelte-6dpg3b"),c(f,"class","context-menu__divider svelte-6dpg3b"),c(f,"role","separator"),c(p,"type","button"),c(p,"class","context-menu__item svelte-6dpg3b"),c(p,"role","menuitem"),c(h,"class","svelte-6dpg3b"),c(_,"type","button"),c(_,"class","context-menu__item context-menu__item--danger svelte-6dpg3b"),c(_,"role","menuitem"),c(m,"class","svelte-6dpg3b"),c(l,"class","context-menu svelte-6dpg3b"),c(l,"style",n[1]),c(l,"aria-label",w="Actions for "+n[2])},m(P,A){G(P,e,A),G(P,t,A),G(P,l,A),g(l,o),g(o,i),g(l,r),g(l,s),g(s,a),g(l,u),g(l,f),g(l,b),g(l,h),g(h,p),g(l,S),g(l,m),g(m,_),v||(F=[V(e,"click",n[7]),V(e,"contextmenu",xr(n[7])),V(i,"click",n[5]),V(a,"click",n[6]),V(p,"click",n[3]),V(_,"click",n[4])],v=!0)},p(P,A){A&2&&c(l,"style",P[1]),A&4&&w!==(w="Actions for "+P[2])&&c(l,"aria-label",w)},d(P){P&&(R(e),R(t),R(l)),v=!1,Ue(F)}}}function Ys(n){let e,t,l,o=n[0]&&ho(n);return{c(){o&&o.c(),e=Xe()},m(i,r){o&&o.m(i,r),G(i,e,r),t||(l=V(window,"keydown",function(){je(n[0]?n[8]:null)&&(n[0]?n[8]:null).apply(this,arguments)}),t=!0)},p(i,[r]){n=i,n[0]?o?o.p(n,r):(o=ho(n),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null)},i:ee,o:ee,d(i){i&&R(e),o&&o.d(i),t=!1,l()}}}function mo(n){var i;const e=document.querySelectorAll(".context-menu__item"),t=document.activeElement;let o=Array.from(e).indexOf(t)+n;o<0&&(o=e.length-1),o>=e.length&&(o=0),(i=e[o])==null||i.focus()}function Qs(n,e,t){let l,o,{bookmark:i=null}=e,{position:r={x:0,y:0}}=e,{visible:s=!1}=e;const a=bi();function u(){a("edit")}function f(){a("remove")}function b(){a("opennewtab")}function h(){a("copyurl")}function p(){a("close")}function S(m){m.key==="Escape"?(m.preventDefault(),p()):m.key==="ArrowDown"?(m.preventDefault(),mo(1)):m.key==="ArrowUp"&&(m.preventDefault(),mo(-1))}return n.$$set=m=>{"bookmark"in m&&t(9,i=m.bookmark),"position"in m&&t(10,r=m.position),"visible"in m&&t(0,s=m.visible)},n.$$.update=()=>{n.$$.dirty&512&&t(2,l=(i==null?void 0:i.title)||(i==null?void 0:i.url)||"bookmark"),n.$$.dirty&1024&&t(1,o=`left: ${r.x}px; top: ${r.y}px;`)},[s,o,l,u,f,b,h,p,S,i,r]}class Xs extends Ke{constructor(e){super(),Ve(this,e,Qs,Ys,Ge,{bookmark:9,position:10,visible:0})}}function bo(n){let e,t,l,o,i,r,s,a,u,f,b,h=n[1]&&ko(n);return{c(){e=T("div"),t=at("svg"),l=at("circle"),o=at("path"),i=U(),r=T("input"),s=U(),h&&h.c(),a=U(),u=T("button"),u.innerHTML='<svg viewBox="0 0 16 16" aria-hidden="true" class="svelte-qypsdi"><path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>',c(l,"cx","6.5"),c(l,"cy","6.5"),c(l,"r","5"),c(l,"stroke","currentColor"),c(l,"stroke-width","1.5"),c(l,"fill","none"),c(o,"d","M10.5 10.5L14 14"),c(o,"stroke","currentColor"),c(o,"stroke-width","1.5"),c(o,"stroke-linecap","round"),c(t,"class","search-bar__icon svelte-qypsdi"),c(t,"viewBox","0 0 16 16"),c(t,"aria-hidden","true"),c(r,"type","search"),c(r,"class","search-bar__input svelte-qypsdi"),c(r,"placeholder","Search bookmarks‚Ä¶"),r.value=n[1],c(r,"aria-label","Search bookmarks"),c(u,"type","button"),c(u,"class","search-bar__close svelte-qypsdi"),c(u,"aria-label","Close search"),c(e,"class","search-bar svelte-qypsdi"),c(e,"role","search")},m(p,S){G(p,e,S),g(e,t),g(t,l),g(t,o),g(e,i),g(e,r),n[8](r),g(e,s),h&&h.m(e,null),g(e,a),g(e,u),f||(b=[V(r,"input",n[4]),V(r,"keydown",n[6]),V(u,"click",function(){je(n[2])&&n[2].apply(this,arguments)})],f=!0)},p(p,S){n=p,S&2&&r.value!==n[1]&&(r.value=n[1]),n[1]?h?h.p(n,S):(h=ko(n),h.c(),h.m(e,a)):h&&(h.d(1),h=null)},d(p){p&&R(e),n[8](null),h&&h.d(),f=!1,Ue(b)}}}function ko(n){let e,t,l;return{c(){e=T("button"),e.textContent="√ó",c(e,"type","button"),c(e,"class","search-bar__clear svelte-qypsdi"),c(e,"aria-label","Clear search")},m(o,i){G(o,e,i),t||(l=V(e,"click",n[5]),t=!0)},p:ee,d(o){o&&R(e),t=!1,l()}}}function Zs(n){let e,t=n[0]&&bo(n);return{c(){t&&t.c(),e=Xe()},m(l,o){t&&t.m(l,o),G(l,e,o)},p(l,[o]){l[0]?t?t.p(l,o):(t=bo(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ee,o:ee,d(l){l&&R(e),t&&t.d(l)}}}function Js(n,e,t){let{visible:l=!1}=e,{query:o=""}=e,{onSearchChange:i=()=>{}}=e,{onClose:r=()=>{}}=e,s;function a(h){i==null||i(h.target.value)}function u(){i==null||i(""),s==null||s.focus()}function f(h){h.key==="Escape"&&(h.preventDefault(),o?i==null||i(""):r==null||r())}function b(h){ct[h?"unshift":"push"](()=>{s=h,t(3,s)})}return n.$$set=h=>{"visible"in h&&t(0,l=h.visible),"query"in h&&t(1,o=h.query),"onSearchChange"in h&&t(7,i=h.onSearchChange),"onClose"in h&&t(2,r=h.onClose)},n.$$.update=()=>{n.$$.dirty&9&&l&&s&&s.focus()},[l,o,r,s,a,u,f,i,b]}class xs extends Ke{constructor(e){super(),Ve(this,e,Js,Zs,Ge,{visible:0,query:1,onSearchChange:7,onClose:2})}}const Qn={loading:"Loading Bookmark Dial‚Ä¶",empty:"No bookmarks yet. Add shortcuts from this page or the bookmark manager.",error:"Bookmark Dial folder is unavailable. Try reopening the tab or reinstalling the extension."},$s=64,In="customBackgroundImage",Bn="uiPreferences",Xn="dialPreferences",$n=2,fl="hasSeenWelcome",ea=10*1024*1024,_o=5,ta="BookmarkDialDB",qt="backgrounds",dl="customBackground",el={selectedIds:[],expandedIds:[]},vi=[{id:"dark",label:"Dark"},{id:"light",label:"Light"},{id:"system",label:"System"}],Vt=[{id:"cobalt",label:"Cobalt",colors:{base:"#2563eb",contrast:"#f8fafc",soft:"rgba(37, 99, 235, 0.14)",border:"rgba(37, 99, 235, 0.45)"}},{id:"violet",label:"Violet",colors:{base:"#8b5cf6",contrast:"#faf5ff",soft:"rgba(139, 92, 246, 0.16)",border:"rgba(139, 92, 246, 0.45)"}},{id:"emerald",label:"Emerald",colors:{base:"#059669",contrast:"#ecfdf5",soft:"rgba(5, 150, 105, 0.14)",border:"rgba(5, 150, 105, 0.45)"}},{id:"amber",label:"Amber",colors:{base:"#d97706",contrast:"#fffbeb",soft:"rgba(217, 119, 6, 0.18)",border:"rgba(217, 119, 6, 0.5)"}},{id:"rose",label:"Rose",colors:{base:"#e11d48",contrast:"#fff1f2",soft:"rgba(225, 29, 72, 0.16)",border:"rgba(225, 29, 72, 0.45)"}},{id:"slate",label:"Slate",colors:{base:"#475569",contrast:"#f8fafc",soft:"rgba(71, 85, 105, 0.18)",border:"rgba(71, 85, 105, 0.5)"}},{id:"sky",label:"Sky",colors:{base:"#0284c7",contrast:"#e0f2fe",soft:"rgba(2, 132, 199, 0.16)",border:"rgba(2, 132, 199, 0.45)"}},{id:"blush",label:"Blush",colors:{base:"#ec4899",contrast:"#fff0f6",soft:"rgba(236, 72, 153, 0.18)",border:"rgba(236, 72, 153, 0.5)"}},{id:"moss",label:"Moss",colors:{base:"#4d7c0f",contrast:"#ecfccb",soft:"rgba(77, 124, 15, 0.18)",border:"rgba(77, 124, 15, 0.5)"}},{id:"bronze",label:"Bronze",colors:{base:"#b45309",contrast:"#fff7ed",soft:"rgba(180, 83, 9, 0.2)",border:"rgba(180, 83, 9, 0.55)"}},{id:"orchid",label:"Orchid",colors:{base:"#c026d3",contrast:"#fdf4ff",soft:"rgba(192, 38, 211, 0.18)",border:"rgba(192, 38, 211, 0.5)"}},{id:"mint",label:"Mint",colors:{base:"#14b8a6",contrast:"#e0fefa",soft:"rgba(20, 184, 166, 0.16)",border:"rgba(20, 184, 166, 0.46)"}},{id:"graphite",label:"Graphite",colors:{base:"#1f2937",contrast:"#f8fafc",soft:"rgba(31, 41, 55, 0.22)",border:"rgba(31, 41, 55, 0.6)"}},{id:"sunset",label:"Sunset",colors:{base:"#ea580c",contrast:"#fff7ed",soft:"rgba(234, 88, 12, 0.18)",border:"rgba(234, 88, 12, 0.52)"}},{id:"glacier",label:"Glacier",colors:{base:"#0ea5e9",contrast:"#f0f9ff",soft:"rgba(14, 165, 233, 0.16)",border:"rgba(14, 165, 233, 0.45)"}},{id:"amethyst",label:"Amethyst",colors:{base:"#6d28d9",contrast:"#f5f3ff",soft:"rgba(109, 40, 217, 0.18)",border:"rgba(109, 40, 217, 0.5)"}},{id:"sand",label:"Sand",colors:{base:"#ca8a04",contrast:"#fffbeb",soft:"rgba(202, 138, 4, 0.2)",border:"rgba(202, 138, 4, 0.5)"}},{id:"cranberry",label:"Cranberry",colors:{base:"#be123c",contrast:"#fff1f5",soft:"rgba(190, 18, 60, 0.18)",border:"rgba(190, 18, 60, 0.5)"}}],Xt=[{id:"aurora",label:"Aurora",gradients:{light:"linear-gradient(135deg, #d8b4fe 0%, #6366f1 50%, #22d3ee 100%)",dark:"linear-gradient(135deg, #312e81 0%, #1e3a8a 50%, #0f172a 100%)"},accent:"violet"},{id:"sunrise",label:"Sunrise",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 50%, #f97316 100%)",dark:"linear-gradient(135deg, #7c2d12 0%, #c2410c 45%, #ea580c 100%)"},accent:"amber"},{id:"forest",label:"Forest",gradients:{light:"linear-gradient(135deg, #bbf7d0 0%, #34d399 50%, #0f766e 100%)",dark:"linear-gradient(135deg, #064e3b 0%, #059669 50%, #0f172a 100%)"},accent:"emerald"},{id:"ocean",label:"Ocean",gradients:{light:"linear-gradient(135deg, #bae6fd 0%, #38bdf8 50%, #0ea5e9 100%)",dark:"linear-gradient(135deg, #0c4a6e 0%, #0369a1 50%, #082f49 100%)"},accent:"sky"},{id:"twilight",label:"Twilight",gradients:{light:"linear-gradient(135deg, #fecdd3 0%, #fda4af 50%, #fb7185 100%)",dark:"linear-gradient(135deg, #7f1d1d 0%, #be123c 50%, #9f1239 100%)"},accent:"orchid"},{id:"slate",label:"Slate",gradients:{light:"linear-gradient(135deg, #e2e8f0 0%, #cbd5f5 50%, #94a3b8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #020617 100%)"},accent:"slate"},{id:"blossom",label:"Blossom",gradients:{light:"linear-gradient(135deg, #ffe4e6 0%, #fbcfe8 45%, #f472b6 100%)",dark:"linear-gradient(135deg, #831843 0%, #9d174d 50%, #701a75 100%)"},accent:"blush"},{id:"lagoon",label:"Lagoon",gradients:{light:"linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 40%, #5eead4 100%)",dark:"linear-gradient(135deg, #022c22 0%, #0d9488 45%, #14b8a6 100%)"},accent:"mint"},{id:"ember",label:"Ember",gradients:{light:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 40%, #fb7185 100%)",dark:"linear-gradient(135deg, #450a0a 0%, #9f1239 50%, #be123c 100%)"},accent:"rose"},{id:"lilac",label:"Lilac",gradients:{light:"linear-gradient(135deg, #f5f3ff 0%, #ede9fe 45%, #d8b4fe 100%)",dark:"linear-gradient(135deg, #312e81 0%, #5b21b6 50%, #7c3aed 100%)"},accent:"violet"},{id:"zenith",label:"Zenith",gradients:{light:"linear-gradient(135deg, #e0f2fe 0%, #dbeafe 45%, #818cf8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #1f3b8a 45%, #3730a3 100%)"},accent:"cobalt"},{id:"sage",label:"Sage",gradients:{light:"linear-gradient(135deg, #ecfccb 0%, #bbf7d0 45%, #84cc16 100%)",dark:"linear-gradient(135deg, #052e16 0%, #166534 45%, #15803d 100%)"},accent:"moss"},{id:"velvet",label:"Velvet",gradients:{light:"linear-gradient(135deg, #fdf4ff 0%, #f5d0fe 45%, #f0abfc 100%)",dark:"linear-gradient(135deg, #4a044e 0%, #6b21a8 45%, #86198f 100%)"},accent:"orchid"},{id:"citrus",label:"Citrus",gradients:{light:"linear-gradient(135deg, #fefce8 0%, #fef08a 45%, #facc15 100%)",dark:"linear-gradient(135deg, #422006 0%, #854d0e 50%, #b45309 100%)"},accent:"amber"},{id:"glacier",label:"Glacier",gradients:{light:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 45%, #bae6fd 100%)",dark:"linear-gradient(135deg, #082f49 0%, #0c4a6e 45%, #0284c7 100%)"},accent:"sky"},{id:"terracotta",label:"Terracotta",gradients:{light:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 45%, #f97316 100%)",dark:"linear-gradient(135deg, #431407 0%, #7c2d12 45%, #9a3412 100%)"},accent:"bronze"},{id:"nocturne",label:"Nocturne",gradients:{light:"linear-gradient(135deg, #ede9fe 0%, #c7d2fe 45%, #4338ca 100%)",dark:"linear-gradient(135deg, #020617 0%, #111827 45%, #312e81 100%)"},accent:"slate"},{id:"horizon",label:"Horizon",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 40%, #60a5fa 100%)",dark:"linear-gradient(135deg, #451a03 0%, #9a3412 45%, #1d4ed8 100%)"},accent:"cobalt"}],Kt=Xt[0],na=Kt!=null&&Kt.accent&&Vt.some(n=>n.id===Kt.accent)?Kt.accent:Vt[0].id,De={theme:"system",accent:na,background:{mode:"gradient",gradientId:(Kt==null?void 0:Kt.id)??Xt[0].id},titleBackdrop:!0,mergeAllBookmarks:!0,folderColumnWidth:1170,compactFolderHeader:!0,enableBookmarkSearch:!1,enableTopSites:!1,lastShortcutFolderId:null,tile:{size:"medium",iconShape:"50%",fontWeight:500,fontSize:"0.9rem",padding:"0.2rem 0.6rem",titleShape:"999px",blur:8,textContrast:"normal",bgLightness:3,showTitle:!0},immersive:{enabled:!1,opacity:.15}},la={...De,folderSelection:{...el},version:$n},pl=6,wl=10,Ii=[{value:"tiny",label:"Tiny",width:80,gridMin:70},{value:"small",label:"Small",width:100,gridMin:90},{value:"medium",label:"Medium",width:128,gridMin:118},{value:"large",label:"Large",width:156,gridMin:146},{value:"extra-large",label:"Extra Large",width:184,gridMin:174}],oa=[{value:"0%",label:"Square"},{value:"12%",label:"Soft"},{value:"24%",label:"Rounded"},{value:"38%",label:"Pill"},{value:"50%",label:"Circle"}],ia=[{value:400,label:"Light"},{value:450,label:"Normal"},{value:500,label:"Medium"},{value:600,label:"Semibold"},{value:700,label:"Bold"}],ra=[{value:"0.75rem",label:"Tiny"},{value:"0.825rem",label:"Small"},{value:"0.9rem",label:"Regular"},{value:"1rem",label:"Medium"},{value:"1.1rem",label:"Large"}],sa=[{value:"0.1rem 0.35rem",label:"Minimal"},{value:"0.15rem 0.5rem",label:"Compact"},{value:"0.2rem 0.6rem",label:"Comfortable"},{value:"0.28rem 0.75rem",label:"Spacious"},{value:"0.35rem 0.9rem",label:"Roomy"}],aa=[{value:"0px",label:"Square"},{value:"4px",label:"Soft"},{value:"8px",label:"Rounded"},{value:"16px",label:"Smooth"},{value:"999px",label:"Pill"}],ca=[{value:0,label:"None"},{value:4,label:"Subtle"},{value:8,label:"Glass"},{value:14,label:"Frosted"},{value:20,label:"Heavy"}],ua=[{value:"faint",label:"Faint"},{value:"soft",label:"Soft"},{value:"normal",label:"Normal"},{value:"strong",label:"Strong"},{value:"bold",label:"Bold"}],Bi=[{value:1,label:"Whisper",lightLight:97,lightDark:75},{value:2,label:"Muted",lightLight:92,lightDark:65},{value:3,label:"Balanced",lightLight:85,lightDark:55},{value:4,label:"Visible",lightLight:75,lightDark:50},{value:5,label:"Prominent",lightLight:60,lightDark:45}],kt={size:"medium",iconShape:"50%",fontWeight:500,fontSize:"0.9rem",padding:"0.2rem 0.6rem",titleShape:"999px",blur:8,textContrast:"normal",bgLightness:3,showTitle:!0},fa=[{value:0,label:"Invisible"},{value:.15,label:"Ghost"},{value:.3,label:"Shadow"},{value:.45,label:"Subtle"},{value:.6,label:"Soft"}],gl={enabled:!1,opacity:.15};function po(n,e,t){const l=n.slice();return l[4]=e[t],l}function wo(n,e){let t,l=e[4].label+"",o,i,r,s,a;function u(){return e[3](e[4])}return{key:n,first:null,c(){t=T("button"),o=fe(l),i=U(),c(t,"type","button"),c(t,"class","choice-button"),c(t,"data-active",r=e[1]===e[4].id),this.first=t},m(f,b){G(f,t,b),g(t,o),g(t,i),s||(a=V(t,"click",u),s=!0)},p(f,b){e=f,b&1&&l!==(l=e[4].label+"")&&Te(o,l),b&3&&r!==(r=e[1]===e[4].id)&&c(t,"data-active",r)},d(f){f&&R(t),s=!1,a()}}}function da(n){let e,t=[],l=new Map,o=pe(n[0]);const i=r=>r[4].id;for(let r=0;r<o.length;r+=1){let s=po(n,o,r),a=i(s);l.set(a,t[r]=wo(a,s))}return{c(){e=T("div");for(let r=0;r<t.length;r+=1)t[r].c();c(e,"class","choice-row")},m(r,s){G(r,e,s);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,[s]){s&7&&(o=pe(r[0]),t=lt(t,s,i,1,r,o,l,e,Jt,wo,null,po))},i:ee,o:ee,d(r){r&&R(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function ga(n,e,t){let{options:l=[]}=e,{selected:o="system"}=e,{onChange:i=()=>{}}=e;const r=s=>i(s.id);return n.$$set=s=>{"options"in s&&t(0,l=s.options),"selected"in s&&t(1,o=s.selected),"onChange"in s&&t(2,i=s.onChange)},[l,o,i,r]}class ha extends Ke{constructor(e){super(),Ve(this,e,ga,da,Ge,{options:0,selected:1,onChange:2})}}function So(n,e,t){const l=n.slice();return l[7]=e[t],l}function yo(n,e){let t,l,o,i,r,s;function a(){return e[6](e[7])}return{key:n,first:null,c(){t=T("button"),c(t,"type","button"),c(t,"class","accent-swatch"),St(t,"--swatch-color",e[7].colors.base),c(t,"data-active",l=e[1]===e[7].id),c(t,"aria-label",o=e[7].label),c(t,"title",i=e[7].label),this.first=t},m(u,f){G(u,t,f),r||(s=V(t,"click",a),r=!0)},p(u,f){e=u,f&1&&St(t,"--swatch-color",e[7].colors.base),f&3&&l!==(l=e[1]===e[7].id)&&c(t,"data-active",l),f&1&&o!==(o=e[7].label)&&c(t,"aria-label",o),f&1&&i!==(i=e[7].label)&&c(t,"title",i)},d(u){u&&R(t),r=!1,s()}}}function Co(n){let e,t,l=n[2]?"Show fewer accent colors":"More accent colors",o,i,r;return{c(){e=T("div"),t=T("button"),o=fe(l),c(t,"type","button"),c(t,"class","swatch-toggle-button"),c(t,"aria-expanded",n[2]),c(e,"class","swatch-toggle-row")},m(s,a){G(s,e,a),g(e,t),g(t,o),i||(r=V(t,"click",function(){je(n[5])&&n[5].apply(this,arguments)}),i=!0)},p(s,a){n=s,a&4&&l!==(l=n[2]?"Show fewer accent colors":"More accent colors")&&Te(o,l),a&4&&c(t,"aria-expanded",n[2])},d(s){s&&R(e),i=!1,r()}}}function ma(n){let e,t=[],l=new Map,o,i,r=pe(n[0]);const s=u=>u[7].id;for(let u=0;u<r.length;u+=1){let f=So(n,r,u),b=s(f);l.set(b,t[u]=yo(b,f))}let a=(n[0].length>n[3]||n[2])&&Co(n);return{c(){e=T("div");for(let u=0;u<t.length;u+=1)t[u].c();o=U(),a&&a.c(),i=Xe(),c(e,"class","accent-grid")},m(u,f){G(u,e,f);for(let b=0;b<t.length;b+=1)t[b]&&t[b].m(e,null);G(u,o,f),a&&a.m(u,f),G(u,i,f)},p(u,[f]){f&19&&(r=pe(u[0]),t=lt(t,f,s,1,u,r,l,e,Jt,yo,null,So)),u[0].length>u[3]||u[2]?a?a.p(u,f):(a=Co(u),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i:ee,o:ee,d(u){u&&(R(e),R(o),R(i));for(let f=0;f<t.length;f+=1)t[f].d();a&&a.d(u)}}}function ba(n,e,t){let{options:l=[]}=e,{selected:o=""}=e,{showAll:i=!1}=e,{previewCount:r=10}=e,{onSelect:s=()=>{}}=e,{onToggleShowAll:a=()=>{}}=e;const u=f=>s(f.id);return n.$$set=f=>{"options"in f&&t(0,l=f.options),"selected"in f&&t(1,o=f.selected),"showAll"in f&&t(2,i=f.showAll),"previewCount"in f&&t(3,r=f.previewCount),"onSelect"in f&&t(4,s=f.onSelect),"onToggleShowAll"in f&&t(5,a=f.onToggleShowAll)},[l,o,i,r,s,a,u]}class ka extends Ke{constructor(e){super(),Ve(this,e,ba,ma,Ge,{options:0,selected:1,showAll:2,previewCount:3,onSelect:4,onToggleShowAll:5})}}function To(n,e,t){const l=n.slice();return l[9]=e[t],l}function vo(n,e){let t,l,o=e[9].label+"",i,r,s,a,u;function f(){return e[8](e[9])}return{key:n,first:null,c(){t=T("button"),l=T("span"),i=fe(o),r=U(),c(t,"type","button"),c(t,"class","gradient-option"),St(t,"--gradient-sample-light",e[9].gradients.light),St(t,"--gradient-sample-dark",e[9].gradients.dark),c(t,"data-active",s=!e[2]&&e[1]===e[9].id),this.first=t},m(b,h){G(b,t,h),g(t,l),g(l,i),g(t,r),a||(u=V(t,"click",f),a=!0)},p(b,h){e=b,h&1&&o!==(o=e[9].label+"")&&Te(i,o),h&1&&St(t,"--gradient-sample-light",e[9].gradients.light),h&1&&St(t,"--gradient-sample-dark",e[9].gradients.dark),h&7&&s!==(s=!e[2]&&e[1]===e[9].id)&&c(t,"data-active",s)},d(b){b&&R(t),a=!1,u()}}}function Io(n){let e,t,l=n[3]?"Show fewer gradients":"More gradients",o,i,r;return{c(){e=T("div"),t=T("button"),o=fe(l),c(t,"type","button"),c(t,"class","swatch-toggle-button"),c(t,"aria-expanded",n[3]),c(e,"class","swatch-toggle-row")},m(s,a){G(s,e,a),g(e,t),g(t,o),i||(r=V(t,"click",function(){je(n[6])&&n[6].apply(this,arguments)}),i=!0)},p(s,a){n=s,a&8&&l!==(l=n[3]?"Show fewer gradients":"More gradients")&&Te(o,l),a&8&&c(t,"aria-expanded",n[3])},d(s){s&&R(e),i=!1,r()}}}function _a(n){let e,t=[],l=new Map,o,i,r,s,a,u,f=pe(n[0]);const b=p=>p[9].id;for(let p=0;p<f.length;p+=1){let S=To(n,f,p),m=b(S);l.set(m,t[p]=vo(m,S))}let h=(n[0].length>n[4]||n[3])&&Io(n);return{c(){e=T("div");for(let p=0;p<t.length;p+=1)t[p].c();o=U(),h&&h.c(),i=U(),r=T("section"),s=T("button"),s.textContent="Custom background‚Ä¶",c(e,"class","gradient-grid"),c(s,"type","button"),c(s,"class","custom-background-button"),c(r,"class","settings-group")},m(p,S){G(p,e,S);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);G(p,o,S),h&&h.m(p,S),G(p,i,S),G(p,r,S),g(r,s),a||(u=V(s,"click",function(){je(n[7])&&n[7].apply(this,arguments)}),a=!0)},p(p,[S]){n=p,S&39&&(f=pe(n[0]),t=lt(t,S,b,1,n,f,l,e,Jt,vo,null,To)),n[0].length>n[4]||n[3]?h?h.p(n,S):(h=Io(n),h.c(),h.m(i.parentNode,i)):h&&(h.d(1),h=null)},i:ee,o:ee,d(p){p&&(R(e),R(o),R(i),R(r));for(let S=0;S<t.length;S+=1)t[S].d();h&&h.d(p),a=!1,u()}}}function pa(n,e,t){let{options:l=[]}=e,{selectedGradientId:o=null}=e,{isCustomMode:i=!1}=e,{showAll:r=!1}=e,{previewCount:s=6}=e,{onSelect:a=()=>{}}=e,{onToggleShowAll:u=()=>{}}=e,{onCustomClick:f=()=>{}}=e;const b=h=>a(h.id);return n.$$set=h=>{"options"in h&&t(0,l=h.options),"selectedGradientId"in h&&t(1,o=h.selectedGradientId),"isCustomMode"in h&&t(2,i=h.isCustomMode),"showAll"in h&&t(3,r=h.showAll),"previewCount"in h&&t(4,s=h.previewCount),"onSelect"in h&&t(5,a=h.onSelect),"onToggleShowAll"in h&&t(6,u=h.onToggleShowAll),"onCustomClick"in h&&t(7,f=h.onCustomClick)},[l,o,i,r,s,a,u,f,b]}class wa extends Ke{constructor(e){super(),Ve(this,e,pa,_a,Ge,{options:0,selectedGradientId:1,isCustomMode:2,showAll:3,previewCount:4,onSelect:5,onToggleShowAll:6,onCustomClick:7})}}function Bo(n,e,t){const l=n.slice();return l[2]=e[t],l}function Sa(n){let e=[],t=new Map,l,o=pe(n[0]);const i=r=>r[2].id;for(let r=0;r<o.length;r+=1){let s=Bo(n,o,r),a=i(s);t.set(a,e[r]=Do(a,s))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();l=Xe()},m(r,s){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(r,s);G(r,l,s)},p(r,s){s&1&&(o=pe(r[0]),e=lt(e,s,i,1,r,o,t,l.parentNode,Jt,Do,l,Bo))},d(r){r&&R(l);for(let s=0;s<e.length;s+=1)e[s].d(r)}}}function ya(n){let e;return{c(){e=T("span"),e.textContent="Default folder",c(e,"class","folder-chip folder-chip--empty"),c(e,"title","Default Bookmark Dial folder")},m(t,l){G(t,e,l)},p:ee,d(t){t&&R(e)}}}function Do(n,e){let t,l,o=e[2].label+"",i,r,s,a=e[2].count+"",u,f,b;return{key:n,first:null,c(){t=T("span"),l=T("span"),i=fe(o),r=U(),s=T("span"),u=fe(a),f=U(),c(l,"class","folder-chip__label"),c(s,"class","folder-chip__count"),c(t,"class","folder-chip"),c(t,"title",b=e[2].fullPath),this.first=t},m(h,p){G(h,t,p),g(t,l),g(l,i),g(t,r),g(t,s),g(s,u),g(t,f)},p(h,p){e=h,p&1&&o!==(o=e[2].label+"")&&Te(i,o),p&1&&a!==(a=e[2].count+"")&&Te(u,a),p&1&&b!==(b=e[2].fullPath)&&c(t,"title",b)},d(h){h&&R(t)}}}function Ca(n){let e,t,l,o,i,r;function s(f,b){return f[0].length===0?ya:Sa}let a=s(n),u=a(n);return{c(){e=T("div"),t=T("div"),u.c(),l=U(),o=T("button"),o.textContent="Manage folders",c(t,"class","folder-bar__summary"),c(o,"type","button"),c(o,"class","ghost-button folder-bar__action"),c(e,"class","folder-bar")},m(f,b){G(f,e,b),g(e,t),u.m(t,null),g(e,l),g(e,o),i||(r=V(o,"click",function(){je(n[1])&&n[1].apply(this,arguments)}),i=!0)},p(f,[b]){n=f,a===(a=s(n))&&u?u.p(n,b):(u.d(1),u=a(n),u&&(u.c(),u.m(t,null)))},i:ee,o:ee,d(f){f&&R(e),u.d(),i=!1,r()}}}function Ta(n,e,t){let{summary:l=[]}=e,{onChooseFolders:o=()=>{}}=e;return n.$$set=i=>{"summary"in i&&t(0,l=i.summary),"onChooseFolders"in i&&t(1,o=i.onChooseFolders)},[l,o]}class va extends Ke{constructor(e){super(),Ve(this,e,Ta,Ca,Ge,{summary:0,onChooseFolders:1})}}function Eo(n,e,t){const l=n.slice();return l[12]=e[t],l[14]=t,l}function Fo(n){let e,t,l,o,i,r;return{c(){e=T("div"),t=T("span"),l=fe(n[1]),o=U(),i=T("span"),r=fe(n[4]),c(t,"class","stepped-slider__label"),c(i,"class","stepped-slider__value"),c(e,"class","stepped-slider__header")},m(s,a){G(s,e,a),g(e,t),g(t,l),g(e,o),g(e,i),g(i,r)},p(s,a){a&2&&Te(l,s[1]),a&16&&Te(r,s[4])},d(s){s&&R(e)}}}function Mo(n){let e,t;return{c(){e=T("span"),t=fe(n[2]),c(e,"class","stepped-slider__description")},m(l,o){G(l,e,o),g(e,t)},p(l,o){o&4&&Te(t,l[2])},d(l){l&&R(e)}}}function Ao(n,e){let t,l,o,i,r,s;function a(){return e[10](e[14])}function u(...f){return e[11](e[14],...f)}return{key:n,first:null,c(){t=T("button"),c(t,"type","button"),c(t,"class","stepped-slider__dot"),c(t,"aria-label",l=e[12].label),c(t,"aria-pressed",o=e[14]===e[3]),c(t,"title",i=e[12].label),he(t,"stepped-slider__dot--active",e[14]===e[3]),he(t,"stepped-slider__dot--passed",e[14]<e[3]),this.first=t},m(f,b){G(f,t,b),r||(s=[V(t,"click",a),V(t,"keydown",u)],r=!0)},p(f,b){e=f,b&1&&l!==(l=e[12].label)&&c(t,"aria-label",l),b&9&&o!==(o=e[14]===e[3])&&c(t,"aria-pressed",o),b&1&&i!==(i=e[12].label)&&c(t,"title",i),b&9&&he(t,"stepped-slider__dot--active",e[14]===e[3]),b&9&&he(t,"stepped-slider__dot--passed",e[14]<e[3])},d(f){f&&R(t),r=!1,Ue(s)}}}function Ia(n){let e,t,l,o,i,r=[],s=new Map,a,u,f,b,h,p,S,m=n[1]&&Fo(n),_=n[2]&&Mo(n),w=pe(n[0]);const v=F=>F[12].value;for(let F=0;F<w.length;F+=1){let P=Eo(n,w,F),A=v(P);s.set(A,r[F]=Ao(A,P))}return{c(){e=T("div"),m&&m.c(),t=U(),_&&_.c(),l=U(),o=T("div"),i=T("div");for(let F=0;F<r.length;F+=1)r[F].c();u=U(),f=T("input"),c(i,"class","stepped-slider__dots"),c(i,"role","group"),c(i,"aria-label",a=n[1]+" options"),c(f,"type","range"),c(f,"min","0"),c(f,"max",b=n[0].length-1),c(f,"step","1"),f.value=h=n[3]>=0?n[3]:0,c(f,"aria-label",n[1]),c(f,"aria-valuetext",n[4]),c(o,"class","stepped-slider__track-wrapper"),c(e,"class","stepped-slider")},m(F,P){G(F,e,P),m&&m.m(e,null),g(e,t),_&&_.m(e,null),g(e,l),g(e,o),g(o,i);for(let A=0;A<r.length;A+=1)r[A]&&r[A].m(i,null);g(o,u),g(o,f),p||(S=V(f,"input",n[5]),p=!0)},p(F,[P]){F[1]?m?m.p(F,P):(m=Fo(F),m.c(),m.m(e,t)):m&&(m.d(1),m=null),F[2]?_?_.p(F,P):(_=Mo(F),_.c(),_.m(e,l)):_&&(_.d(1),_=null),P&201&&(w=pe(F[0]),r=lt(r,P,v,1,F,w,s,i,Jt,Ao,null,Eo)),P&2&&a!==(a=F[1]+" options")&&c(i,"aria-label",a),P&1&&b!==(b=F[0].length-1)&&c(f,"max",b),P&8&&h!==(h=F[3]>=0?F[3]:0)&&(f.value=h),P&2&&c(f,"aria-label",F[1]),P&16&&c(f,"aria-valuetext",F[4])},i:ee,o:ee,d(F){F&&R(e),m&&m.d(),_&&_.d();for(let P=0;P<r.length;P+=1)r[P].d();p=!1,S()}}}function Ba(n,e,t){let l,o,{options:i=[]}=e,{value:r=""}=e,{label:s=""}=e,{description:a=""}=e,{onChange:u=()=>{}}=e;function f(m){const _=parseInt(m.currentTarget.value,10);i[_]&&u(i[_].value)}function b(m){i[m]&&u(i[m].value)}function h(m,_){(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),b(_))}const p=m=>b(m),S=(m,_)=>h(_,m);return n.$$set=m=>{"options"in m&&t(0,i=m.options),"value"in m&&t(8,r=m.value),"label"in m&&t(1,s=m.label),"description"in m&&t(2,a=m.description),"onChange"in m&&t(9,u=m.onChange)},n.$$.update=()=>{n.$$.dirty&257&&t(3,l=i.findIndex(m=>m.value===r)),n.$$.dirty&9&&t(4,o=l>=0?i[l].label:"")},[i,s,a,l,o,f,b,h,r,u,p,S]}class wt extends Ke{constructor(e){super(),Ve(this,e,Ba,Ia,Ge,{options:0,value:8,label:1,description:2,onChange:9})}}function Lo(n){var F,P,A,z,I;let e,t,l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v;return e=new wt({props:{label:"Font weight",description:"Thickness of title text",options:ia,value:((F=n[1].tile)==null?void 0:F.fontWeight)??500,onChange:n[23]}}),l=new wt({props:{label:"Font size",description:"Size of the bookmark title text",options:ra,value:((P=n[1].tile)==null?void 0:P.fontSize)??"0.9rem",onChange:n[24]}}),i=new wt({props:{label:"Title padding",description:"Space between text and backdrop edge",options:sa,value:((A=n[1].tile)==null?void 0:A.padding)??"0.2rem 0.6rem",onChange:n[25]}}),s=new wt({props:{label:"Title shape",description:"Corner rounding of the title backdrop",options:aa,value:((z=n[1].tile)==null?void 0:z.titleShape)??"999px",onChange:n[26]}}),u=new wt({props:{label:"Text visibility",description:"How bold/opaque the title text appears",options:ua,value:((I=n[1].tile)==null?void 0:I.textContrast)??"normal",onChange:n[28]}}),{c(){me(e.$$.fragment),t=U(),me(l.$$.fragment),o=U(),me(i.$$.fragment),r=U(),me(s.$$.fragment),a=U(),me(u.$$.fragment),f=U(),b=T("label"),h=T("input"),S=U(),m=T("div"),m.innerHTML='<span class="settings-toggle__label">Rounded backdrop</span> <span class="settings-toggle__description">Adds a blurred pill behind text for better readability.</span>',c(h,"type","checkbox"),h.checked=p=n[1].titleBackdrop,c(m,"class","settings-toggle__body"),c(b,"class","settings-toggle"),c(b,"title","Adds a soft highlight behind each title for contrast.")},m(E,D){de(e,E,D),G(E,t,D),de(l,E,D),G(E,o,D),de(i,E,D),G(E,r,D),de(s,E,D),G(E,a,D),de(u,E,D),G(E,f,D),G(E,b,D),g(b,h),g(b,S),g(b,m),_=!0,w||(v=V(h,"change",n[36]),w=!0)},p(E,D){var ue,N,Q,Z,te;const $={};D[0]&2&&($.value=((ue=E[1].tile)==null?void 0:ue.fontWeight)??500),D[0]&8388608&&($.onChange=E[23]),e.$set($);const X={};D[0]&2&&(X.value=((N=E[1].tile)==null?void 0:N.fontSize)??"0.9rem"),D[0]&16777216&&(X.onChange=E[24]),l.$set(X);const K={};D[0]&2&&(K.value=((Q=E[1].tile)==null?void 0:Q.padding)??"0.2rem 0.6rem"),D[0]&33554432&&(K.onChange=E[25]),i.$set(K);const J={};D[0]&2&&(J.value=((Z=E[1].tile)==null?void 0:Z.titleShape)??"999px"),D[0]&67108864&&(J.onChange=E[26]),s.$set(J);const le={};D[0]&2&&(le.value=((te=E[1].tile)==null?void 0:te.textContrast)??"normal"),D[0]&268435456&&(le.onChange=E[28]),u.$set(le),(!_||D[0]&2&&p!==(p=E[1].titleBackdrop))&&(h.checked=p)},i(E){_||(j(e.$$.fragment,E),j(l.$$.fragment,E),j(i.$$.fragment,E),j(s.$$.fragment,E),j(u.$$.fragment,E),_=!0)},o(E){Y(e.$$.fragment,E),Y(l.$$.fragment,E),Y(i.$$.fragment,E),Y(s.$$.fragment,E),Y(u.$$.fragment,E),_=!1},d(E){E&&(R(t),R(o),R(r),R(a),R(f),R(b)),ge(e,E),ge(l,E),ge(i,E),ge(s,E),ge(u,E),w=!1,v()}}}function Oo(n){var a,u;let e,t,l,o,i,r,s;return o=new wt({props:{label:"Blur intensity",description:"Glass-like frosted blur effect strength",options:ca,value:((a=n[1].tile)==null?void 0:a.blur)??8,onChange:n[27]}}),r=new wt({props:{label:"Background intensity",description:"How visible the backdrop pill appears against your wallpaper",options:Bi,value:((u=n[1].tile)==null?void 0:u.bgLightness)??3,onChange:n[29]}}),{c(){e=T("section"),t=T("h3"),t.textContent="Backdrop style",l=U(),me(o.$$.fragment),i=U(),me(r.$$.fragment),c(e,"class","settings-group")},m(f,b){G(f,e,b),g(e,t),g(e,l),de(o,e,null),g(e,i),de(r,e,null),s=!0},p(f,b){var S,m;const h={};b[0]&2&&(h.value=((S=f[1].tile)==null?void 0:S.blur)??8),b[0]&134217728&&(h.onChange=f[27]),o.$set(h);const p={};b[0]&2&&(p.value=((m=f[1].tile)==null?void 0:m.bgLightness)??3),b[0]&536870912&&(p.onChange=f[29]),r.$set(p)},i(f){s||(j(o.$$.fragment,f),j(r.$$.fragment,f),s=!0)},o(f){Y(o.$$.fragment,f),Y(r.$$.fragment,f),s=!1},d(f){f&&R(e),ge(o),ge(r)}}}function Po(n){var r,s;let e,t,l,o;e=new wt({props:{label:"UI visibility",description:"How visible elements are when not hovered",options:fa,value:((r=n[1].immersive)==null?void 0:r.opacity)??.15,onChange:n[32]}});let i=((s=n[1].immersive)==null?void 0:s.opacity)===0&&Uo();return{c(){me(e.$$.fragment),t=U(),i&&i.c(),l=Xe()},m(a,u){de(e,a,u),G(a,t,u),i&&i.m(a,u),G(a,l,u),o=!0},p(a,u){var b,h;const f={};u[0]&2&&(f.value=((b=a[1].immersive)==null?void 0:b.opacity)??.15),u[1]&2&&(f.onChange=a[32]),e.$set(f),((h=a[1].immersive)==null?void 0:h.opacity)===0?i||(i=Uo(),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},i(a){o||(j(e.$$.fragment,a),o=!0)},o(a){Y(e.$$.fragment,a),o=!1},d(a){a&&(R(t),R(l)),ge(e,a),i&&i.d(a)}}}function Uo(n){let e;return{c(){e=T("p"),e.textContent="UI is completely invisible. Use Esc key to access settings.",c(e,"class","settings-warning")},m(t,l){G(t,e,l)},d(t){t&&R(e)}}}function zo(n){let e,t,l,o,i,r,s,a,u,f,b,h,p,S;return{c(){e=T("div"),t=T("label"),l=T("span"),l.textContent="Folder width",o=U(),i=T("input"),s=U(),a=T("label"),u=T("input"),b=U(),h=T("div"),h.innerHTML='<span class="settings-toggle__label">Compact header</span> <span class="settings-toggle__description">Hide folder path to save space.</span>',c(l,"class","settings-control__label"),c(i,"type","range"),c(i,"min","480"),c(i,"max","1860"),c(i,"step","20"),i.value=r=n[1].folderColumnWidth,c(t,"class","settings-control"),c(u,"type","checkbox"),u.checked=f=n[1].compactFolderHeader,c(h,"class","settings-toggle__body"),c(a,"class","settings-toggle"),c(e,"class","ungrouped-settings")},m(m,_){G(m,e,_),g(e,t),g(t,l),g(t,o),g(t,i),g(e,s),g(e,a),g(a,u),g(a,b),g(a,h),p||(S=[V(i,"input",n[39]),V(u,"change",n[40])],p=!0)},p(m,_){_[0]&2&&r!==(r=m[1].folderColumnWidth)&&(i.value=r),_[0]&2&&f!==(f=m[1].compactFolderHeader)&&(u.checked=f)},d(m){m&&R(e),p=!1,Ue(S)}}}function Da(n){var hn,On,mn,Pn,Un;let e,t,l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v,F,P,A,z,I,E,D,$,X,K,J,le,ue,N,Q,Z,te,ce,be,Ze,B,M,ke,Ee,ne,Ce,C,ve,H,rt,Fe,Me,ye,ut,Ye,We,ze,Se,tt,dn,Ne,ft,Tt,it,dt,we,nt,gt,st,ht,vt,_t,It,Bt,Lt,gn,mt,Ot,Pe,$e,Dt;f=new ha({props:{options:vi,selected:n[1].theme,onChange:n[8]}}),m=new ka({props:{options:n[3],selected:n[1].accent,showAllAccents:n[5],previewCount:wl,onSelect:n[9],onToggleShowAll:n[18]}}),P=new wa({props:{options:n[4],selectedGradientId:n[1].background.gradientId,isCustomMode:n[1].background.mode==="custom",showAllGradients:n[6],previewCount:pl,onSelect:n[11],onToggleShowAll:n[19],onCustomClick:n[12]}}),D=new wt({props:{label:"Tile size",description:"Overall size of bookmark tiles in the grid",options:Ii,value:((hn=n[1].tile)==null?void 0:hn.size)??"medium",onChange:n[21]}}),X=new wt({props:{label:"Icon shape",description:"Border rounding of favicon icons",options:oa,value:((On=n[1].tile)==null?void 0:On.iconShape)??"50%",onChange:n[22]}});let Ae=((mn=n[1].tile)==null?void 0:mn.showTitle)!==!1&&Lo(n),Le=n[1].titleBackdrop&&((Pn=n[1].tile)==null?void 0:Pn.showTitle)!==!1&&Oo(n),Oe=((Un=n[1].immersive)==null?void 0:Un.enabled)&&Po(n);Ye=new va({props:{summary:n[2],onChooseFolders:n[20]}});let Je=!n[1].mergeAllBookmarks&&zo(n);return{c(){var Ie,oe;e=T("aside"),t=T("header"),l=T("h2"),l.innerHTML=`<img src="/icons/icon-48.png" alt="Bookmark Dial" class="settings-drawer__brand-icon"/>
      Settings`,o=U(),i=T("button"),i.textContent="√ó",r=U(),s=T("section"),a=T("h3"),a.textContent="Theme",u=U(),me(f.$$.fragment),b=U(),h=T("section"),p=T("h3"),p.textContent="Accent color",S=U(),me(m.$$.fragment),_=U(),w=T("section"),v=T("h3"),v.textContent="Gradient background",F=U(),me(P.$$.fragment),A=U(),z=T("section"),I=T("h3"),I.textContent="Tile appearance",E=U(),me(D.$$.fragment),$=U(),me(X.$$.fragment),K=U(),J=T("section"),le=T("h3"),le.textContent="Tile title",ue=U(),N=T("label"),Q=T("input"),te=U(),ce=T("div"),ce.innerHTML='<span class="settings-toggle__label">Show title</span> <span class="settings-toggle__description">Display bookmark names below icons.</span>',be=U(),Ae&&Ae.c(),Ze=U(),Le&&Le.c(),B=U(),M=T("section"),ke=T("h3"),ke.textContent="Immersive mode",Ee=U(),ne=T("label"),Ce=T("input"),ve=U(),H=T("div"),H.innerHTML='<span class="settings-toggle__label">Enable immersive mode</span> <span class="settings-toggle__description">Fade UI elements to reveal your background. Hover to interact.</span>',rt=U(),Oe&&Oe.c(),Fe=U(),Me=T("section"),ye=T("h3"),ye.textContent="Folders",ut=U(),me(Ye.$$.fragment),We=U(),ze=T("label"),Se=T("input"),dn=U(),Ne=T("div"),Ne.innerHTML='<span class="settings-toggle__label">Merge bookmarks from all folders</span> <span class="settings-toggle__description">Display all bookmarks in a single deduplicated grid.</span>',ft=U(),Je&&Je.c(),Tt=U(),it=T("section"),dt=T("h3"),dt.textContent="Experimental",we=U(),nt=T("label"),gt=T("input"),ht=U(),vt=T("div"),vt.innerHTML='<span class="settings-toggle__label">Bookmark search</span> <span class="settings-toggle__description">Press <kbd>/</kbd> to search bookmarks.</span>',_t=U(),It=T("label"),Bt=T("input"),gn=U(),mt=T("div"),mt.innerHTML='<span class="settings-toggle__label">Show frequently visited</span> <span class="settings-toggle__description">Include your most visited sites alongside bookmarks.</span>',c(i,"type","button"),c(i,"class","settings-drawer__close"),c(i,"aria-label","Close settings"),c(t,"class","settings-drawer__header"),c(s,"class","settings-group"),c(h,"class","settings-group"),c(w,"class","settings-group"),c(z,"class","settings-group"),c(Q,"type","checkbox"),Q.checked=Z=((Ie=n[1].tile)==null?void 0:Ie.showTitle)??!0,c(ce,"class","settings-toggle__body"),c(N,"class","settings-toggle"),c(N,"title","Show or hide bookmark titles below icons."),c(J,"class","settings-group"),c(Ce,"type","checkbox"),Ce.checked=C=((oe=n[1].immersive)==null?void 0:oe.enabled)??!1,c(H,"class","settings-toggle__body"),c(ne,"class","settings-toggle"),c(ne,"title","Fade UI elements to reveal your background. Hover to interact."),c(M,"class","settings-group"),c(Se,"type","checkbox"),Se.checked=tt=n[1].mergeAllBookmarks,c(Ne,"class","settings-toggle__body"),c(ze,"class","settings-toggle folder-group-toggle"),c(Me,"class","settings-group settings-group--folders"),c(gt,"type","checkbox"),gt.checked=st=n[1].enableBookmarkSearch,c(vt,"class","settings-toggle__body"),c(nt,"class","settings-toggle"),c(Bt,"type","checkbox"),Bt.checked=Lt=n[1].enableTopSites,c(mt,"class","settings-toggle__body"),c(It,"class","settings-toggle"),c(it,"class","settings-group"),c(e,"id","settings-drawer"),c(e,"class","settings-drawer"),c(e,"data-open",n[0]),c(e,"aria-hidden",Ot=!n[0]),c(e,"tabindex","-1")},m(Ie,oe){G(Ie,e,oe),g(e,t),g(t,l),g(t,o),g(t,i),g(e,r),g(e,s),g(s,a),g(s,u),de(f,s,null),g(e,b),g(e,h),g(h,p),g(h,S),de(m,h,null),g(e,_),g(e,w),g(w,v),g(w,F),de(P,w,null),g(e,A),g(e,z),g(z,I),g(z,E),de(D,z,null),g(z,$),de(X,z,null),g(e,K),g(e,J),g(J,le),g(J,ue),g(J,N),g(N,Q),g(N,te),g(N,ce),g(J,be),Ae&&Ae.m(J,null),g(e,Ze),Le&&Le.m(e,null),g(e,B),g(e,M),g(M,ke),g(M,Ee),g(M,ne),g(ne,Ce),g(ne,ve),g(ne,H),g(M,rt),Oe&&Oe.m(M,null),g(e,Fe),g(e,Me),g(Me,ye),g(Me,ut),de(Ye,Me,null),g(Me,We),g(Me,ze),g(ze,Se),g(ze,dn),g(ze,Ne),g(Me,ft),Je&&Je.m(Me,null),g(e,Tt),g(e,it),g(it,dt),g(it,we),g(it,nt),g(nt,gt),g(nt,ht),g(nt,vt),g(it,_t),g(it,It),g(It,Bt),g(It,gn),g(It,mt),n[43](e),Pe=!0,$e||(Dt=[V(i,"click",function(){je(n[7])&&n[7].apply(this,arguments)}),V(Q,"change",n[35]),V(Ce,"change",n[37]),V(Se,"change",n[38]),V(gt,"change",n[41]),V(Bt,"change",n[42]),V(e,"click",$r(n[34]))],$e=!0)},p(Ie,oe){var zn,Yt,bt,$t,Nn,Hn,Rn;n=Ie;const bn={};oe[0]&2&&(bn.selected=n[1].theme),oe[0]&256&&(bn.onChange=n[8]),f.$set(bn);const Pt={};oe[0]&8&&(Pt.options=n[3]),oe[0]&2&&(Pt.selected=n[1].accent),oe[0]&32&&(Pt.showAllAccents=n[5]),oe[0]&512&&(Pt.onSelect=n[9]),oe[0]&262144&&(Pt.onToggleShowAll=n[18]),m.$set(Pt);const pt={};oe[0]&16&&(pt.options=n[4]),oe[0]&2&&(pt.selectedGradientId=n[1].background.gradientId),oe[0]&2&&(pt.isCustomMode=n[1].background.mode==="custom"),oe[0]&64&&(pt.showAllGradients=n[6]),oe[0]&2048&&(pt.onSelect=n[11]),oe[0]&524288&&(pt.onToggleShowAll=n[19]),oe[0]&4096&&(pt.onCustomClick=n[12]),P.$set(pt);const Ut={};oe[0]&2&&(Ut.value=((zn=n[1].tile)==null?void 0:zn.size)??"medium"),oe[0]&2097152&&(Ut.onChange=n[21]),D.$set(Ut);const zt={};oe[0]&2&&(zt.value=((Yt=n[1].tile)==null?void 0:Yt.iconShape)??"50%"),oe[0]&4194304&&(zt.onChange=n[22]),X.$set(zt),(!Pe||oe[0]&2&&Z!==(Z=((bt=n[1].tile)==null?void 0:bt.showTitle)??!0))&&(Q.checked=Z),(($t=n[1].tile)==null?void 0:$t.showTitle)!==!1?Ae?(Ae.p(n,oe),oe[0]&2&&j(Ae,1)):(Ae=Lo(n),Ae.c(),j(Ae,1),Ae.m(J,null)):Ae&&(He(),Y(Ae,1,1,()=>{Ae=null}),Re()),n[1].titleBackdrop&&((Nn=n[1].tile)==null?void 0:Nn.showTitle)!==!1?Le?(Le.p(n,oe),oe[0]&2&&j(Le,1)):(Le=Oo(n),Le.c(),j(Le,1),Le.m(e,B)):Le&&(He(),Y(Le,1,1,()=>{Le=null}),Re()),(!Pe||oe[0]&2&&C!==(C=((Hn=n[1].immersive)==null?void 0:Hn.enabled)??!1))&&(Ce.checked=C),(Rn=n[1].immersive)!=null&&Rn.enabled?Oe?(Oe.p(n,oe),oe[0]&2&&j(Oe,1)):(Oe=Po(n),Oe.c(),j(Oe,1),Oe.m(M,null)):Oe&&(He(),Y(Oe,1,1,()=>{Oe=null}),Re());const Nt={};oe[0]&4&&(Nt.summary=n[2]),oe[0]&1048576&&(Nt.onChooseFolders=n[20]),Ye.$set(Nt),(!Pe||oe[0]&2&&tt!==(tt=n[1].mergeAllBookmarks))&&(Se.checked=tt),n[1].mergeAllBookmarks?Je&&(Je.d(1),Je=null):Je?Je.p(n,oe):(Je=zo(n),Je.c(),Je.m(Me,null)),(!Pe||oe[0]&2&&st!==(st=n[1].enableBookmarkSearch))&&(gt.checked=st),(!Pe||oe[0]&2&&Lt!==(Lt=n[1].enableTopSites))&&(Bt.checked=Lt),(!Pe||oe[0]&1)&&c(e,"data-open",n[0]),(!Pe||oe[0]&1&&Ot!==(Ot=!n[0]))&&c(e,"aria-hidden",Ot)},i(Ie){Pe||(j(f.$$.fragment,Ie),j(m.$$.fragment,Ie),j(P.$$.fragment,Ie),j(D.$$.fragment,Ie),j(X.$$.fragment,Ie),j(Ae),j(Le),j(Oe),j(Ye.$$.fragment,Ie),Pe=!0)},o(Ie){Y(f.$$.fragment,Ie),Y(m.$$.fragment,Ie),Y(P.$$.fragment,Ie),Y(D.$$.fragment,Ie),Y(X.$$.fragment,Ie),Y(Ae),Y(Le),Y(Oe),Y(Ye.$$.fragment,Ie),Pe=!1},d(Ie){Ie&&R(e),ge(f),ge(m),ge(P),ge(D),ge(X),Ae&&Ae.d(),Le&&Le.d(),Oe&&Oe.d(),ge(Ye),Je&&Je.d(),n[43](null),$e=!1,Ue(Dt)}}}function Ea(n,e,t){let{open:l=!1}=e,{settings:o}=e,{folderSummary:i=[]}=e,{visibleAccentOptions:r=[]}=e,{visibleGradientOptions:s=[]}=e,{showAllAccents:a=!1}=e,{showAllGradients:u=!1}=e,{onClose:f=()=>{}}=e,{onThemeChange:b=()=>{}}=e,{onAccentChange:h=()=>{}}=e,{onTitleBackdropChange:p=()=>{}}=e,{onGradientSelect:S=()=>{}}=e,{onCustomBackgroundClick:m=()=>{}}=e,{onMergeAllChange:_=()=>{}}=e,{onFolderColumnWidthChange:w=()=>{}}=e,{onCompactHeaderChange:v=()=>{}}=e,{onSearchToggle:F=()=>{}}=e,{onTopSitesToggle:P=()=>{}}=e,{onToggleAccents:A=()=>{}}=e,{onToggleGradients:z=()=>{}}=e,{onOpenFolderModal:I=()=>{}}=e,{onTileSizeChange:E=()=>{}}=e,{onTileIconShapeChange:D=()=>{}}=e,{onTileFontWeightChange:$=()=>{}}=e,{onTileFontSizeChange:X=()=>{}}=e,{onTilePaddingChange:K=()=>{}}=e,{onTileTitleShapeChange:J=()=>{}}=e,{onTileBlurChange:le=()=>{}}=e,{onTileTextContrastChange:ue=()=>{}}=e,{onTileBgLightnessChange:N=()=>{}}=e,{onShowTitleChange:Q=()=>{}}=e,{onImmersiveEnabledChange:Z=()=>{}}=e,{onImmersiveOpacityChange:te=()=>{}}=e,ce;function be(H){ss.call(this,n,H)}const Ze=H=>Q(H.currentTarget.checked),B=H=>p(H.currentTarget.checked),M=H=>Z(H.currentTarget.checked),ke=H=>_(H.currentTarget.checked),Ee=H=>w(Number(H.currentTarget.value)),ne=H=>v(H.currentTarget.checked),Ce=H=>F(H.currentTarget.checked),C=H=>P(H.currentTarget.checked);function ve(H){ct[H?"unshift":"push"](()=>{ce=H,t(33,ce)})}return n.$$set=H=>{"open"in H&&t(0,l=H.open),"settings"in H&&t(1,o=H.settings),"folderSummary"in H&&t(2,i=H.folderSummary),"visibleAccentOptions"in H&&t(3,r=H.visibleAccentOptions),"visibleGradientOptions"in H&&t(4,s=H.visibleGradientOptions),"showAllAccents"in H&&t(5,a=H.showAllAccents),"showAllGradients"in H&&t(6,u=H.showAllGradients),"onClose"in H&&t(7,f=H.onClose),"onThemeChange"in H&&t(8,b=H.onThemeChange),"onAccentChange"in H&&t(9,h=H.onAccentChange),"onTitleBackdropChange"in H&&t(10,p=H.onTitleBackdropChange),"onGradientSelect"in H&&t(11,S=H.onGradientSelect),"onCustomBackgroundClick"in H&&t(12,m=H.onCustomBackgroundClick),"onMergeAllChange"in H&&t(13,_=H.onMergeAllChange),"onFolderColumnWidthChange"in H&&t(14,w=H.onFolderColumnWidthChange),"onCompactHeaderChange"in H&&t(15,v=H.onCompactHeaderChange),"onSearchToggle"in H&&t(16,F=H.onSearchToggle),"onTopSitesToggle"in H&&t(17,P=H.onTopSitesToggle),"onToggleAccents"in H&&t(18,A=H.onToggleAccents),"onToggleGradients"in H&&t(19,z=H.onToggleGradients),"onOpenFolderModal"in H&&t(20,I=H.onOpenFolderModal),"onTileSizeChange"in H&&t(21,E=H.onTileSizeChange),"onTileIconShapeChange"in H&&t(22,D=H.onTileIconShapeChange),"onTileFontWeightChange"in H&&t(23,$=H.onTileFontWeightChange),"onTileFontSizeChange"in H&&t(24,X=H.onTileFontSizeChange),"onTilePaddingChange"in H&&t(25,K=H.onTilePaddingChange),"onTileTitleShapeChange"in H&&t(26,J=H.onTileTitleShapeChange),"onTileBlurChange"in H&&t(27,le=H.onTileBlurChange),"onTileTextContrastChange"in H&&t(28,ue=H.onTileTextContrastChange),"onTileBgLightnessChange"in H&&t(29,N=H.onTileBgLightnessChange),"onShowTitleChange"in H&&t(30,Q=H.onShowTitleChange),"onImmersiveEnabledChange"in H&&t(31,Z=H.onImmersiveEnabledChange),"onImmersiveOpacityChange"in H&&t(32,te=H.onImmersiveOpacityChange)},n.$$.update=()=>{n.$$.dirty[0]&1|n.$$.dirty[1]&4&&l&&ce&&ce.focus()},[l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v,F,P,A,z,I,E,D,$,X,K,J,le,ue,N,Q,Z,te,ce,be,Ze,B,M,ke,Ee,ne,Ce,C,ve]}class Fa extends Ke{constructor(e){super(),Ve(this,e,Ea,Da,Ge,{open:0,settings:1,folderSummary:2,visibleAccentOptions:3,visibleGradientOptions:4,showAllAccents:5,showAllGradients:6,onClose:7,onThemeChange:8,onAccentChange:9,onTitleBackdropChange:10,onGradientSelect:11,onCustomBackgroundClick:12,onMergeAllChange:13,onFolderColumnWidthChange:14,onCompactHeaderChange:15,onSearchToggle:16,onTopSitesToggle:17,onToggleAccents:18,onToggleGradients:19,onOpenFolderModal:20,onTileSizeChange:21,onTileIconShapeChange:22,onTileFontWeightChange:23,onTileFontSizeChange:24,onTilePaddingChange:25,onTileTitleShapeChange:26,onTileBlurChange:27,onTileTextContrastChange:28,onTileBgLightnessChange:29,onShowTitleChange:30,onImmersiveEnabledChange:31,onImmersiveOpacityChange:32},null,[-1,-1])}}function No(n,e,t){const l=n.slice();return l[36]=e[t],l[38]=t,l}function Ho(n,e,t){const l=n.slice();return l[39]=e[t],l[41]=t,l}function Ro(n,e){var S,m;let t,l,o;function i(){return e[23](e[39])}function r(){return e[24](e[39])}function s(){return e[25](e[39])}function a(){return e[26](e[39])}function u(..._){return e[27](e[39],..._)}function f(){return e[28](e[41])}function b(..._){return e[29](e[39],..._)}function h(..._){return e[30](e[39],..._)}function p(..._){return e[31](e[39],..._)}return l=new Bl({props:{bookmark:e[39],showTitle:e[3],titleBackdrop:e[4],menuOpen:e[6]===e[39].id,focused:e[5]===e[41],dragging:((S=e[7])==null?void 0:S.id)===e[39].id,dragOver:((m=e[8])==null?void 0:m.id)===e[39].id,onToggleMenu:i,onEdit:r,onRemove:s,onFallback:a,onContextMenu:u,onFocus:f,onDragStart:b,onDragOver:h,onDragLeave:e[17],onDrop:p,onDragEnd:e[19],getFaviconUrl:e[21]}}),{key:n,first:null,c(){t=Xe(),me(l.$$.fragment),this.first=t},m(_,w){G(_,t,w),de(l,_,w),o=!0},p(_,w){var F,P;e=_;const v={};w[0]&1&&(v.bookmark=e[39]),w[0]&8&&(v.showTitle=e[3]),w[0]&16&&(v.titleBackdrop=e[4]),w[0]&65&&(v.menuOpen=e[6]===e[39].id),w[0]&33&&(v.focused=e[5]===e[41]),w[0]&129&&(v.dragging=((F=e[7])==null?void 0:F.id)===e[39].id),w[0]&257&&(v.dragOver=((P=e[8])==null?void 0:P.id)===e[39].id),w[0]&513&&(v.onToggleMenu=i),w[0]&1025&&(v.onEdit=r),w[0]&2049&&(v.onRemove=s),w[0]&4097&&(v.onFallback=a),w[0]&8193&&(v.onContextMenu=u),w[0]&16385&&(v.onFocus=f),w[0]&32769&&(v.onDragStart=b),w[0]&65537&&(v.onDragOver=h),w[0]&131072&&(v.onDragLeave=e[17]),w[0]&262145&&(v.onDrop=p),w[0]&524288&&(v.onDragEnd=e[19]),w[0]&2097152&&(v.getFaviconUrl=e[21]),l.$set(v)},i(_){o||(j(l.$$.fragment,_),o=!0)},o(_){Y(l.$$.fragment,_),o=!1},d(_){_&&R(t),ge(l,_)}}}function Go(n){let e=[],t=new Map,l,o,i=pe(n[1]);const r=s=>s[36].id;for(let s=0;s<i.length;s+=1){let a=No(n,i,s),u=r(a);t.set(u,e[s]=Wo(u,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();l=Xe()},m(s,a){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(s,a);G(s,l,a),o=!0},p(s,a){a[0]&2113595&&(i=pe(s[1]),He(),e=lt(e,a,r,1,s,i,t,l.parentNode,xt,Wo,l,No),Re())},i(s){if(!o){for(let a=0;a<i.length;a+=1)j(e[a]);o=!0}},o(s){for(let a=0;a<e.length;a+=1)Y(e[a]);o=!1},d(s){s&&R(l);for(let a=0;a<e.length;a+=1)e[a].d(s)}}}function Wo(n,e){let t,l,o;function i(){return e[32](e[38])}return l=new Bl({props:{bookmark:e[36],showTitle:e[3],titleBackdrop:e[4],menuOpen:!1,focused:e[5]===e[0].length+e[38],dragging:!1,dragOver:!1,onToggleMenu:Aa,onEdit:La,onRemove:Oa,onFallback:Pa,onContextMenu:Ua,onFocus:i,onDragStart:za,onDragOver:Na,onDragLeave:Ha,onDrop:Ra,onDragEnd:Ga,getFaviconUrl:e[21],isTopSite:!0}}),{key:n,first:null,c(){t=Xe(),me(l.$$.fragment),this.first=t},m(r,s){G(r,t,s),de(l,r,s),o=!0},p(r,s){e=r;const a={};s[0]&2&&(a.bookmark=e[36]),s[0]&8&&(a.showTitle=e[3]),s[0]&16&&(a.titleBackdrop=e[4]),s[0]&35&&(a.focused=e[5]===e[0].length+e[38]),s[0]&16387&&(a.onFocus=i),s[0]&2097152&&(a.getFaviconUrl=e[21]),l.$set(a)},i(r){o||(j(l.$$.fragment,r),o=!0)},o(r){Y(l.$$.fragment,r),o=!1},d(r){r&&R(t),ge(l,r)}}}function qo(n){let e;return{c(){e=T("div"),e.textContent="Add shortcut"},m(t,l){G(t,e,l)},d(t){t&&R(e)}}}function Ma(n){let e,t=[],l=new Map,o,i,r,s,a,u,f,b,h,p=pe(n[0]);const S=w=>w[39].id;for(let w=0;w<p.length;w+=1){let v=Ho(n,p,w),F=S(v);l.set(F,t[w]=Ro(F,v))}let m=n[2]&&n[1].length>0&&Go(n),_=n[3]&&qo();return{c(){e=T("div");for(let w=0;w<t.length;w+=1)t[w].c();o=U(),m&&m.c(),i=U(),r=T("article"),s=T("button"),a=T("span"),a.textContent="+",u=U(),_&&_.c(),c(a,"aria-hidden","true"),c(s,"class","add-button"),c(s,"type","button"),c(s,"aria-label","Add new bookmark shortcut"),c(r,"class","tile add-tile"),c(r,"draggable","false"),c(e,"id","dial-grid"),c(e,"class","grid"),c(e,"aria-label","Bookmark Dial links"),c(e,"tabindex","-1"),c(e,"role","group")},m(w,v){G(w,e,v);for(let F=0;F<t.length;F+=1)t[F]&&t[F].m(e,null);g(e,o),m&&m.m(e,null),g(e,i),g(e,r),g(r,s),g(s,a),g(s,u),_&&_.m(s,null),n[34](e),f=!0,b||(h=V(s,"click",n[33]),b=!0)},p(w,v){v[0]&3145721&&(p=pe(w[0]),He(),t=lt(t,v,S,1,w,p,l,e,xt,Ro,o,Ho),Re()),w[2]&&w[1].length>0?m?(m.p(w,v),v[0]&6&&j(m,1)):(m=Go(w),m.c(),j(m,1),m.m(e,i)):m&&(He(),Y(m,1,1,()=>{m=null}),Re()),w[3]?_||(_=qo(),_.c(),_.m(s,null)):_&&(_.d(1),_=null)},i(w){if(!f){for(let v=0;v<p.length;v+=1)j(t[v]);j(m),f=!0}},o(w){for(let v=0;v<t.length;v+=1)Y(t[v]);Y(m),f=!1},d(w){w&&R(e);for(let v=0;v<t.length;v+=1)t[v].d();m&&m.d(),_&&_.d(),n[34](null),b=!1,h()}}}const Aa=()=>{},La=()=>{},Oa=()=>{},Pa=()=>{},Ua=()=>{},za=()=>{},Na=()=>{},Ha=()=>{},Ra=()=>{},Ga=()=>{};function Wa(n,e,t){const l=bi();let{bookmarks:o=[]}=e,{topSites:i=[]}=e,{showTopSites:r=!1}=e,{showTitle:s=!0}=e,{titleBackdrop:a=!1}=e,{focusedIndex:u=-1}=e,{openMenuId:f=null}=e,{draggedBookmark:b=null}=e,{dragOverBookmark:h=null}=e,{onTileMenu:p=()=>{}}=e,{onTileEdit:S=()=>{}}=e,{onTileRemove:m=()=>{}}=e,{onTileFallback:_=()=>{}}=e,{onTileContextMenu:w=()=>{}}=e,{onTileFocus:v=()=>{}}=e,{onDragStart:F=()=>{}}=e,{onDragOver:P=()=>{}}=e,{onDragLeave:A=()=>{}}=e,{onDrop:z=()=>{}}=e,{onDragEnd:I=()=>{}}=e,{onAddShortcut:E=()=>{}}=e,{getFaviconUrl:D=async()=>""}=e,$=null;mi(()=>{l("gridmount",{gridRef:$})});const X=B=>p(B.id),K=B=>S(B),J=B=>m(B.id),le=B=>_(B.id),ue=(B,M)=>w(M,B),N=B=>v(B),Q=(B,M)=>F(M,B),Z=(B,M)=>P(M,B),te=(B,M)=>z(M,B),ce=B=>v(o.length+B),be=()=>E();function Ze(B){ct[B?"unshift":"push"](()=>{$=B,t(22,$)})}return n.$$set=B=>{"bookmarks"in B&&t(0,o=B.bookmarks),"topSites"in B&&t(1,i=B.topSites),"showTopSites"in B&&t(2,r=B.showTopSites),"showTitle"in B&&t(3,s=B.showTitle),"titleBackdrop"in B&&t(4,a=B.titleBackdrop),"focusedIndex"in B&&t(5,u=B.focusedIndex),"openMenuId"in B&&t(6,f=B.openMenuId),"draggedBookmark"in B&&t(7,b=B.draggedBookmark),"dragOverBookmark"in B&&t(8,h=B.dragOverBookmark),"onTileMenu"in B&&t(9,p=B.onTileMenu),"onTileEdit"in B&&t(10,S=B.onTileEdit),"onTileRemove"in B&&t(11,m=B.onTileRemove),"onTileFallback"in B&&t(12,_=B.onTileFallback),"onTileContextMenu"in B&&t(13,w=B.onTileContextMenu),"onTileFocus"in B&&t(14,v=B.onTileFocus),"onDragStart"in B&&t(15,F=B.onDragStart),"onDragOver"in B&&t(16,P=B.onDragOver),"onDragLeave"in B&&t(17,A=B.onDragLeave),"onDrop"in B&&t(18,z=B.onDrop),"onDragEnd"in B&&t(19,I=B.onDragEnd),"onAddShortcut"in B&&t(20,E=B.onAddShortcut),"getFaviconUrl"in B&&t(21,D=B.getFaviconUrl)},n.$$.update=()=>{n.$$.dirty[0]&4194304&&$&&l("gridmount",{gridRef:$})},[o,i,r,s,a,u,f,b,h,p,S,m,_,w,v,F,P,A,z,I,E,D,$,X,K,J,le,ue,N,Q,Z,te,ce,be,Ze]}class qa extends Ke{constructor(e){super(),Ve(this,e,Wa,Ma,Ge,{bookmarks:0,topSites:1,showTopSites:2,showTitle:3,titleBackdrop:4,focusedIndex:5,openMenuId:6,draggedBookmark:7,dragOverBookmark:8,onTileMenu:9,onTileEdit:10,onTileRemove:11,onTileFallback:12,onTileContextMenu:13,onTileFocus:14,onDragStart:15,onDragOver:16,onDragLeave:17,onDrop:18,onDragEnd:19,onAddShortcut:20,getFaviconUrl:21},null,[-1,-1])}}function jo(n,e,t){const l=n.slice();return l[29]=e[t],l}function ja(n){let e,t=n[0].label+"",l,o,i,r=n[0].fullPath&&n[0].fullPath!==n[0].label&&Vo(n);return{c(){e=T("h4"),l=fe(t),o=U(),r&&r.c(),i=Xe(),c(e,"class","folder-section__title")},m(s,a){G(s,e,a),g(e,l),G(s,o,a),r&&r.m(s,a),G(s,i,a)},p(s,a){a[0]&1&&t!==(t=s[0].label+"")&&Te(l,t),s[0].fullPath&&s[0].fullPath!==s[0].label?r?r.p(s,a):(r=Vo(s),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(s){s&&(R(e),R(o),R(i)),r&&r.d(s)}}}function Va(n){let e,t=n[0].label+"",l,o;return{c(){e=T("h4"),l=fe(t),c(e,"class","folder-section__title"),c(e,"title",o=n[0].fullPath)},m(i,r){G(i,e,r),g(e,l)},p(i,r){r[0]&1&&t!==(t=i[0].label+"")&&Te(l,t),r[0]&1&&o!==(o=i[0].fullPath)&&c(e,"title",o)},d(i){i&&R(e)}}}function Vo(n){let e,t=n[0].fullPath+"",l;return{c(){e=T("p"),l=fe(t),c(e,"class","folder-section__path")},m(o,i){G(o,e,i),g(e,l)},p(o,i){i[0]&1&&t!==(t=o[0].fullPath+"")&&Te(l,t)},d(o){o&&R(e)}}}function Ka(n){let e,t,l,o,i,r,s,a,u=n[2]&&Ko();return{c(){e=T("div"),t=T("article"),l=T("button"),o=T("span"),o.textContent="+",i=U(),u&&u.c(),c(o,"aria-hidden","true"),c(l,"class","add-button"),c(l,"type","button"),c(t,"class","tile add-tile"),c(t,"draggable","false"),c(e,"class","grid folder-section__grid"),c(e,"role","group"),c(e,"aria-label",r=`Shortcuts in ${n[0].fullPath||n[0].label}`)},m(f,b){G(f,e,b),g(e,t),g(t,l),g(l,o),g(l,i),u&&u.m(l,null),s||(a=V(l,"click",n[28]),s=!0)},p(f,b){f[2]?u||(u=Ko(),u.c(),u.m(l,null)):u&&(u.d(1),u=null),b[0]&1&&r!==(r=`Shortcuts in ${f[0].fullPath||f[0].label}`)&&c(e,"aria-label",r)},i:ee,o:ee,d(f){f&&R(e),u&&u.d(),s=!1,a()}}}function Ya(n){let e,t=[],l=new Map,o,i,r,s,a,u,f,b,h,p=pe(n[0].items);const S=_=>_[29].id;for(let _=0;_<p.length;_+=1){let w=jo(n,p,_),v=S(w);l.set(v,t[_]=Yo(v,w))}let m=n[2]&&Qo();return{c(){e=T("div");for(let _=0;_<t.length;_+=1)t[_].c();o=U(),i=T("article"),r=T("button"),s=T("span"),s.textContent="+",a=U(),m&&m.c(),c(s,"aria-hidden","true"),c(r,"class","add-button"),c(r,"type","button"),c(i,"class","tile add-tile"),c(i,"draggable","false"),c(e,"class","grid folder-section__grid"),c(e,"role","group"),c(e,"aria-label",u=`Shortcuts in ${n[0].fullPath||n[0].label}`)},m(_,w){G(_,e,w);for(let v=0;v<t.length;v+=1)t[v]&&t[v].m(e,null);g(e,o),g(e,i),g(i,r),g(r,s),g(r,a),m&&m.m(r,null),f=!0,b||(h=V(r,"click",n[27]),b=!0)},p(_,w){w[0]&393213&&(p=pe(_[0].items),He(),t=lt(t,w,S,1,_,p,l,e,xt,Yo,o,jo),Re()),_[2]?m||(m=Qo(),m.c(),m.m(r,null)):m&&(m.d(1),m=null),(!f||w[0]&1&&u!==(u=`Shortcuts in ${_[0].fullPath||_[0].label}`))&&c(e,"aria-label",u)},i(_){if(!f){for(let w=0;w<p.length;w+=1)j(t[w]);f=!0}},o(_){for(let w=0;w<t.length;w+=1)Y(t[w]);f=!1},d(_){_&&R(e);for(let w=0;w<t.length;w+=1)t[w].d();m&&m.d(),b=!1,h()}}}function Ko(n){let e;return{c(){e=T("div"),e.textContent="Add shortcut"},m(t,l){G(t,e,l)},d(t){t&&R(e)}}}function Yo(n,e){var p,S;let t,l,o;function i(){return e[19](e[29])}function r(){return e[20](e[29])}function s(){return e[21](e[29])}function a(){return e[22](e[29])}function u(...m){return e[23](e[29],...m)}function f(...m){return e[24](e[29],...m)}function b(...m){return e[25](e[29],...m)}function h(...m){return e[26](e[29],...m)}return l=new Bl({props:{bookmark:e[29],showTitle:e[2],titleBackdrop:e[3],menuOpen:e[4]===e[29].id,focused:!1,dragging:((p=e[5])==null?void 0:p.id)===e[29].id,dragOver:((S=e[6])==null?void 0:S.id)===e[29].id,onToggleMenu:i,onEdit:r,onRemove:s,onFallback:a,onContextMenu:u,onFocus:Xa,onDragStart:f,onDragOver:b,onDragLeave:e[14],onDrop:h,onDragEnd:e[16],getFaviconUrl:e[18]}}),{key:n,first:null,c(){t=Xe(),me(l.$$.fragment),this.first=t},m(m,_){G(m,t,_),de(l,m,_),o=!0},p(m,_){var v,F;e=m;const w={};_[0]&1&&(w.bookmark=e[29]),_[0]&4&&(w.showTitle=e[2]),_[0]&8&&(w.titleBackdrop=e[3]),_[0]&17&&(w.menuOpen=e[4]===e[29].id),_[0]&33&&(w.dragging=((v=e[5])==null?void 0:v.id)===e[29].id),_[0]&65&&(w.dragOver=((F=e[6])==null?void 0:F.id)===e[29].id),_[0]&129&&(w.onToggleMenu=i),_[0]&257&&(w.onEdit=r),_[0]&513&&(w.onRemove=s),_[0]&1025&&(w.onFallback=a),_[0]&2049&&(w.onContextMenu=u),_[0]&4097&&(w.onDragStart=f),_[0]&8193&&(w.onDragOver=b),_[0]&16384&&(w.onDragLeave=e[14]),_[0]&32769&&(w.onDrop=h),_[0]&65536&&(w.onDragEnd=e[16]),_[0]&262144&&(w.getFaviconUrl=e[18]),l.$set(w)},i(m){o||(j(l.$$.fragment,m),o=!0)},o(m){Y(l.$$.fragment,m),o=!1},d(m){m&&R(t),ge(l,m)}}}function Qo(n){let e;return{c(){e=T("div"),e.textContent="Add shortcut"},m(t,l){G(t,e,l)},d(t){t&&R(e)}}}function Qa(n){let e,t,l,o,i,r,s;function a(S,m){return S[1]?Va:ja}let u=a(n),f=u(n);const b=[Ya,Ka],h=[];function p(S,m){return S[0].items.length?0:1}return i=p(n),r=h[i]=b[i](n),{c(){e=T("section"),t=T("header"),l=T("div"),f.c(),o=U(),r.c(),c(l,"class","folder-section__titles"),c(t,"class","folder-section__header"),c(e,"class","folder-section")},m(S,m){G(S,e,m),g(e,t),g(t,l),f.m(l,null),g(e,o),h[i].m(e,null),s=!0},p(S,m){u===(u=a(S))&&f?f.p(S,m):(f.d(1),f=u(S),f&&(f.c(),f.m(l,null)));let _=i;i=p(S),i===_?h[i].p(S,m):(He(),Y(h[_],1,1,()=>{h[_]=null}),Re(),r=h[i],r?r.p(S,m):(r=h[i]=b[i](S),r.c()),j(r,1),r.m(e,null))},i(S){s||(j(r),s=!0)},o(S){Y(r),s=!1},d(S){S&&R(e),f.d(),h[i].d()}}}const Xa=()=>{};function Za(n,e,t){let{group:l}=e,{compactHeader:o=!0}=e,{showTitle:i=!0}=e,{titleBackdrop:r=!1}=e,{openMenuId:s=null}=e,{draggedBookmark:a=null}=e,{dragOverBookmark:u=null}=e,{onTileMenu:f=()=>{}}=e,{onTileEdit:b=()=>{}}=e,{onTileRemove:h=()=>{}}=e,{onTileFallback:p=()=>{}}=e,{onTileContextMenu:S=()=>{}}=e,{onDragStart:m=()=>{}}=e,{onDragOver:_=()=>{}}=e,{onDragLeave:w=()=>{}}=e,{onDrop:v=()=>{}}=e,{onDragEnd:F=()=>{}}=e,{onAddShortcut:P=()=>{}}=e,{getFaviconUrl:A=async()=>""}=e;const z=N=>f(N.id),I=N=>b(N),E=N=>h(N.id),D=N=>p(N.id),$=(N,Q)=>S(Q,N),X=(N,Q)=>m(Q,N,l.id),K=(N,Q)=>_(Q,N),J=(N,Q)=>v(Q,N),le=()=>P(l.id),ue=()=>P(l.id);return n.$$set=N=>{"group"in N&&t(0,l=N.group),"compactHeader"in N&&t(1,o=N.compactHeader),"showTitle"in N&&t(2,i=N.showTitle),"titleBackdrop"in N&&t(3,r=N.titleBackdrop),"openMenuId"in N&&t(4,s=N.openMenuId),"draggedBookmark"in N&&t(5,a=N.draggedBookmark),"dragOverBookmark"in N&&t(6,u=N.dragOverBookmark),"onTileMenu"in N&&t(7,f=N.onTileMenu),"onTileEdit"in N&&t(8,b=N.onTileEdit),"onTileRemove"in N&&t(9,h=N.onTileRemove),"onTileFallback"in N&&t(10,p=N.onTileFallback),"onTileContextMenu"in N&&t(11,S=N.onTileContextMenu),"onDragStart"in N&&t(12,m=N.onDragStart),"onDragOver"in N&&t(13,_=N.onDragOver),"onDragLeave"in N&&t(14,w=N.onDragLeave),"onDrop"in N&&t(15,v=N.onDrop),"onDragEnd"in N&&t(16,F=N.onDragEnd),"onAddShortcut"in N&&t(17,P=N.onAddShortcut),"getFaviconUrl"in N&&t(18,A=N.getFaviconUrl)},[l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v,F,P,A,z,I,E,D,$,X,K,J,le,ue]}class Ja extends Ke{constructor(e){super(),Ve(this,e,Za,Qa,Ge,{group:0,compactHeader:1,showTitle:2,titleBackdrop:3,openMenuId:4,draggedBookmark:5,dragOverBookmark:6,onTileMenu:7,onTileEdit:8,onTileRemove:9,onTileFallback:10,onTileContextMenu:11,onDragStart:12,onDragOver:13,onDragLeave:14,onDrop:15,onDragEnd:16,onAddShortcut:17,getFaviconUrl:18},null,[-1,-1])}}function Xo(n,e,t){const l=n.slice();return l[20]=e[t],l}function Zo(n,e){let t,l,o;return l=new Ja({props:{group:e[20],compactHeader:e[2],showTitle:e[3],titleBackdrop:e[4],openMenuId:e[5],draggedBookmark:e[6],dragOverBookmark:e[7],onTileMenu:e[8],onTileEdit:e[9],onTileRemove:e[10],onTileFallback:e[11],onTileContextMenu:e[12],onDragStart:e[13],onDragOver:e[14],onDragLeave:e[15],onDrop:e[16],onDragEnd:e[17],onAddShortcut:e[18],getFaviconUrl:e[19]}}),{key:n,first:null,c(){t=Xe(),me(l.$$.fragment),this.first=t},m(i,r){G(i,t,r),de(l,i,r),o=!0},p(i,r){e=i;const s={};r&1&&(s.group=e[20]),r&4&&(s.compactHeader=e[2]),r&8&&(s.showTitle=e[3]),r&16&&(s.titleBackdrop=e[4]),r&32&&(s.openMenuId=e[5]),r&64&&(s.draggedBookmark=e[6]),r&128&&(s.dragOverBookmark=e[7]),r&256&&(s.onTileMenu=e[8]),r&512&&(s.onTileEdit=e[9]),r&1024&&(s.onTileRemove=e[10]),r&2048&&(s.onTileFallback=e[11]),r&4096&&(s.onTileContextMenu=e[12]),r&8192&&(s.onDragStart=e[13]),r&16384&&(s.onDragOver=e[14]),r&32768&&(s.onDragLeave=e[15]),r&65536&&(s.onDrop=e[16]),r&131072&&(s.onDragEnd=e[17]),r&262144&&(s.onAddShortcut=e[18]),r&524288&&(s.getFaviconUrl=e[19]),l.$set(s)},i(i){o||(j(l.$$.fragment,i),o=!0)},o(i){Y(l.$$.fragment,i),o=!1},d(i){i&&R(t),ge(l,i)}}}function xa(n){let e,t=[],l=new Map,o=`${n[1]}px`,i,r=pe(n[0]);const s=a=>a[20].id;for(let a=0;a<r.length;a+=1){let u=Xo(n,r,a),f=s(u);l.set(f,t[a]=Zo(f,u))}return{c(){e=T("div");for(let a=0;a<t.length;a+=1)t[a].c();c(e,"class","folder-grid-list"),c(e,"aria-label","Bookmark folders"),St(e,"max-width",o)},m(a,u){G(a,e,u);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);i=!0},p(a,[u]){u&1048573&&(r=pe(a[0]),He(),t=lt(t,u,s,1,a,r,l,e,xt,Zo,null,Xo),Re()),u&2&&o!==(o=`${a[1]}px`)&&St(e,"max-width",o)},i(a){if(!i){for(let u=0;u<r.length;u+=1)j(t[u]);i=!0}},o(a){for(let u=0;u<t.length;u+=1)Y(t[u]);i=!1},d(a){a&&R(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function $a(n,e,t){let{groups:l=[]}=e,{columnWidth:o=1170}=e,{compactHeader:i=!0}=e,{showTitle:r=!0}=e,{titleBackdrop:s=!1}=e,{openMenuId:a=null}=e,{draggedBookmark:u=null}=e,{dragOverBookmark:f=null}=e,{onTileMenu:b=()=>{}}=e,{onTileEdit:h=()=>{}}=e,{onTileRemove:p=()=>{}}=e,{onTileFallback:S=()=>{}}=e,{onTileContextMenu:m=()=>{}}=e,{onDragStart:_=()=>{}}=e,{onDragOver:w=()=>{}}=e,{onDragLeave:v=()=>{}}=e,{onDrop:F=()=>{}}=e,{onDragEnd:P=()=>{}}=e,{onAddShortcut:A=()=>{}}=e,{getFaviconUrl:z=async()=>""}=e;return n.$$set=I=>{"groups"in I&&t(0,l=I.groups),"columnWidth"in I&&t(1,o=I.columnWidth),"compactHeader"in I&&t(2,i=I.compactHeader),"showTitle"in I&&t(3,r=I.showTitle),"titleBackdrop"in I&&t(4,s=I.titleBackdrop),"openMenuId"in I&&t(5,a=I.openMenuId),"draggedBookmark"in I&&t(6,u=I.draggedBookmark),"dragOverBookmark"in I&&t(7,f=I.dragOverBookmark),"onTileMenu"in I&&t(8,b=I.onTileMenu),"onTileEdit"in I&&t(9,h=I.onTileEdit),"onTileRemove"in I&&t(10,p=I.onTileRemove),"onTileFallback"in I&&t(11,S=I.onTileFallback),"onTileContextMenu"in I&&t(12,m=I.onTileContextMenu),"onDragStart"in I&&t(13,_=I.onDragStart),"onDragOver"in I&&t(14,w=I.onDragOver),"onDragLeave"in I&&t(15,v=I.onDragLeave),"onDrop"in I&&t(16,F=I.onDrop),"onDragEnd"in I&&t(17,P=I.onDragEnd),"onAddShortcut"in I&&t(18,A=I.onAddShortcut),"getFaviconUrl"in I&&t(19,z=I.getFaviconUrl)},[l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v,F,P,A,z]}class ec extends Ke{constructor(e){super(),Ve(this,e,$a,xa,Ge,{groups:0,columnWidth:1,compactHeader:2,showTitle:3,titleBackdrop:4,openMenuId:5,draggedBookmark:6,dragOverBookmark:7,onTileMenu:8,onTileEdit:9,onTileRemove:10,onTileFallback:11,onTileContextMenu:12,onDragStart:13,onDragOver:14,onDragLeave:15,onDrop:16,onDragEnd:17,onAddShortcut:18,getFaviconUrl:19})}}function tc(n){let e,t,l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v,F,P,A,z;return{c(){e=T("dialog"),t=T("form"),l=T("header"),l.innerHTML="<h2>Custom background</h2>",o=U(),i=T("div"),r=T("label"),s=T("span"),s.textContent="Choose an image (JPEG/PNG, up to 10¬†MB)",a=U(),u=T("input"),f=U(),b=T("p"),b.textContent="The selected image is stored locally on this device only.",h=U(),p=T("footer"),S=T("button"),S.textContent="Remove",m=U(),_=T("span"),w=U(),v=T("button"),v.textContent="Cancel",F=U(),P=T("button"),P.textContent="Save",c(u,"type","file"),c(u,"accept","image/png,image/jpeg,image/jpg"),c(r,"class","file-picker"),c(b,"class","hint"),c(i,"class","dialog-body"),c(S,"type","button"),c(S,"id","clear-background"),c(S,"class","ghost-button"),c(_,"class","spacer"),c(v,"type","button"),c(v,"id","cancel-background"),c(P,"type","submit"),c(P,"id","save-background"),c(p,"class","dialog-footer"),c(t,"id","background-form"),c(t,"method","dialog")},m(I,E){G(I,e,E),g(e,t),g(t,l),g(t,o),g(t,i),g(i,r),g(r,s),g(r,a),g(r,u),n[10](u),g(i,f),g(i,b),g(t,h),g(t,p),g(p,S),g(p,m),g(p,_),g(p,w),g(p,v),g(p,F),g(p,P),n[11](e),A||(z=[V(S,"click",n[3]),V(v,"click",n[4]),V(t,"submit",n[2])],A=!0)},p:ee,i:ee,o:ee,d(I){I&&R(e),n[10](null),n[11](null),A=!1,Ue(z)}}}function nc(n,e,t){let l=null,o=null,{onSubmit:i=()=>{}}=e,{onClear:r=()=>{}}=e,{onCancel:s=()=>{}}=e;function a(){o&&t(1,o.value="",o),l==null||l.showModal()}function u(){l==null||l.close()}function f(m){var w;m.preventDefault();const _=((w=o==null?void 0:o.files)==null?void 0:w[0])??null;i(_)}function b(m){m.preventDefault(),r()}function h(m){m.preventDefault(),s()}function p(m){ct[m?"unshift":"push"](()=>{o=m,t(1,o)})}function S(m){ct[m?"unshift":"push"](()=>{l=m,t(0,l)})}return n.$$set=m=>{"onSubmit"in m&&t(5,i=m.onSubmit),"onClear"in m&&t(6,r=m.onClear),"onCancel"in m&&t(7,s=m.onCancel)},[l,o,f,b,h,i,r,s,a,u,p,S]}class lc extends Ke{constructor(e){super(),Ve(this,e,nc,tc,Ge,{onSubmit:5,onClear:6,onCancel:7,open:8,close:9})}get open(){return this.$$.ctx[8]}get close(){return this.$$.ctx[9]}}function Zn(n){try{return new URL(n).href}catch{try{return new URL(`https://${n}`).href}catch{return null}}}function Dn(n){try{return new URL(n).hostname.replace(/^www\./i,"")}catch{return n}}function Jo(n){return n?n.trim().split(/\s+/)[0].slice(0,2).toUpperCase():"‚Ä¢"}function oc(n,e){let t;return(...l)=>{clearTimeout(t),t=setTimeout(()=>n(...l),e)}}function xo(n){const e=(n||"").trim().toLowerCase();if(!e)return{background:"linear-gradient(145deg, #fde68a, #fbbf24)",text:"rgba(15, 23, 42, 0.85)"};let t=0,l=0,o=0;for(let m=0;m<e.length;m++){const _=e.charCodeAt(m),w=m+1;t+=_*w,l+=_*(w+1.5),o+=_*(w+2.5)}const i=hl(t,360),r=hl(l,36)-18,s=hl(i+24+r,360),a=52+Math.abs(l)%30,u=42+Math.abs(o)%20,f=Math.min(96,a+8),b=Math.min(78,u+12),h=`hsl(${i}, ${a}%, ${u}%)`,p=`hsl(${s}, ${f}%, ${b}%)`,S=u>54?"rgba(30, 41, 59, 0.85)":"rgba(255, 255, 255, 0.88)";return{background:`linear-gradient(140deg, ${h}, ${p})`,text:S}}function hl(n,e){return(n%e+e)%e}function ic(n,e=10*1024*1024){return["image/jpeg","image/png"].includes(n.type)&&n.size<=e}function $o(n=[],e=[]){return n.length!==e.length?!1:n.every((t,l)=>t===e[l])}function rn(n,e){if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0}function rc(n){return n?URL.createObjectURL(n):""}const x=chrome;var oi;const jt=!!((oi=chrome==null?void 0:chrome.storage)!=null&&oi.local);var ii;const ei=!!((ii=chrome==null?void 0:chrome.storage)!=null&&ii.sync);function sc(n,e,t){const l=n.slice();return l[203]=e[t],l[205]=t,l}function ti(n){let e,t;return e=new xs({props:{visible:n[35],query:n[9],onSearchChange:n[88],onClose:n[89]}}),{c(){me(e.$$.fragment)},m(l,o){de(e,l,o),t=!0},p(l,o){const i={};o[1]&16&&(i.visible=l[35]),o[0]&512&&(i.query=l[9]),e.$set(i)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){Y(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function ac(n){let e,t,l,o,i,r,s,a;const u=[fc,uc],f=[];function b(h,p){return h[5].mergeAllBookmarks?0:1}return i=b(n),r=f[i]=u[i](n),{c(){e=T("section"),t=fe(n[13]),o=U(),r.c(),s=Xe(),c(e,"id","status"),c(e,"role","status"),c(e,"aria-live","polite"),c(e,"data-tone",l=n[13]?n[14]:null)},m(h,p){G(h,e,p),g(e,t),G(h,o,p),f[i].m(h,p),G(h,s,p),a=!0},p(h,p){(!a||p[0]&8192)&&Te(t,h[13]),(!a||p[0]&24576&&l!==(l=h[13]?h[14]:null))&&c(e,"data-tone",l);let S=i;i=b(h),i===S?f[i].p(h,p):(He(),Y(f[S],1,1,()=>{f[S]=null}),Re(),r=f[i],r?r.p(h,p):(r=f[i]=u[i](h),r.c()),j(r,1),r.m(s.parentNode,s))},i(h){a||(j(r),a=!0)},o(h){Y(r),a=!1},d(h){h&&(R(e),R(o),R(s)),f[i].d(h)}}}function cc(n){let e,t=pe(Array(5)),l=[];for(let o=0;o<t.length;o+=1)l[o]=dc(sc(n,t,o));return{c(){e=T("div");for(let o=0;o<l.length;o+=1)l[o].c();c(e,"class","grid skeleton-grid"),c(e,"aria-hidden","true")},m(o,i){G(o,e,i);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null)},p:ee,i:ee,o:ee,d(o){o&&R(e),Jr(l,o)}}}function uc(n){var l;let e,t;return e=new ec({props:{groups:n[38],columnWidth:n[5].folderColumnWidth,compactHeader:n[5].compactFolderHeader,showTitle:((l=n[5].tile)==null?void 0:l.showTitle)??!0,titleBackdrop:n[5].titleBackdrop,openMenuId:n[26],draggedBookmark:n[36],dragOverBookmark:n[37],onTileMenu:n[78],onTileEdit:n[100],onTileRemove:n[101],onTileFallback:n[77],onTileContextMenu:n[82],onDragStart:n[92],onDragOver:n[93],onDragLeave:n[94],onDrop:n[95],onDragEnd:n[96],onAddShortcut:n[97],getFaviconUrl:n[76]}}),{c(){me(e.$$.fragment)},m(o,i){de(e,o,i),t=!0},p(o,i){var s;const r={};i[1]&128&&(r.groups=o[38]),i[0]&32&&(r.columnWidth=o[5].folderColumnWidth),i[0]&32&&(r.compactHeader=o[5].compactFolderHeader),i[0]&32&&(r.showTitle=((s=o[5].tile)==null?void 0:s.showTitle)??!0),i[0]&32&&(r.titleBackdrop=o[5].titleBackdrop),i[0]&67108864&&(r.openMenuId=o[26]),i[1]&32&&(r.draggedBookmark=o[36]),i[1]&64&&(r.dragOverBookmark=o[37]),e.$set(r)},i(o){t||(j(e.$$.fragment,o),t=!0)},o(o){Y(e.$$.fragment,o),t=!1},d(o){ge(e,o)}}}function fc(n){var l;let e,t;return e=new qa({props:{bookmarks:n[12],topSites:n[10],showTopSites:n[5].enableTopSites,showTitle:((l=n[5].tile)==null?void 0:l.showTitle)??!0,titleBackdrop:n[5].titleBackdrop,focusedIndex:n[11],openMenuId:n[26],draggedBookmark:n[36],dragOverBookmark:n[37],onTileMenu:n[78],onTileEdit:n[100],onTileRemove:n[101],onTileFallback:n[77],onTileContextMenu:n[82],onTileFocus:n[90],onDragStart:n[92],onDragOver:n[93],onDragLeave:n[94],onDrop:n[95],onDragEnd:n[96],onAddShortcut:n[97],getFaviconUrl:n[76]}}),e.$on("gridmount",n[91]),{c(){me(e.$$.fragment)},m(o,i){de(e,o,i),t=!0},p(o,i){var s;const r={};i[0]&4096&&(r.bookmarks=o[12]),i[0]&1024&&(r.topSites=o[10]),i[0]&32&&(r.showTopSites=o[5].enableTopSites),i[0]&32&&(r.showTitle=((s=o[5].tile)==null?void 0:s.showTitle)??!0),i[0]&32&&(r.titleBackdrop=o[5].titleBackdrop),i[0]&2048&&(r.focusedIndex=o[11]),i[0]&67108864&&(r.openMenuId=o[26]),i[1]&32&&(r.draggedBookmark=o[36]),i[1]&64&&(r.dragOverBookmark=o[37]),e.$set(r)},i(o){t||(j(e.$$.fragment,o),t=!0)},o(o){Y(e.$$.fragment,o),t=!1},d(o){ge(e,o)}}}function dc(n){let e;return{c(){e=T("div"),e.innerHTML='<div class="skeleton-icon"></div> <div class="skeleton-title"></div> ',c(e,"class","tile skeleton-tile")},m(t,l){G(t,e,l)},p:ee,d(t){t&&R(e)}}}function gc(n){var Ze;let e,t,l,o,i,r,s,a,u,f,b,h,p,S,m,_,w,v,F,P,A,z,I,E,D,$,X,K,J,le,ue,N;u=new Fa({props:{open:n[6],settings:n[5],folderSummary:n[4],visibleAccentOptions:n[39],visibleGradientOptions:n[40],showAllAccents:n[8],showAllGradients:n[7],onClose:n[44],onThemeChange:n[46],onAccentChange:n[47],onTitleBackdropChange:n[48],onGradientSelect:n[66],onCustomBackgroundClick:n[67],onMergeAllChange:n[49],onFolderColumnWidthChange:n[50],onCompactHeaderChange:n[51],onSearchToggle:n[52],onTopSitesToggle:n[53],onToggleAccents:n[42],onToggleGradients:n[43],onOpenFolderModal:n[72],onTileSizeChange:n[54],onTileIconShapeChange:n[55],onTileFontWeightChange:n[56],onTileFontSizeChange:n[57],onTilePaddingChange:n[58],onTileTitleShapeChange:n[59],onTileBlurChange:n[60],onTileTextContrastChange:n[61],onTileBgLightnessChange:n[62],onShowTitleChange:n[63],onImmersiveEnabledChange:n[64],onImmersiveOpacityChange:n[65]}});let Q=n[5].enableBookmarkSearch&&ti(n);const Z=[cc,ac],te=[];function ce(B,M){return B[15]?0:1}_=ce(n),w=te[_]=Z[_](n),F=new As({props:{open:n[1],rootIds:n[41].rootIds??[],expandedIds:n[25],loadingIds:n[16],visibleIds:n[20],searchQuery:n[19],searchMatches:n[3],selectedIds:n[1]&&n[22]?n[22]:n[0],summary:n[1]?n[23]:n[4],selectedFolderCount:n[1]?((Ze=n[22])==null?void 0:Ze.size)??0:n[0].size,totalBookmarkCount:n[1]?n[24]:n[21],toggleSelection:n[68],toggleExpansion:n[69],getCheckboxState:n[74],onSearchChange:n[75],onRequestClose:n[73],onConfirmSelection:n[71],onClearSelection:n[70]}}),A=new Ps({props:{open:n[2],folders:n[17],defaultFolderId:n[18],onConfirm:n[98],onClose:n[99]}}),I=new Ks({props:{open:n[31],onDismiss:n[81],onGetStarted:n[81]}}),D=new Xs({props:{bookmark:n[34],position:n[33],visible:n[32]}}),D.$on("edit",n[86]),D.$on("remove",n[87]),D.$on("opennewtab",n[84]),D.$on("copyurl",n[85]),D.$on("close",n[83]),X=new qs({props:{toasts:n[30],onDismiss:n[79],onUndo:n[80]}});let be={onSubmit:n[102],onClear:n[103],onCancel:n[104]};return J=new lc({props:be}),n[121](J),{c(){e=T("div"),t=U(),l=T("div"),o=T("button"),i=at("svg"),r=at("path"),s=at("path"),a=U(),me(u.$$.fragment),f=U(),b=T("div"),p=U(),S=T("main"),Q&&Q.c(),m=U(),w.c(),v=U(),me(F.$$.fragment),P=U(),me(A.$$.fragment),z=U(),me(I.$$.fragment),E=U(),me(D.$$.fragment),$=U(),me(X.$$.fragment),K=U(),me(J.$$.fragment),c(e,"id","background-layer"),he(e,"visible",n[5].background.mode==="custom"&&!!n[27]),St(e,"background-image",n[5].background.mode==="custom"&&n[27]?`url(${n[27]})`:null),c(r,"d","M12 8.75a3.25 3.25 0 1 1 0 6.5 3.25 3.25 0 0 1 0-6.5Z"),c(r,"fill","none"),c(r,"stroke","currentColor"),c(r,"stroke-width","1.6"),c(s,"d","M21 12l-2.938 3.5-1.562 4.294L12 19l-4.5.794L5.938 15.5 3 12l2.938-3.5L7.5 4.206 12 5l4.5-.794L18.062 8.5 21 12Z"),c(s,"fill","none"),c(s,"stroke","currentColor"),c(s,"stroke-width","1.6"),c(s,"stroke-linecap","round"),c(s,"stroke-linejoin","round"),c(i,"class","icon-button__glyph"),c(i,"viewBox","0 0 24 24"),c(i,"aria-hidden","true"),c(i,"focusable","false"),c(i,"role","img"),c(o,"class","icon-button"),c(o,"type","button"),c(o,"title","Settings"),c(o,"aria-label","Open settings"),c(o,"aria-expanded",n[6]),c(o,"aria-controls","settings-drawer"),c(b,"class","settings-overlay"),c(b,"aria-hidden",h=!n[6]),he(b,"visible",n[6]),c(l,"class","page")},m(B,M){G(B,e,M),G(B,t,M),G(B,l,M),g(l,o),g(o,i),g(i,r),g(i,s),n[120](o),g(l,a),de(u,l,null),g(l,f),g(l,b),g(l,p),g(l,S),Q&&Q.m(S,null),g(S,m),te[_].m(S,null),g(l,v),de(F,l,null),g(l,P),de(A,l,null),g(l,z),de(I,l,null),g(l,E),de(D,l,null),g(l,$),de(X,l,null),G(B,K,M),de(J,B,M),le=!0,ue||(N=[V(o,"click",n[45]),V(b,"pointerdown",n[44])],ue=!0)},p(B,M){var Fe;(!le||M[0]&134217760)&&he(e,"visible",B[5].background.mode==="custom"&&!!B[27]),M[0]&134217760&&St(e,"background-image",B[5].background.mode==="custom"&&B[27]?`url(${B[27]})`:null),(!le||M[0]&64)&&c(o,"aria-expanded",B[6]);const ke={};M[0]&64&&(ke.open=B[6]),M[0]&32&&(ke.settings=B[5]),M[0]&16&&(ke.folderSummary=B[4]),M[1]&256&&(ke.visibleAccentOptions=B[39]),M[1]&512&&(ke.visibleGradientOptions=B[40]),M[0]&256&&(ke.showAllAccents=B[8]),M[0]&128&&(ke.showAllGradients=B[7]),u.$set(ke),(!le||M[0]&64&&h!==(h=!B[6]))&&c(b,"aria-hidden",h),(!le||M[0]&64)&&he(b,"visible",B[6]),B[5].enableBookmarkSearch?Q?(Q.p(B,M),M[0]&32&&j(Q,1)):(Q=ti(B),Q.c(),j(Q,1),Q.m(S,m)):Q&&(He(),Y(Q,1,1,()=>{Q=null}),Re());let Ee=_;_=ce(B),_===Ee?te[_].p(B,M):(He(),Y(te[Ee],1,1,()=>{te[Ee]=null}),Re(),w=te[_],w?w.p(B,M):(w=te[_]=Z[_](B),w.c()),j(w,1),w.m(S,null));const ne={};M[0]&2&&(ne.open=B[1]),M[1]&1024&&(ne.rootIds=B[41].rootIds??[]),M[0]&33554432&&(ne.expandedIds=B[25]),M[0]&65536&&(ne.loadingIds=B[16]),M[0]&1048576&&(ne.visibleIds=B[20]),M[0]&524288&&(ne.searchQuery=B[19]),M[0]&8&&(ne.searchMatches=B[3]),M[0]&4194307&&(ne.selectedIds=B[1]&&B[22]?B[22]:B[0]),M[0]&8388626&&(ne.summary=B[1]?B[23]:B[4]),M[0]&4194307&&(ne.selectedFolderCount=B[1]?((Fe=B[22])==null?void 0:Fe.size)??0:B[0].size),M[0]&18874370&&(ne.totalBookmarkCount=B[1]?B[24]:B[21]),F.$set(ne);const Ce={};M[0]&4&&(Ce.open=B[2]),M[0]&131072&&(Ce.folders=B[17]),M[0]&262144&&(Ce.defaultFolderId=B[18]),A.$set(Ce);const C={};M[1]&1&&(C.open=B[31]),I.$set(C);const ve={};M[1]&8&&(ve.bookmark=B[34]),M[1]&4&&(ve.position=B[33]),M[1]&2&&(ve.visible=B[32]),D.$set(ve);const H={};M[0]&1073741824&&(H.toasts=B[30]),X.$set(H);const rt={};J.$set(rt)},i(B){le||(j(u.$$.fragment,B),j(Q),j(w),j(F.$$.fragment,B),j(A.$$.fragment,B),j(I.$$.fragment,B),j(D.$$.fragment,B),j(X.$$.fragment,B),j(J.$$.fragment,B),le=!0)},o(B){Y(u.$$.fragment,B),Y(Q),Y(w),Y(F.$$.fragment,B),Y(A.$$.fragment,B),Y(I.$$.fragment,B),Y(D.$$.fragment,B),Y(X.$$.fragment,B),Y(J.$$.fragment,B),le=!1},d(B){B&&(R(e),R(t),R(l),R(K)),n[120](null),ge(u),Q&&Q.d(),te[_].d(),ge(F),ge(A),ge(I),ge(D),ge(X),n[121](null),ge(J,B),ue=!1,Ue(N)}}}function hc(n={}){const e=Array.isArray(n.selectedIds)?n.selectedIds.filter(Boolean):[],t=Array.isArray(n.expandedIds)?n.expandedIds.filter(Boolean):[];return{selectedIds:Array.from(new Set(e)),expandedIds:Array.from(new Set(t))}}function ni(n,e){const t=[...n];if(!e)return t;const l=t.findIndex(i=>i.id===e);if(l<=0)return t;const[o]=t.splice(l,1);return[o,...t]}function Sl(n,e,t=[],l=!0){const o=n.nodesById[e];return!o||!o.isFolder||(o.childrenIds??[]).forEach(r=>{const s=n.nodesById[r];s&&(s.url?t.push(s):l&&Sl(n,r,t,!0))}),t}function li(n=[],e){let t=!1;return{next:n.map(o=>o.id!==e||o.fallback?o:(t=!0,{...o,fallback:!0})),changed:t}}function mc(n,e,t){let l,o,i,r,s,a,u;ai(n,wi,d=>t(41,u=d));let f="",b="info",h=!0,p=[],S=[],m=new Set,_=null,w=new Set,v=new Set,F=new Set,P=!1,A=!1,z=!1,I=null,E=[],D=null,$="",X=new Set,K=null,J=[],le=new Map,ue=0,N=null,Q=null,Z=[],te=new Map,ce=0,be=!1,Ze=new Set,B=0,M=0,ke=null,Ee="",ne,Ce,C=Ae(),ve=!1,H=!0,rt=!1,Fe=!1,Me=!1,ye=!1,ut=[...Vt],Ye=[...Xt],We=[],ze=0,Se=!1,tt=!1,dn={x:0,y:0},Ne=null,ft="",Tt=!1,it=[],dt=!1,we=-1,nt=null,gt=4,st=null,ht=null,vt=null,_t=null,It="",Bt="",Lt=[],gn=new Map,mt=null,Ot=null,Pe=null,$e=null;const Dt=[];mi(()=>{var d,k;if((async()=>{try{await Qi()}catch(y){console.error("Bookmark Dial: failed to load settings",y),t(5,C=Ae()),t(113,Fe=jt),Ut(C.theme),zt(C.accent),Nt(C.background.gradientId)}try{await Rr()}catch(y){console.error("Bookmark Dial: failed to load background",y)}t(111,H=!1),await mr(),Xi()})(),typeof window<"u"){const y=O=>{var q;const W=O.target;if(!(W instanceof HTMLInputElement||W instanceof HTMLTextAreaElement)){if(tt&&O.key==="Escape"){Rt(),O.stopPropagation();return}if(O.key==="Escape"){if(we>=0){t(11,we=-1),O.stopPropagation();return}if(ke!==null){t(26,ke=null),O.stopPropagation();return}if(Tt){Ll(),O.stopPropagation();return}if(ve){$t();return}if((q=C.immersive)!=null&&q.enabled&&!ve){t(6,ve=!0),O.stopPropagation();return}return}if(O.key==="/"&&C.enableBookmarkSearch&&!O.ctrlKey&&!O.metaKey){O.preventDefault(),t(35,Tt=!0);return}if(O.key==="i"&&!O.ctrlKey&&!O.metaKey&&!O.altKey){O.preventDefault(),Vi();return}C.mergeAllBookmarks&&!ve&&!Tt&&!Se&&Cr(O)}},L=O=>{if(tt){const q=O.target;q instanceof Element&&!q.closest(".context-menu")&&Rt()}if(ke===null)return;const W=O.target;W instanceof Element&&W.closest(".tile-actions")||t(26,ke=null)};window.addEventListener("keydown",y),window.addEventListener("pointerdown",L),Dt.push(()=>window.removeEventListener("keydown",y)),Dt.push(()=>window.removeEventListener("pointerdown",L))}if((k=(d=x==null?void 0:x.storage)==null?void 0:d.onChanged)!=null&&k.addListener){const y=(L,O)=>{if(O!=="sync"&&O!=="local")return;const q=L[O==="sync"?Xn:Bn];!q||!q.newValue||ur(q.newValue)};x.storage.onChanged.addListener(y),Dt.push(()=>x.storage.onChanged.removeListener(y))}return()=>{mt&&clearTimeout(mt),st&&(st.disconnect(),st=null),_t&&(_t.abort(),_t=null),$e&&(URL.revokeObjectURL($e),$e=null),typeof document<"u"&&(document.body.classList.remove("settings-open"),document.body.classList.remove("immersive")),Dt.forEach(y=>y==null?void 0:y())}});function Ae(){return{theme:De.theme,accent:De.accent,background:{...De.background},titleBackdrop:De.titleBackdrop,mergeAllBookmarks:De.mergeAllBookmarks,folderColumnWidth:De.folderColumnWidth,compactFolderHeader:De.compactFolderHeader,enableBookmarkSearch:De.enableBookmarkSearch,enableTopSites:De.enableTopSites,lastShortcutFolderId:De.lastShortcutFolderId,tile:{...kt},immersive:{...gl}}}function Le(d){return vi.some(k=>k.id===d)?d:De.theme}function Oe(d){return Vt.some(k=>k.id===d)?d:De.accent}function Je(d){return Xt.some(k=>k.id===d)?d:De.background.gradientId}function hn(d={}){var wn,Sn,yn,Cn;const k=Le(d.theme),y=Oe(d.accent),L=d.background??{},O=L.mode==="custom"?"custom":"gradient",W=Je(L.gradientId),q=typeof d.titleBackdrop=="boolean",se=q?d.titleBackdrop:De.titleBackdrop,Be=typeof d.mergeAllBookmarks=="boolean"||typeof d.groupFoldersTogether=="boolean",ae=Be?d.mergeAllBookmarks??d.groupFoldersTogether:De.mergeAllBookmarks,ie=typeof d.folderColumnWidth=="number"?d.folderColumnWidth:De.folderColumnWidth,re=typeof d.compactFolderHeader=="boolean"?d.compactFolderHeader:De.compactFolderHeader,_e=typeof d.enableBookmarkSearch=="boolean"?d.enableBookmarkSearch:De.enableBookmarkSearch,et=typeof d.enableTopSites=="boolean"?d.enableTopSites:De.enableTopSites,Qe=d.lastShortcutFolderId??De.lastShortcutFolderId,qe=d.tile??{},tn={size:qe.size??kt.size,iconShape:qe.iconShape??kt.iconShape,fontWeight:typeof qe.fontWeight=="number"?qe.fontWeight:kt.fontWeight,fontSize:qe.fontSize??kt.fontSize,padding:qe.padding??kt.padding,titleShape:qe.titleShape??kt.titleShape,blur:typeof qe.blur=="number"?qe.blur:kt.blur,textContrast:qe.textContrast??kt.textContrast,bgLightness:typeof qe.bgLightness=="number"?qe.bgLightness:kt.bgLightness,showTitle:typeof qe.showTitle=="boolean"?qe.showTitle:kt.showTitle},xe=d.tile!==void 0,At=d.immersive??{},Gt={enabled:typeof At.enabled=="boolean"?At.enabled:gl.enabled,opacity:typeof At.opacity=="number"?At.opacity:gl.opacity},Qt=d.immersive!==void 0,nn=hc(d.folderSelection),qn=!$o(nn.selectedIds,((wn=d.folderSelection)==null?void 0:wn.selectedIds)??[])||!$o(nn.expandedIds,((Sn=d.folderSelection)==null?void 0:Sn.expandedIds)??[]),jn=k!==d.theme||y!==d.accent||O!==(((yn=d.background)==null?void 0:yn.mode)??De.background.mode)||W!==(((Cn=d.background)==null?void 0:Cn.gradientId)??De.background.gradientId)||!q||!Be||!xe||!Qt||ie!==d.folderColumnWidth||re!==d.compactFolderHeader||_e!==d.enableBookmarkSearch||et!==d.enableTopSites||Qe!==d.lastShortcutFolderId;return{settings:{theme:k,accent:y,background:{mode:O,gradientId:W},titleBackdrop:se,mergeAllBookmarks:ae,folderColumnWidth:ie,compactFolderHeader:re,enableBookmarkSearch:_e,enableTopSites:et,lastShortcutFolderId:Qe,tile:tn,immersive:Gt},folderSelection:nn,changed:jn||qn||(d.version??$n)!==$n}}function On(d){return Vt.find(k=>k.id===d)??Vt[0]}function mn(d){return Xt.find(k=>k.id===d)??Xt[0]}function Pn(){t(114,ut=ni(Vt,C==null?void 0:C.accent)),t(8,ye=!1)}function Un(){t(8,ye=!0)}function Ie(){ye?Pn():Un()}function oe(){var d,k;t(115,Ye=ni(Xt,((d=C==null?void 0:C.background)==null?void 0:d.mode)==="gradient"?(k=C==null?void 0:C.background)==null?void 0:k.gradientId:null)),t(7,Me=!1)}function bn(){t(7,Me=!0)}function Pt(){Me?oe():bn()}function pt(){return!Ot&&typeof window<"u"&&typeof window.matchMedia=="function"&&(Ot=window.matchMedia("(prefers-color-scheme: dark)")),Ot}function Ut(d){if(typeof document>"u")return;const k=Le(d),y=pt();if(k==="system"&&y){if(document.body.classList.toggle("dark",y.matches),C!=null&&C.tile&&Yt(C.tile.textContrast,C.tile.bgLightness),!Pe){const L=O=>{document.body.classList.toggle("dark",O.matches),C!=null&&C.tile&&Yt(C.tile.textContrast,C.tile.bgLightness)};typeof y.addEventListener=="function"?(y.addEventListener("change",L),Pe=()=>y.removeEventListener("change",L)):typeof y.addListener=="function"?(y.addListener(L),Pe=()=>y.removeListener(L)):Pe=null,Pe&&Dt.push(Pe)}}else Pe&&(Pe(),Pe=null),document.body.classList.toggle("dark",k==="dark"),C!=null&&C.tile&&Yt(C.tile.textContrast,C.tile.bgLightness);document.body.dataset.theme=k}function zt(d){if(typeof document>"u")return;const k=On(d),y=document.documentElement;y.style.setProperty("--accent-color",k.colors.base),y.style.setProperty("--accent-color-contrast",k.colors.contrast),y.style.setProperty("--accent-color-soft",k.colors.soft),y.style.setProperty("--accent-color-border",k.colors.border)}function Nt(d){if(typeof document>"u")return;const k=mn(d),y=document.documentElement;y.style.setProperty("--page-background-light",k.gradients.light),y.style.setProperty("--page-background-dark",k.gradients.dark)}function zn(d){if(typeof document>"u"||!d)return;const k=document.documentElement,y=Ii.find(L=>L.value===d.size);y&&(k.style.setProperty("--tile-width",`${y.width}px`),k.style.setProperty("--tile-grid-min",`${y.gridMin}px`)),k.style.setProperty("--tile-icon-radius",d.iconShape),k.style.setProperty("--tile-font-weight",String(d.fontWeight)),k.style.setProperty("--tile-font-size",d.fontSize),k.style.setProperty("--tile-padding",d.padding),k.style.setProperty("--tile-title-radius",d.titleShape),k.style.setProperty("--tile-blur",`${d.blur}px`),Yt(d.textContrast,d.bgLightness)}function Yt(d,k){if(typeof document>"u")return;const y=document.documentElement,L=document.body.classList.contains("dark"),O={faint:L?.35:.4,soft:L?.55:.58,normal:L?.78:.75,strong:L?.9:.88,bold:L?.98:.96},W=O[d]??O.normal,q=Bi.find(ae=>ae.value===k),se=q?L?q.lightDark:q.lightLight:L?20:85,Be=L?{1:.08,2:.14,3:.22,4:.32,5:.45}[k]??.22:{1:.04,2:.07,3:.1,4:.15,5:.22}[k]??.1;L?(y.style.setProperty("--tile-text-color",`hsla(210, 40%, 98%, ${W})`),y.style.setProperty("--tile-bg-color",`hsla(220, 30%, ${se}%, ${Be})`)):(y.style.setProperty("--tile-text-color",`hsla(222, 50%, 2%, ${W})`),y.style.setProperty("--tile-bg-color",`hsla(222, 50%, ${se}%, ${Be})`))}function bt(){if(!jt||!rt||!P)return;mt&&clearTimeout(mt);const d={theme:C.theme,accent:C.accent,titleBackdrop:C.titleBackdrop,mergeAllBookmarks:C.mergeAllBookmarks,folderColumnWidth:C.folderColumnWidth,compactFolderHeader:C.compactFolderHeader,enableBookmarkSearch:C.enableBookmarkSearch,enableTopSites:C.enableTopSites,lastShortcutFolderId:C.lastShortcutFolderId,background:{...C.background},tile:C.tile?{...C.tile}:void 0,immersive:C.immersive?{...C.immersive}:void 0,folderSelection:{selectedIds:Array.from(w),expandedIds:Array.from(v)},version:$n};mt=setTimeout(async()=>{mt=null;try{const k=[x.storage.local.set({[Bn]:d})];ei&&k.push(x.storage.sync.set({[Xn]:d})),await Promise.all(k)}catch(k){console.error("Bookmark Dial: failed to store preferences",k)}},120)}function $t(){ve&&(t(6,ve=!1),Ce==null||Ce.focus())}function Nn(){t(6,ve=!ve)}function Hn(d){const k=Le(d);C.theme!==k&&t(5,C={...C,theme:k})}function Rn(d){const k=Oe(d);C.accent!==k&&t(5,C={...C,accent:k})}function Di(d){const k=!!d;C.titleBackdrop!==k&&t(5,C={...C,titleBackdrop:k})}function Ei(d){const k=!!d;C.mergeAllBookmarks!==k&&t(5,C={...C,mergeAllBookmarks:k})}function Fi(d){const k=Number(d);C.folderColumnWidth!==k&&t(5,C={...C,folderColumnWidth:k})}function Mi(d){const k=!!d;C.compactFolderHeader!==k&&t(5,C={...C,compactFolderHeader:k})}function Ai(d){const k=!!d;C.enableBookmarkSearch!==k&&(t(5,C={...C,enableBookmarkSearch:k}),k||(t(35,Tt=!1),t(9,ft="")))}function Li(d){const k=!!d;C.enableTopSites!==k&&(t(5,C={...C,enableTopSites:k}),k&&!dt&&Ol())}function Oi(d){var k;((k=C.tile)==null?void 0:k.size)!==d&&t(5,C={...C,tile:{...C.tile,size:d}})}function Pi(d){var k;((k=C.tile)==null?void 0:k.iconShape)!==d&&t(5,C={...C,tile:{...C.tile,iconShape:d}})}function Ui(d){var k;((k=C.tile)==null?void 0:k.fontWeight)!==d&&t(5,C={...C,tile:{...C.tile,fontWeight:d}})}function zi(d){var k;((k=C.tile)==null?void 0:k.fontSize)!==d&&t(5,C={...C,tile:{...C.tile,fontSize:d}})}function Ni(d){var k;((k=C.tile)==null?void 0:k.padding)!==d&&t(5,C={...C,tile:{...C.tile,padding:d}})}function Hi(d){var k;((k=C.tile)==null?void 0:k.titleShape)!==d&&t(5,C={...C,tile:{...C.tile,titleShape:d}})}function Ri(d){var k;((k=C.tile)==null?void 0:k.blur)!==d&&t(5,C={...C,tile:{...C.tile,blur:d}})}function Gi(d){var k;((k=C.tile)==null?void 0:k.textContrast)!==d&&t(5,C={...C,tile:{...C.tile,textContrast:d}})}function Wi(d){var k;((k=C.tile)==null?void 0:k.bgLightness)!==d&&t(5,C={...C,tile:{...C.tile,bgLightness:d}})}function qi(d){var k;((k=C.tile)==null?void 0:k.showTitle)!==d&&t(5,C={...C,tile:{...C.tile,showTitle:d}})}function Dl(d){var y;const k=!!d;((y=C.immersive)==null?void 0:y.enabled)!==k&&(t(5,C={...C,immersive:{...C.immersive,enabled:k}}),k&&Ft("Immersive Mode on. Hover to see bookmarks. Press Esc for settings.","info",null,4e3))}function ji(d){var k;((k=C.immersive)==null?void 0:k.opacity)!==d&&t(5,C={...C,immersive:{...C.immersive,opacity:d}})}function Vi(){var d;Dl(!((d=C.immersive)!=null&&d.enabled))}function Ki(d){const k=Je(d),y=mn(k),L=y.accent&&Vt.some(se=>se.id===y.accent)?y.accent:null,O=C.background.mode!=="gradient"||C.background.gradientId!==k,W=L?Oe(L):C.accent,q=!!L&&W!==C.accent;!O&&!q||t(5,C={...C,accent:q?W:C.accent,background:{...C.background,mode:"gradient",gradientId:k}})}async function Yi(){$t(),await Cl(),ne==null||ne.open()}async function Qi(){if(t(113,Fe=!1),t(110,be=!1),!jt){t(5,C=Ae()),t(0,w=new Set(el.selectedIds)),t(107,v=new Set(el.expandedIds)),t(108,P=!0),Ut(C.theme),zt(C.accent),Nt(C.background.gradientId),Ht();return}let d={},k={};if(ei)try{d=await x.storage.sync.get(Xn)}catch(W){console.warn("Bookmark Dial: failed to read sync preferences",W)}try{k=await x.storage.local.get(Bn)}catch(W){console.warn("Bookmark Dial: failed to read local preferences",W)}let y=d==null?void 0:d[Xn],L=!1;!y&&(k!=null&&k[Bn])&&(y=k[Bn],L=!0);const O=hn(y??la);t(5,C=O.settings),t(0,w=new Set(O.folderSelection.selectedIds.length?O.folderSelection.selectedIds:el.selectedIds)),t(107,v=new Set(O.folderSelection.expandedIds)),t(108,P=!0),t(113,Fe=O.changed||L),t(110,be=O.changed||L),Ut(C.theme),zt(C.accent),Nt(C.background.gradientId),Ht()}async function Xi(){try{await ks(x),_=await Zi(),await kn(),await en(),Ji(),await Et()}catch(d){console.error("Bookmark Dial: initialization failed",d),Mt(Qn.error,"error")}}async function Zi(){const d=await x.runtime.sendMessage({type:"getFolderId"});if(!(d!=null&&d.folderId))throw new Error((d==null?void 0:d.error)||"Missing folder");return d.folderId}async function kn(){w.size===0&&_&&(t(0,w=new Set([_])),t(110,be=!0))}async function en(){const d=Array.from(w);d.length&&(await Promise.allSettled(d.map(k=>vn(x,k))),Ht())}function Ji(){var se,Be;const d=oc(()=>Et(),150),k=(ae,ie)=>{ps(ie),!ie.url&&tr(ie)&&Ml(ie.id),ie.url?_n(ie.parentId)&&d():w.has(ie.id)&&d()};x.bookmarks.onCreated.addListener(k);const y=(ae,ie)=>{ws(ae,ie),m.has(ae)&&d()};x.bookmarks.onChanged.addListener(y);const L=(ae,ie)=>{Ss(ae,ie),(m.has(ae)||_n(ie.parentId)||_n(ie.oldParentId))&&d()};x.bookmarks.onMoved.addListener(L);const O=(ae,ie)=>{const re=yi(ae);re&&xi(ae,{...ie,node:re}),ys(ae,ie),(m.has(ae)||_n(ie.parentId))&&(m.delete(ae),d())};x.bookmarks.onRemoved.addListener(O);const W=()=>d(),q=()=>Mt("Importing bookmarks‚Ä¶");(se=x.bookmarks.onImportEnded)==null||se.addListener(W),(Be=x.bookmarks.onImportBegan)==null||Be.addListener(q),Dt.push(()=>{var ae,ie;x.bookmarks.onCreated.removeListener(k),x.bookmarks.onChanged.removeListener(y),x.bookmarks.onMoved.removeListener(L),x.bookmarks.onRemoved.removeListener(O),(ae=x.bookmarks.onImportEnded)==null||ae.removeListener(W),(ie=x.bookmarks.onImportBegan)==null||ie.removeListener(q)})}function xi(d,k={}){if(k!=null&&k.node&&!k.node.url){const y=new Set(Yn(d));if(y.size){const L=new Set(w);let O=!1;y.forEach(W=>{L.has(W)&&(L.delete(W),O=!0)}),O&&(t(0,w=L),t(110,be=!0),Ht(),bt(),w.size||Promise.resolve().then(()=>kn()).then(()=>en()).then(()=>Et()))}d===_&&$i()}}async function $i(){Mt("Default folder was removed. Recreating‚Ä¶");try{const d=await x.runtime.sendMessage({type:"resetFolderCache"});if(d!=null&&d.folderId)_=d.folderId,await Ml(_),await Et(),Mt("Default folder restored.","success");else throw new Error((d==null?void 0:d.error)||"Unable to recreate folder")}catch(d){console.error("Bookmark Dial: missing folder recovery failed",d),Mt(Qn.error,"error")}}async function El(d,k=null){const y=d instanceof Set?new Set(d):new Set(d??[]);if(!y.size)return{items:[],counts:new Map,total:0,groups:[]};if(k!=null&&k.aborted)throw new DOMException("Aborted","AbortError");const L=Wt(),O=Array.from(y).filter(re=>{const _e=L.nodesById[re];return!_e||!_e.childrenLoaded?!0:(_e.childrenIds??[]).some(Qe=>!L.nodesById[Qe])});if(O.length>0&&await Promise.all(O.map(re=>vn(x,re))),k!=null&&k.aborted)throw new DOMException("Aborted","AbortError");const W=Wt(),q=new Map,se=new Map,Be=[],ae=[];y.forEach(re=>{const _e=Sl(W,re,[],!0),et=Sl(W,re,[],!1),Qe=xn(re),qe=Qe[Qe.length-1]||"Untitled folder";_e.forEach(xe=>{const Gt=(Zn(xe.url)||xe.url||xe.url||xe.id).toLowerCase(),Qt=se.get(re)??new Set;Qt.add(Gt),se.set(re,Qt),q.has(Gt)||(q.set(Gt,xe.id),Be.push({...xe,sourceFolderId:re,sourcePath:Qe}))});const tn=et.map(xe=>((Zn(xe.url)||xe.url||xe.url||xe.id).toLowerCase(),{...xe,sourceFolderId:re,sourcePath:Qe}));ae.push({id:re,label:qe,path:Qe,fullPath:Qe.join(" ‚Ä∫ "),items:tn})}),ae.sort((re,_e)=>re.fullPath.localeCompare(_e.fullPath));const ie=new Map(Array.from(se.entries()).map(([re,_e])=>[re,_e.size]));return{items:Be,counts:ie,total:Be.length,groups:ae}}async function Et(){const d=++B;if(!w.size){t(105,p=[]),t(106,S=[]),m=new Set,le=new Map,t(21,ue=0),Ht(),t(15,h=!1),Mt("Select folders to populate this page.","info");return}_t&&_t.abort(),_t=new AbortController;const k=_t.signal;try{const y=await El(w,k);if(d!==B)return;le=y.counts,t(21,ue=y.total),er(y.items),t(106,S=y.groups.map(L=>({id:L.id,label:L.label,path:L.path,fullPath:L.fullPath,items:L.items.map(O=>Fl(O))}))),Ht(),t(15,h=!1),y.items.length===0?Mt(Qn.empty):Mt("","info")}catch(y){if(y.name==="AbortError")return;console.error("Bookmark Dial: failed to load bookmarks",y),Mt(Qn.error,"error")}}function Fl(d){const k=d.title||d.url;return{...d,displayTitle:k,initials:Jo(k),palette:xo(k),fallback:!1}}function er(d){m=new Set(d.map(O=>O.id));const y=[],L=new Map;for(const O of d){const W=O.id,q=gn.get(W);if(q&&q.title===O.title&&q.url===O.url&&q.index===O.index)y.push(q),L.set(W,q);else{const se=Fl(O);y.push(se),L.set(W,se)}}gn=L,t(105,p=y)}function tr(d){return!d||d.url?!1:_n(d.parentId)}function _n(d){if(!d)return!1;const k=Wt();let y=d;for(;y;){if(w.has(y))return!0;const L=k.nodesById[y];y=(L==null?void 0:L.parentId)??null}return!1}async function Ml(d){if(!d)return;await vn(x,d);const k=Yn(d),y=new Set(w);let L=!1;k.forEach(O=>{y.has(O)||(y.add(O),L=!0)}),L&&(t(0,w=y),t(110,be=!0),await en(),await Et(),bt())}async function nr(d){if(!d)return;const k=Yn(d);if(!k.length)return;const y=A,L=y&&N?N:y?new Set(w):w,O=new Set(L);if(k.every(q=>O.has(q))?k.forEach(q=>O.delete(q)):k.forEach(q=>O.add(q)),y){t(22,N=O);const q=++M,se=await El(N);if(q!==M)return;te=se.counts,t(24,ce=se.total),t(23,Z=Gn(N,te))}else rn(w,O)||(t(0,w=O),t(110,be=!0),await kn(),await en(),await Et(),bt())}function lr(d){var ie;if(!d)return;const k=Wt(),y=k.nodesById[d];if(!(y!=null&&y.isFolder)||!(((ie=y.childrenIds)==null?void 0:ie.some(re=>{const _e=k.nodesById[re];return _e==null?void 0:_e.isFolder}))??!1))return;const O=A,W=O&&Q?Q:O?new Set(v):v,q=new Set(W??[]),se=new Set(q),Be=(re,{persist:_e=!1}={})=>{O?t(109,Q=re):(t(107,v=re),_e&&(t(110,be=!0),bt()))};q.has(d)?q.delete(d):q.add(d);const ae=!rn(se,q);Be(q,{persist:ae})}async function or(){if(A){t(22,N=new Set),M++,te=new Map,t(24,ce=0),t(23,Z=[]);return}t(0,w=new Set),t(110,be=!0),await kn(),await en(),await Et(),bt()}async function ir(){if(!A)return;const d=new Set(N??[]),k=new Set(Q??[]),y=!rn(w,d),L=!rn(v,k);t(1,A=!1),Al(),y&&(t(0,w=d),t(110,be=!0),await kn(),await en(),await Et()),L&&(t(107,v=k),t(110,be=!0)),y||L?bt():Ht()}async function rr(){await _s(x),t(22,N=new Set(w)),t(109,Q=new Set(v)),te=new Map(le),t(24,ce=ue),t(23,Z=Gn(N,te)),M=0,t(19,$=""),t(3,X=new Set),t(20,K=null),t(1,A=!0)}function Al(){t(22,N=null),t(109,Q=null),t(23,Z=[]),te=new Map,t(24,ce=0),M=0,t(19,$=""),t(3,X=new Set),t(20,K=null)}function sr(){t(1,A=!1),Al()}function Gn(d,k){const y=Array.from(d??[]).map(L=>{const O=xn(L),W=O[O.length-1]||"Untitled folder";return{id:L,path:O,label:W,fullPath:O.join(" ‚Ä∫ "),count:(k==null?void 0:k.get(L))??0}});return y.sort((L,O)=>L.fullPath.localeCompare(O.fullPath)),y}function Ht(){const d=Array.from(w).sort().join(","),k=Array.from(le.entries()).sort(([y],[L])=>y.localeCompare(L)).map(([y,L])=>`${y}:${L}`).join(",");if(d===It&&k===Bt){t(4,J=Lt);return}It=d,Bt=k,Lt=Gn(w,le),t(4,J=Lt)}function ar(d){const y=Wt().nodesById[d],L=A&&N?N:w;if(!(y!=null&&y.isFolder))return L.has(d)?"selected":"none";const O=Yn(d);if(!O.length)return L.has(d)?"selected":"none";const W=O.filter(q=>L.has(q)).length;return W===0?"none":W===O.length?"selected":"partial"}async function cr(d){var Be;t(19,$=d);const k=d.trim();if(!k){t(3,X=new Set),t(20,K=null);return}if((Be=x==null?void 0:x.bookmarks)!=null&&Be.search)try{const ie=(await x.bookmarks.search({query:k})).filter(re=>!re.url);for(const re of ie){await vn(x,re.id);let _e=re.parentId;for(;_e;){await vn(x,_e);const et=Wt().nodesById[_e];_e=(et==null?void 0:et.parentId)??null}}}catch(ae){console.warn("Bookmark Dial: folder search failed",ae)}const y=Cs(),L=k.toLowerCase(),W=y.filter(ae=>{const ie=ae.title.toLowerCase().includes(L),re=ae.path.join(" ").toLowerCase().includes(L);return ie||re}).map(ae=>ae.id);t(3,X=new Set(W));const q=new Set,se=Wt();W.forEach(ae=>{var _e;let ie=se.nodesById[ae];for(;ie&&(q.add(ie.id),!!ie.parentId);)ie=se.nodesById[ie.parentId];const re=se.nodesById[ae];(_e=re==null?void 0:re.childrenIds)==null||_e.forEach(et=>{const Qe=se.nodesById[et];Qe!=null&&Qe.isFolder&&q.add(et)})}),t(20,K=q)}function ur(d){var ae,ie,re,_e,et,Qe,qe,tn,xe,At,Gt,Qt,nn,qn,jn,wn,Sn,yn,Cn,Hl;const k=hn(d),y=k.settings,L=((ae=y.tile)==null?void 0:ae.size)!==((ie=C.tile)==null?void 0:ie.size)||((re=y.tile)==null?void 0:re.iconShape)!==((_e=C.tile)==null?void 0:_e.iconShape)||((et=y.tile)==null?void 0:et.fontWeight)!==((Qe=C.tile)==null?void 0:Qe.fontWeight)||((qe=y.tile)==null?void 0:qe.fontSize)!==((tn=C.tile)==null?void 0:tn.fontSize)||((xe=y.tile)==null?void 0:xe.padding)!==((At=C.tile)==null?void 0:At.padding)||((Gt=y.tile)==null?void 0:Gt.titleShape)!==((Qt=C.tile)==null?void 0:Qt.titleShape)||((nn=y.tile)==null?void 0:nn.blur)!==((qn=C.tile)==null?void 0:qn.blur)||((jn=y.tile)==null?void 0:jn.textContrast)!==((wn=C.tile)==null?void 0:wn.textContrast)||((Sn=y.tile)==null?void 0:Sn.bgLightness)!==((yn=C.tile)==null?void 0:yn.bgLightness)||((Cn=y.tile)==null?void 0:Cn.showTitle)!==((Hl=C.tile)==null?void 0:Hl.showTitle);(y.theme!==C.theme||y.accent!==C.accent||y.background.mode!==C.background.mode||y.background.gradientId!==C.background.gradientId||y.titleBackdrop!==C.titleBackdrop||y.mergeAllBookmarks!==C.mergeAllBookmarks||y.folderColumnWidth!==C.folderColumnWidth||y.compactFolderHeader!==C.compactFolderHeader||y.enableBookmarkSearch!==C.enableBookmarkSearch||y.enableTopSites!==C.enableTopSites||y.lastShortcutFolderId!==C.lastShortcutFolderId||L)&&t(5,C={...C,...y,background:{...y.background},tile:y.tile?{...y.tile}:C.tile});const W=new Set(k.folderSelection.selectedIds),q=new Set(k.folderSelection.expandedIds),se=!rn(W,w),Be=!rn(q,v);se&&(t(0,w=W),Ht(),Et()),Be&&t(107,v=q),(se||Be)&&t(110,be=!1)}async function fr(d){try{const k=new URL(chrome.runtime.getURL("/_favicon/"));return k.searchParams.set("pageUrl",d),k.searchParams.set("size",$s.toString()),k.toString()}catch{return""}}function dr(d){const{next:k,changed:y}=li(p,d);if(!y)return;t(105,p=k);let L=!1;const O=S.map(W=>{const{next:q,changed:se}=li(W.items,d);return se?(L=!0,{...W,items:q}):W});L&&t(106,S=O)}function gr(d){t(26,ke=ke===d?null:d)}function il(){t(26,ke=null)}function Ft(d,k="info",y=null,L=5e3){const O=++ze,W={id:O,message:d,type:k,undoData:y};let q=[...We,W];return q.length>_o&&(q=q.slice(-_o)),t(30,We=q),L>0&&setTimeout(()=>rl(O),L),O}function rl(d){t(30,We=We.filter(k=>k.id!==d))}async function hr(d){if(!(d!=null&&d.undoData))return;const{action:k,data:y}=d.undoData;try{k==="removeBookmark"&&y&&(await x.bookmarks.create({parentId:y.parentId,title:y.title,url:y.url,index:y.index}),Ft("Bookmark restored","success"))}catch(L){console.error("Bookmark Dial: undo failed",L),Ft("Failed to undo","error")}rl(d.id)}async function mr(){if(!jt){t(31,Se=!0);return}try{const d=await x.storage.local.get(fl);d!=null&&d[fl]||t(31,Se=!0)}catch(d){console.warn("Bookmark Dial: failed to check welcome state",d)}}async function br(){if(t(31,Se=!1),jt)try{await x.storage.local.set({[fl]:!0})}catch(d){console.warn("Bookmark Dial: failed to save welcome state",d)}}function kr(d,k){d.preventDefault(),il(),t(34,Ne=k);const y=180,L=180;let O=d.clientX,W=d.clientY;O+y>window.innerWidth&&(O=window.innerWidth-y-8),W+L>window.innerHeight&&(W=window.innerHeight-L-8),t(33,dn={x:O,y:W}),t(32,tt=!0)}function Rt(){t(32,tt=!1),t(34,Ne=null)}async function _r(){Ne!=null&&Ne.url&&window.open(Ne.url,"_blank"),Rt()}async function pr(){if(Ne!=null&&Ne.url)try{await navigator.clipboard.writeText(Ne.url),Ft("URL copied to clipboard","success")}catch(d){console.error("Bookmark Dial: copy failed",d),Ft("Failed to copy URL","error")}Rt()}function wr(){Ne&&zl(Ne),Rt()}function Sr(){Ne&&sl(Ne.id),Rt()}function yr(d){t(9,ft=d)}function Ll(){t(35,Tt=!1),t(9,ft="")}async function Ol(){var d;if(!dt){if(!((d=x==null?void 0:x.topSites)!=null&&d.get)){t(116,dt=!0);return}try{const k=await x.topSites.get();t(10,it=(k||[]).map((y,L)=>({id:`topsite-${L}`,title:y.title||Dn(y.url),url:y.url,displayTitle:y.title||Dn(y.url),initials:Jo(y.title||Dn(y.url)),palette:xo(y.title||Dn(y.url)),fallback:!1,isTopSite:!0}))),t(116,dt=!0)}catch(k){console.warn("Bookmark Dial: failed to load top sites",k),t(116,dt=!0)}}}function Cr(d){const k=C.enableTopSites?[...s,...it]:s;if(!k.length)return;const y=Tr(),L=k.length;if(["ArrowRight","ArrowLeft","ArrowDown","ArrowUp"].includes(d.key)&&we<0){d.preventDefault(),t(11,we=0);return}if(d.key==="ArrowRight")d.preventDefault(),we+1<L&&t(11,we=we+1);else if(d.key==="ArrowLeft")d.preventDefault(),we-1>=0&&t(11,we=we-1);else if(d.key==="ArrowDown"){d.preventDefault();const W=we+y;W<L&&t(11,we=W)}else if(d.key==="ArrowUp"){d.preventDefault();const W=we-y;W>=0&&t(11,we=W)}else if(d.key==="Enter"&&we>=0){d.preventDefault();const W=k[we];W!=null&&W.url&&(window.location.href=W.url)}else if((d.key==="Delete"||d.key==="Backspace")&&we>=0){d.preventDefault();const W=k[we];if(W&&!W.isTopSite){const q=L-1;sl(W.id),q===0?t(11,we=-1):we>=q&&t(11,we=q-1)}}else if(d.key>="0"&&d.key<="9"){const W=d.key==="0"?9:parseInt(d.key,10)-1;if(W<L){d.preventDefault();const q=k[W];q!=null&&q.url&&(window.location.href=q.url)}}}function Pl(){if(!nt){gt=4;return}try{gt=getComputedStyle(nt).getPropertyValue("grid-template-columns").split(" ").length||4}catch{gt=4}}function Tr(){return gt}function vr(){!nt||typeof ResizeObserver>"u"||(st&&st.disconnect(),st=new ResizeObserver(()=>{Pl()}),st.observe(nt),Pl())}function Ir(d){t(11,we=d)}function Br(d){t(117,nt=d.detail.gridRef)}function Dr(d,k,y=null){if(k.isTopSite){d.preventDefault();return}t(36,ht=k),y||k.parentId,d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("text/plain",k.id)}function Er(d,k){!ht||ht.id===k.id||k.isTopSite||(d.preventDefault(),d.dataTransfer.dropEffect="move",t(37,vt=k))}function Fr(d){d.currentTarget.contains(d.relatedTarget)||t(37,vt=null)}async function Mr(d,k){if(d.preventDefault(),!ht||ht.id===k.id){Wn();return}if(k.isTopSite){Wn();return}try{await x.bookmarks.move(ht.id,{parentId:k.parentId,index:k.index}),Ft("Bookmark moved","success")}catch(y){console.error("Bookmark Dial: move failed",y),Ft("Failed to move bookmark","error")}Wn()}function Ar(){Wn()}function Wn(){t(36,ht=null),t(37,vt=null)}async function Lr(d=null){I=d,t(2,z=!0)}async function Or(d){t(2,z=!1);const{folderId:k,url:y,title:L}=d,O=Zn(y);if(!O){alert("That does not appear to be a valid URL.");return}try{await x.bookmarks.create({parentId:k,title:L,url:O}),t(5,C={...C,lastShortcutFolderId:k}),bt()}catch(W){console.error("Bookmark Dial: failed to create bookmark",W),alert("Unable to add shortcut. Please try again.")}}function Pr(){t(2,z=!1),I=null}function Ul(){if(J.length)return J;const d=Gn(w,le);if(d.length)return d;if(_){const k=xn(_),y=k[k.length-1]||"Bookmark Dial";return[{id:_,path:k,label:y,fullPath:k.join(" ‚Ä∫ "),count:0}]}return[]}function Ur(){if(I)return I;const d=E.length>0?E:Ul();return d.length===0?null:C.lastShortcutFolderId&&d.some(y=>y.id===C.lastShortcutFolderId)?C.lastShortcutFolderId:d[d.length-1].id}async function zl(d){var q;if(!(d!=null&&d.id))return;il();const k=prompt("Update the shortcut URL:",d.url??"");if(k===null)return;const y=Zn(k.trim());if(!y){alert("That does not appear to be a valid URL.");return}const L=(q=d.title)!=null&&q.trim()?d.title:d.displayTitle||Dn(y),O=prompt("Update the shortcut title:",L),W=O?O.trim():L;try{await x.bookmarks.update(d.id,{title:W,url:y})}catch(se){console.error("Bookmark Dial: failed to update bookmark",se),alert("Unable to update shortcut. Please try again.")}}async function sl(d){il(),Rt();const k=p.find(y=>y.id===d)||S.flatMap(y=>y.items).find(y=>y.id===d);if(k)try{const[y]=await x.bookmarks.get(d);await x.bookmarks.remove(d),Ft(`"${k.displayTitle||k.title}" removed`,"info",{action:"removeBookmark",data:{parentId:String(y.parentId),title:String(y.title||""),url:String(y.url||""),index:typeof y.index=="number"?y.index:0}},8e3)}catch(y){console.error("Bookmark Dial: failed to remove bookmark",y),Ft("Failed to remove bookmark","error")}}async function zr(d){if(!d){ne==null||ne.close();return}if(!ic(d,ea)){alert("Please choose a JPEG or PNG image under 10 MB.");return}try{jt&&(await Nl(d),await x.storage.local.set({[In]:"indexeddb"})),pn(d),t(5,C={...C,background:{...C.background,mode:"custom"}}),ne==null||ne.close()}catch(k){console.error("Bookmark Dial: failed to save background",k),alert("Unable to store the background image. Try a smaller file.")}}async function Nr(){try{jt&&(await qr(),await x.storage.local.remove(In))}catch(d){console.error("Bookmark Dial: failed to clear background",d)}pn(null),t(5,C={...C,background:{...C.background,mode:"gradient"}}),ne==null||ne.close()}function Hr(){ne==null||ne.close()}async function Rr(){if(!jt){pn(null),C.background.mode==="custom"&&t(5,C={...C,background:{...C.background,mode:"gradient"}});return}try{const d=await Wr();if(d){pn(d);return}const k=await x.storage.local.get(In),y=(k==null?void 0:k[In])||"";if(y&&y.startsWith("data:")){try{const O=await(await fetch(y)).blob();await Nl(O),await x.storage.local.set({[In]:"indexeddb"}),pn(O)}catch(L){console.warn("Bookmark Dial: background migration failed, using legacy",L),Gr(y)}return}!y&&C.background.mode==="custom"&&(t(5,C={...C,background:{...C.background,mode:"gradient"}}),t(113,Fe=!0))}catch(d){console.error("Bookmark Dial: failed to load background",d)}}function pn(d){$e&&(URL.revokeObjectURL($e),$e=null),d?($e=rc(d),t(27,Ee=$e)):t(27,Ee="")}function Gr(d){$e&&(URL.revokeObjectURL($e),$e=null),t(27,Ee=d||"")}function Mt(d,k="info"){t(13,f=d),t(14,b=k)}function al(){return new Promise((d,k)=>{if(typeof indexedDB>"u"){k(new Error("IndexedDB not available"));return}const y=indexedDB.open(ta,1);y.onerror=()=>k(y.error),y.onsuccess=()=>d(y.result),y.onupgradeneeded=L=>{const O=L.target.result;O.objectStoreNames.contains(qt)||O.createObjectStore(qt)}})}async function Nl(d){const k=await al();return new Promise((y,L)=>{const O=k.transaction(qt,"readwrite"),q=O.objectStore(qt).put(d,dl);q.onerror=()=>L(q.error),q.onsuccess=()=>y(),O.oncomplete=()=>k.close()})}async function Wr(){try{const d=await al();return new Promise((k,y)=>{const L=d.transaction(qt,"readonly"),W=L.objectStore(qt).get(dl);W.onerror=()=>y(W.error),W.onsuccess=()=>k(W.result||null),L.oncomplete=()=>d.close()})}catch{return null}}async function qr(){try{const d=await al();return new Promise((k,y)=>{const L=d.transaction(qt,"readwrite"),W=L.objectStore(qt).delete(dl);W.onerror=()=>y(W.error),W.onsuccess=()=>k(),L.oncomplete=()=>d.close()})}catch{}}function jr(d){ct[d?"unshift":"push"](()=>{Ce=d,t(29,Ce)})}function Vr(d){ct[d?"unshift":"push"](()=>{ne=d,t(28,ne)})}return n.$$.update=()=>{var d,k;if(n.$$.dirty[3]&4194304&&t(118,l=new Set(Ye.slice(0,pl).map(y=>y.id))),n.$$.dirty[3]&2097152&&t(119,o=new Set(ut.slice(0,wl).map(y=>y.id))),n.$$.dirty[0]&160|n.$$.dirty[3]&33554432&&!Me&&C.background.mode==="gradient"&&C.background.gradientId&&!l.has(C.background.gradientId)&&t(7,Me=!0),n.$$.dirty[0]&128|n.$$.dirty[3]&4194304&&t(40,i=Me?Ye:Ye.slice(0,pl)),n.$$.dirty[0]&288|n.$$.dirty[3]&67108864&&!ye&&C.accent&&!o.has(C.accent)&&t(8,ye=!0),n.$$.dirty[0]&256|n.$$.dirty[3]&2097152&&t(39,r=ye?ut:ut.slice(0,wl)),n.$$.dirty[0]&32|n.$$.dirty[3]&1998848&&!H&&P&&(Ut(C.theme),zt(C.accent),Nt(C.background.gradientId),zn(C.tile),(Fe||be||rt)&&bt(),t(112,rt=!0),t(113,Fe=!1),t(110,be=!1)),n.$$.dirty[0]&64&&typeof document<"u"&&document.body.classList.toggle("settings-open",ve),n.$$.dirty[0]&32&&typeof document<"u"){const y=((d=C.immersive)==null?void 0:d.enabled)??!1;document.body.classList.toggle("immersive",y),y?document.documentElement.style.setProperty("--immersive-opacity-setting",String(((k=C.immersive)==null?void 0:k.opacity)??.15)):document.documentElement.style.removeProperty("--immersive-opacity-setting")}if(n.$$.dirty[0]&32|n.$$.dirty[3]&16777216&&nt&&C.mergeAllBookmarks&&vr(),n.$$.dirty[0]&10|n.$$.dirty[3]&81920&&t(25,Ze=(()=>{const y=A&&Q?Q:v,L=new Set(y??[]);if(X.size){const O=Wt();X.forEach(W=>{var se,Be;let q=((se=O.nodesById[W])==null?void 0:se.parentId)??null;for(;q;)L.add(q),q=((Be=O.nodesById[q])==null?void 0:Be.parentId)??null})}return L})()),n.$$.dirty[0]&512|n.$$.dirty[3]&4096&&t(12,s=(()=>{if(!ft.trim())return p;const y=ft.toLowerCase().trim();return p.filter(L=>{var O,W,q;return((O=L.title)==null?void 0:O.toLowerCase().includes(y))||((W=L.url)==null?void 0:W.toLowerCase().includes(y))||((q=L.displayTitle)==null?void 0:q.toLowerCase().includes(y))})})()),n.$$.dirty[0]&512|n.$$.dirty[3]&8192&&t(38,a=(()=>{if(!ft.trim())return S;const y=ft.toLowerCase().trim();return S.map(L=>({...L,items:L.items.filter(O=>{var W,q,se;return((W=O.title)==null?void 0:W.toLowerCase().includes(y))||((q=O.url)==null?void 0:q.toLowerCase().includes(y))||((se=O.displayTitle)==null?void 0:se.toLowerCase().includes(y))})})).filter(L=>L.items.length>0)})()),n.$$.dirty[0]&32|n.$$.dirty[3]&8388608&&C.enableTopSites&&!dt&&Ol(),n.$$.dirty[0]&7200){const y=C.mergeAllBookmarks?C.enableTopSites?s.length+it.length:s.length:0;we>=y&&t(11,we=Math.max(y-1,-1))}n.$$.dirty[0]&21&&(z||J.length||w.size)&&(t(17,E=Ul()),t(18,D=Ur()))},[w,A,z,X,J,C,ve,Me,ye,ft,it,we,s,f,b,h,F,E,D,$,K,ue,N,Z,ce,Ze,ke,Ee,ne,Ce,We,Se,tt,dn,Ne,Tt,ht,vt,a,r,i,u,Ie,Pt,$t,Nn,Hn,Rn,Di,Ei,Fi,Mi,Ai,Li,Oi,Pi,Ui,zi,Ni,Hi,Ri,Gi,Wi,qi,Dl,ji,Ki,Yi,nr,lr,or,ir,rr,sr,ar,cr,fr,dr,gr,rl,hr,br,kr,Rt,_r,pr,wr,Sr,yr,Ll,Ir,Br,Dr,Er,Fr,Mr,Ar,Lr,Or,Pr,zl,sl,zr,Nr,Hr,p,S,v,P,Q,be,H,rt,Fe,ut,Ye,dt,nt,l,o,jr,Vr]}class bc extends Ke{constructor(e){super(),Ve(this,e,mc,gc,Ge,{},null,[-1,-1,-1,-1,-1,-1,-1])}}new bc({target:document.getElementById("app")});
