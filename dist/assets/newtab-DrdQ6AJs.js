var Io=Object.defineProperty;var So=(t,e,n)=>e in t?Io(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var In=(t,e,n)=>So(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();function Se(){}function vr(t){return t()}function Zn(){return Object.create(null)}function it(t){t.forEach(vr)}function Ut(t){return typeof t=="function"}function gn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ln;function Xn(t,e){return t===e?!0:(ln||(ln=document.createElement("a")),ln.href=e,t===ln.href)}function Co(t){return Object.keys(t).length===0}function Br(t,...e){if(t==null){for(const r of e)r(void 0);return Se}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function St(t){let e;return Br(t,n=>e=n)(),e}function Lr(t,e,n){t.$$.on_destroy.push(Br(e,n))}const Eo=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function g(t,e){t.appendChild(e)}function Z(t,e,n){t.insertBefore(e,n||null)}function J(t){t.parentNode&&t.parentNode.removeChild(t)}function Sn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function Wt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ge(t){return document.createTextNode(t)}function N(){return ge(" ")}function jt(){return ge("")}function x(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function xn(t){return function(e){return e.preventDefault(),t.call(this,e)}}function vo(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function i(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Bo(t){return Array.from(t.childNodes)}function Fe(t,e){e=""+e,t.data!==e&&(t.data=e)}function $n(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function Rt(t,e,n){t.classList.toggle(e,!!n)}let Zt;function Jt(t){Zt=t}function Lo(){if(!Zt)throw new Error("Function called outside component initialization");return Zt}function Mo(t){Lo().$$.on_mount.push(t)}function Ao(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Nt=[],kt=[];let Gt=[];const er=[],Mr=Promise.resolve();let Bn=!1;function Ar(){Bn||(Bn=!0,Mr.then(Fr))}function Ln(){return Ar(),Mr}function Mn(t){Gt.push(t)}const Cn=new Set;let Tt=0;function Fr(){if(Tt!==0)return;const t=Zt;do{try{for(;Tt<Nt.length;){const e=Nt[Tt];Tt++,Jt(e),Fo(e.$$)}}catch(e){throw Nt.length=0,Tt=0,e}for(Jt(null),Nt.length=0,Tt=0;kt.length;)kt.pop()();for(let e=0;e<Gt.length;e+=1){const n=Gt[e];Cn.has(n)||(Cn.add(n),n())}Gt.length=0}while(Nt.length);for(;er.length;)er.pop()();Bn=!1,Cn.clear(),Jt(t)}function Fo(t){if(t.fragment!==null){t.update(),it(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Mn)}}function To(t){const e=[],n=[];Gt.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),Gt=e}const cn=new Set;let It;function Ct(){It={r:0,c:[],p:It}}function Et(){It.r||it(It.c),It=It.p}function ke(t,e){t&&t.i&&(cn.delete(t),t.i(e))}function Me(t,e,n,r){if(t&&t.o){if(cn.has(t))return;cn.add(t),It.c.push(()=>{cn.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function Le(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Fn(t,e){t.d(1),e.delete(t.key)}function Tr(t,e){Me(t,1,1,()=>{e.delete(t.key)})}function Xt(t,e,n,r,o,a,c,s,d,f,_,E){let M=t.length,C=a.length,T=M;const W={};for(;T--;)W[t[T].key]=T;const D=[],U=new Map,P=new Map,S=[];for(T=C;T--;){const I=E(o,a,T),k=n(I);let L=c.get(k);L?S.push(()=>L.p(I,e)):(L=f(k,I),L.c()),U.set(k,D[T]=L),k in W&&P.set(k,Math.abs(T-W[k]))}const G=new Set,oe=new Set;function j(I){ke(I,1),I.m(s,_),c.set(I.key,I),_=I.first,C--}for(;M&&C;){const I=D[C-1],k=t[M-1],L=I.key,ae=k.key;I===k?(_=I.first,M--,C--):U.has(ae)?!c.has(L)||G.has(L)?j(I):oe.has(ae)?M--:P.get(L)>P.get(ae)?(oe.add(L),j(I)):(G.add(ae),M--):(d(k,c),M--)}for(;M--;){const I=t[M];U.has(I.key)||d(I,c)}for(;C;)j(D[C-1]);return it(S),D}function Tn(t){t&&t.c()}function hn(t,e,n){const{fragment:r,after_update:o}=t.$$;r&&r.m(e,n),Mn(()=>{const a=t.$$.on_mount.map(vr).filter(Ut);t.$$.on_destroy?t.$$.on_destroy.push(...a):it(a),t.$$.on_mount=[]}),o.forEach(Mn)}function bn(t,e){const n=t.$$;n.fragment!==null&&(To(n.after_update),it(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Po(t,e){t.$$.dirty[0]===-1&&(Nt.push(t),Ar(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pn(t,e,n,r,o,a,c=null,s=[-1]){const d=Zt;Jt(t);const f=t.$$={fragment:null,ctx:[],props:a,update:Se,not_equal:o,bound:Zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:Zn(),dirty:s,skip_bound:!1,root:e.target||d.$$.root};c&&c(f.root);let _=!1;if(f.ctx=n?n(t,e.props||{},(E,M,...C)=>{const T=C.length?C[0]:M;return f.ctx&&o(f.ctx[E],f.ctx[E]=T)&&(!f.skip_bound&&f.bound[E]&&f.bound[E](T),_&&Po(t,E)),M}):[],f.update(),_=!0,it(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){const E=Bo(e.target);f.fragment&&f.fragment.l(E),E.forEach(J)}else f.fragment&&f.fragment.c();e.intro&&ke(t.$$.fragment),hn(t,e.target,e.anchor),Fr()}Jt(d)}class Dn{constructor(){In(this,"$$");In(this,"$$set")}$destroy(){bn(this,1),this.$destroy=Se}$on(e,n){if(!Ut(n))return Se;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!Co(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Do="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Do);const Pt=[];function Oo(t,e=Se){let n;const r=new Set;function o(s){if(gn(t,s)&&(t=s,n)){const d=!Pt.length;for(const f of r)f[1](),Pt.push(f,t);if(d){for(let f=0;f<Pt.length;f+=2)Pt[f][0](Pt[f+1]);Pt.length=0}}}function a(s){o(s(t))}function c(s,d=Se){const f=[s,d];return r.add(f),r.size===1&&(n=e(o,a)||Se),s(t),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:o,update:a,subscribe:c}}const zo={nodesById:{},rootIds:[]},Pe=Oo(zo),Pr={subscribe:Pe.subscribe};function mn(t,{includeChildren:e=!1}={}){var o;const n=Array.isArray(t.children)?[...t.children]:[],r=e?n.sort((a,c)=>(a.index??0)-(c.index??0)):[];return{id:t.id,parentId:t.parentId??null,title:t.title??"",url:t.url??null,index:typeof t.index=="number"?t.index:0,isFolder:!t.url,childrenIds:e?r.map(a=>a.id):[],childrenLoaded:e,hasChildren:!t.url&&(e?r.length>0:!!((o=t.children)!=null&&o.length))}}function On(t){Pe.update(e=>{const n={...e.nodesById};let r=[...e.rootIds];for(const o of t){const a=n[o.id];n[o.id]=a?{...a,...o}:o,!o.parentId&&!r.includes(o.id)&&r.push(o.id)}return r.sort((o,a)=>{const c=n[o],s=n[a];return((c==null?void 0:c.index)??0)-((s==null?void 0:s.index)??0)}),{...e,nodesById:n,rootIds:r}})}function dn(t,e,n){Pe.update(r=>{const o={...r.nodesById},a=o[t];if(!a)return r;const c=Array.from(new Set(e));return c.sort((s,d)=>{const f=o[s],_=o[d];return((f==null?void 0:f.index)??0)-((_==null?void 0:_.index)??0)}),o[t]={...a,childrenIds:c,childrenLoaded:n?!0:a.childrenLoaded,hasChildren:c.length>0},{...r,nodesById:o}})}async function No(t){const e=await t.bookmarks.getTree(),n=Array.isArray(e)?e[0]:null,o=((n==null?void 0:n.children)??[]).map(a=>mn(a,{includeChildren:!1}));return Pe.set({nodesById:Object.fromEntries(o.map(a=>[a.id,a])),rootIds:o.map(a=>a.id)}),o.map(a=>a.id)}function pt(){return St(Pe)}function Ro(t){return St(Pe).nodesById[t]}async function Uo(t,e){var s;const n=St(Pe),r=n.nodesById[e];if(!r||!r.isFolder||r.childrenLoaded)return((s=r==null?void 0:r.childrenIds)==null?void 0:s.map(d=>n.nodesById[d]).filter(Boolean))??[];const c=[...await t.bookmarks.getChildren(e)].sort((d,f)=>(d.index??0)-(f.index??0)).map(d=>mn(d,{includeChildren:!1}));return On(c),dn(e,c.map(d=>d.id),!0),c}async function Dt(t,e){const n=await t.bookmarks.getSubTree(e),r=Array.isArray(n)?n[0]:null;if(!r)return{folderIds:[]};const o=[r],a=[],c=[];for(;o.length;){const s=o.shift(),d=Array.isArray(s.children),f=mn(s,{includeChildren:d});a.push(f),s.url||c.push(s.id),d&&o.push(...s.children)}return On(a),a.forEach(s=>{if(s.isFolder&&dn(s.id,s.childrenIds,!0),s.parentId){const f=St(Pe).nodesById[s.parentId];if(f){const _=f.childrenIds?[...f.childrenIds]:[];_.push(s.id),dn(s.parentId,_,f.childrenLoaded)}}}),{folderIds:c}}function An(t){const e=St(Pe),n=[];let r=e.nodesById[t];for(;r&&(r.title&&n.unshift(r.title),!!r.parentId);)r=e.nodesById[r.parentId];return n}function Go(t){const e=mn(t,{includeChildren:!1});if(On([e]),e.parentId){const n=Ro(e.parentId),r=n!=null&&n.childrenIds?[...n.childrenIds]:[];r.splice(e.index??r.length,0,e.id),dn(e.parentId,r,n==null?void 0:n.childrenLoaded)}}function jo(t,e){Pe.update(n=>{const r=n.nodesById[t];if(!r)return n;const o={...n.nodesById,[t]:{...r,...e}};return{...n,nodesById:o}})}function Vo(t,{parentId:e,oldParentId:n,index:r}){Pe.update(o=>{const a={...o.nodesById},c=a[t];if(!c)return o;const s={...c,parentId:e,index:typeof r=="number"?r:c.index};if(a[t]=s,n&&a[n]){const d=a[n],f=(d.childrenIds??[]).filter(_=>_!==t);a[n]={...d,childrenIds:f,hasChildren:f.length>0}}if(e&&a[e]){const d=a[e],f=[...d.childrenIds??[]];f.includes(t)||f.splice(r??f.length,0,t),a[e]={...d,childrenIds:f,hasChildren:!0}}return{...o,nodesById:a}})}function qo(t,{parentId:e}){Pe.update(n=>{var s;const r={...n.nodesById},o=new Set([t]),a=[t];for(;a.length;){const d=a.pop(),f=r[d];f&&(s=f.childrenIds)!=null&&s.length&&f.childrenIds.forEach(_=>{o.has(_)||(o.add(_),a.push(_))})}o.forEach(d=>{delete r[d]});let c=n.rootIds;if(c.includes(t)&&(c=c.filter(d=>d!==t)),e&&r[e]){const d=r[e],f=(d.childrenIds??[]).filter(_=>_!==t);r[e]={...d,childrenIds:f,hasChildren:f.length>0}}return{...n,nodesById:r,rootIds:c}})}function an(t){var o;const e=St(Pe),n=[],r=[t];for(;r.length;){const a=r.pop(),c=e.nodesById[a];c&&c.isFolder&&(n.push(a),(o=c.childrenIds)!=null&&o.length&&r.push(...c.childrenIds))}return n}function Ho(){const t=St(Pe);return Object.values(t.nodesById).filter(e=>e.isFolder).map(e=>({id:e.id,title:e.title??"",path:An(e.id)}))}function tr(t,e,n){const r=t.slice();return r[22]=e[n],r}function nr(t){let e,n,r,o,a,c,s,d,f,_,E,M,C,T=(t[10].title||"Untitled folder")+"",W,D,U,P,S,G,oe,j=t[11]&&t[14]&&rr(t);return{c(){var I;e=p("li"),n=p("div"),r=p("button"),o=Wt("svg"),a=Wt("path"),f=N(),_=p("label"),E=p("input"),M=N(),C=p("span"),W=ge(T),U=N(),j&&j.c(),i(a,"d","M6 4.5 10 8l-4 3.5"),i(a,"fill","none"),i(a,"stroke","currentColor"),i(a,"stroke-width","1.6"),i(a,"stroke-linecap","round"),i(a,"stroke-linejoin","round"),i(o,"viewBox","0 0 16 16"),i(o,"aria-hidden","true"),i(o,"focusable","false"),i(r,"type","button"),i(r,"class","folder-node__expander svelte-11g8b9y"),i(r,"aria-hidden",c=!t[11]),i(r,"aria-label",s=t[14]?"Collapse folder":"Expand folder"),r.disabled=d=!t[11],Rt(r,"hidden",!t[11]),i(E,"type","checkbox"),i(E,"class","folder-node__checkbox svelte-11g8b9y"),i(C,"class","folder-node__title svelte-11g8b9y"),i(C,"title",D=t[10].title||"Untitled folder"),i(_,"class","folder-node__label svelte-11g8b9y"),i(n,"class","folder-node__row svelte-11g8b9y"),i(n,"style",t[15]),i(e,"class","folder-node svelte-11g8b9y"),i(e,"data-expanded",t[14]),i(e,"data-depth",t[1]),i(e,"data-match",P=((I=t[5])==null?void 0:I.has(t[0]))??!1)},m(I,k){Z(I,e,k),g(e,n),g(n,r),g(r,o),g(o,a),g(n,f),g(n,_),g(_,E),t[21](E),g(_,M),g(_,C),g(C,W),g(e,U),j&&j.m(e,null),S=!0,G||(oe=[x(r,"click",t[16]),x(E,"change",t[17])],G=!0)},p(I,k){var L;(!S||k&2048&&c!==(c=!I[11]))&&i(r,"aria-hidden",c),(!S||k&16384&&s!==(s=I[14]?"Collapse folder":"Expand folder"))&&i(r,"aria-label",s),(!S||k&2048&&d!==(d=!I[11]))&&(r.disabled=d),(!S||k&2048)&&Rt(r,"hidden",!I[11]),(!S||k&1024)&&T!==(T=(I[10].title||"Untitled folder")+"")&&Fe(W,T),(!S||k&1024&&D!==(D=I[10].title||"Untitled folder"))&&i(C,"title",D),I[11]&&I[14]?j?(j.p(I,k),k&18432&&ke(j,1)):(j=rr(I),j.c(),ke(j,1),j.m(e,null)):j&&(Ct(),Me(j,1,1,()=>{j=null}),Et()),(!S||k&16384)&&i(e,"data-expanded",I[14]),(!S||k&2)&&i(e,"data-depth",I[1]),(!S||k&33&&P!==(P=((L=I[5])==null?void 0:L.has(I[0]))??!1))&&i(e,"data-match",P)},i(I){S||(ke(j),S=!0)},o(I){Me(j),S=!1},d(I){I&&J(e),t[21](null),j&&j.d(),G=!1,it(oe)}}}function rr(t){let e,n,r,o;const a=[Ko,Yo,Qo],c=[];function s(d,f){var _;return d[13]?0:(_=d[10].childrenIds)!=null&&_.length?1:2}return n=s(t),r=c[n]=a[n](t),{c(){e=p("ul"),r.c(),i(e,"class","folder-node__children svelte-11g8b9y")},m(d,f){Z(d,e,f),c[n].m(e,null),o=!0},p(d,f){let _=n;n=s(d),n===_?c[n].p(d,f):(Ct(),Me(c[_],1,1,()=>{c[_]=null}),Et(),r=c[n],r?r.p(d,f):(r=c[n]=a[n](d),r.c()),ke(r,1),r.m(e,null))},i(d){o||(ke(r),o=!0)},o(d){Me(r),o=!1},d(d){d&&J(e),c[n].d()}}}function Qo(t){let e;return{c(){e=p("li"),e.textContent="Empty folder",i(e,"class","folder-node__status svelte-11g8b9y")},m(n,r){Z(n,e,r)},p:Se,i:Se,o:Se,d(n){n&&J(e)}}}function Yo(t){let e=[],n=new Map,r,o,a=Le(t[10].childrenIds);const c=s=>s[22];for(let s=0;s<a.length;s+=1){let d=tr(t,a,s),f=c(d);n.set(f,e[s]=or(f,d))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();r=jt()},m(s,d){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(s,d);Z(s,r,d),o=!0},p(s,d){d&1534&&(a=Le(s[10].childrenIds),Ct(),e=Xt(e,d,c,1,s,a,n,r.parentNode,Tr,or,r,tr),Et())},i(s){if(!o){for(let d=0;d<a.length;d+=1)ke(e[d]);o=!0}},o(s){for(let d=0;d<e.length;d+=1)Me(e[d]);o=!1},d(s){s&&J(r);for(let d=0;d<e.length;d+=1)e[d].d(s)}}}function Ko(t){let e;return{c(){e=p("li"),e.textContent="Loading…",i(e,"class","folder-node__status svelte-11g8b9y")},m(n,r){Z(n,e,r)},p:Se,i:Se,o:Se,d(n){n&&J(e)}}}function or(t,e){let n,r,o;return r=new Dr({props:{nodeId:e[22],depth:e[1]+1,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[5],toggleSelection:e[6],toggleExpansion:e[7],getCheckboxState:e[8]}}),{key:t,first:null,c(){n=jt(),Tn(r.$$.fragment),this.first=n},m(a,c){Z(a,n,c),hn(r,a,c),o=!0},p(a,c){e=a;const s={};c&1024&&(s.nodeId=e[22]),c&2&&(s.depth=e[1]+1),c&4&&(s.expandedIds=e[2]),c&8&&(s.loadingIds=e[3]),c&16&&(s.visibleIds=e[4]),c&32&&(s.searchMatches=e[5]),c&64&&(s.toggleSelection=e[6]),c&128&&(s.toggleExpansion=e[7]),c&256&&(s.getCheckboxState=e[8]),r.$set(s)},i(a){o||(ke(r.$$.fragment,a),o=!0)},o(a){Me(r.$$.fragment,a),o=!1},d(a){a&&J(n),bn(r,a)}}}function Wo(t){let e,n,r=t[10]&&t[12]&&nr(t);return{c(){r&&r.c(),e=jt()},m(o,a){r&&r.m(o,a),Z(o,e,a),n=!0},p(o,[a]){o[10]&&o[12]?r?(r.p(o,a),a&5120&&ke(r,1)):(r=nr(o),r.c(),ke(r,1),r.m(e.parentNode,e)):r&&(Ct(),Me(r,1,1,()=>{r=null}),Et())},i(o){n||(ke(r),n=!0)},o(o){Me(r),n=!1},d(o){o&&J(e),r&&r.d(o)}}}function Jo(t,e,n){let r,o,a,c,s,d,f,_;Lr(t,Pr,L=>n(20,_=L));let{nodeId:E}=e,{depth:M=0}=e,{expandedIds:C}=e,{loadingIds:T}=e,{visibleIds:W}=e,{searchMatches:D}=e,{toggleSelection:U}=e,{toggleExpansion:P}=e,{getCheckboxState:S}=e,G;const oe=`--depth: ${M}`;function j(L){L.stopPropagation(),a&&(P==null||P(E))}function I(L){L.stopPropagation(),U==null||U(E)}function k(L){kt[L?"unshift":"push"](()=>{G=L,n(9,G),n(18,f),n(8,S),n(0,E)})}return t.$$set=L=>{"nodeId"in L&&n(0,E=L.nodeId),"depth"in L&&n(1,M=L.depth),"expandedIds"in L&&n(2,C=L.expandedIds),"loadingIds"in L&&n(3,T=L.loadingIds),"visibleIds"in L&&n(4,W=L.visibleIds),"searchMatches"in L&&n(5,D=L.searchMatches),"toggleSelection"in L&&n(6,U=L.toggleSelection),"toggleExpansion"in L&&n(7,P=L.toggleExpansion),"getCheckboxState"in L&&n(8,S=L.getCheckboxState)},t.$$.update=()=>{var L;t.$$.dirty&1048576&&n(19,r=_),t.$$.dirty&524289&&n(10,o=(L=r==null?void 0:r.nodesById)==null?void 0:L[E]),t.$$.dirty&1024&&n(11,a=(o==null?void 0:o.isFolder)??!1),t.$$.dirty&5&&n(14,c=C==null?void 0:C.has(E)),t.$$.dirty&9&&n(13,s=T==null?void 0:T.has(E)),t.$$.dirty&17&&n(12,d=!W||W.has(E)),t.$$.dirty&257&&n(18,f=S?S(E):"none"),t.$$.dirty&262656&&G&&(n(9,G.indeterminate=f==="partial",G),n(9,G.checked=f==="selected",G))},[E,M,C,T,W,D,U,P,S,G,o,a,d,s,c,oe,j,I,f,r,_,k]}class Dr extends Dn{constructor(e){super(),Pn(this,e,Jo,Wo,gn,{nodeId:0,depth:1,expandedIds:2,loadingIds:3,visibleIds:4,searchMatches:5,toggleSelection:6,toggleExpansion:7,getCheckboxState:8})}}function lr(t,e,n){const r=t.slice();return r[21]=e[n],r}function ar(t,e,n){const r=t.slice();return r[24]=e[n],r}function ir(t){let e,n,r,o,a,c,s,d,f,_,E,M,C,T,W,D,U,P,S,G,oe,j,I,k,L,ae,Ae=t[8]===1?"":"s",Y,ie,st,De,ye,Ce,Ee,Ke,ve=t[9]===1?"":"s",Oe,rt,ee,se,We,fe,Je,ne,ue,ot,ze;const Ne=[Xo,Zo],ce=[];function X(de,re){return de[1].length===0?0:1}C=X(t),T=ce[C]=Ne[C](t);let te=t[8]>0&&cr(t);function Re(de,re){return de[7].length===0?$o:xo}let _e=Re(t),y=_e(t);return{c(){e=p("div"),n=p("section"),r=p("header"),o=p("div"),o.innerHTML='<h2 id="folder-modal-title">Select bookmark folders</h2> <p class="folder-modal__hint svelte-gn1lpb">Choose one or more folders to show in your new tab. Selecting a folder includes all of its subfolders.</p>',a=N(),c=p("button"),c.textContent="×",s=N(),d=p("div"),f=p("input"),_=N(),E=p("div"),M=p("div"),T.c(),W=N(),D=p("aside"),U=p("header"),P=p("h3"),P.textContent="Selected folders",S=N(),te&&te.c(),G=N(),y.c(),oe=N(),j=p("footer"),I=p("div"),k=p("span"),L=ge(t[8]),ae=ge(" folder"),Y=ge(Ae),ie=ge(" selected"),st=N(),De=p("span"),De.textContent="•",ye=N(),Ce=p("span"),Ee=ge(t[9]),Ke=ge(" bookmark"),Oe=ge(ve),rt=N(),ee=p("div"),se=p("button"),se.textContent="Cancel",We=N(),fe=p("button"),Je=ge("Confirm selection"),i(c,"type","button"),i(c,"class","folder-modal__close svelte-gn1lpb"),i(c,"aria-label","Close"),i(r,"class","folder-modal__header svelte-gn1lpb"),i(f,"type","search"),i(f,"placeholder","Search folders"),f.value=t[5],i(f,"class","svelte-gn1lpb"),i(d,"class","folder-modal__search svelte-gn1lpb"),i(M,"class","folder-modal__tree svelte-gn1lpb"),i(U,"class","svelte-gn1lpb"),i(D,"class","folder-modal__summary svelte-gn1lpb"),i(E,"class","folder-modal__body svelte-gn1lpb"),i(De,"aria-hidden","true"),i(I,"class","folder-modal__totals svelte-gn1lpb"),i(se,"type","button"),i(se,"class","ghost-button svelte-gn1lpb"),i(fe,"type","button"),i(fe,"class","primary-button svelte-gn1lpb"),fe.disabled=ne=t[8]===0,i(ee,"class","folder-modal__actions svelte-gn1lpb"),i(j,"class","folder-modal__footer svelte-gn1lpb"),i(n,"class","folder-modal svelte-gn1lpb"),i(n,"role","dialog"),i(n,"aria-modal","true"),i(n,"aria-labelledby","folder-modal-title"),i(e,"class","modal-overlay svelte-gn1lpb"),i(e,"role","presentation")},m(de,re){Z(de,e,re),g(e,n),g(n,r),g(r,o),g(r,a),g(r,c),g(n,s),g(n,d),g(d,f),t[20](f),g(n,_),g(n,E),g(E,M),ce[C].m(M,null),g(E,W),g(E,D),g(D,U),g(U,P),g(U,S),te&&te.m(U,null),g(D,G),y.m(D,null),g(n,oe),g(n,j),g(j,I),g(I,k),g(k,L),g(k,ae),g(k,Y),g(k,ie),g(I,st),g(I,De),g(I,ye),g(I,Ce),g(Ce,Ee),g(Ce,Ke),g(Ce,Oe),g(j,rt),g(j,ee),g(ee,se),g(ee,We),g(ee,fe),g(fe,Je),ue=!0,ot||(ze=[x(c,"click",function(){Ut(t[13])&&t[13].apply(this,arguments)}),x(f,"input",t[18]),x(se,"click",function(){Ut(t[13])&&t[13].apply(this,arguments)}),x(fe,"click",function(){Ut(t[14])&&t[14].apply(this,arguments)}),x(e,"click",t[17])],ot=!0)},p(de,re){t=de,(!ue||re&32&&f.value!==t[5])&&(f.value=t[5]);let qe=C;C=X(t),C===qe?ce[C].p(t,re):(Ct(),Me(ce[qe],1,1,()=>{ce[qe]=null}),Et(),T=ce[C],T?T.p(t,re):(T=ce[C]=Ne[C](t),T.c()),ke(T,1),T.m(M,null)),t[8]>0?te?te.p(t,re):(te=cr(t),te.c(),te.m(U,null)):te&&(te.d(1),te=null),_e===(_e=Re(t))&&y?y.p(t,re):(y.d(1),y=_e(t),y&&(y.c(),y.m(D,null))),(!ue||re&256)&&Fe(L,t[8]),(!ue||re&256)&&Ae!==(Ae=t[8]===1?"":"s")&&Fe(Y,Ae),(!ue||re&512)&&Fe(Ee,t[9]),(!ue||re&512)&&ve!==(ve=t[9]===1?"":"s")&&Fe(Oe,ve),(!ue||re&256&&ne!==(ne=t[8]===0))&&(fe.disabled=ne)},i(de){ue||(ke(T),ue=!0)},o(de){Me(T),ue=!1},d(de){de&&J(e),t[20](null),ce[C].d(),te&&te.d(),y.d(),ot=!1,it(ze)}}}function Zo(t){let e,n=[],r=new Map,o,a=Le(t[1]);const c=s=>s[24];for(let s=0;s<a.length;s+=1){let d=ar(t,a,s),f=c(d);r.set(f,n[s]=sr(f,d))}return{c(){e=p("ul");for(let s=0;s<n.length;s+=1)n[s].c();i(e,"class","folder-tree svelte-gn1lpb")},m(s,d){Z(s,e,d);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);o=!0},p(s,d){d&7262&&(a=Le(s[1]),Ct(),n=Xt(n,d,c,1,s,a,r,e,Tr,sr,null,ar),Et())},i(s){if(!o){for(let d=0;d<a.length;d+=1)ke(n[d]);o=!0}},o(s){for(let d=0;d<n.length;d+=1)Me(n[d]);o=!1},d(s){s&&J(e);for(let d=0;d<n.length;d+=1)n[d].d()}}}function Xo(t){let e;return{c(){e=p("p"),e.textContent="No bookmark folders available.",i(e,"class","folder-modal__empty svelte-gn1lpb")},m(n,r){Z(n,e,r)},p:Se,i:Se,o:Se,d(n){n&&J(e)}}}function sr(t,e){let n,r,o;return r=new Dr({props:{nodeId:e[24],depth:0,expandedIds:e[2],loadingIds:e[3],visibleIds:e[4],searchMatches:e[6],toggleSelection:e[10],toggleExpansion:e[11],getCheckboxState:e[12]}}),{key:t,first:null,c(){n=jt(),Tn(r.$$.fragment),this.first=n},m(a,c){Z(a,n,c),hn(r,a,c),o=!0},p(a,c){e=a;const s={};c&2&&(s.nodeId=e[24]),c&4&&(s.expandedIds=e[2]),c&8&&(s.loadingIds=e[3]),c&16&&(s.visibleIds=e[4]),c&64&&(s.searchMatches=e[6]),c&1024&&(s.toggleSelection=e[10]),c&2048&&(s.toggleExpansion=e[11]),c&4096&&(s.getCheckboxState=e[12]),r.$set(s)},i(a){o||(ke(r.$$.fragment,a),o=!0)},o(a){Me(r.$$.fragment,a),o=!1},d(a){a&&J(n),bn(r,a)}}}function cr(t){let e,n,r;return{c(){e=p("button"),e.textContent="Clear all",i(e,"type","button"),i(e,"class","summary-clear svelte-gn1lpb")},m(o,a){Z(o,e,a),n||(r=x(e,"click",function(){Ut(t[15])&&t[15].apply(this,arguments)}),n=!0)},p(o,a){t=o},d(o){o&&J(e),n=!1,r()}}}function xo(t){let e,n=[],r=new Map,o=Le(t[7]);const a=c=>c[21].id;for(let c=0;c<o.length;c+=1){let s=lr(t,o,c),d=a(s);r.set(d,n[c]=fr(d,s))}return{c(){e=p("ul");for(let c=0;c<n.length;c+=1)n[c].c();i(e,"class","folder-modal__selection-list svelte-gn1lpb")},m(c,s){Z(c,e,s);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(e,null)},p(c,s){s&128&&(o=Le(c[7]),n=Xt(n,s,a,1,c,o,r,e,Fn,fr,null,lr))},d(c){c&&J(e);for(let s=0;s<n.length;s+=1)n[s].d()}}}function $o(t){let e;return{c(){e=p("p"),e.textContent="Pick folders to see them here.",i(e,"class","folder-modal__empty svelte-gn1lpb")},m(n,r){Z(n,e,r)},p:Se,d(n){n&&J(e)}}}function dr(t){let e,n=t[21].count+"",r;return{c(){e=p("span"),r=ge(n),i(e,"class","selection-chip__count svelte-gn1lpb")},m(o,a){Z(o,e,a),g(e,r)},p(o,a){a&128&&n!==(n=o[21].count+"")&&Fe(r,n)},d(o){o&&J(e)}}}function fr(t,e){let n,r,o,a=e[21].label+"",c,s,d,f,_=typeof e[21].count=="number"&&dr(e);return{key:t,first:null,c(){n=p("li"),r=p("span"),o=p("span"),c=ge(a),s=N(),_&&_.c(),f=N(),i(o,"class","selection-chip__label svelte-gn1lpb"),i(r,"class","selection-chip svelte-gn1lpb"),i(r,"title",d=e[21].fullPath),this.first=n},m(E,M){Z(E,n,M),g(n,r),g(r,o),g(o,c),g(r,s),_&&_.m(r,null),g(n,f)},p(E,M){e=E,M&128&&a!==(a=e[21].label+"")&&Fe(c,a),typeof e[21].count=="number"?_?_.p(e,M):(_=dr(e),_.c(),_.m(r,null)):_&&(_.d(1),_=null),M&128&&d!==(d=e[21].fullPath)&&i(r,"title",d)},d(E){E&&J(n),_&&_.d()}}}function el(t){let e,n,r=t[0]&&ir(t);return{c(){r&&r.c(),e=jt()},m(o,a){r&&r.m(o,a),Z(o,e,a),n=!0},p(o,[a]){o[0]?r?(r.p(o,a),a&1&&ke(r,1)):(r=ir(o),r.c(),ke(r,1),r.m(e.parentNode,e)):r&&(Ct(),Me(r,1,1,()=>{r=null}),Et())},i(o){n||(ke(r),n=!0)},o(o){Me(r),n=!1},d(o){o&&J(e),r&&r.d(o)}}}function tl(t,e,n){let{open:r=!1}=e,{rootIds:o=[]}=e,{expandedIds:a}=e,{loadingIds:c}=e,{visibleIds:s}=e,{searchQuery:d=""}=e,{searchMatches:f}=e,{summary:_=[]}=e,{selectedFolderCount:E=0}=e,{totalBookmarkCount:M=0}=e,{toggleSelection:C}=e,{toggleExpansion:T}=e,{getCheckboxState:W}=e,{onSearchChange:D}=e,{onRequestClose:U}=e,{onConfirmSelection:P}=e,{onClearSelection:S}=e,G;function oe(k){k.target===k.currentTarget&&(k.preventDefault(),U==null||U())}function j(k){D==null||D(k.target.value)}function I(k){kt[k?"unshift":"push"](()=>{G=k,n(16,G)})}return t.$$set=k=>{"open"in k&&n(0,r=k.open),"rootIds"in k&&n(1,o=k.rootIds),"expandedIds"in k&&n(2,a=k.expandedIds),"loadingIds"in k&&n(3,c=k.loadingIds),"visibleIds"in k&&n(4,s=k.visibleIds),"searchQuery"in k&&n(5,d=k.searchQuery),"searchMatches"in k&&n(6,f=k.searchMatches),"summary"in k&&n(7,_=k.summary),"selectedFolderCount"in k&&n(8,E=k.selectedFolderCount),"totalBookmarkCount"in k&&n(9,M=k.totalBookmarkCount),"toggleSelection"in k&&n(10,C=k.toggleSelection),"toggleExpansion"in k&&n(11,T=k.toggleExpansion),"getCheckboxState"in k&&n(12,W=k.getCheckboxState),"onSearchChange"in k&&n(19,D=k.onSearchChange),"onRequestClose"in k&&n(13,U=k.onRequestClose),"onConfirmSelection"in k&&n(14,P=k.onConfirmSelection),"onClearSelection"in k&&n(15,S=k.onClearSelection)},t.$$.update=()=>{if(t.$$.dirty&73729&&r){Ln().then(()=>{G==null||G.focus(),G==null||G.select()});const k=L=>{L.key==="Escape"&&(L.preventDefault(),U==null||U())};document.addEventListener("keydown",k,{once:!0})}},[r,o,a,c,s,d,f,_,E,M,C,T,W,U,P,S,G,oe,j,D,I]}class nl extends Dn{constructor(e){super(),Pn(this,e,tl,el,gn,{open:0,rootIds:1,expandedIds:2,loadingIds:3,visibleIds:4,searchQuery:5,searchMatches:6,summary:7,selectedFolderCount:8,totalBookmarkCount:9,toggleSelection:10,toggleExpansion:11,getCheckboxState:12,onSearchChange:19,onRequestClose:13,onConfirmSelection:14,onClearSelection:15})}}const{Map:Or}=Eo;function ur(t,e,n){const r=t.slice();return r[149]=e[n],r}function gr(t,e,n){const r=t.slice();return r[152]=e[n],r}function hr(t,e,n){const r=t.slice();return r[155]=e[n],r}function br(t,e,n){const r=t.slice();return r[155]=e[n],r}function mr(t,e,n){const r=t.slice();return r[155]=e[n],r}function pr(t){let e,n=t[155].label+"",r,o,a,c,s;function d(){return t[72](t[155])}return{c(){e=p("button"),r=ge(n),o=N(),i(e,"type","button"),i(e,"class","choice-button"),i(e,"data-active",a=t[3].theme===t[155].id)},m(f,_){Z(f,e,_),g(e,r),g(e,o),c||(s=x(e,"click",d),c=!0)},p(f,_){t=f,_[0]&8&&a!==(a=t[3].theme===t[155].id)&&i(e,"data-active",a)},d(f){f&&J(e),c=!1,s()}}}function kr(t){let e,n,r,o,a,c,s;function d(){return t[73](t[155])}return{c(){e=p("button"),i(e,"type","button"),i(e,"class","accent-swatch"),i(e,"style",n=`--swatch-color: ${t[155].colors.base};`),i(e,"data-active",r=t[3].accent===t[155].id),i(e,"aria-label",o=t[155].label),i(e,"title",a=t[155].label)},m(f,_){Z(f,e,_),c||(s=x(e,"click",d),c=!0)},p(f,_){t=f,_[0]&16777216&&n!==(n=`--swatch-color: ${t[155].colors.base};`)&&i(e,"style",n),_[0]&16777224&&r!==(r=t[3].accent===t[155].id)&&i(e,"data-active",r),_[0]&16777216&&o!==(o=t[155].label)&&i(e,"aria-label",o),_[0]&16777216&&a!==(a=t[155].label)&&i(e,"title",a)},d(f){f&&J(e),c=!1,s()}}}function rl(t){let e,n,r=t[6]?"Show fewer accent colors":"More accent colors",o,a,c;return{c(){e=p("div"),n=p("button"),o=ge(r),i(n,"type","button"),i(n,"class","swatch-toggle-button"),i(n,"aria-expanded",t[6]),i(e,"class","swatch-toggle-row")},m(s,d){Z(s,e,d),g(e,n),g(n,o),a||(c=x(n,"click",t[30]),a=!0)},p(s,d){d[0]&64&&r!==(r=s[6]?"Show fewer accent colors":"More accent colors")&&Fe(o,r),d[0]&64&&i(n,"aria-expanded",s[6])},d(s){s&&J(e),a=!1,c()}}}function _r(t){let e,n,r=t[155].label+"",o,a,c,s,d,f;function _(){return t[74](t[155])}return{c(){e=p("button"),n=p("span"),o=ge(r),a=N(),i(e,"type","button"),i(e,"class","gradient-option"),i(e,"style",c=`--gradient-sample-light: ${t[155].gradients.light}; --gradient-sample-dark: ${t[155].gradients.dark};`),i(e,"data-active",s=t[3].background.mode==="gradient"&&t[3].background.gradientId===t[155].id)},m(E,M){Z(E,e,M),g(e,n),g(n,o),g(e,a),d||(f=x(e,"click",_),d=!0)},p(E,M){t=E,M[0]&33554432&&r!==(r=t[155].label+"")&&Fe(o,r),M[0]&33554432&&c!==(c=`--gradient-sample-light: ${t[155].gradients.light}; --gradient-sample-dark: ${t[155].gradients.dark};`)&&i(e,"style",c),M[0]&33554440&&s!==(s=t[3].background.mode==="gradient"&&t[3].background.gradientId===t[155].id)&&i(e,"data-active",s)},d(E){E&&J(e),d=!1,f()}}}function ol(t){let e,n,r=t[5]?"Show fewer gradients":"More gradients",o,a,c;return{c(){e=p("div"),n=p("button"),o=ge(r),i(n,"type","button"),i(n,"class","swatch-toggle-button"),i(n,"aria-expanded",t[5]),i(e,"class","swatch-toggle-row")},m(s,d){Z(s,e,d),g(e,n),g(n,o),a||(c=x(n,"click",t[31]),a=!0)},p(s,d){d[0]&32&&r!==(r=s[5]?"Show fewer gradients":"More gradients")&&Fe(o,r),d[0]&32&&i(n,"aria-expanded",s[5])},d(s){s&&J(e),a=!1,c()}}}function ll(t){let e=[],n=new Or,r,o=Le(t[14]);const a=c=>c[152].id;for(let c=0;c<o.length;c+=1){let s=gr(t,o,c),d=a(s);n.set(d,e[c]=yr(d,s))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();r=jt()},m(c,s){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(c,s);Z(c,r,s)},p(c,s){s[0]&16384&&(o=Le(c[14]),e=Xt(e,s,a,1,c,o,n,r.parentNode,Fn,yr,r,gr))},d(c){c&&J(r);for(let s=0;s<e.length;s+=1)e[s].d(c)}}}function al(t){let e;return{c(){e=p("span"),e.textContent="Default folder",i(e,"class","folder-chip folder-chip--empty"),i(e,"title","Default Bookmark Dial folder")},m(n,r){Z(n,e,r)},p:Se,d(n){n&&J(e)}}}function yr(t,e){let n,r,o=e[152].label+"",a,c,s,d=e[152].count+"",f,_,E;return{key:t,first:null,c(){n=p("span"),r=p("span"),a=ge(o),c=N(),s=p("span"),f=ge(d),_=N(),i(r,"class","folder-chip__label"),i(s,"class","folder-chip__count"),i(n,"class","folder-chip"),i(n,"title",E=e[152].fullPath),this.first=n},m(M,C){Z(M,n,C),g(n,r),g(r,a),g(n,c),g(n,s),g(s,f),g(n,_)},p(M,C){e=M,C[0]&16384&&o!==(o=e[152].label+"")&&Fe(a,o),C[0]&16384&&d!==(d=e[152].count+"")&&Fe(f,d),C[0]&16384&&E!==(E=e[152].fullPath)&&i(n,"title",E)},d(M){M&&J(n)}}}function il(t){let e,n,r,o;function a(){return t[76](t[149])}return{c(){e=p("img"),Xn(e.src,n=t[46](t[149].url))||i(e,"src",n),i(e,"alt",""),i(e,"loading","lazy")},m(c,s){Z(c,e,s),r||(o=x(e,"error",a),r=!0)},p(c,s){t=c,s[0]&512&&!Xn(e.src,n=t[46](t[149].url))&&i(e,"src",n)},d(c){c&&J(e),r=!1,o()}}}function sl(t){let e=t[149].initials+"",n;return{c(){n=ge(e)},m(r,o){Z(r,n,o)},p(r,o){o[0]&512&&e!==(e=r[149].initials+"")&&Fe(n,e)},d(r){r&&J(n)}}}function wr(t,e){let n,r,o,a,c,s,d=e[149].displayTitle+"",f,_,E,M,C,T,W;function D(I,k){return I[149].fallback?sl:il}let U=D(e),P=U(e);function S(...I){return e[77](e[149],...I)}function G(...I){return e[78](e[149],...I)}function oe(...I){return e[79](e[149],...I)}function j(...I){return e[80](e[149],...I)}return{key:t,first:null,c(){n=p("article"),r=p("a"),o=p("div"),P.c(),c=N(),s=p("div"),f=ge(d),M=N(),C=p("button"),C.textContent="×",i(o,"class","tile-icon"),i(o,"style",a=`--dial-color: ${e[149].palette.background}; --dial-text: ${e[149].palette.text};`),i(o,"aria-hidden","true"),i(s,"class","tile-title"),i(r,"class","tile-link"),i(r,"href",_=e[149].url),i(r,"title",E=e[149].title||e[149].url),i(r,"draggable","false"),i(C,"class","remove-button"),i(C,"type","button"),i(C,"aria-label","Remove bookmark"),i(n,"class","tile"),i(n,"draggable","true"),this.first=n},m(I,k){Z(I,n,k),g(n,r),g(r,o),P.m(o,null),g(r,c),g(r,s),g(s,f),g(n,M),g(n,C),T||(W=[x(C,"click",S),x(n,"dragstart",G),x(n,"dragend",e[51]),x(n,"dragover",oe),x(n,"drop",j)],T=!0)},p(I,k){e=I,U===(U=D(e))&&P?P.p(e,k):(P.d(1),P=U(e),P&&(P.c(),P.m(o,null))),k[0]&512&&a!==(a=`--dial-color: ${e[149].palette.background}; --dial-text: ${e[149].palette.text};`)&&i(o,"style",a),k[0]&512&&d!==(d=e[149].displayTitle+"")&&Fe(f,d),k[0]&512&&_!==(_=e[149].url)&&i(r,"href",_),k[0]&512&&E!==(E=e[149].title||e[149].url)&&i(r,"title",E)},d(I){I&&J(n),P.d(),T=!1,it(W)}}}function cl(t){var ht;let e,n,r,o,a,c,s,d,f,_,E,M,C,T,W,D,U,P,S,G,oe,j,I,k,L,ae,Ae,Y,ie,st,De,ye,Ce,Ee,Ke,ve,Oe,rt,ee,se,We,fe,Je,ne,ue,ot,ze,Ne,ce,X=[],te=new Or,Re,_e,y,de,re,qe,Ue,we,Ze,dt,He,Ge,_t,Qe,Xe,vt,ft,Bt,je,lt,xt,Lt,$t,ut,en,yt,Te,Vt,tn,xe=Le(t[27]),be=[];for(let b=0;b<xe.length;b+=1)be[b]=pr(mr(t,xe,b));let $e=Le(t[24]),le=[];for(let b=0;b<$e.length;b+=1)le[b]=kr(br(t,$e,b));let et=t[28].length>un&&rl(t),gt=Le(t[25]),Ie=[];for(let b=0;b<gt.length;b+=1)Ie[b]=_r(hr(t,gt,b));let at=t[29].length>fn&&ol(t);function qt(b,z){return b[14].length===0?al:ll}let Mt=qt(t),Ye=Mt(t),At=Le(t[9]);const nn=b=>b[149].id;for(let b=0;b<At.length;b+=1){let z=ur(t,At,b),Q=nn(z);te.set(Q,X[b]=wr(Q,z))}return re=new nl({props:{open:t[0],rootIds:t[26].rootIds??[],expandedIds:t[19],loadingIds:t[11],visibleIds:t[13],searchQuery:t[12],searchMatches:t[1],summary:t[0]?t[17]:t[14],selectedFolderCount:t[0]?((ht=t[16])==null?void 0:ht.size)??0:t[10].size,totalBookmarkCount:t[0]?t[18]:t[15],toggleSelection:t[38],toggleExpansion:t[39],getCheckboxState:t[44],onSearchChange:t[45],onRequestClose:t[43],onConfirmSelection:t[41],onClearSelection:t[40]}}),{c(){e=p("div"),n=N(),r=p("div"),o=p("button"),a=Wt("svg"),c=Wt("path"),s=Wt("path"),d=N(),f=p("aside"),_=p("header"),E=p("h2"),E.textContent="Settings",M=N(),C=p("button"),C.textContent="×",T=N(),W=p("section"),D=p("h3"),D.textContent="Theme",U=N(),P=p("div");for(let b=0;b<be.length;b+=1)be[b].c();S=N(),G=p("section"),oe=p("h3"),oe.textContent="Accent color",j=N(),I=p("div");for(let b=0;b<le.length;b+=1)le[b].c();k=N(),et&&et.c(),L=N(),ae=p("section"),Ae=p("h3"),Ae.textContent="Gradient background",Y=N(),ie=p("div");for(let b=0;b<Ie.length;b+=1)Ie[b].c();st=N(),at&&at.c(),De=N(),ye=p("section"),Ce=p("button"),Ce.textContent="Custom background…",Ke=N(),ve=p("div"),rt=N(),ee=p("section"),se=p("div"),Ye.c(),We=N(),fe=p("button"),fe.textContent="Manage folders",Je=N(),ne=p("main"),ue=p("section"),ot=ge(t[7]),Ne=N(),ce=p("section");for(let b=0;b<X.length;b+=1)X[b].c();Re=N(),_e=p("article"),y=p("button"),y.innerHTML='<span aria-hidden="true">+</span> <div>Add shortcut</div>',de=N(),Tn(re.$$.fragment),qe=N(),Ue=p("dialog"),we=p("form"),Ze=p("header"),Ze.innerHTML="<h2>Custom background</h2>",dt=N(),He=p("div"),Ge=p("label"),_t=p("span"),_t.textContent="Choose an image (JPEG/PNG, up to 4 MB)",Qe=N(),Xe=p("input"),vt=N(),ft=p("p"),ft.textContent="The selected image is stored locally on this device only.",Bt=N(),je=p("footer"),lt=p("button"),lt.textContent="Remove",xt=N(),Lt=p("span"),$t=N(),ut=p("button"),ut.textContent="Cancel",en=N(),yt=p("button"),yt.textContent="Save",i(e,"id","background-layer"),Rt(e,"visible",t[3].background.mode==="custom"&&!!t[20]),$n(e,"background-image",t[3].background.mode==="custom"&&t[20]?`url(${t[20]})`:null),i(c,"d","M12 8.75a3.25 3.25 0 1 1 0 6.5 3.25 3.25 0 0 1 0-6.5Z"),i(c,"fill","none"),i(c,"stroke","currentColor"),i(c,"stroke-width","1.6"),i(s,"d","M21 12l-2.938 3.5-1.562 4.294L12 19l-4.5.794L5.938 15.5 3 12l2.938-3.5L7.5 4.206 12 5l4.5-.794L18.062 8.5 21 12Z"),i(s,"fill","none"),i(s,"stroke","currentColor"),i(s,"stroke-width","1.6"),i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(a,"class","icon-button__glyph"),i(a,"viewBox","0 0 24 24"),i(a,"aria-hidden","true"),i(a,"focusable","false"),i(a,"role","img"),i(o,"class","icon-button"),i(o,"type","button"),i(o,"title","Settings"),i(o,"aria-label","Open settings"),i(o,"aria-expanded",t[4]),i(o,"aria-controls","settings-drawer"),i(C,"type","button"),i(C,"class","settings-drawer__close"),i(C,"aria-label","Close settings"),i(_,"class","settings-drawer__header"),i(P,"class","choice-row"),i(W,"class","settings-group"),i(I,"class","accent-grid"),i(G,"class","settings-group"),i(ie,"class","gradient-grid"),i(ae,"class","settings-group"),i(Ce,"type","button"),i(Ce,"class","custom-background-button"),i(ye,"class","settings-group"),i(f,"id","settings-drawer"),i(f,"class","settings-drawer"),i(f,"data-open",t[4]),i(f,"aria-hidden",Ee=!t[4]),i(f,"tabindex","-1"),i(ve,"class","settings-overlay"),i(ve,"aria-hidden",Oe=!t[4]),Rt(ve,"visible",t[4]),i(se,"class","folder-bar__summary"),i(fe,"type","button"),i(fe,"class","manage-folders-button"),i(ee,"class","folder-bar"),i(ue,"id","status"),i(ue,"role","status"),i(ue,"aria-live","polite"),i(ue,"data-tone",ze=t[7]?t[8]:null),i(y,"class","add-button"),i(y,"type","button"),i(_e,"class","tile add-tile"),i(_e,"draggable","false"),i(ce,"id","dial-grid"),i(ce,"class","grid"),i(ce,"aria-label","Bookmark Dial links"),i(r,"class","page"),i(Xe,"type","file"),i(Xe,"accept","image/png,image/jpeg,image/jpg"),i(Ge,"class","file-picker"),i(ft,"class","hint"),i(He,"class","dialog-body"),i(lt,"type","button"),i(lt,"id","clear-background"),i(lt,"class","ghost-button"),i(Lt,"class","spacer"),i(ut,"type","button"),i(ut,"id","cancel-background"),i(yt,"type","submit"),i(yt,"id","save-background"),i(je,"class","dialog-footer"),i(we,"id","background-form"),i(we,"method","dialog")},m(b,z){Z(b,e,z),Z(b,n,z),Z(b,r,z),g(r,o),g(o,a),g(a,c),g(a,s),t[71](o),g(r,d),g(r,f),g(f,_),g(_,E),g(_,M),g(_,C),g(f,T),g(f,W),g(W,D),g(W,U),g(W,P);for(let Q=0;Q<be.length;Q+=1)be[Q]&&be[Q].m(P,null);g(f,S),g(f,G),g(G,oe),g(G,j),g(G,I);for(let Q=0;Q<le.length;Q+=1)le[Q]&&le[Q].m(I,null);g(G,k),et&&et.m(G,null),g(f,L),g(f,ae),g(ae,Ae),g(ae,Y),g(ae,ie);for(let Q=0;Q<Ie.length;Q+=1)Ie[Q]&&Ie[Q].m(ie,null);g(ae,st),at&&at.m(ae,null),g(f,De),g(f,ye),g(ye,Ce),t[75](f),g(r,Ke),g(r,ve),g(r,rt),g(r,ee),g(ee,se),Ye.m(se,null),g(ee,We),g(ee,fe),g(r,Je),g(r,ne),g(ne,ue),g(ue,ot),g(ne,Ne),g(ne,ce);for(let Q=0;Q<X.length;Q+=1)X[Q]&&X[Q].m(ce,null);g(ce,Re),g(ce,_e),g(_e,y),g(r,de),hn(re,r,null),Z(b,qe,z),Z(b,Ue,z),g(Ue,we),g(we,Ze),g(we,dt),g(we,He),g(He,Ge),g(Ge,_t),g(Ge,Qe),g(Ge,Xe),t[81](Xe),g(He,vt),g(He,ft),g(we,Bt),g(we,je),g(je,lt),g(je,xt),g(je,Lt),g(je,$t),g(je,ut),g(je,en),g(je,yt),t[82](Ue),Te=!0,Vt||(tn=[x(o,"click",t[33]),x(C,"click",t[32]),x(Ce,"click",t[37]),x(f,"click",vo(t[70])),x(ve,"pointerdown",t[32]),x(fe,"click",t[42]),x(y,"click",t[48]),x(ce,"dragover",t[54]),x(ce,"drop",t[55]),x(lt,"click",xn(t[57])),x(ut,"click",xn(t[58])),x(we,"submit",t[56])],Vt=!0)},p(b,z){var rn;if((!Te||z[0]&1048584)&&Rt(e,"visible",b[3].background.mode==="custom"&&!!b[20]),z[0]&1048584&&$n(e,"background-image",b[3].background.mode==="custom"&&b[20]?`url(${b[20]})`:null),(!Te||z[0]&16)&&i(o,"aria-expanded",b[4]),z[0]&134217736|z[1]&8){xe=Le(b[27]);let V;for(V=0;V<xe.length;V+=1){const me=mr(b,xe,V);be[V]?be[V].p(me,z):(be[V]=pr(me),be[V].c(),be[V].m(P,null))}for(;V<be.length;V+=1)be[V].d(1);be.length=xe.length}if(z[0]&16777224|z[1]&16){$e=Le(b[24]);let V;for(V=0;V<$e.length;V+=1){const me=br(b,$e,V);le[V]?le[V].p(me,z):(le[V]=kr(me),le[V].c(),le[V].m(I,null))}for(;V<le.length;V+=1)le[V].d(1);le.length=$e.length}if(b[28].length>un&&et.p(b,z),z[0]&33554440|z[1]&32){gt=Le(b[25]);let V;for(V=0;V<gt.length;V+=1){const me=hr(b,gt,V);Ie[V]?Ie[V].p(me,z):(Ie[V]=_r(me),Ie[V].c(),Ie[V].m(ie,null))}for(;V<Ie.length;V+=1)Ie[V].d(1);Ie.length=gt.length}b[29].length>fn&&at.p(b,z),(!Te||z[0]&16)&&i(f,"data-open",b[4]),(!Te||z[0]&16&&Ee!==(Ee=!b[4]))&&i(f,"aria-hidden",Ee),(!Te||z[0]&16&&Oe!==(Oe=!b[4]))&&i(ve,"aria-hidden",Oe),(!Te||z[0]&16)&&Rt(ve,"visible",b[4]),Mt===(Mt=qt(b))&&Ye?Ye.p(b,z):(Ye.d(1),Ye=Mt(b),Ye&&(Ye.c(),Ye.m(se,null))),(!Te||z[0]&128)&&Fe(ot,b[7]),(!Te||z[0]&384&&ze!==(ze=b[7]?b[8]:null))&&i(ue,"data-tone",ze),z[0]&512|z[1]&8224768&&(At=Le(b[9]),X=Xt(X,z,nn,1,b,At,te,ce,Fn,wr,Re,ur));const Q={};z[0]&1&&(Q.open=b[0]),z[0]&67108864&&(Q.rootIds=b[26].rootIds??[]),z[0]&524288&&(Q.expandedIds=b[19]),z[0]&2048&&(Q.loadingIds=b[11]),z[0]&8192&&(Q.visibleIds=b[13]),z[0]&4096&&(Q.searchQuery=b[12]),z[0]&2&&(Q.searchMatches=b[1]),z[0]&147457&&(Q.summary=b[0]?b[17]:b[14]),z[0]&66561&&(Q.selectedFolderCount=b[0]?((rn=b[16])==null?void 0:rn.size)??0:b[10].size),z[0]&294913&&(Q.totalBookmarkCount=b[0]?b[18]:b[15]),re.$set(Q)},i(b){Te||(ke(re.$$.fragment,b),Te=!0)},o(b){Me(re.$$.fragment,b),Te=!1},d(b){b&&(J(e),J(n),J(r),J(qe),J(Ue)),t[71](null),Sn(be,b),Sn(le,b),et&&et.d(),Sn(Ie,b),at&&at.d(),t[75](null),Ye.d();for(let z=0;z<X.length;z+=1)X[z].d();bn(re),t[81](null),t[82](null),Vt=!1,it(tn)}}}const Ir=64,sn="customBackgroundImage",Yt="uiPreferences",Ot="dialPreferences",zt=1,fn=6,un=10;function Sr(t=[],e=[]){return t.length!==e.length?!1:t.every((n,r)=>n===e[r])}function dl(t={}){const e=Array.isArray(t.selectedIds)?t.selectedIds.filter(Boolean):[],n=Array.isArray(t.expandedIds)?t.expandedIds.filter(Boolean):[];return{selectedIds:Array.from(new Set(e)),expandedIds:Array.from(new Set(n))}}function Kt(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function Cr(t,e){const n=[...t];if(!e)return n;const r=n.findIndex(a=>a.id===e);if(r<=0)return n;const[o]=n.splice(r,1);return[o,...n]}function zr(t,e,n=[]){const r=t.nodesById[e];return!r||!r.isFolder||(r.childrenIds??[]).forEach(a=>{const c=t.nodesById[a];c&&(c.url?n.push(c):zr(t,a,n))}),n}function fl(t,e){const n=t.getBoundingClientRect(),r=n.width>=n.height,o=r?n.width/2:n.height/2,c=(r?e.clientX-n.left:e.clientY-n.top)<o;t.classList.toggle("drop-before",c),t.classList.toggle("drop-after",!c)}function En(){document.querySelectorAll(".tile.drop-before, .tile.drop-after").forEach(t=>{t.classList.remove("drop-before","drop-after")})}function ul(t,e,n,r){const o=t.getBoundingClientRect(),a=o.width>=o.height,c=a?o.width/2:o.height/2,d=(a?e.clientX-o.left:e.clientY-o.top)>=c;let f=n+(d?1:0);return r<f&&d&&(f-=1),f}function Er(t){try{return new URL(t).href}catch{try{return new URL(`https://${t}`).href}catch{return null}}}function gl(t){try{return new URL(t).hostname.replace(/^www\./i,"")}catch{return t}}function hl(t){return t?t.trim().split(/\s+/)[0].slice(0,2).toUpperCase():"•"}function bl(t,e){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>t(...r),e)}}function ml(t){const e=(t||"").trim().toLowerCase();if(!e)return{background:"linear-gradient(145deg, #fde68a, #fbbf24)",text:"rgba(15, 23, 42, 0.85)"};let n=0,r=0,o=0;for(let W=0;W<e.length;W++){const D=e.charCodeAt(W),U=W+1;n+=D*U,r+=D*(U+1.5),o+=D*(U+2.5)}const a=vn(n,360),c=vn(r,36)-18,s=vn(a+24+c,360),d=52+Math.abs(r)%30,f=42+Math.abs(o)%20,_=Math.min(96,d+8),E=Math.min(78,f+12),M=`hsl(${a}, ${d}%, ${f}%)`,C=`hsl(${s}, ${_}%, ${E}%)`,T=f>54?"rgba(30, 41, 59, 0.85)":"rgba(255, 255, 255, 0.88)";return{background:`linear-gradient(140deg, ${M}, ${C})`,text:T}}function vn(t,e){return(t%e+e)%e}function pl(t,e){return new Promise((n,r)=>{if(t.size>e){r(new Error("File exceeds size limit"));return}const o=new FileReader;o.onload=()=>n(o.result),o.onerror=()=>r(o.error||new Error("Failed to read file")),o.readAsDataURL(t)})}function kl(t,e,n){var Qn,Yn,Kn,Wn;let r,o,a,c,s;Lr(t,Pr,l=>n(26,s=l));const d={loading:"Loading Bookmark Dial…",empty:"No bookmarks yet. Add shortcuts from this page or the bookmark manager.",error:"Bookmark Dial folder is unavailable. Try reopening the tab or reinstalling the extension."},f={selectedIds:[],expandedIds:[]},_=4*1024*1024,E=[{id:"dark",label:"Dark"},{id:"light",label:"Light"},{id:"system",label:"System"}],M=[{id:"cobalt",label:"Cobalt",colors:{base:"#2563eb",contrast:"#f8fafc",soft:"rgba(37, 99, 235, 0.14)",border:"rgba(37, 99, 235, 0.45)"}},{id:"violet",label:"Violet",colors:{base:"#8b5cf6",contrast:"#faf5ff",soft:"rgba(139, 92, 246, 0.16)",border:"rgba(139, 92, 246, 0.45)"}},{id:"emerald",label:"Emerald",colors:{base:"#059669",contrast:"#ecfdf5",soft:"rgba(5, 150, 105, 0.14)",border:"rgba(5, 150, 105, 0.45)"}},{id:"amber",label:"Amber",colors:{base:"#d97706",contrast:"#fffbeb",soft:"rgba(217, 119, 6, 0.18)",border:"rgba(217, 119, 6, 0.5)"}},{id:"rose",label:"Rose",colors:{base:"#e11d48",contrast:"#fff1f2",soft:"rgba(225, 29, 72, 0.16)",border:"rgba(225, 29, 72, 0.45)"}},{id:"slate",label:"Slate",colors:{base:"#475569",contrast:"#f8fafc",soft:"rgba(71, 85, 105, 0.18)",border:"rgba(71, 85, 105, 0.5)"}},{id:"sky",label:"Sky",colors:{base:"#0284c7",contrast:"#e0f2fe",soft:"rgba(2, 132, 199, 0.16)",border:"rgba(2, 132, 199, 0.45)"}},{id:"blush",label:"Blush",colors:{base:"#ec4899",contrast:"#fff0f6",soft:"rgba(236, 72, 153, 0.18)",border:"rgba(236, 72, 153, 0.5)"}},{id:"moss",label:"Moss",colors:{base:"#4d7c0f",contrast:"#ecfccb",soft:"rgba(77, 124, 15, 0.18)",border:"rgba(77, 124, 15, 0.5)"}},{id:"bronze",label:"Bronze",colors:{base:"#b45309",contrast:"#fff7ed",soft:"rgba(180, 83, 9, 0.2)",border:"rgba(180, 83, 9, 0.55)"}},{id:"orchid",label:"Orchid",colors:{base:"#c026d3",contrast:"#fdf4ff",soft:"rgba(192, 38, 211, 0.18)",border:"rgba(192, 38, 211, 0.5)"}},{id:"mint",label:"Mint",colors:{base:"#14b8a6",contrast:"#e0fefa",soft:"rgba(20, 184, 166, 0.16)",border:"rgba(20, 184, 166, 0.46)"}},{id:"graphite",label:"Graphite",colors:{base:"#1f2937",contrast:"#f8fafc",soft:"rgba(31, 41, 55, 0.22)",border:"rgba(31, 41, 55, 0.6)"}},{id:"sunset",label:"Sunset",colors:{base:"#ea580c",contrast:"#fff7ed",soft:"rgba(234, 88, 12, 0.18)",border:"rgba(234, 88, 12, 0.52)"}},{id:"glacier",label:"Glacier",colors:{base:"#0ea5e9",contrast:"#f0f9ff",soft:"rgba(14, 165, 233, 0.16)",border:"rgba(14, 165, 233, 0.45)"}},{id:"amethyst",label:"Amethyst",colors:{base:"#6d28d9",contrast:"#f5f3ff",soft:"rgba(109, 40, 217, 0.18)",border:"rgba(109, 40, 217, 0.5)"}},{id:"sand",label:"Sand",colors:{base:"#ca8a04",contrast:"#fffbeb",soft:"rgba(202, 138, 4, 0.2)",border:"rgba(202, 138, 4, 0.5)"}},{id:"cranberry",label:"Cranberry",colors:{base:"#be123c",contrast:"#fff1f5",soft:"rgba(190, 18, 60, 0.18)",border:"rgba(190, 18, 60, 0.5)"}}],C=[{id:"aurora",label:"Aurora",gradients:{light:"linear-gradient(135deg, #d8b4fe 0%, #6366f1 50%, #22d3ee 100%)",dark:"linear-gradient(135deg, #312e81 0%, #1e3a8a 50%, #0f172a 100%)"},accent:"violet"},{id:"sunrise",label:"Sunrise",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 50%, #f97316 100%)",dark:"linear-gradient(135deg, #7c2d12 0%, #c2410c 45%, #ea580c 100%)"},accent:"amber"},{id:"forest",label:"Forest",gradients:{light:"linear-gradient(135deg, #bbf7d0 0%, #34d399 50%, #0f766e 100%)",dark:"linear-gradient(135deg, #064e3b 0%, #059669 50%, #0f172a 100%)"},accent:"emerald"},{id:"ocean",label:"Ocean",gradients:{light:"linear-gradient(135deg, #bae6fd 0%, #38bdf8 50%, #0ea5e9 100%)",dark:"linear-gradient(135deg, #0c4a6e 0%, #0369a1 50%, #082f49 100%)"},accent:"sky"},{id:"twilight",label:"Twilight",gradients:{light:"linear-gradient(135deg, #fecdd3 0%, #fda4af 50%, #fb7185 100%)",dark:"linear-gradient(135deg, #7f1d1d 0%, #be123c 50%, #9f1239 100%)"},accent:"orchid"},{id:"slate",label:"Slate",gradients:{light:"linear-gradient(135deg, #e2e8f0 0%, #cbd5f5 50%, #94a3b8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #0f172a 50%, #020617 100%)"},accent:"slate"},{id:"blossom",label:"Blossom",gradients:{light:"linear-gradient(135deg, #ffe4e6 0%, #fbcfe8 45%, #f472b6 100%)",dark:"linear-gradient(135deg, #831843 0%, #9d174d 50%, #701a75 100%)"},accent:"blush"},{id:"lagoon",label:"Lagoon",gradients:{light:"linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 40%, #5eead4 100%)",dark:"linear-gradient(135deg, #022c22 0%, #0d9488 45%, #14b8a6 100%)"},accent:"mint"},{id:"ember",label:"Ember",gradients:{light:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 40%, #fb7185 100%)",dark:"linear-gradient(135deg, #450a0a 0%, #9f1239 50%, #be123c 100%)"},accent:"rose"},{id:"lilac",label:"Lilac",gradients:{light:"linear-gradient(135deg, #f5f3ff 0%, #ede9fe 45%, #d8b4fe 100%)",dark:"linear-gradient(135deg, #312e81 0%, #5b21b6 50%, #7c3aed 100%)"},accent:"violet"},{id:"zenith",label:"Zenith",gradients:{light:"linear-gradient(135deg, #e0f2fe 0%, #dbeafe 45%, #818cf8 100%)",dark:"linear-gradient(135deg, #1e293b 0%, #1f3b8a 45%, #3730a3 100%)"},accent:"cobalt"},{id:"sage",label:"Sage",gradients:{light:"linear-gradient(135deg, #ecfccb 0%, #bbf7d0 45%, #84cc16 100%)",dark:"linear-gradient(135deg, #052e16 0%, #166534 45%, #15803d 100%)"},accent:"moss"},{id:"velvet",label:"Velvet",gradients:{light:"linear-gradient(135deg, #fdf4ff 0%, #f5d0fe 45%, #f0abfc 100%)",dark:"linear-gradient(135deg, #4a044e 0%, #6b21a8 45%, #86198f 100%)"},accent:"orchid"},{id:"citrus",label:"Citrus",gradients:{light:"linear-gradient(135deg, #fefce8 0%, #fef08a 45%, #facc15 100%)",dark:"linear-gradient(135deg, #422006 0%, #854d0e 50%, #b45309 100%)"},accent:"amber"},{id:"glacier",label:"Glacier",gradients:{light:"linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 45%, #bae6fd 100%)",dark:"linear-gradient(135deg, #082f49 0%, #0c4a6e 45%, #0284c7 100%)"},accent:"sky"},{id:"terracotta",label:"Terracotta",gradients:{light:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 45%, #f97316 100%)",dark:"linear-gradient(135deg, #431407 0%, #7c2d12 45%, #9a3412 100%)"},accent:"bronze"},{id:"nocturne",label:"Nocturne",gradients:{light:"linear-gradient(135deg, #ede9fe 0%, #c7d2fe 45%, #4338ca 100%)",dark:"linear-gradient(135deg, #020617 0%, #111827 45%, #312e81 100%)"},accent:"slate"},{id:"horizon",label:"Horizon",gradients:{light:"linear-gradient(135deg, #fef3c7 0%, #fdba74 40%, #60a5fa 100%)",dark:"linear-gradient(135deg, #451a03 0%, #9a3412 45%, #1d4ed8 100%)"},accent:"cobalt"}],T=C[0],D={theme:"system",accent:T!=null&&T.accent&&M.some(l=>l.id===T.accent)?T.accent:M[0].id,background:{mode:"gradient",gradientId:(T==null?void 0:T.id)??C[0].id}},U={...D,folderSelection:{...f},version:zt},P=typeof chrome<"u"?chrome:null,S=(Qn=P==null?void 0:P.runtime)!=null&&Qn.sendMessage?P:lo(),G=!!((Yn=P==null?void 0:P.runtime)!=null&&Yn.id),oe=!!((Kn=P==null?void 0:P.storage)!=null&&Kn.local)&&G,j=!!((Wn=P==null?void 0:P.storage)!=null&&Wn.sync)&&G;let I=d.loading,k="info",L=[],ae=new Set,Ae=null,Y=new Set,ie=new Set,st=new Set,De=!1,ye=!1,Ce="",Ee=new Set,Ke=null,ve=[],Oe=new Map,rt=0,ee=null,se=null,We=[],fe=new Map,Je=0,ne=!1,ue=new Set,ot=0,ze=0,Ne=null,ce="",X,te,Re,_e,y=vt(),de=!1,re=!0,qe=!1,Ue=!1,we=!1,Ze=!1,dt=[...M],He=[...C],Ge=null,_t=null,Qe=null;const Xe=[];Mo(()=>{var l,u;if((async()=>{try{await Ye()}catch(h){console.error("Bookmark Dial: failed to load settings",h),n(3,y=vt()),n(65,Ue=oe),xe(y.theme),be(y.accent),$e(y.background.gradientId)}try{await ro()}catch(h){console.error("Bookmark Dial: failed to load background",h)}n(63,re=!1),At()})(),typeof window<"u"){const h=w=>{w.key==="Escape"&&de&&et()};window.addEventListener("keydown",h),Xe.push(()=>window.removeEventListener("keydown",h))}if((u=(l=S==null?void 0:S.storage)==null?void 0:l.onChanged)!=null&&u.addListener){const h=(w,v)=>{if(v!=="sync"&&v!=="local")return;const F=w[v==="sync"?Ot:Yt];!F||!F.newValue||Kr(F.newValue)};S.storage.onChanged.addListener(h),Xe.push(()=>S.storage.onChanged.removeListener(h))}return()=>{Ge&&clearTimeout(Ge),typeof document<"u"&&document.body.classList.remove("settings-open"),Xe.forEach(h=>h==null?void 0:h())}});function vt(){return{theme:D.theme,accent:D.accent,background:{...D.background}}}function ft(l){return E.some(u=>u.id===l)?l:D.theme}function Bt(l){return M.some(u=>u.id===l)?l:D.accent}function je(l){return C.some(u=>u.id===l)?l:D.background.gradientId}function lt(l={}){var q,H,he,Be;const u=ft(l.theme),h=Bt(l.accent),w=l.background??{},v=w.mode==="custom"?"custom":"gradient",O=je(w.gradientId),F=dl(l.folderSelection),$=!Sr(F.selectedIds,((q=l.folderSelection)==null?void 0:q.selectedIds)??[])||!Sr(F.expandedIds,((H=l.folderSelection)==null?void 0:H.expandedIds)??[]),Ve=u!==l.theme||h!==l.accent||v!==(((he=l.background)==null?void 0:he.mode)??D.background.mode)||O!==(((Be=l.background)==null?void 0:Be.gradientId)??D.background.gradientId);return{settings:{theme:u,accent:h,background:{mode:v,gradientId:O}},folderSelection:F,changed:Ve||$||(l.version??zt)!==zt}}function xt(l){return M.find(u=>u.id===l)??M[0]}function Lt(l){return C.find(u=>u.id===l)??C[0]}function $t(){n(66,dt=Cr(M,y==null?void 0:y.accent)),n(6,Ze=!1)}function ut(){n(6,Ze=!0)}function en(){Ze?$t():ut()}function yt(){var l,u;n(67,He=Cr(C,((l=y==null?void 0:y.background)==null?void 0:l.mode)==="gradient"?(u=y==null?void 0:y.background)==null?void 0:u.gradientId:null)),n(5,we=!1)}function Te(){n(5,we=!0)}function Vt(){we?yt():Te()}function tn(){return!_t&&typeof window<"u"&&typeof window.matchMedia=="function"&&(_t=window.matchMedia("(prefers-color-scheme: dark)")),_t}function xe(l){if(typeof document>"u")return;const u=ft(l),h=tn();if(u==="system"&&h){if(document.body.classList.toggle("dark",h.matches),!Qe){const w=v=>{document.body.classList.toggle("dark",v.matches)};typeof h.addEventListener=="function"?(h.addEventListener("change",w),Qe=()=>h.removeEventListener("change",w)):typeof h.addListener=="function"?(h.addListener(w),Qe=()=>h.removeListener(w)):Qe=null,Qe&&Xe.push(Qe)}}else Qe&&(Qe(),Qe=null),document.body.classList.toggle("dark",u==="dark");document.body.dataset.theme=u}function be(l){if(typeof document>"u")return;const u=xt(l),h=document.documentElement;h.style.setProperty("--accent-color",u.colors.base),h.style.setProperty("--accent-color-contrast",u.colors.contrast),h.style.setProperty("--accent-color-soft",u.colors.soft),h.style.setProperty("--accent-color-border",u.colors.border)}function $e(l){if(typeof document>"u")return;const u=Lt(l),h=document.documentElement;h.style.setProperty("--page-background-light",u.gradients.light),h.style.setProperty("--page-background-dark",u.gradients.dark)}function le(){if(!oe||!qe||!De)return;Ge&&clearTimeout(Ge);const l={theme:y.theme,accent:y.accent,background:{...y.background},folderSelection:{selectedIds:Array.from(Y),expandedIds:Array.from(ie)},version:zt};Ge=setTimeout(async()=>{Ge=null;try{const u=[S.storage.local.set({[Yt]:l})];j&&u.push(S.storage.sync.set({[Ot]:l})),await Promise.all(u)}catch(u){console.error("Bookmark Dial: failed to store preferences",u)}},120)}function et(){if(de&&(n(4,de=!1),typeof document<"u"&&_e)){const l=document.activeElement;l&&_e.contains(l)&&(Re==null||Re.focus())}}function gt(){n(4,de=!de)}function Ie(l){const u=ft(l);y.theme!==u&&n(3,y={...y,theme:u})}function at(l){const u=Bt(l);y.accent!==u&&n(3,y={...y,accent:u})}function qt(l){const u=je(l),h=Lt(u),w=h.accent&&M.some($=>$.id===h.accent)?h.accent:null,v=y.background.mode!=="gradient"||y.background.gradientId!==u,O=w?Bt(w):y.accent,F=!!w&&O!==y.accent;!v&&!F||n(3,y={...y,accent:F?O:y.accent,background:{...y.background,mode:"gradient",gradientId:u}})}async function Mt(){et(),await Ln(),$r()}async function Ye(){if(n(65,Ue=!1),n(62,ne=!1),!oe){n(3,y=vt()),n(10,Y=new Set(f.selectedIds)),n(59,ie=new Set(f.expandedIds)),n(60,De=!0),xe(y.theme),be(y.accent),$e(y.background.gradientId),bt();return}let l={},u={};if(j)try{l=await S.storage.sync.get(Ot)}catch(O){console.warn("Bookmark Dial: failed to read sync preferences",O)}try{u=await S.storage.local.get(Yt)}catch(O){console.warn("Bookmark Dial: failed to read local preferences",O)}let h=l==null?void 0:l[Ot],w=!1;!h&&(u!=null&&u[Yt])&&(h=u[Yt],w=!0);const v=lt(h??U);n(3,y=v.settings),n(10,Y=new Set(v.folderSelection.selectedIds.length?v.folderSelection.selectedIds:f.selectedIds)),n(59,ie=new Set(v.folderSelection.expandedIds)),n(60,De=!0),n(65,Ue=v.changed||w),n(62,ne=v.changed||w),xe(y.theme),be(y.accent),$e(y.background.gradientId),bt()}async function At(){try{await No(S),Ae=await nn(),await ht(),await b(),z(),await me()}catch(l){console.error("Bookmark Dial: initialization failed",l),tt(d.error,"error")}}async function nn(){const l=await S.runtime.sendMessage({type:"getFolderId"});if(!(l!=null&&l.folderId))throw new Error((l==null?void 0:l.error)||"Missing folder");return l.folderId}async function ht(){Y.size===0&&Ae&&(n(10,Y=new Set([Ae])),n(62,ne=!0))}async function b(){const l=Array.from(Y);l.length&&(await Promise.allSettled(l.map(u=>Dt(S,u))),bt())}function z(){var $,Ve;const l=bl(()=>me(),150),u=(q,H)=>{Go(H),!H.url&&Rr(H)&&Nn(H.id),H.url?Ht(H.parentId)&&l():Y.has(H.id)&&l()};S.bookmarks.onCreated.addListener(u);const h=(q,H)=>{jo(q,H),ae.has(q)&&l()};S.bookmarks.onChanged.addListener(h);const w=(q,H)=>{Vo(q,H),(ae.has(q)||Ht(H.parentId)||Ht(H.oldParentId))&&l()};S.bookmarks.onMoved.addListener(w);const v=(q,H)=>{qo(q,H),Q(q,H),(ae.has(q)||Ht(H.parentId))&&(ae.delete(q),l())};S.bookmarks.onRemoved.addListener(v);const O=()=>l(),F=()=>tt("Importing bookmarks…");($=S.bookmarks.onImportEnded)==null||$.addListener(O),(Ve=S.bookmarks.onImportBegan)==null||Ve.addListener(F),Xe.push(()=>{var q,H;S.bookmarks.onCreated.removeListener(u),S.bookmarks.onChanged.removeListener(h),S.bookmarks.onMoved.removeListener(w),S.bookmarks.onRemoved.removeListener(v),(q=S.bookmarks.onImportEnded)==null||q.removeListener(O),(H=S.bookmarks.onImportBegan)==null||H.removeListener(F)})}function Q(l,u={}){if(u!=null&&u.node&&!u.node.url){const h=new Set(an(l));if(h.size){const w=new Set(Y);let v=!1;h.forEach(O=>{w.has(O)&&(w.delete(O),v=!0)}),v&&(n(10,Y=w),n(62,ne=!0),bt(),le(),Y.size||Promise.resolve().then(()=>ht()).then(()=>b()).then(()=>me()))}l===Ae&&rn()}}async function rn(){tt("Default folder was removed. Recreating…");try{const l=await S.runtime.sendMessage({type:"resetFolderCache"});if(l!=null&&l.folderId)Ae=l.folderId,await Nn(Ae),await me(),tt("Default folder restored.","success");else throw new Error((l==null?void 0:l.error)||"Unable to recreate folder")}catch(l){console.error("Bookmark Dial: missing folder recovery failed",l),tt(d.error,"error")}}async function V(l){const u=l instanceof Set?new Set(l):new Set(l??[]);if(!u.size)return{items:[],counts:new Map,total:0};await Promise.all(Array.from(u).map($=>Dt(S,$)));const h=pt(),w=new Map,v=new Map,O=[];u.forEach($=>{zr(h,$).forEach(q=>{const he=(Er(q.url)||q.url||q.url||q.id).toLowerCase(),Be=v.get($)??new Set;Be.add(he),v.set($,Be),!w.has(he)&&(w.set(he,q.id),O.push({...q,sourceFolderId:$,sourcePath:An($)}))})});const F=new Map(Array.from(v.entries()).map(([$,Ve])=>[$,Ve.size]));return{items:O,counts:F,total:O.length}}async function me(){const l=++ot;if(!Y.size){n(9,L=[]),ae=new Set,Oe=new Map,n(15,rt=0),bt(),tt("Select folders to populate this page.","info");return}try{const u=await V(Y);if(l!==ot)return;Oe=u.counts,n(15,rt=u.total),Nr(u.items),bt(),u.items.length===0?tt(d.empty):tt("","info")}catch(u){console.error("Bookmark Dial: failed to load bookmarks",u),tt(d.error,"error")}}function Nr(l){ae=new Set(l.map(u=>u.id)),n(9,L=l.map(u=>({...u,displayTitle:u.title||u.url,initials:hl(u.title||u.url),palette:ml(u.title||u.url),fallback:!1})))}function zn(l,u){const h=new Set(st);u?h.add(l):h.delete(l),n(11,st=h)}function Rr(l){return!l||l.url?!1:Ht(l.parentId)}function Ht(l){if(!l)return!1;const u=pt();let h=l;for(;h;){if(Y.has(h))return!0;const w=u.nodesById[h];h=(w==null?void 0:w.parentId)??null}return!1}async function Nn(l){if(!l)return;await Dt(S,l);const u=an(l),h=new Set(Y);let w=!1;u.forEach(v=>{h.has(v)||(h.add(v),w=!0)}),w&&(n(10,Y=h),n(62,ne=!0),await b(),await me(),le())}async function Ur(l){if(!l)return;await Dt(S,l);const u=an(l);if(!u.length)return;const h=ye,w=h&&ee?ee:h?new Set(Y):Y,v=new Set(w);if(u.every(F=>v.has(F))?u.forEach(F=>v.delete(F)):u.forEach(F=>v.add(F)),h){n(16,ee=v);const F=++ze,$=await V(ee);if(F!==ze)return;fe=$.counts,n(18,Je=$.total),n(17,We=pn(ee,fe))}else Kt(Y,v)||(n(10,Y=v),n(62,ne=!0),await ht(),await b(),await me(),le())}async function Gr(l){if(!l)return;const h=pt().nodesById[l];if(!(h!=null&&h.isFolder))return;const w=ye,v=w&&se?se:w?new Set(ie):ie,O=new Set(v??[]);if(O.has(l)){O.delete(l),w?n(61,se=O):(n(59,ie=O),n(62,ne=!0),le());return}if(O.add(l),w?n(61,se=O):(n(59,ie=O),n(62,ne=!0),le()),!h.childrenLoaded){zn(l,!0);try{await Uo(S,l)}catch(F){console.warn("Bookmark Dial: failed to load child folders",F)}finally{zn(l,!1)}}}async function jr(){if(ye){n(16,ee=new Set),ze++,fe=new Map,n(18,Je=0),n(17,We=[]);return}n(10,Y=new Set),n(62,ne=!0),await ht(),await b(),await me(),le()}async function Vr(){if(!ye)return;const l=new Set(ee??[]),u=new Set(se??[]),h=!Kt(Y,l),w=!Kt(ie,u);n(0,ye=!1),Rn(),h&&(n(10,Y=l),n(62,ne=!0),await ht(),await b(),await me()),w&&(n(59,ie=u),n(62,ne=!0)),h||w?le():bt()}function qr(){n(16,ee=new Set(Y)),n(61,se=new Set(ie)),fe=new Map(Oe),n(18,Je=rt),n(17,We=pn(ee,fe)),ze=0,n(12,Ce=""),n(1,Ee=new Set),n(13,Ke=null),n(0,ye=!0)}function Rn(){n(16,ee=null),n(61,se=null),n(17,We=[]),fe=new Map,n(18,Je=0),ze=0,n(12,Ce=""),n(1,Ee=new Set),n(13,Ke=null)}function Hr(){n(0,ye=!1),Rn()}function pn(l,u){pt();const h=Array.from(l??[]).map(w=>{const v=An(w),O=v[v.length-1]||"Untitled folder";return{id:w,path:v,label:O,fullPath:v.join(" › "),count:(u==null?void 0:u.get(w))??0}});return h.sort((w,v)=>w.fullPath.localeCompare(v.fullPath)),h}function bt(){n(14,ve=pn(Y,Oe))}function Qr(l){const h=pt().nodesById[l],w=ye&&ee?ee:Y;if(!(h!=null&&h.isFolder))return w.has(l)?"selected":"none";const v=an(l);if(!v.length)return w.has(l)?"selected":"none";const O=v.filter(F=>w.has(F)).length;return O===0?"none":O===v.length?"selected":"partial"}async function Yr(l){var Ve;n(12,Ce=l);const u=l.trim();if(!u){n(1,Ee=new Set),n(13,Ke=null);return}if((Ve=S==null?void 0:S.bookmarks)!=null&&Ve.search)try{const H=(await S.bookmarks.search({query:u})).filter(he=>!he.url);for(const he of H){await Dt(S,he.id);let Be=he.parentId;for(;Be;){await Dt(S,Be);const mt=pt().nodesById[Be];Be=(mt==null?void 0:mt.parentId)??null}}}catch(q){console.warn("Bookmark Dial: folder search failed",q)}const h=Ho(),w=u.toLowerCase(),O=h.filter(q=>{const H=q.title.toLowerCase().includes(w),he=q.path.join(" ").toLowerCase().includes(w);return H||he}).map(q=>q.id);n(1,Ee=new Set(O));const F=new Set,$=pt();O.forEach(q=>{var Be;let H=$.nodesById[q];for(;H&&(F.add(H.id),!!H.parentId);)H=$.nodesById[H.parentId];const he=$.nodesById[q];(Be=he==null?void 0:he.childrenIds)==null||Be.forEach(mt=>F.add(mt))}),n(13,Ke=F)}function Kr(l){const u=lt(l),h=u.settings;(h.theme!==y.theme||h.accent!==y.accent||h.background.mode!==y.background.mode||h.background.gradientId!==y.background.gradientId)&&n(3,y={...y,...h,background:{...h.background}});const v=new Set(u.folderSelection.selectedIds),O=new Set(u.folderSelection.expandedIds),F=!Kt(v,Y),$=!Kt(O,ie);F&&(n(10,Y=v),bt(),me()),$&&n(59,ie=O),(F||$)&&n(62,ne=!1)}function Wr(l){var u;if((u=P==null?void 0:P.runtime)!=null&&u.sendMessage)return`chrome://favicon/size/${Ir}@2x/${encodeURIComponent(l)}`;try{return`https://www.google.com/s2/favicons?domain=${new URL(l).hostname}&sz=${Ir*2}`}catch{return""}}function Un(l){const u=L.findIndex(w=>w.id===l);if(u===-1)return;const h=[...L];h[u]={...h[u],fallback:!0},n(9,L=h)}async function Jr(){const l=prompt("Enter the URL for the new shortcut:");if(!l)return;const u=Er(l.trim());if(!u){alert("That does not appear to be a valid URL.");return}const h=gl(u),w=prompt("Enter a title for the shortcut:",h),v=w?w.trim():h;try{await S.bookmarks.create({parentId:folderId,title:v,url:u})}catch(O){console.error("Bookmark Dial: failed to create bookmark",O),alert("Unable to add shortcut. Please try again.")}}async function Gn(l){if(confirm("Remove this shortcut?"))try{await S.bookmarks.remove(l)}catch(u){console.error("Bookmark Dial: failed to remove bookmark",u),alert("Unable to remove shortcut.")}}function jn(l,u){Ne=u.id,l.dataTransfer.effectAllowed="move",l.dataTransfer.setData("text/plain",u.id),requestAnimationFrame(()=>{l.currentTarget.classList.add("dragging")})}function Zr(l){Ne=null,l.currentTarget.classList.remove("dragging"),En()}function Vn(l,u){Ne&&(l.preventDefault(),l.dataTransfer.dropEffect="move",fl(l.currentTarget,l))}function qn(l,u){l.preventDefault(),En();const h=Ne||l.dataTransfer.getData("text/plain");if(!h||h===u.id)return;const w=L.findIndex(F=>F.id===h),v=L.findIndex(F=>F.id===u.id);if(w===-1||v===-1)return;const O=ul(l.currentTarget,l,v,w);Hn(h,O).catch(F=>{console.error("Bookmark Dial: failed to reorder bookmark",F),tt("Reorder failed. Try again.","error"),me()})}function Xr(l){Ne&&(l.preventDefault(),l.dataTransfer.dropEffect="move")}function xr(l){if(!Ne)return;l.preventDefault(),En();const u=Ne||l.dataTransfer.getData("text/plain");L.findIndex(w=>w.id===u)!==-1&&Hn(u,L.length).catch(w=>{console.error("Bookmark Dial: failed to move bookmark to end",w),tt("Reorder failed. Try again.","error"),me()})}async function Hn(l,u){await S.bookmarks.move(l,{parentId:folderId,index:u})}function $r(){te&&n(22,te.value="",te),X==null||X.showModal()}async function eo(l){var h;l.preventDefault();const u=(h=te==null?void 0:te.files)==null?void 0:h[0];if(!u){X==null||X.close();return}if(!oo(u)){alert("Please choose a JPEG or PNG image under 4 MB.");return}try{const w=await pl(u,_);oe&&await S.storage.local.set({[sn]:w}),on(w),n(3,y={...y,background:{...y.background,mode:"custom"}}),X==null||X.close()}catch(w){console.error("Bookmark Dial: failed to save background",w),alert("Unable to store the background image. Try a smaller file.")}}async function to(){try{oe&&await S.storage.local.remove(sn)}catch(l){console.error("Bookmark Dial: failed to clear background",l)}on(null),n(3,y={...y,background:{...y.background,mode:"gradient"}}),X==null||X.close()}function no(){X==null||X.close()}async function ro(){if(!oe){on(null),y.background.mode==="custom"&&n(3,y={...y,background:{...y.background,mode:"gradient"}});return}try{const l=await S.storage.local.get(sn),u=(l==null?void 0:l[sn])||"";on(u),!u&&y.background.mode==="custom"&&(n(3,y={...y,background:{...y.background,mode:"gradient"}}),n(65,Ue=!0))}catch(l){console.error("Bookmark Dial: failed to load background",l)}}function on(l){n(20,ce=l||"")}function tt(l,u="info"){n(7,I=l),n(8,k=u)}function oo(l){return["image/jpeg","image/png"].includes(l.type)&&l.size<=_}function lo(){console.info("Bookmark Dial: using mock Chrome APIs for development");let l="mock-folder",u=1;const h={onCreated:new Set,onChanged:new Set,onMoved:new Set,onRemoved:new Set,onImportBegan:new Set,onImportEnded:new Set},w=new Set,v=new Map,O=new Map([["speedDialFolderId",l],[Ot,{version:zt,theme:D.theme,accent:D.accent,background:{...D.background},folderSelection:{selectedIds:[l],expandedIds:[]}}]]),F=new Map;function $(m,...B){const A=h[m];A&&A.forEach(R=>{try{R(...B)}catch(K){console.error(`Mock chrome ${m} handler failed`,K)}})}function Ve(m,B){!B||Object.keys(B).length===0||w.forEach(A=>{try{A(B,m)}catch(R){console.error("Mock chrome storage listener failed",R)}})}function q(m){return m===void 0?void 0:JSON.parse(JSON.stringify(m))}function H(m,B){if(Array.isArray(B)){const A={};return B.forEach(R=>A[R]=m.get(R)),A}if(typeof B=="object"&&B!==null){const A={...B};for(const R of Object.keys(B))m.has(R)&&(A[R]=m.get(R));return A}return{[B]:m.get(B)}}function he(m,B,A){const R={};Object.entries(A||{}).forEach(([K,pe])=>{const wt=m.get(K);m.set(K,pe),R[K]={oldValue:q(wt),newValue:q(pe)}}),Ve(B,R)}function Be(m,B,A){const R=Array.isArray(A)?A:[A],K={};R.forEach(pe=>{if(!m.has(pe))return;const wt=m.get(pe);m.delete(pe),K[pe]={oldValue:q(wt),newValue:void 0}}),Ve(B,K)}function mt(m){m!=null&&m.children&&(m.children.forEach((B,A)=>{B.index=A}),m.hasChildren=m.children.length>0)}function kn(m,B,A){const R=F.get(m);if(!R)throw new Error(`Parent ${m} not found`);Array.isArray(R.children)||(R.children=[]);const K=typeof A=="number"?Math.max(0,Math.min(A,R.children.length)):R.children.length;R.children.splice(K,0,B),B.parentId=m,mt(R)}function _n(m,B){const A=F.get(m);if(!(A!=null&&A.children))return;const R=A.children.findIndex(K=>K.id===B);R!==-1&&(A.children.splice(R,1),mt(A))}function nt({id:m,parentId:B=null,title:A="Untitled folder",index:R}){const K=m??`mock-folder-${u++}`,pe={id:K,parentId:B,title:A,index:typeof R=="number"?R:0,children:[]};return F.set(K,pe),B&&kn(B,pe,R),pe}function Qt({id:m,parentId:B,title:A,url:R,index:K}){if(!B)throw new Error("Bookmarks require a parent folder");const pe=m??`mock-bookmark-${u++}`,wt={id:pe,parentId:B,title:A??R??"Untitled",url:R,index:typeof K=="number"?K:0};return F.set(pe,wt),kn(B,wt,K),wt}function ct(m,B=!1){if(!m)return null;const A={id:m.id,parentId:m.parentId??void 0,title:m.title,index:m.index};return m.url&&(A.url=m.url),B&&Array.isArray(m.children)&&(A.children=m.children.map(R=>ct(R,!0))),A}function yn(m){m&&(Array.isArray(m.children)&&[...m.children].forEach(B=>yn(B)),F.delete(m.id))}const wn=nt({id:"0",parentId:null,title:""}),yo=nt({id:"1",parentId:wn.id,title:"Bookmarks Bar"});nt({id:"2",parentId:wn.id,title:"Other Bookmarks"}),nt({id:"3",parentId:wn.id,title:"Mobile Bookmarks"}),nt({id:"1-reading",parentId:"1",title:"Reading List"});const wo=nt({id:"2-inspiration",parentId:"2",title:"Inspiration"});function Jn(m){[{title:"Svelte",url:"https://svelte.dev"},{title:"MDN Web Docs",url:"https://developer.mozilla.org"},{title:"GitHub",url:"https://github.com"},{title:"Stack Overflow",url:"https://stackoverflow.com"},{title:"Vite",url:"https://vitejs.dev"}].forEach((K,pe)=>{Qt({parentId:m,title:K.title,url:K.url,index:pe})});const A=nt({id:`${m}-frameworks`,parentId:m,title:"Frameworks"});[{title:"React",url:"https://react.dev"},{title:"Vue.js",url:"https://vuejs.org"},{title:"Angular",url:"https://angular.io"}].forEach((K,pe)=>{Qt({parentId:A.id,title:K.title,url:K.url,index:pe})});const R=nt({id:`${m}-tooling`,parentId:m,title:"Developer Tools"});[{title:"ESLint",url:"https://eslint.org"},{title:"Prettier",url:"https://prettier.io"},{title:"Parcel",url:"https://parceljs.org"}].forEach((K,pe)=>{Qt({parentId:R.id,title:K.title,url:K.url,index:pe})})}nt({id:l,parentId:yo.id,title:"Bookmark Dial"}),Jn(l),[{title:"Muz.li",url:"https://muz.li"},{title:"Awwwards",url:"https://www.awwwards.com"},{title:"Dribbble",url:"https://dribbble.com"}].forEach((m,B)=>{Qt({parentId:wo.id,title:m.title,url:m.url,index:B})});function Ft(m){const B=h[m];return{addListener:A=>B.add(A),removeListener:A=>B.delete(A)}}return{runtime:{sendMessage:async m=>{if((m==null?void 0:m.type)==="getFolderId")return{folderId:l};if((m==null?void 0:m.type)==="resetFolderCache"){const B=`mock-folder-${Date.now().toString(36)}`,A=F.get(l);if(A){const K=A.parentId;K&&_n(K,A.id),yn(A)}l=B;const R=nt({id:l,parentId:"1",title:"Bookmark Dial"});return Jn(R.id),he(O,"sync",{speedDialFolderId:l,[Ot]:{version:zt,theme:D.theme,accent:D.accent,background:{...D.background},folderSelection:{selectedIds:[l],expandedIds:[]}}}),{folderId:l}}return{}}},bookmarks:{onCreated:Ft("onCreated"),onChanged:Ft("onChanged"),onMoved:Ft("onMoved"),onRemoved:Ft("onRemoved"),onImportBegan:Ft("onImportBegan"),onImportEnded:Ft("onImportEnded"),async getTree(){return[ct(F.get("0"),!0)]},async getChildren(m){const B=F.get(m);return B!=null&&B.children?B.children.map(A=>ct(A,!1)):[]},async getSubTree(m){const B=F.get(m);return B?[ct(B,!0)]:[]},async search(m){const B=String((m==null?void 0:m.query)??"").trim().toLowerCase();return B?Array.from(F.values()).filter(A=>!A.url&&(A.title||"").toLowerCase().includes(B)).map(A=>ct(A,!1)):[]},async create({parentId:m,title:B,url:A}){const R=A?Qt({parentId:m,title:B,url:A}):nt({parentId:m,title:B});return $("onCreated",R.id,ct(R,!0)),ct(R,!0)},async remove(m){const B=F.get(m);if(!B)throw new Error("Bookmark not found");const A=ct(B,!0);B.parentId&&_n(B.parentId,m),yn(B),$("onRemoved",m,{parentId:A.parentId??null,node:A})},async move(m,{parentId:B,index:A}){const R=F.get(m);if(!R)throw new Error("Bookmark not found");const K=R.parentId??null;return K&&_n(K,m),kn(B,R,A),$("onMoved",m,{parentId:B,oldParentId:K,index:A}),ct(R,!1)}},storage:{local:{async get(m){return H(v,m)},async set(m){he(v,"local",m)},async remove(m){Be(v,"local",m)}},sync:{async get(m){return H(O,m)},async set(m){he(O,"sync",m)},async remove(m){Be(O,"sync",m)}},onChanged:{addListener(m){w.add(m)},removeListener(m){w.delete(m)}}}}}function ao(l){Ao.call(this,t,l)}function io(l){kt[l?"unshift":"push"](()=>{Re=l,n(23,Re)})}const so=l=>Ie(l.id),co=l=>at(l.id),fo=l=>qt(l.id);function uo(l){kt[l?"unshift":"push"](()=>{_e=l,n(2,_e)})}const go=l=>Un(l.id),ho=(l,u)=>{u.preventDefault(),u.stopPropagation(),Gn(l.id)},bo=(l,u)=>jn(u,l),mo=(l,u)=>Vn(u),po=(l,u)=>qn(u,l);function ko(l){kt[l?"unshift":"push"](()=>{te=l,n(22,te)})}function _o(l){kt[l?"unshift":"push"](()=>{X=l,n(21,X)})}return t.$$.update=()=>{t.$$.dirty[2]&32&&n(68,r=new Set(He.slice(0,fn).map(l=>l.id))),t.$$.dirty[2]&16&&n(69,o=new Set(dt.slice(0,un).map(l=>l.id))),t.$$.dirty[0]&40|t.$$.dirty[2]&64&&!we&&y.background.mode==="gradient"&&y.background.gradientId&&!r.has(y.background.gradientId)&&n(5,we=!0),t.$$.dirty[0]&32|t.$$.dirty[2]&32&&n(25,a=we?He:He.slice(0,fn)),t.$$.dirty[0]&72|t.$$.dirty[2]&128&&!Ze&&y.accent&&!o.has(y.accent)&&n(6,Ze=!0),t.$$.dirty[0]&64|t.$$.dirty[2]&16&&n(24,c=Ze?dt:dt.slice(0,un)),t.$$.dirty[0]&8|t.$$.dirty[1]&536870912|t.$$.dirty[2]&15&&!re&&De&&(xe(y.theme),be(y.accent),$e(y.background.gradientId),(Ue||ne||qe)&&le(),n(64,qe=!0),n(65,Ue=!1),n(62,ne=!1)),t.$$.dirty[0]&16&&typeof document<"u"&&document.body.classList.toggle("settings-open",de),t.$$.dirty[0]&20&&de&&Ln().then(()=>{_e==null||_e.focus()}),t.$$.dirty[0]&3|t.$$.dirty[1]&1342177280&&n(19,ue=(()=>{const l=ye&&se?se:ie,u=new Set(l??[]);if(Ee.size){const h=pt();Ee.forEach(w=>{var O,F;let v=((O=h.nodesById[w])==null?void 0:O.parentId)??null;for(;v;)u.add(v),v=((F=h.nodesById[v])==null?void 0:F.parentId)??null})}return u})())},[ye,Ee,_e,y,de,we,Ze,I,k,L,Y,st,Ce,Ke,ve,rt,ee,We,Je,ue,ce,X,te,Re,c,a,s,E,M,C,en,Vt,et,gt,Ie,at,qt,Mt,Ur,Gr,jr,Vr,qr,Hr,Qr,Yr,Wr,Un,Jr,Gn,jn,Zr,Vn,qn,Xr,xr,eo,to,no,ie,De,se,ne,re,qe,Ue,dt,He,r,o,ao,io,so,co,fo,uo,go,ho,bo,mo,po,ko,_o]}class _l extends Dn{constructor(e){super(),Pn(this,e,kl,cl,gn,{},null,[-1,-1,-1,-1,-1,-1])}}new _l({target:document.getElementById("app")});
